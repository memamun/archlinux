"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[97996],{112282:(e,t,o)=>{o.d(t,{s:()=>i});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M9.791 2.41a.6.6 0 0 0-.233.148l-5.4 5.4a.625.625 0 0 0 .884.884l4.333-4.333V17a.625.625 0 1 0 1.25 0V4.509l4.333 4.333a.625.625 0 0 0 .884-.884l-5.4-5.4a.62.62 0 0 0-.65-.147"})},i=(0,o(340498).wt)("arrowStraightUp",n)},174638:(e,t,o)=>{o.d(t,{A:()=>q,u:()=>J});o(898992),o(354520),o(672577),o(581454);var n=o.n(o(844751)),i=o(296540),r=()=>o(484714),l=()=>o(56366),a=()=>o(401497),s=()=>o(443239),c=()=>o(970013),d=()=>o(713998),p=()=>o(743176),u=()=>o(651124),m=()=>o(742117),g=()=>o(514608),S=()=>o(288739),y=()=>o(617668),f=()=>o(236262),v=()=>o(340498),x=()=>o(959013),h=()=>o(496603),b=()=>o(534177),w=()=>o(284371),C=()=>o(436696),_=()=>o(686526),A=()=>o(896628),j=()=>o(317909),T=()=>o(654062),k=()=>o(736767),M=()=>o(551882),B=()=>o(493823),V=()=>o(760217),K=()=>o(439264),P=()=>o(57232),z=()=>o(285790),O=()=>o(939740),F=()=>o(89924),I=()=>o(574036),L=()=>o(859428),$=()=>o(987017),D=()=>o(525432),E=()=>o(673730),W=()=>o(553965),R=()=>o(836251),X=()=>o(696746),U=()=>o(962730),H=()=>o(430171),G=()=>o(95441),Q=()=>o(497222),N=o(474848);const Z=(0,x().YK)({inputPlaceholder:{defaultMessage:"Search for a propertyâ€¦",id:"database.viewSettings.propertiesTab.inputPlaceholder"},toggleFrozenColumnsAriaLabel:{defaultMessage:"Toggle frozen columns",id:"database.viewSettings.propertiesTab.toggleFrozenColumnsAriaLabel"},togglePropertyVisibilityAriaLabel:{defaultMessage:"Toggle property visibility",id:"database.viewSettings.propertiesTab.togglePropertyVisibilityAriaLabel"}}),Y=o(757695).default.createClass("",{name:"InputStore"});function J(e){const{collectionContextStore:t,onClick:o}=e,n=(0,r().v3)(),i=(0,l().O$)(t.normalizedFormatStore),a=Boolean(i.timeline_show_table),s=(0,l().O$)(t.permissionScopesStore);return(0,N.jsx)(I().A,{title:(0,N.jsx)(x().sA,{defaultMessage:"Show table",id:"database.viewSettings.propertiesTab.showTable"}),on:a,focused:!1,onClick:()=>{const e=t.collectionViewStore();e&&(j().createAndCommit({userAction:"CollectionSettingsViewProperties.TimelineShowTableSwitcher",environment:n,canUndo:!0,perform:t=>{A().zA({stores:[e],update:{timeline_show_table:!a,timeline_table_properties:[{property:"name",visible:!0}]},transaction:t})}}),null==o||o(),(0,C().X)({environment:n,collectionContextStore:t,action:"timeline_toggle_show_table"}))},disabled:!s.canConfigureBlock,textWrapperStyle:{opacity:1}})}const q=function(e){let{collectionContextStore:t,timelineViewTab:n,collectionSettingsStore:i}=e;const a=(0,r().v3)(),s=(0,l().uB)(void 0,o(970585).A),c=(0,l().uB)(void 0,Y),d=(0,r().Y0)(),p=(0,l().O$)(c),u=(0,l().K8)((()=>(0,D().jx)({collectionContextStore:t})),[t]),m=(0,l().K8)((()=>(0,D().ZI)({timelineViewTab:n,collectionContextStore:t})),[n,t]),g=(0,l().K8)((()=>(0,o(690471).DG)({environment:a,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state})),[a,t]);return(0,N.jsxs)(o(735695).Ay,{collectionSettingsStore:i,title:(0,N.jsx)(x().sA,{defaultMessage:"Properties",id:"database.viewSettings.propertiesTab.title"}),header:(0,N.jsx)(F().A,{children:(0,N.jsx)(o(419357).Ay,{focusInitial:!d.isMobile,value:p,showClearButton:!0,onChange:e=>{c.setState(e.target.value),s.setState({...s.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})},placeholder:o(972435).A.formatMessage(Z.inputPlaceholder)})}),footer:(0,N.jsx)(ne,{collectionContextStore:t,timelineViewTab:n}),children:["timeline"===u&&g&&(0,N.jsx)(pe,{collectionSettingsStore:i,collectionContextStore:t,timelineViewTab:n,inputStore:c}),m&&(0,N.jsx)(ge,{collectionContextStore:t,collectionSettingsStore:i,inputStore:c,menuListStore:s,formatKey:m}),(0,N.jsx)(F().A,{children:(0,N.jsx)(ie,{collectionContextStore:t,collectionSettingsStore:i,timelineViewTab:n})})]})};function ee(e){let{viewType:t}=e;return"table"===t?(0,N.jsx)(x().sA,{defaultMessage:"Shown in table",id:"database.viewSettings.propertiesTab.shownInTableTitle"}):"timeline"===t?(0,N.jsx)(x().sA,{defaultMessage:"Shown in timeline",id:"database.viewSettings.propertiesTab.shownInTimelineTitle"}):"board"===t?(0,N.jsx)(x().sA,{defaultMessage:"Shown in board",id:"database.viewSettings.propertiesTab.shownInBoardTitle"}):"list"===t?(0,N.jsx)(x().sA,{defaultMessage:"Shown in list",id:"database.viewSettings.propertiesTab.shownInListTitle"}):"gallery"===t?(0,N.jsx)(x().sA,{defaultMessage:"Shown in gallery",id:"database.viewSettings.propertiesTab.shownInGalleryTitle"}):"calendar"===t?(0,N.jsx)(x().sA,{defaultMessage:"Shown in calendar",id:"database.viewSettings.propertiesTab.shownInCalendarTitle"}):"page"===t||"chart"===t||"form_editor"===t||"feed"===t||"map"===t||"chat"===t||"custom"===t?null:void(0,b().HB)(t)}function te(e){let{viewType:t}=e;return"table"===t?(0,N.jsx)(x().sA,{defaultMessage:"Hidden in table",id:"database.viewSettings.propertiesTab.hiddenInTableTitle"}):"timeline"===t?(0,N.jsx)(x().sA,{defaultMessage:"Hidden in timeline",id:"database.viewSettings.propertiesTab.hiddenInTimelineTitle"}):"board"===t?(0,N.jsx)(x().sA,{defaultMessage:"Hidden in board",id:"database.viewSettings.propertiesTab.hiddenInBoardTitle"}):"list"===t?(0,N.jsx)(x().sA,{defaultMessage:"Hidden in list",id:"database.viewSettings.propertiesTab.hiddenInListTitle"}):"gallery"===t?(0,N.jsx)(x().sA,{defaultMessage:"Hidden in gallery",id:"database.viewSettings.propertiesTab.hiddenInGalleryTitle"}):"calendar"===t?(0,N.jsx)(x().sA,{defaultMessage:"Hidden in calendar",id:"database.viewSettings.propertiesTab.hiddenInCalendarTitle"}):"page"===t||"chart"===t||"form_editor"===t||"feed"===t||"map"===t||"chat"===t||"custom"===t?null:void(0,b().HB)(t)}function oe(e,t,o){const{formatKey:n,visibility:i}=e,r=t.collectionViewStore();if(!r)return;const l=t.normalizedFormatStore.state[n]||[];let a=l.filter((e=>Boolean(e.visible))),s=l.filter((e=>!e.visible));ae.includes(n)&&(a=se(a),s=se(s));const c=[...a.map((e=>({...e,visible:i}))),...s.map((e=>({...e,visible:i})))];j().createAndCommit({userAction:"CollectionSettingsViewProperties.setAllPropertiesVisibility",environment:o,canUndo:!0,perform:e=>{A().zA({stores:[r],update:{[n]:c},transaction:e})}})}function ne(e){let{collectionContextStore:t,timelineViewTab:o}=e;const n=(0,r().v3)(),a=(0,l().O$)(t.permissionScopesStore),s=(0,l().K8)((()=>"timeline"===(0,D().jx)({collectionContextStore:t})&&"table"===o&&!(0,D().ZF)({collectionContextStore:t})),[t,o]),c=(0,l().K8)((()=>{const e=t.collectionViewBlockStore();return e&&(0,X().Nh)(e.id)}),[t]),d=a.canConfigureCollection&&!s&&!a.isExternallyImportedAndSyncedCollection&&!c,p=(0,i.useCallback)((()=>{(0,H().c)({environment:n,collectionContextStore:t})}),[n,t]);return(0,N.jsxs)(F().A,{topBorder:!0,children:[d&&(0,N.jsx)(Q().A,{icon:y().plusIcon,title:(0,N.jsx)(x().sA,{id:"database.viewSettings.propertiesTab.newProperty",defaultMessage:"New property"}),isGray:!0,onClick:p}),(0,N.jsx)(G().A,{href:(0,R().xS)("guides.databaseProperties"),title:(0,N.jsx)(x().sA,{defaultMessage:"Learn about properties",id:"database.viewSettings.propertiesTab.learnMoreButton.title"}),analyticsFrom:"view_settings_properties"})]})}function ie(e){let{collectionContextStore:t,collectionSettingsStore:o,timelineViewTab:n}=e;const i=(0,r().v3)(),a=(0,l().O$)(t.normalizedDeletedSchemaStore),s=Object.keys(a).length;return(0,l().O$)(t.permissionScopesStore).canConfigureCollection&&s>0?(0,N.jsx)(Q().A,{icon:f().I,title:(0,N.jsx)(x().sA,{id:"database.viewSettings.propertiesTab.deletedProperties",defaultMessage:"Deleted properties"}),isGray:!0,onClick:()=>function(e,t,o,n){o.collectionStore()&&((0,C().X)({environment:e,collectionContextStore:o,action:"click_deleted_properties"}),_().a2({collectionSettingsStore:t,item:{type:"deletedProperties",timelineViewTab:n}}))}(i,o,t,n),right:s,showChevron:!0}):null}function re(e,t,o){const n=o.state,i=t.permissionScopesStore.state;return!e.device.isMobile&&i.canConfigureBlock&&!n}function le(e){e.reset()}const ae=["board_properties","gallery_properties","calendar_properties"];function se(e){const t=e.find((e=>"title"===e.property));return t?[t,...e.filter((e=>"title"!==e.property))]:e}function ce(e,t,o,n,i,r,l){const{formatKey:a,propertyFormat:y}=e,f=n.permissionScopesStore.state,x=!y.visible,h=n.normalizedSchemaStore.state,b=(0,d()._g)({schema:h,property:y.property}),A=re(t,n,l)&&("title"!==y.property||!ae.includes(a)),k="title"!==y.property||function(e,t){const o=t.normalizedFormatStore.state,n=(0,D().jx)({collectionContextStore:t});return"board"===n?(0,u().zl)(o.board_cover):"gallery"===n?(0,u().zl)(o.gallery_cover):"timeline"===n&&("timeline_table_properties"===e||(0,u().w3)(Boolean(o.timeline_show_table),o.timeline_table_properties||[]))}(a,n);let B=!f.canConfigureCollection||f.isSyncedCollection&&((0,s().u)(y.property)||(0,c().cC)(y.property));if("collectionTypedView"===n.contextType&&f.canConfigureBlock&&(B=!1),b)return{key:y.property,render:e=>{var r;return(0,N.jsx)(L().A,{disableTooltip:!(null!==(r=b.description)&&void 0!==r&&r.length),renderTooltip:e=>(0,N.jsxs)("div",{...e,style:E().Q$,children:[(0,N.jsx)("div",{children:b.name}),void 0!==(null==b?void 0:b.description)&&b.description.length>0?(0,N.jsx)("div",{style:{color:o.text.contrastSecondary},children:b.description}):null]}),placement:U().W.Left,render:r=>(0,N.jsx)(V().A,{...(0,W().A)(e,r),title:(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[A&&(0,N.jsx)(P().A,{iconSize:12,style:{marginRight:8}}),(0,N.jsx)(p().Ay,{type:b.type,icon:b.icon,size:16,theme:o,style:{fill:o.regularIconColor}}),(0,N.jsx)("span",{style:{marginLeft:8,...w().RC},children:b.name}),(0,c().$M)(b)&&(0,c().om)(b)&&(0,N.jsx)(M().A,{})]}),right:(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,N.jsx)(z().A,{icon:x?S().M:g().J,iconStyle:{width:v().Ev.sm,height:v().Ev.sm},isDarkIconColor:!x,onClick:()=>{!function(e,t,o,n){var i;const{formatKey:r,propertyFormat:l}=e,a=o.collectionViewStore();if(!a)return;const s=o.normalizedFormatStore.state,c=(s[r]||[]).filter((e=>e.property!==l.property)),d={...l,visible:!l.visible},p=c.filter((e=>e.visible)),u=c.filter((e=>!e.visible));let m=[];m=ae.includes(r)?!0===d.visible?[...se([...p,d]),...se(u)]:[...se(p),...se([d,...u])]:[...p,d,...u];const g={...s,[r]:m};j().createAndCommit({userAction:"CollectionSettingsViewProperties.handleTogglePropertyVisibility",environment:t,canUndo:!0,perform:e=>{(0,T().F)({collectionViewStore:a,update:{format:g},transaction:e})}}),(0,C().X)({environment:t,collectionContextStore:o,action:"toggle_property_visibility",original_view_type:a.getType(),property_type:null===(i=a.getCollectionStore())||void 0===i||null===(i=i.getSchema()[d.property])||void 0===i?void 0:i.type}),le(n)}({formatKey:a,propertyFormat:y},t,n,l)},ariaLabel:i.formatMessage(Z.togglePropertyVisibilityAriaLabel),disabled:!k||!f.canConfigureBlock}),!B&&(0,m().V)({width:12,fill:o.lightTextColor,marginLeft:5})]})})})},action:()=>{B||f.isExternallyImportedAndSyncedCollection||function(e,t,o,n){var i,r,l;const a=(null===(i=n.collectionStore())||void 0===i?void 0:i.getSchema())||n.normalizedSchemaStore.state||{},{formatKey:s,propertyFormat:c}=e;(0,C().X)({environment:t,collectionContextStore:n,action:"click_property",original_view_type:null==n||null===(r=n.collectionViewStore())||void 0===r?void 0:r.getType(),property_type:null===(l=a[c.property])||void 0===l?void 0:l.type}),_().a2({collectionSettingsStore:o,item:{type:"property",formatKey:s,property:c.property}})}({formatKey:a,propertyFormat:y},t,r,n)}}}function de(e,t,o,n,i,r,l){const{formatKey:a,properties:s}=e;return h().oE(s.map((e=>ce({formatKey:a,propertyFormat:e},t,o,n,i,r,l))))}function pe(e){let{collectionSettingsStore:t,collectionContextStore:o,timelineViewTab:n,inputStore:l}=e;const a=(0,r().v3)(),s=(0,i.useCallback)((()=>function(e){le(e)}(l)),[l]),c=(0,i.useCallback)((e=>function(e,t,o,n,i){(0,C().X)({environment:t,collectionContextStore:n,action:0===e?"click_properties_tab_timeline":"click_properties_tab_table"}),_().dP({collectionSettingsStore:o,item:{type:"properties",timelineViewTab:0===e?"timeline":"table"}}),le(i)}(e,a,t,o,l)),[a,t,o,l]),d="timeline"===n?0:1;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)($().Ay,{tabs:[(0,N.jsx)(x().sA,{defaultMessage:"Timeline",id:"database.viewSettings.propertiesTab.timelineProperties"},"database.viewSettings.propertiesTab.timelineProperties"),(0,N.jsx)(x().sA,{defaultMessage:"Table",id:"database.viewSettings.propertiesTab.tableProperties"},"database.viewSettings.propertiesTab.tableProperties")],selectedIndex:d,onChange:c}),"table"===n&&(0,N.jsx)(F().A,{children:(0,N.jsx)(J,{collectionContextStore:o,onClick:s})})]})}function ue(e){const t=(0,r().v3)(),{props:o,formatKey:n,children:i,collectionContextStore:a,inputStore:s}=e,c=(0,l().O$)(a.permissionScopesStore),d=(0,l().O$)(s),p=(0,l().K8)((()=>"timeline_table_properties"===n?"table":(0,D().jx)({collectionContextStore:a})),[a,n]);return(0,N.jsx)(F().A,{...o,noTextOverflow:!0,title:(0,N.jsx)(te,{viewType:p}),desktopTitleStyle:{height:19},right:!d&&c.canConfigureBlock&&(0,N.jsx)(B().p,{size:"sm",shouldShrink:!0,isBlue:!0,style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>function(e,t,o){(0,C().X)({environment:t,collectionContextStore:o,action:"click_show_all_properties"}),oe({formatKey:e,visibility:!0},o,t)}(n,t,a),children:(0,N.jsx)(x().sA,{id:"database.viewSettings.propertiesTab.showAllProperties",defaultMessage:"Show all"})}),style:{width:"100%",paddingBottom:0},children:i})}function me(e){const t=(0,r().v3)(),{formatKey:o,visibleProperties:n,hiddenProperties:i,children:a,collectionContextStore:s,inputStore:c,menuListStore:d}=e,p=h().oE([...n.map((e=>"title"===e.property&&ae.includes(o)?{key:e.property,draggable:!1}:e.property)),n.length>0&&i.length>0&&{key:"group-header-hidden-property",draggable:!1},...i.map((e=>"title"===e.property&&ae.includes(o)?{key:e.property,draggable:!1}:e.property))]);return(0,l().K8)((()=>re(t,s,c)),[t,s,c])?(0,N.jsx)(K().Ay,{direction:"vertical",keys:p,renderKey:(e,t)=>a[t],onDrop:(e,n)=>{!function(e,t,o,n){const{formatKey:i,newPropertyKeys:r}=e,l=o.collectionViewStore();if(!l)return;const a=o.normalizedFormatStore.state[i]||[],s=r.indexOf("group-header-hidden-property");let c=h().oE(r.filter((e=>!e.startsWith("group-header-"))).map(((e,t)=>{const o=a.find((t=>t.property===e));if(o)return s>=0?{...o,visible:Boolean(t<s)}:o}))),d=a.filter((e=>!r.includes(e.property)));ae.includes(i)&&(c=se(c),d=se(d));const p=[...c,...d];j().createAndCommit({userAction:"CollectionSettingsViewProperties.handlePropertyReorder",environment:t,canUndo:!0,perform:e=>{A().zA({stores:[l],update:{[i]:p},transaction:e})}}),(0,C().X)({environment:t,collectionContextStore:o,action:"reorder_properties",original_view_type:l.getType()}),n.reset()}({formatKey:o,newPropertyKeys:e},t,s,d)}}):(0,N.jsx)(N.Fragment,{children:a})}function ge(e){let{formatKey:t,collectionContextStore:o,collectionSettingsStore:i,inputStore:s,menuListStore:c}=e;const p=(0,a().DP)(),u=(0,r().v3)(),m=(0,x().tz)(),g=(0,l().O$)(o.permissionScopesStore),S=(0,l().O$)(o.normalizedFormatStore),y=(0,l().O$)(o.normalizedSchemaStore),f=(0,l().O$)(s);let v=S[t]||[];if(f){let e=v.map((e=>{const t=(0,d()._g)({schema:y,property:e.property});return null==t?void 0:t.name}));e=n().filter(f,e).map((e=>{let{original:t}=e;return t})),v=v.filter((t=>{const o=y[t.property];return o&&o.name&&e.includes(o.name)}))}const b=v.filter((e=>Boolean(e.visible))),w=v.filter((e=>!e.visible)),_=(0,l().K8)((()=>"timeline_table_properties"===t?"table":(0,D().jx)({collectionContextStore:o})),[o,t]),A=(0,l().K8)((()=>de({formatKey:t,properties:b},u,p,o,m,i,s)),[t,b,u,p,o,m,i,s]),j=(0,l().K8)((()=>de({formatKey:t,properties:w},u,p,o,m,i,s)),[t,w,u,p,o,m,i,s]);return 0===v.length?(0,N.jsx)(F().A,{children:(0,N.jsx)(k().A,{caption:(0,N.jsx)(x().sA,{defaultMessage:"No results",id:"database.viewSettings.propertiesTab.noResults"})})}):(0,N.jsx)(O().Ay,{type:O().Oh.Vertical,store:c,initialFocus:void 0,sections:h().oE([b.length>0&&{key:"visible_and_hidden_properties",render:e=>(0,N.jsx)(F().A,{...e,noTextOverflow:!0,title:(0,N.jsx)(ee,{viewType:_}),desktopTitleStyle:{height:19},right:!f&&g.canConfigureBlock&&(0,N.jsx)(B().p,{size:"sm",shouldShrink:!0,isBlue:!0,style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>function(e,t,o){(0,C().X)({environment:t,collectionContextStore:o,action:"click_hide_all_properties"}),oe({formatKey:e,visibility:!1},o,t)}(t,u,o),children:(0,N.jsx)(x().sA,{id:"database.viewSettings.propertiesTab.hideAllProperties",defaultMessage:"Hide all"})}),children:(0,N.jsx)(me,{collectionContextStore:o,inputStore:s,menuListStore:c,formatKey:t,visibleProperties:b,hiddenProperties:w,children:e.children})}),items:h().oE([...A,w.length>0&&{key:"group-header-hidden-property",render:e=>(0,N.jsx)(ue,{collectionContextStore:o,inputStore:s,props:e,formatKey:t,children:(0,N.jsx)(N.Fragment,{})}),action:()=>{}},...j])},0===b.length&&w.length>0&&{key:"hidden_properties",render:e=>(0,N.jsx)(ue,{collectionContextStore:o,inputStore:s,props:e,formatKey:t,children:(0,N.jsx)(me,{formatKey:t,visibleProperties:b,hiddenProperties:w,children:e.children,collectionContextStore:o,inputStore:s,menuListStore:c})}),items:j}])})}},265504:(e,t,o)=>{o.d(t,{A:()=>me,c:()=>ue});o(16280),o(944114),o(898992),o(354520),o(672577),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(56366),l=()=>o(401497),a=()=>o(584262),s=()=>o(970013),c=()=>o(743176),d=()=>o(604995),p=()=>o(651124),u=()=>o(340498),m=()=>o(959013),g=()=>o(496603),S=()=>o(498212),y=()=>o(284371),f=()=>o(436696),v=()=>o(321775),x=()=>o(686526),h=()=>o(896628),b=()=>o(435009),w=()=>o(4319),C=()=>o(317909),_=()=>o(253021),A=()=>o(636740),j=()=>o(314660),T=()=>o(885110),k=()=>o(246826),M=()=>o(407031),B=()=>o(896461);var V=()=>o(519839),K=()=>o(704152),P=()=>o(406699),z=()=>o(623580),O=()=>o(928600),F=()=>o(14235),I=()=>o(89924),L=()=>o(574036),$=()=>o(989423),D=()=>o(186445),E=()=>o(476492),W=()=>o(972435);const R=(0,m().YK)({none:{defaultMessage:"None",id:"database.viewPropertiesMenu.coverFormat.none"},page_content:{defaultMessage:"Page content",id:"database.viewPropertiesMenu.coverFormat.pageContent"},page_cover:{defaultMessage:"Page cover",id:"database.viewPropertiesMenu.coverFormat.pageCover"}}),X=(0,m().YK)({small:{defaultMessage:"Small",id:"database.viewPropertiesMenu.coverSize.small"},medium:{defaultMessage:"Medium",id:"database.viewPropertiesMenu.coverSize.medium"},large:{defaultMessage:"Large",id:"database.viewPropertiesMenu.coverSize.large"}});function U(e){return e?"page_content"===e.type?W().A.formatMessage(R.page_content):"page_cover"===e.type?W().A.formatMessage(R.page_cover):void 0:W().A.formatMessage(R.none)}function H(e){switch(e){case"small":return W().A.formatMessage(X.small);case"medium":return W().A.formatMessage(X.medium);case"large":return W().A.formatMessage(X.large)}}var G=()=>o(10594),Q=()=>o(682146),N=()=>o(544073),Z=()=>o(492414),Y=()=>o(722872),J=()=>o(836251),q=()=>o(578136),ee=()=>o(351360),te=()=>o(988950),oe=()=>o(712505),ne=()=>o(95441),ie=()=>o(497222),re=()=>o(828973),le=()=>o(380468),ae=()=>o(35091),se=o(474848);const ce=6,de=6,pe=(0,m().YK)({week:{defaultMessage:"Week",id:"calendar.viewRanges.week"},month:{defaultMessage:"Month",id:"calendar.viewRanges.month"}});function ue(e){const{currentViewType:t,theme:o}=e,n=t?N().C9[t]:void 0;return["side_peek","center_peek","full_page"].map((e=>({key:e,type:"button",title:(0,N().LA)(e),body:(0,se.jsxs)(se.Fragment,{children:[(0,N()._t)(e),n&&t&&e===n&&(0,se.jsx)("div",{style:{marginTop:2,fontWeight:500,color:o.blueColor},children:(0,se.jsx)(m().sA,{defaultMessage:"Default for {view}",id:"database.viewPropertiesMenu.peekMode.defaultForView",values:{view:Q().to[t]}})})]}),icon:(0,N().qg)(e)({width:u().Ev.default,height:u().Ev.default,fill:o.mediumTextColor})})))}const me=(0,m().j4)((function(e){let{collectionContextStore:t,showDoneButton:a,collectionSettingsStore:c}=e;const d=(0,l().DP)(),p=(0,i().v3)(),u=(0,i().Y0)(),g=(0,n.useCallback)((e=>(0,se.jsx)(Pe,{collectionContextStore:t,viewType:e},`view-type-button-${e}`)),[t]),S=(0,r().O$)(t.normalizedQueryStore),y=(0,r().O$)(t.normalizedSchemaStore),v=(0,r().O$)(t.normalizedFormatStore),b=(0,r().O$)(t.isFullScreenStore),w=(0,r().O$)(t.isRootChildStore),_=(0,r().K8)((()=>t.collectionViewBlockStore()),[t]),A=(0,r().K8)((()=>ge(t)),[t]),j=(0,r().K8)((()=>Boolean(Se(t))),[t]),T="table"===A||"board"===A||"gallery"===A||"calendar"===A,k="table"===A,M=Object.keys(y).filter((e=>{const t=y[e];return t&&(0,s().$L)(t)})),B="timeline"===A&&M.length>0,V=(0,r().K8)((()=>"timeline"===A&&M.length>1&&_&&!(0,D().sj)(_.id)),[A,M,_]),K="timeline"===A&&Boolean(null==S?void 0:S.timeline_by_end),P="calendar"===A&&M.length>0,z=(0,r().K8)((()=>"calendar"===A),[A]),O="calendar"===A,F="board"===A,$=(0,r().K8)((()=>(0,o(690471).DG)({environment:p,isFullScreen:b,isRootChild:w})),[p,b,w]),E="timeline"===A&&Boolean(v.timeline_show_table)&&$,W="timeline"===A&&$,R=(0,r().K8)((()=>Boolean(null==_?void 0:_.getCollectionPointerIfSingleSource())),[_]),X=(0,r().K8)((()=>!("collectionTypedView"===t.contextType||t.isInHomeWidgetStore.state||b&&R)),[t,b,R]),U=(0,r().K8)((()=>!t.isInHomeWidgetStore.state&&"chart"!==A),[t.isInHomeWidgetStore,A]),H=(0,r().K8)((()=>"chart"!==A),[A]),G=(0,r().O$)(t.permissionScopesStore),Q=(0,r().O$)(t.shouldShowSourceStore),N=(0,r().K8)((()=>"chart"===A),[A]),Z=(0,r().K8)((()=>"chart"===A),[A]),{isPostsEnabled:Y,isFeedOutsidePostsEnabled:ee}=(0,r().K8)((()=>({isPostsEnabled:(0,q().D)({isMobileNative:u.isMobileNative,disableExposureLogging:!0}),isFeedOutsidePostsEnabled:(0,q().X)({disableExposureLogging:!0})})),[u]),te=(0,o(963589).X)("geo_point_property");if(!_)return null;const oe="page"===A,ie=X||j||k||T||oe||B||K||V||P||O||z||W||E||F||U||H,re=["table","board","timeline","calendar","list","gallery","chart"];return Y&&ee&&re.push("feed"),te&&re.push("map"),(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(I().A,{topBorder:!1,shouldShowBottomDivider:u.isMobile,children:(0,se.jsx)("div",{style:{...!u.isMobile&&{width:"100%",paddingLeft:8,paddingRight:8},...u.isMobile&&{background:d.contentBackground,width:"100%",paddingTop:12,paddingBottom:12}},children:(0,se.jsx)("div",{style:{display:"flex",flexFlow:"wrap"},children:re.map(g)})})}),ie&&(0,se.jsxs)(I().A,{children:[X&&(0,se.jsx)(L().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Show database title",id:"database.viewSettings.layoutTab.showDatabaseTitle.title"}),focused:!1,on:Q,onClick:()=>function(e,t){const o=t.collectionViewStore();if(!o)return;const n=!t.shouldShowSourceStore.state;C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleShowCollectionTitleClick",environment:e,canUndo:!0,perform:e=>{h().zA({stores:[o],update:{hide_linked_collection_name:!n},transaction:e})}}),(0,f().X)({environment:e,collectionContextStore:t,action:"toggle_show_collection_title"})}(p,t),disabled:!G.canConfigureBlock,textWrapperStyle:{opacity:1}}),j&&(0,se.jsx)(Ke,{collectionContextStore:t}),k&&(0,se.jsx)(Ae,{collectionContextStore:t}),T&&(0,se.jsx)(je,{collectionContextStore:t}),oe&&(0,se.jsx)(ve,{collectionContextStore:t}),B&&(0,se.jsx)(xe,{collectionContextStore:t}),K&&(0,se.jsx)(he,{collectionContextStore:t}),V&&(0,se.jsx)(Te,{collectionContextStore:t}),P&&(0,se.jsx)(be,{collectionContextStore:t}),O&&(0,se.jsx)(ke,{collectionContextStore:t}),z&&(0,se.jsx)(Me,{collectionContextStore:t}),W&&(0,se.jsx)(o(174638).u,{collectionContextStore:t}),E&&(0,se.jsx)(we,{collectionContextStore:t,collectionSettingsStore:c}),F&&(0,se.jsx)(Ce,{collectionContextStore:t,collectionSettingsStore:c}),U&&(0,se.jsx)(Be,{collectionContextStore:t}),H&&(0,se.jsx)(Ve,{collectionContextStore:t})]}),a&&(0,se.jsx)(I().A,{disableMobileBorders:!0,children:(0,se.jsx)(o(204063).A,{style:{display:"flex",margin:"0 14px"},onClick:()=>function(e,t,o){x().R8({collectionSettingsStore:t,item:{type:"main"}}),(0,f().X)({environment:e,collectionContextStore:o,action:"click_create_view_done"})}(p,c,t),children:Z?(0,se.jsx)(m().sA,{defaultMessage:"Edit chart",id:"database.viewSettings.createViewTab.editChartButton.title"}):(0,se.jsx)(m().sA,{defaultMessage:"Done",id:"database.viewSettings.createViewTab.doneButton.title"})})}),N?(0,se.jsx)(I().A,{topBorder:!1,children:(0,se.jsx)(ne().A,{href:(0,J().xS)("guides.charts"),title:(0,se.jsx)(m().sA,{defaultMessage:"Learn about charts",id:"database.viewSettings.layoutTab.learnAboutCharts.title"}),analyticsFrom:"view_settings_layout"})}):(0,se.jsx)(I().A,{topBorder:!1,children:(0,se.jsx)(ne().A,{href:(0,J().xS)("guides.databaseView"),title:(0,se.jsx)(m().sA,{defaultMessage:"Learn about views",id:"database.viewSettings.layoutTab.learnMoreButton.title"}),analyticsFrom:"view_settings_layout"})})]})}));function ge(e){var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.getType();if(!o)throw new Error("View type was not defined.");return o}function Se(e){return Q().Jx[ge(e)]}function ye(e){return Q().wm[ge(e)]}function fe(e){return Q().dD[ge(e)]}function ve(e){let{collectionContextStore:t}=e;const o=(0,i().v3)(),n=(0,r().K8)((()=>t.collectionViewStore()),[t]);return n?(0,se.jsx)("div",{style:{padding:5},children:(0,se.jsx)(z().A,{showClearButton:!0,placeholder:"Enter page ID",focusInitial:!0,onChange:e=>{te().A.setState({pageId:e.target.value})},onSubmit:e=>{const t=te().A.state.pageId;t&&C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderPageViewSettings",environment:o,canUndo:!0,perform:e=>{h().zA({stores:[n],update:{page_pointer:{id:(0,S().G2)(t),spaceId:e.spaceId,table:"block"}},transaction:e})}})}})}):null}function xe(e){let{collectionContextStore:t}=e;const o=(0,i().v3)(),n=(0,i().WS)(),l=(0,r().K8)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.timeline_by}),[t]),a=(0,r().K8)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.timeline_by_end}),[t]),c=(0,r().O$)(t.permissionScopesStore),d=(0,r().O$)(t.normalizedSchemaStore),p=(0,r().K8)((()=>t.collectionViewStore()),[t]),u=(0,r().K8)((()=>t.collectionStore()),[t]),g=(0,r().K8)((()=>null==u?void 0:u.getSchema()),[u]),S=(0,r().K8)((()=>null==u?void 0:u.getFormat()),[u]);if(!(l&&p&&u&&S&&g))return null;const v=d[l];return v?(0,se.jsx)(P().Ay,{popupType:n?F().nl.SlideUp:F().nl.Popup,alignmentToOrigin:P().yP.End,placementToOrigin:P().sx.Bottom,originGap:0,renderOrigin:e=>(0,se.jsx)(ie().A,{title:a?(0,se.jsx)(m().sA,{defaultMessage:"Start date",id:"database.viewSettings.layoutTab.timelineStartDate.title"}):(0,se.jsx)(m().sA,{defaultMessage:"Show timeline by",id:"database.viewSettings.layoutTab.showTimelineByProperty.title"}),disabled:!c.canConfigureBlock,showChevron:!0,right:(0,se.jsx)("div",{style:y().RC,children:v.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:e=>{let i;return i=n?{menuType:Y().gu.ActionSheet}:{menuType:Y().gu.Popup,width:300},(0,se.jsx)(O().A,{...i,children:(0,se.jsx)(le().A,{schema:g,format:S,currentProperty:l,getProperties:()=>Object.keys(d).filter((e=>{const t=d[e];return t&&(0,s().$L)(t)})),onAccept:n=>{n&&(C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineBySetting",environment:o,canUndo:!0,perform:e=>{(0,j().f)({collectionViewStore:p,update:{timeline_by:n},transaction:e})}}),e.close(),(0,f().X)({environment:o,collectionContextStore:t,action:"update_timeline_by",original_view_type:void 0,property_type:v.type}))}})})}}):null}function he(e){let{collectionContextStore:t}=e;const o=(0,i().v3)(),n=(0,i().WS)(),l=(0,r().K8)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.timeline_by_end}),[t]),a=(0,r().O$)(t.permissionScopesStore),c=(0,r().O$)(t.normalizedSchemaStore),d=(0,r().K8)((()=>t.collectionViewStore()),[t]),p=(0,r().K8)((()=>t.collectionStore()),[t]),u=(0,r().K8)((()=>null==p?void 0:p.getSchema()),[p]),g=(0,r().K8)((()=>null==p?void 0:p.getFormat()),[p]);if(!(l&&d&&p&&g&&u))return null;const S=c[l];return S?(0,se.jsx)(P().Ay,{popupType:n?F().nl.SlideUp:F().nl.Popup,alignmentToOrigin:P().yP.End,placementToOrigin:P().sx.Bottom,originGap:0,renderOrigin:e=>(0,se.jsx)(ie().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"End date",id:"database.viewSettings.layoutTab.timelineEndDate.title"}),showChevron:!0,right:S.name,disabled:!a.canConfigureBlock,...e}),render:e=>{let i;return i=n?{menuType:Y().gu.ActionSheet}:{menuType:Y().gu.Popup,width:300},(0,se.jsx)(O().A,{...i,children:(0,se.jsx)(le().A,{schema:u,format:g,currentProperty:l,getProperties:()=>Object.keys(c).filter((e=>{const t=c[e];return t&&(0,s().$L)(t)})),onAccept:n=>{n&&(C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineEndSetting",environment:o,canUndo:!0,perform:e=>{(0,j().f)({collectionViewStore:d,update:{timeline_by_end:n},transaction:e})}}),e.close(),(0,f().X)({environment:o,collectionContextStore:t,action:"update_timeline_by_end",original_view_type:void 0,property_type:S.type}))}})})}}):null}function be(e){let{collectionContextStore:t}=e;const o=(0,i().v3)(),n=(0,i().WS)(),l=(0,r().K8)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.calendar_by}),[t]),a=(0,r().O$)(t.permissionScopesStore),c=(0,r().O$)(t.normalizedSchemaStore),d=(0,r().K8)((()=>t.collectionViewStore()),[t]),p=(0,r().K8)((()=>t.collectionStore()),[t]),u=(0,r().K8)((()=>null==p?void 0:p.getSchema()),[p]),g=(0,r().K8)((()=>null==p?void 0:p.getFormat()),[p]);if(!(l&&d&&p&&g&&u))return null;const S=c[l];return S?(0,se.jsx)(P().Ay,{popupType:n?F().nl.SlideUp:F().nl.Popup,alignmentToOrigin:P().yP.End,placementToOrigin:P().sx.Bottom,originGap:0,renderOrigin:e=>(0,se.jsx)(ie().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Show calendar by",id:"database.viewSettings.layoutTab.showCalendarByProperty.title"}),disabled:!a.canConfigureBlock,showChevron:!0,right:(0,se.jsx)("div",{style:y().RC,children:S.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:e=>{let i;return i=n?{menuType:Y().gu.ActionSheet}:{menuType:Y().gu.Popup,width:300},(0,se.jsx)(O().A,{...i,children:(0,se.jsx)(le().A,{schema:u,format:g,currentProperty:l,getProperties:()=>Object.keys(c).filter((e=>{const t=c[e];return t&&(0,s().$L)(t)})),onAccept:n=>{n&&(C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderCalendarBySetting",environment:o,canUndo:!0,perform:e=>{(0,j().f)({collectionViewStore:d,update:{calendar_by:n},transaction:e})}}),e.close(),(0,f().X)({environment:o,collectionContextStore:t,action:"update_calendar_by",original_view_type:void 0,property_type:S.type}))}})})}}):null}function we(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;const n=(0,i().v3)(),l=((0,r().O$)(t.normalizedFormatStore).timeline_table_properties||[]).filter((e=>Boolean(e.visible))).length,a=(0,r().O$)(t.permissionScopesStore);return(0,se.jsx)(ie().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Table properties",id:"database.viewSettings.layoutTab.tablePropertiesButton.title"}),showChevron:!0,right:(0,se.jsx)(m().sA,{defaultMessage:"{propertiesShown} shown",id:"database.viewSettings.layoutTab.propertiesButton.propertiesShown.title",values:{propertiesShown:l}}),onClick:()=>{x().a2({collectionSettingsStore:o,item:{type:"properties",timelineViewTab:"table"}}),(0,f().X)({environment:n,collectionContextStore:t,action:"click_timeline_table_properties"})},disabled:!a.canConfigureBlock})}function Ce(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;const n=(0,i().v3)(),l=(0,r().K8)((()=>t.normalizedFormatStore.state.board_columns_by),[t]),a=(0,r().O$)(t.normalizedSchemaStore),s=(0,r().O$)(t.permissionScopesStore),c=(0,r().K8)((()=>(0,G().FS)(t.normalizedFormatStore.state)),[t]);if(!l)return null;const d=a[l.property];return d?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ie().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Group by",id:"database.viewSettings.layoutTab.boardGroupByButton.title"}),showChevron:!0,right:d.name,onClick:()=>{x().a2({collectionSettingsStore:o,item:{type:"group",groupByKey:"board_columns_by",groupsFormatKey:"board_columns"}}),(0,f().X)({environment:n,collectionContextStore:t,action:"click_board_group_by",original_view_type:void 0,property_type:d.type})},disabled:!s.canConfigureBlock}),(0,se.jsx)(L().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Color columns",id:"database.viewSettings.groupTab.colorColumns"}),on:!c,focused:!1,onClick:()=>{x().ut({environment:n,collectionContextStore:t})},disabled:!s.canConfigureBlock,textWrapperStyle:{opacity:1}})]}):null}function _e(e,t,o){const n=o.collectionViewStore();if(!n)return;const{serverCommitResult:i}=C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleViewRangeOptionClick",environment:t,canUndo:!0,perform:t=>{h().zA({stores:[n],update:{calendar_view_range:e},transaction:t})}}),r=D().XX.state,l=o.dateRangeStartStore.state,a=o.dateRangeEndStore.state,{newDateRangeStart:s,newDateRangeEnd:c}=function(e){const{newViewRange:t,oldCalendarStart:o,startOfWeekSetting:n}=e;if("month"===t){const e=(0,d().mK)(new Date((0,d().to)(o,n)).getDate()>7?(0,d().Mw)(o):o,n);return{newDateRangeStart:e,newDateRangeEnd:(0,d().to)((0,d().AQ)({date:e,monthsToAdd:1}),n)}}return{newDateRangeStart:(0,d().mK)(Date.now(),n),newDateRangeEnd:(0,d().to)(Date.now(),n)}}({oldCalendarStart:l,newViewRange:e,startOfWeekSetting:r});(0,A().r)({dateRangeStart:s,dateRangeEnd:c,collectionContextStore:o}),i.then((()=>{(0,f().X)({environment:t,collectionContextStore:o,action:"update_calendar_view_range"}),(0,_().LQ)({newCalendarStart:s,newCalendarEnd:c,collectionViewId:n.id,currentUserId:t.currentUser.id})})).catch((()=>{(0,A().r)({dateRangeStart:l,dateRangeEnd:a,collectionContextStore:o})}))}function Ae(e){let{collectionContextStore:t}=e;const o=(0,i().v3)(),n=(0,r().O$)(t.permissionScopesStore),l=(0,r().K8)((()=>!Boolean(t.normalizedFormatStore.state.hide_table_vertical_lines)),[t]);return(0,se.jsx)(L().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Show vertical lines",id:"database.viewSettings.layoutTab.tableShowVerticalLines"}),on:l,focused:!1,onClick:()=>function(e,t){const o=t.collectionViewStore();if(!o)return;const n=Boolean(t.normalizedFormatStore.state.hide_table_vertical_lines);w().au({environment:e,collectionViewStore:o,currentValue:n}),(0,f().X)({environment:e,collectionContextStore:t,action:"toggle_table_vertical_lines"})}(o,t),disabled:!n.canConfigureBlock,textWrapperStyle:{opacity:1}})}function je(e){var t;let{collectionContextStore:o}=e;const l=(0,i().v3)(),a=(0,r().O$)(o.normalizedFormatStore),s=(0,r().O$)(o.permissionScopesStore),c=(0,r().K8)((()=>ge(o)),[o]),d=a.table_wrap||"calendar"===c&&!0===(null==a||null===(t=a.calendar_properties)||void 0===t||null===(t=t.find((e=>"title"===e.property)))||void 0===t?void 0:t.wrap),p=(0,n.useMemo)((()=>{switch(c){case"table":return(0,se.jsx)(m().sA,{defaultMessage:"Wrap all columns",id:"database.viewSettings.layoutTab.tableWrapAllColumns"});case"calendar":return(0,se.jsx)(m().sA,{defaultMessage:"Wrap page titles",id:"database.viewSettings.layoutTab.calendarWrapTitle"});default:return(0,se.jsx)(m().sA,{defaultMessage:"Wrap all properties",id:"database.viewSettings.layoutTab.tableWrapAllProperties"})}}),[c]),u=(0,n.useCallback)((()=>{const e=o.collectionViewStore();e&&(w().g({environment:l,collectionViewStore:e,currentValue:Boolean(d)}),(0,f().X)({environment:l,collectionContextStore:o,action:"set_first_load_limit"}),(0,f().X)({environment:l,collectionContextStore:o,action:"toggle_table_wrap_cells"}))}),[o,l,d]);return(0,se.jsx)(L().A,{title:p,on:Boolean(d),focused:!1,onClick:u,disabled:!s.canConfigureBlock,textWrapperStyle:{opacity:1}})}function Te(e){let{collectionContextStore:t}=e;const o=(0,i().v3)(),n=(0,r().O$)(t.normalizedQueryStore),l=null==n?void 0:n.timeline_by_end,a=(0,r().O$)(t.permissionScopesStore);return(0,se.jsx)(L().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Separate start and end dates",id:"database.viewSettings.layoutTab.timelineUseSeparateDates.title"}),focused:!1,on:Boolean(l),onClick:()=>function(e,t){const o=t.normalizedQueryStore.state,n=t.collectionViewStore(),i=null==o?void 0:o.timeline_by,r=null==o?void 0:o.timeline_by_end;if(!i||!n)return;const l=r?void 0:i;C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleTimelineSeparateDatesClick",environment:e,canUndo:!0,perform:e=>{(0,j().f)({collectionViewStore:n,update:{timeline_by_end:l??null},transaction:e})}}),(0,f().X)({environment:e,collectionContextStore:t,action:"toggle_timeline_separate_dates"})}(o,t),disabled:!a.canConfigureBlock,textWrapperStyle:{opacity:1}})}function ke(e){let{collectionContextStore:t}=e;const o=(0,i().v3)(),l=(0,r().O$)(t.permissionScopesStore),a=(0,r().K8)((()=>function(e){const t=e.normalizedFormatStore.state;return(null==t?void 0:t.calendar_view_range)||"month"}(t)),[t]),s=(0,r().K8)((()=>"peekModeFormat"===t.settingsStore.state.openButtonPopup),[t]),c=(0,n.useMemo)((()=>["month","week"].map((e=>({key:e,type:"button",title:W().A.formatMessage(pe[e])})))),[]);return(0,se.jsx)(re().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Show calendar as",id:"database.viewSettings.layoutTab.showCalendarAs.title"}),collectionContextStore:t,openButtonPopup:s,selectedKey:a,popupStyle:{minWidth:190},options:c,onChange:e=>_e(e,o,t),disabled:!l.canConfigureBlock})}function Me(e){let{collectionContextStore:t}=e;const o=(0,i().v3)(),l=(0,r().K8)((()=>{var e;return Boolean((null===(e=t.collectionViewStore())||void 0===e?void 0:e.getFormatStore().getKeyStore("calendar_show_weekends").getValue())??!0)}),[t]),a=(0,n.useCallback)((()=>{const e=t.collectionViewStore();e&&(C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleToggleShowWeekends",environment:o,canUndo:!0,perform:t=>{h().zA({stores:[e],update:{calendar_show_weekends:!l},transaction:t})}}),(0,f().X)({environment:o,collectionContextStore:t,action:"toggle_calendar_show_weekends"}))}),[t,o,l]);return(0,se.jsx)(ae().A,{title:(0,se.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,se.jsx)(m().sA,{defaultMessage:"Show weekends",id:"database.viewSettings.layoutTab.showWeekends.title"})}),showChevron:!1,switcherProps:{on:l,noColor:!1},onClick:a})}function Be(e){let{collectionContextStore:t}=e;const o=(0,l().DP)(),n=(0,i().v3)(),s=(0,r().O$)(t.permissionScopesStore),c=(0,r().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=ge(e);return(null==t?void 0:t.collection_peek_mode)||N().C9[o]}(t)),[t]),d=(0,r().K8)((()=>"peekModeFormat"===t.settingsStore.state.openButtonPopup),[t]),p=(0,r().K8)((()=>ge(t)),[t]);return(0,se.jsx)(re().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Open pages in",id:"database.viewSettings.layoutTab.peekModeTitle"}),collectionContextStore:t,openButtonPopup:d,selectedKey:c,popupStyle:{minWidth:190},options:ue({currentViewType:p,theme:o}),menuItemOptionsStyle:{paddingTop:8,paddingBottom:8},onClick:()=>function(e,t){(0,v().m)({environment:e,collectionContextStore:t,from:"collection_view_settings"})}(n,t),onChange:e=>function(e,t,o){const n=o.collectionViewStore();if(!n||!e)return;C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handlePeekModeFormatClick",environment:t,canUndo:!0,perform:t=>{h().zA({stores:[n],update:{collection_peek_mode:e},transaction:t})}});const i=(0,E().sl)(o);if(i&&i.view_type&&(i&&i.view_type&&$().vd(t,"update_peek_mode_format",{peek_mode:e,from:"collection_view_settings",...i}),oe().default.state.open&&oe().default.state.collectionContextStore===o)){const{mainEditorCurrentBlockStore:o}=ee().default.state,n="full_page"===e?(0,Z().Ay)({store:oe().default.state.targetStore,fullyQualified:!1,pageVisitSource:a().y8.Expand}):(0,V().wy)({environment:t,store:oe().default.state.targetStore,mainEditorCurrentBlockStore:o,collectionContextStore:oe().default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,oe().getPeekModeFromCollectionPeekModeFormat)(e)});n&&b().oo({environment:t,url:n})}}(e,n,t),disabled:!s.canConfigureBlock})}function Ve(e){let{collectionContextStore:t}=e;const o=(0,i().v3)(),l=(0,r().O$)(t.permissionScopesStore),a=(0,r().K8)((()=>t.shouldShowPageIcon()??!0),[t]),s=(0,n.useCallback)((()=>{const e=t.collectionViewStore();e&&(C().createAndCommit({userAction:"CollectionSettingsProperty.TitleOptions.handleToggleShowIcon",environment:o,canUndo:!0,perform:t=>{h().zA({stores:[e],update:{show_page_icon:!a},transaction:t})}}),(0,f().X)({environment:o,collectionContextStore:t,action:"toggle_show_page_icon"}))}),[t,o,a]);return(0,se.jsx)(L().A,{title:(0,se.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,se.jsx)(m().sA,{defaultMessage:"Show page icon",id:"database.viewSettings.layoutTab.showPageIcon.title"})}),focused:!1,on:a,onClick:s,disabled:!l.canConfigureBlock})}function Ke(e){let{collectionContextStore:t}=e;const o=(0,l().DP)(),n=(0,i().v3)(),{device:a}=n,s=(0,r().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=Se(e);if(o&&t)return t[o]}(t)),[t]),d=(0,r().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=ye(e);if(o&&t){const e=t[o];if(e)return e}return p().fi}(t)),[t]),u=(0,r().K8)((()=>!a.isMobile||"board"===ge(t)),[a,t]),S=(0,r().O$)(t.permissionScopesStore),y=(0,r().K8)((()=>function(e,t,o){const n=o.normalizedSchemaStore.state;let i=Object.keys(n);i=g().Ul(i,(e=>{const t=n[e];return t?t.name:""}));const r=g().oE(i.map((o=>{const i=n[o];if(i&&"file"===i.type)return{key:{type:"property",property:o},type:"button",title:i.name,icon:(0,se.jsx)(c().Ay,{type:i.type,icon:i.icon,size:e.device.isMobile?16:14,theme:t,style:{fill:t.regularIconColor}})}})));return[...[void 0,{type:"page_cover"},{type:"page_content"}].map((e=>({key:e,type:"button",title:U(e)}))),...r]}(n,o,t)),[n,o,t]),v=(0,r().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=fe(e);if(o&&t)return t[o]}(t)),[t]);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(re().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Card preview",id:"database.viewSettings.layoutTab.cardPreviewButtonTitle"}),selectedKey:s,popupStyle:{minWidth:190},options:y,onChange:e=>function(e,t,o){const n=Se(o),i=o.collectionViewStore();n&&i&&(C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverFormatChange",environment:t,canUndo:!0,perform:t=>{h().zA({stores:[i],update:{[n]:e},transaction:t})}}),(0,f().X)({environment:t,collectionContextStore:o,action:"update_cover_format"}))}(e,n,t),disabled:!S.canConfigureBlock}),u&&(0,se.jsx)(re().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Card size",id:"databdatabase.viewSettings.layoutTab.cardSizeButtonTitle"}),selectedKey:d,popupStyle:{minWidth:190},options:["small","medium","large"].map((e=>({key:e,type:"button",title:H(e)}))),onChange:e=>function(e,t,o){const n=ye(o),i=o.collectionViewStore();n&&i&&(C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverSizeFormatChange",environment:t,canUndo:!0,perform:t=>{h().zA({stores:[i],update:{[n]:e},transaction:t})}}),(0,f().X)({environment:t,collectionContextStore:o,action:"toggle_cover_size_format"}))}(e,n,t),disabled:!S.canConfigureBlock}),s&&(0,se.jsx)(L().A,{title:(0,se.jsx)(m().sA,{defaultMessage:"Fit image",id:"databdatabase.viewSettings.layoutTab.fitImageButtonTitle"}),on:"contain"===v,focused:!1,onClick:()=>function(e,t){const o=fe(t),n=t.collectionViewStore(),i=t.normalizedFormatStore.state;o&&n&&(C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverAspectFormatToggle",environment:e,canUndo:!0,perform:e=>{h().zA({stores:[n],update:{[o]:"contain"===i[o]?"cover":"contain"},transaction:e})}}),(0,f().X)({environment:e,collectionContextStore:t,action:"toggle_cover_aspect_format"}))}(n,t),disabled:!S.canConfigureBlock,textWrapperStyle:{opacity:1}})]})}function Pe(e){let{viewType:t,collectionContextStore:o}=e;const n=(0,l().DP)(),a=(0,i().v3)(),s=(0,r().K8)((()=>ge(o)),[o]),c=(0,r().O$)(o.permissionScopesStore),d=s===t,p=d||!c.canConfigureBlock;return(0,se.jsxs)(K().A,{style:{display:"flex",flexDirection:"column",alignItems:"center",width:`calc(25% - ${2*ce}px)`,flexGrow:0,flexShrink:0,fontSize:11,borderRadius:6,margin:ce,padding:de,boxShadow:`0 0 0 1px ${n.regularDividerColor}`,color:n.mediumTextColor,fill:n.mediumTextColor,...d&&{boxShadow:`0 0 0 2px ${n.blueColor}`,color:n.blueColor,fill:n.blueColor,fontWeight:500}},disabled:p,onClick:()=>{C().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderViewTypeButton",environment:a,canUndo:!0,perform:e=>{!function(e){const{environment:t,collectionContextStore:o,newViewType:n,transaction:i}=e,r=o.collectionViewStore(),l=o.collectionViewBlockStore(),a=o.collectionStore();if(!r||!l)return;if(n===r.getType()||"page"===n||"form_editor"===n)return;"chart"===n&&T().Z({environment:t,collectionContextStore:o,collectionViewId:r.id,from:"collection_view_type_change"});const s=r.getType();k().zv({store:r,data:{type:n},transaction:i}),(0,B().W)({environment:t,collectionContextStore:o,collectionViewStore:r,collectionStore:a,oldViewType:s,newViewType:n,transaction:i}),(0,M().S)({collectionContextStore:o})}({environment:a,collectionContextStore:o,newViewType:t,transaction:e})}}),(0,f().X)({environment:a,collectionContextStore:o,action:"change_type",original_view_type:s,new_view_type:t})},children:[Q().Vw[t]({width:void 0,height:20,marginBottom:4,marginTop:4}),(0,se.jsx)("div",{children:Q().to[t]})]},t)}},321775:(e,t,o)=>{o.d(t,{m:()=>r});var n=()=>o(476492),i=()=>o(645302);function r(e){const t=(0,n().sl)(e.collectionContextStore);t&&t.view_type&&i().jE(e.environment,{from:e.from,from_peek_mode:e.from_peek_mode,...t,view_type:t.view_type})}},401634:(e,t,o)=>{o.d(t,{i:()=>f});o(296540);var n=()=>o(484714),i=()=>o(401497),r=()=>o(274609),l=()=>o(959013),a=()=>o(534177),s=()=>o(545805),c=()=>o(928600),d=()=>o(45552),p=()=>o(107683),u=()=>o(38337),m=()=>o(722872),g=o(474848);const S=(0,l().YK)({createTitle:{id:"automations.builderModal.createTitle",defaultMessage:"Create automation"},updateTitle:{id:"automations.builderModal.updateTitle",defaultMessage:"Edit automation"},backAriaLabel:{defaultMessage:"Back",id:"automations.builderModal.backAriaLabel"},saveButton:{id:"automations.builderModal.saveButton",defaultMessage:"Save"}}),y=88;function f(e){const{children:t,handleOnDismiss:o,canSave:f,handleOnSave:v,mode:x}=e,h=(0,l().tz)(),{isMobile:b}=(0,n().Y0)(),w=(0,i().IS)((e=>({container:{padding:b?0:"12px 16px",display:"flex",flexDirection:"column",overflow:"hidden",...b?{}:{flexGrow:1}},mobileBackIcon:{width:14,height:14,fill:e.mediumIconColor,margin:"0 6px"}})),[b]);if(b){let e;return"create"===x?e=h.formatMessage(S.createTitle):"update"===x||"button_property"===x?e=h.formatMessage(S.updateTitle):"loading"===x?e=null:(0,a().HB)(x),(0,g.jsx)(c().A,{menuType:m().gu.Modal,whiteBackground:!0,title:e,left:(0,g.jsx)(g.Fragment,{children:(0,r().L)(w.mobileBackIcon)}),onClickLeft:o,rightDisabled:!f,right:"button_property"===x?(0,g.jsx)(d().DoneMenuText,{}):(0,g.jsx)(l().sA,{...S.saveButton}),onClickRight:v,children:(0,g.jsx)("div",{style:w.container,className:u().sux,children:t})})}return(0,g.jsx)(p().s,{anchor:"top",minimumOutsideSpacing:{type:"axes",vertical:y},areaConstraint:{width:{type:"fixed",length:500},height:{type:"min",length:600,scroll:"disallow"}},allowDismissByEscape:!1,isOpen:!0,render:()=>(0,g.jsxs)("div",{style:w.container,className:u().sux,children:[t,(0,g.jsx)(s().A,{debugName:"AutomationBuilderModal",capture:!0,onEsc:e=>{o()}})]})})}},419178:(e,t,o)=>{o.d(t,{Q:()=>i});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M15.85 3.65a.625.625 0 1 0 0-1.25H4.15a.625.625 0 1 0 0 1.25zm-1.008 6.692a.625.625 0 0 1-.884 0l-3.333-3.333v9.966a.625.625 0 1 1-1.25 0V7.009l-3.333 3.333a.625.625 0 1 1-.884-.884l4.4-4.4a.625.625 0 0 1 .884 0l4.4 4.4a.625.625 0 0 1 0 .884"})},i=(0,o(340498).wt)("arrowLineUp",n)},430171:(e,t,o)=>{o.d(t,{c:()=>l});var n=()=>o(436696),i=()=>o(686526),r=()=>o(36629);function l(e){const{environment:t,collectionContextStore:o}=e;o.collectionStore()&&((0,n().X)({environment:t,collectionContextStore:o,action:"click_new_property"}),i().a2({collectionSettingsStore:o.settingsStore,item:{type:"propertyType",onAccept:(e,n,i,l)=>{r().nZ({environment:t,propertyType:e,isSuggestedProperty:n,propertyName:i,selectOptions:l,collectionContextStore:o,from:"view_settings"})}}}))}},457056:(e,t,o)=>{o.d(t,{o:()=>i});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M4.375 4.75a.625.625 0 1 0-1.25 0v5c0 1.174.951 2.125 2.125 2.125h10.491l-3.333 3.333a.625.625 0 0 0 .884.884l4.4-4.4a.625.625 0 0 0 0-.884l-4.4-4.4a.625.625 0 0 0-.884.884l3.333 3.333H5.25a.875.875 0 0 1-.875-.875z"})},i=(0,o(340498).wt)("arrowTurnDownRight",n)},645395:(e,t,o)=>{o.d(t,{j:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("properties",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"})})},988950:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{pageId:void 0}}}const i=new n}}]);