"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[24996],{311337:(e,t,o)=>{o.d(t,{y:()=>a});var i=()=>o(731320),n=()=>o(792415),s=()=>o(351360),r=()=>o(326589);function a(e){var t;if(!(0,r().g)())return!1;if(!e.currentUser.isLoggedIn())return!0;const o=null===(t=n().A.state.publicPageData)||void 0===t?void 0:t.spaceId;if(!e.currentUser.id||!o)return!1;const a=s().default.state.mainEditorCurrentBlockStore,l=!!a&&(0,i().qb)(e,a);return Boolean(l)}},338429:(e,t,o)=>{o.d(t,{A:()=>i});const i=new(o(463830).A)},371513:(e,t,o)=>{o.d(t,{b:()=>s});o(296540);var i=o(474848);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5 6.25a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm-.5 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5m.5 1.5a.5.5 0 0 0 0 1h1a.5.5 0 1 0 0-1z"}),(0,i.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zM4.5 5.375a.875.875 0 0 0-.875.875v7.5c0 .483.392.875.875.875h2.95v-9.25zm11 9.25a.875.875 0 0 0 .875-.875v-7.5a.875.875 0 0 0-.875-.875H8.55v9.25z"})]})},s=(0,o(340498).wt)("sidebarLeft",n)},524996:(e,t,o)=>{o.r(t),o.d(t,{BreadcrumbsComponent:()=>zt,CancelQuickAddComponent:()=>Wt,DraftPostActionButtons:()=>Qt,FilingComponent:()=>Lt,HamburgerButton:()=>It,MyTasksButtons:()=>Ct,RightButtonsComponent:()=>Vt,SidebarButton:()=>Kt,TopbarMobile:()=>vt,getShouldShowCancelQuickAdd:()=>kt,getShouldShowFilingInHeader:()=>wt,getStyle:()=>Et,handleCancelQuickAdd:()=>_t,shouldRenderBackButton:()=>Tt,shouldShowSidebarButton:()=>Rt});o(944114),o(898992),o(737550);var i=o(296540),n=()=>o(908006),s=()=>o(484714),r=()=>o(56366),a=()=>o(401497),l=()=>o(110750),d=()=>o(628182),c=()=>o(584262),u=()=>o(212050),h=()=>o(49621),g=()=>o(124858),m=()=>o(440854),p=()=>o(371513),b=()=>o(340498),f=()=>o(120739),x=()=>o(427704),S=()=>o(179034),v=()=>o(959013),j=()=>o(284371),y=()=>o(328523),k=()=>o(848259),w=()=>o(741496),C=()=>o(750660),B=()=>o(857783),P=()=>o(435009),A=()=>o(537941),T=()=>o(778417),M=()=>o(426116),I=()=>o(725614),K=()=>o(317909),R=()=>o(345913),E=()=>o(205127),F=()=>o(462113),_=()=>o(774733),N=()=>o(493319),H=()=>o(116008),L=()=>o(885962),W=()=>o(869609),D=()=>o(813401),z=()=>o(109488),U=()=>o(112995),V=()=>o(138156),Y=()=>o(989423),Q=()=>o(186445),O=()=>o(38337),X=()=>o(47373),J=()=>o(722872),G=()=>o(108944),q=()=>o(731320),Z=()=>o(71304),$=()=>o(836251),ee=()=>o(437622),te=()=>o(470928),oe=()=>o(891078),ie=()=>o(645873),ne=()=>o(963589),se=()=>o(577009),re=()=>o(386208),ae=()=>o(81119),le=()=>o(119987),de=()=>o(522181),ce=()=>o(204263),ue=()=>o(696746),he=()=>o(321172),ge=()=>o(663590),me=()=>o(311337),pe=()=>o(869562),be=()=>o(644914),fe=()=>o(749687),xe=()=>o(265201),Se=()=>o(962730),ve=()=>o(155959),je=()=>o(351360),ye=()=>o(455425),ke=()=>o(574012),we=()=>o(188669),Ce=()=>o(338429),Be=()=>o(630116),Pe=()=>o(24157),Ae=()=>o(795179),Te=()=>o(538233),Me=()=>o(699527),Ie=()=>o(704152),Ke=()=>o(406699),Re=()=>o(285790),Ee=()=>o(928600),Fe=()=>o(45552),_e=()=>o(179030),Ne=()=>o(14235),He=()=>o(614505),Le=()=>o(16006),We=()=>o(132389),De=()=>o(21140),ze=()=>o(171347),Ue=()=>o(187959),Ve=()=>o(60499),Ye=()=>o(502176),Qe=o(474848);function Oe(){const e=(0,i.useCallback)((()=>(0,Qe.jsx)(Ye().A,{message:(0,Qe.jsx)(v().sA,{defaultMessage:"Any changes to this page will show up here.",id:"updatesModal.currentPageTab.emptyPrompt"}),title:(0,Qe.jsx)(v().sA,{defaultMessage:"No page updates",id:"updatesModal.currentPageTab.emptyPromptTitle"})})),[]),t=(0,r().K8)((()=>je().default.state.currentSpaceStore),[]),o=(0,r().K8)((()=>je().default.state.mainEditorCurrentBlockStore),[]),n=(0,r().K8)((()=>{var e;const t=null==o||null===(e=o.getCollectionPointer())||void 0===e?void 0:e.id,i=null==o?void 0:o.isCollectionView();return null!=o&&o.isDefined()?{id:o.id,isCollection:i,collectionId:t}:void 0}),[o]),s=(0,a().IS)((()=>({getNotifiedFor:{padding:18}})),[]);return t&&n&&o?(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)(se().QB,{navigableBlockStore:o,from:"page_updates",buttonPopupStore:Ue().A,style:s.getNotifiedFor}),(0,Qe.jsx)(Ve().A,{navigableBlockStore:o,collectionId:n.collectionId,spaceId:t.id,empty:e,source:"updates_sidebar"},"current-page")]}):null}var Xe=()=>o(99600),Je=()=>o(527580),Ge=()=>o(746084),qe=()=>o(526278),Ze=()=>o(940563),$e=()=>o(568118);const et=(0,b().wt)("mobileTopbarChevronRight",{viewBox:"0 0 26 26",svg:(0,Qe.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Qe.jsx)("path",{d:"M17.6504 13.0001L9.85039 20.8001",strokeWidth:"1.5",strokeLinecap:"round"}),(0,Qe.jsx)("path",{d:"M17.6504 13.0001L9.85039 5.20012",strokeWidth:"1.5",strokeLinecap:"round"})]})});var tt=()=>o(281401);const ot=(0,v().YK)({back:{defaultMessage:"Back",id:"mobile.topbar.back"},forward:{defaultMessage:"Forward",id:"mobile.topbar.forward"}});function it(e){let{supportsNativeHomeTabPhone:t,defaultMobileButtonStyle:o}=e;const i=(0,s().v3)(),n=(0,r().K8)((()=>!t&&!$().UL(i)),[t,i]),{isTablet:l}=(0,s().Y0)(),d=(0,a().DP)(),c=(0,tt().aD)(d),u=(0,v().tz)(),h=(0,ne().X)("tablet_refresh_gate");let g,m;return l&&h?(g=(0,qe().w)({width:24,height:24}),m={...o,fill:c.iconStyle.fill}):(g=(0,$e().y)({width:24,height:24}),m={...o,fill:c.iconStyle.fill}),(0,Qe.jsx)(Ie().A,{onClick:()=>function(e,t){const{mobileNative:o}=e;$().Al(e)||!t||$().UL(e)?P().aX(e):null==o||o.showNativeHomeTab()}(i,t),className:"notion-history-back-button",disabled:n,disabledFeedback:!0,mobileFeedback:!0,style:m,ariaLabel:u.formatMessage(ot.back),children:g})}function nt(e){let{defaultMobileButtonStyle:t}=e;const o=(0,s().v3)(),i=(0,r().K8)((()=>!$().MN(o)),[o]),{isTablet:n}=(0,s().Y0)(),a=(0,ne().X)("tablet_refresh_gate"),l=(0,v().tz)();let d;return d=n&&a?(0,Ze().P)({width:24,height:24}):et({width:24,height:24}),(0,Qe.jsx)(Ie().A,{onClick:()=>{P().sY()},className:"notion-history-forward-button",disabled:i,mobileFeedback:!0,disabledFeedback:!0,style:t,ariaLabel:l.formatMessage(ot.forward),children:d})}const st=function(e){let{supportsNativeHomeTabPhone:t}=e;const{isTablet:o}=(0,s().Y0)(),i=(0,ne().X)("tablet_refresh_gate"),n=(0,a().IS)((e=>({container:t?{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",paddingLeft:4,paddingRight:t||o?0:4}:{display:"flex",flexShrink:0,height:"100%",paddingLeft:4,paddingRight:t||o?0:4},defaultMobileButtonStyle:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:32,stroke:e.icon.primary},tabletRefreshButtonStyle:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:35,stroke:e.icon.primary,strokeWidth:.2}})),[t,o]);return(0,Qe.jsx)(z().A,{capture:!0,render:e=>(0,Qe.jsxs)("div",{style:n.container,...e,children:[(0,Qe.jsx)(it,{supportsNativeHomeTabPhone:t,defaultMobileButtonStyle:o&&i?n.tabletRefreshButtonStyle:n.defaultMobileButtonStyle}),!t&&(0,Qe.jsx)(nt,{defaultMobileButtonStyle:o&&i?n.tabletRefreshButtonStyle:n.defaultMobileButtonStyle})]})})};var rt=()=>o(839003),at=()=>o(813402),lt=()=>o(764172),dt=()=>o(533788),ct=()=>o(618968),ut=()=>o(141333),ht=()=>o(195613),gt=()=>o(126126),mt=()=>o(373156);function pt(e){const t=(0,a().DP)(),o=(0,s().v3)(),{isTablet:n}=(0,s().Y0)(),{shouldShowAddTo:l,routerState:d,store:c,spaceStore:u,spaceViewStore:h,isInvalidPage:g,pageVisitStore:m,presenceStore:p,hideActionButtons:b,showTopPadding:f,isSidebarExpanded:x}=e,[S,v]=(0,i.useState)(!0),[j,y]=(0,i.useState)(0),k=(0,r().K8)((()=>ht().A.state.elementRef??{current:void 0}),[]),w=(0,ut().yE)(k);(0,i.useEffect)((()=>{if(void 0!==w){const e=2;Math.abs(w-j)>e&&(v(w<=j),y(w))}}),[w,j]);const C=(0,r().K8)((()=>Tt({shouldShowAddTo:l,environment:o})),[l,o]),B=(0,r().K8)((()=>{var e;return null===(e=o.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[o.mobileNative]),{isDraftPost:P,isPersonalHome:A,isTeamHome:T,isPosts:M,isMyTasks:I,isFormBlock:K,teamStore:R,canEdit:E,canEditCollection:_,isRestricted:N,shouldShowCancelQuickAdd:H}=(0,r().K8)((()=>c?{isDraftPost:c.isPost()&&!c.isPublishedPost(),isRestricted:c.isRestricted(),canEdit:c.canEdit(),canEditCollection:c.canEditCollection(),shouldShowCancelQuickAdd:kt(l,c),isMyTasks:(0,Q().sj)(c.id),isPersonalHome:(0,ue().lU)(c),isTeamHome:!1,isPosts:!1,isFormBlock:c.isFormBlock(),teamStore:void 0}:{isRestricted:!1,canEdit:!1,canEditCollection:!1,isPersonalHome:!1,isTeamHome:"team"===d.route.name,isPosts:"posts"===d.route.name,isMyTasks:!1,isFormBlock:!1,shouldShowCancelQuickAdd:!1,teamStore:"team"===d.route.name&&u&&Be().sk.createChildStore(u,{table:"team",id:d.route.teamId,spaceId:u.id})}),[c,u,d,l]),L=(0,r().K8)((()=>(0,ge().hK)()),[]);const W=(0,r().K8)((()=>({...Et(l||Boolean(P),o,t,f)})),[o,l,t,f,P]),D=(0,r().K8)((()=>Rt(o)),[o]),z=(0,r().K8)((()=>wt(l,o)),[o,l]),Y=(0,r().K8)((()=>!l&&(!g&&!K)),[l,g,K]),X=(0,r().K8)((()=>(0,te().Es)({blockStore:c})),[c]),J=(0,ne().X)("tablet_refresh_gate"),G=(0,a().IS)((()=>({tabletSidebarButton:{height:24,marginLeft:19,marginRight:17,marginTop:26,marginBottom:21,width:"auto"}})),[]);return!S||M?null:(0,Qe.jsx)("div",{style:W,className:O().byw,children:P&&c?(0,Qe.jsx)(Qt,{store:c}):(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(De().Ye,{alignItems:"center",justifyContent:"flex-start",style:{minWidth:0},children:[D&&!x&&n&&J&&(0,Qe.jsx)(Kt,{defaultMobileButtonStyle:G.tabletSidebarButton}),D&&n&&!J&&(0,Qe.jsx)(It,{}),D&&!n&&(0,Qe.jsx)(It,{}),(0,Qe.jsxs)(U().K,{from:"TopbarMobile.Left",fallback:e=>{let{errorId:t}=e;return(0,Qe.jsx)(V().W,{errorId:t,iconSize:26})},children:[C&&(n||B)&&(0,Qe.jsx)(st,{supportsNativeHomeTabPhone:B}),Y&&c&&(0,Qe.jsx)(zt,{store:c,showingHistoryButtons:C}),Y&&X&&c&&(0,Qe.jsx)(Je().YC,{blockStore:c}),z&&c&&(0,Qe.jsx)(Lt,{store:c})]})]}),(0,Qe.jsx)(De().Ye,{alignItems:"center",justifyContent:"flex-end",children:(0,Qe.jsxs)(U().K,{from:"TopbarMobile.Right",fallback:e=>{let{errorId:t}=e;return(0,Qe.jsx)(V().W,{errorId:t,iconSize:26})},children:[K&&c&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(Le().A,{store:c,removeIfEmpty:!0,style:{fontSize:14,paddingLeft:6}}),(0,Qe.jsx)(We().A,{size:8})]}),_&&n&&c&&(0,Qe.jsx)(Xe().A,{store:c},c.id),(0,Qe.jsx)(dt().A,{}),function(){if(!b)return K?c?(0,Qe.jsx)(F().A,{formBlockStore:c,inPeekMode:!1}):void 0:A&&c?(0,Qe.jsx)(de().J,{store:c,isInvalidPage:Boolean(g)}):T&&R?(0,Qe.jsx)(Me().c,{teamStore:R}):(0,Qe.jsxs)(Qe.Fragment,{children:[N&&n&&!L&&(0,Qe.jsx)(mt().A,{style:{marginRight:8},onClick:()=>he().Tk(o)}),n&&E&&c&&m&&p&&(0,Qe.jsx)(gt().Ay,{rootStore:c,pageVisitStore:m,presenceStore:p}),H?(0,Qe.jsx)(Wt,{}):I&&c?(0,Qe.jsx)(Ct,{store:c,spaceViewStore:h,isInvalidPage:g}):c?(0,Qe.jsx)(Vt,{store:c,spaceStore:u,spaceViewStore:h,isInvalidPage:g,shouldShowAddTo:l}):null]})}()]})})]})})}var bt=()=>o(568394),ft=()=>o(551780);const xt=(0,v().YK)({comments:{id:"topbarMobile.commentsButton.label",defaultMessage:"Comments"}});function St(e,t){(0,Y().vd)(e,"page_creation_topbar_click",t)}function vt(e){const t=(0,s().v3)(),{store:o,banners:n,shouldShowAddTo:a}=e,{device:l}=t,d=(0,r().K8)((()=>o&&(0,q().qb)(t,o)),[t,o]),c=(0,i.useMemo)((()=>new(ye().A)),[]),u=(0,r().K8)((()=>{if(!o)return!1;const e=(o.isLocked()||c.state.justUnlocked)&&o.canEdit();return(!d||o.canEditCollection())&&l.isPhone&&(o.isRestricted()&&!(0,ge().hK)()||e)}),[o,c,d,l]),h=(0,r().K8)((()=>(0,ge().hK)()),[]),g=(0,ne().X)("mobile_topbar_redesign");return(0,Qe.jsx)(z().A,{capture:!0,render:i=>(0,Qe.jsxs)("header",{...i,style:{width:"100%",maxWidth:"100vw",zIndex:100},children:[d&&o?(0,Qe.jsx)(Ht,{store:o,shouldShowAddTo:a,showTopPadding:!0}):g?(0,Qe.jsx)(pt,{...e,showTopPadding:!0}):(0,Qe.jsx)(Yt,{...e,showTopPadding:!0}),u&&o&&(0,Qe.jsx)(_e().l,{label:(0,Qe.jsx)("div",{children:(0,Qe.jsx)(Xe().A,{store:o,lockStore:c},o.id)}),tint:"gray",display:"full-width",actions:o.isRestricted()&&!h?[{label:(0,Qe.jsx)(mt().A,{onClick:()=>he().Tk(t)}),onClick:()=>{}}]:void 0}),n.length>0&&(0,Qe.jsx)(L().x,{banners:n,isMobile:!0,isInPeekRenderer:!1})]})})}function jt(){const e={menuType:J().gu.Modal,title:(0,Qe.jsx)(v().sA,{defaultMessage:"Page Updates",id:"pageUpdatesModal.mobileMenu.title"}),right:(0,Qe.jsx)(Fe().DoneMenuText,{}),onClickRight:()=>Ce().A.setState({open:!1}),whiteBackground:!0},t=(0,r().K8)((()=>Ce().A.state.open),[]);return(0,Qe.jsx)(Ne().Ay,{open:t,popupType:Ke().z7.SlideUp,alignmentToOrigin:Se().C.Start,placementToOrigin:Se().W.Right,onDismiss:()=>Ce().A.setState({open:!1}),originGap:0,isWideTabletWidth:!0,render:()=>(0,Qe.jsx)(Ee().A,{...e,children:(0,Qe.jsx)(Oe,{})}),isFullWidthOnMobile:!0,preventScaleTransition:!0})}function yt(e){const t=e.getParentStore(),{currentSpaceStore:o}=je().default.state;return t instanceof Be().SL&&o&&t.id===o.id}function kt(e,t){return e&&function(e){return e.isEmptyTitle()&&e.isEmptyPage()}(t)}function wt(e,t){return e&&t.device.isMobileNative&&!t.device.isTablet}function Ct(e){let{store:t,spaceViewStore:o,isInvalidPage:i}=e;const n=(0,oe().i0)(t);return i||!o?null:(0,Qe.jsxs)(Qe.Fragment,{children:[!n&&(0,Qe.jsx)(ct().TopbarFavoriteButton,{store:t,spaceViewStore:o}),(0,Qe.jsx)(ce().A,{})]})}function Bt(e){let{store:t,isLastButton:o}=e;return(0,Qe.jsx)(W().u,{store:t,buttonPopupStore:Ae().A,isLastButton:o})}function Pt(e){let{store:t}=e;return(0,Qe.jsx)(D().E,{store:t,buttonPopupStore:Te().A})}function At(e){return(0,ve().T)("supportsNativeHome")&&e.device.isTablet}function Tt(e){const{shouldShowAddTo:t,environment:o}=e,{TabbedRouterStore:i}=o;if(t)return!1;const n=(0,$().UL)(o)||"native"===(0,l().Xz)(i.state).type;return!(0,$().Al)(o)||n}function Mt(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;const{mobileNative:i}=e;return{flexGrow:0,marginLeft:null!=i&&i.supportsNativeHomeOnPhone()?t?0:20:2,overflow:"auto",WebkitOverflowScrolling:"touch",marginRight:o?16:8,height:"100%"}}function It(){const e=(0,s().v3)(),t=(0,r().K8)((()=>(0,be().tv)(e)&&fe().sidebarExpandedStore.state),[e]);return(0,Qe.jsxs)(Ie().A,{mobileFeedback:!0,style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,height:"100%",width:36,marginLeft:4},onClick:()=>{var t;if(At(e))null===(t=e.mobileNative)||void 0===t||t.toggleNativeHome();else if((0,be().tv)(e))pe().setExpand({environment:e,isExpanded:!fe().sidebarExpandedStore.state,from:"topbar_mobile",saveDetailsSidebarPreference:!0});else{var o;const{NativeMobileActionBarStore:t}=e,i=t?null===(o=t.state.menu)||void 0===o?void 0:o.type:void 0;"editing"===Pe().default.state.mode||void 0!==i?(I().clear({environment:e}),null==t||t.clear(!1),ke().A.onHide((()=>{n().default.afterNextFlush((()=>pe().open({fromElectron:!1})))}))):pe().open({fromElectron:!1})}y().gS(e)},children:[(0,m().a)({width:18,height:18}),t?(0,Qe.jsx)(ze().A,{color:ze().g.Red,style:{position:"absolute",top:9,right:1},count:0}):(0,Qe.jsx)(se().Wt,{type:e.device.isMobileBrowser?"allSpaces":"otherSpaces",color:ze().g.Red,style:{position:"absolute",top:9,right:1}})]})}function Kt(e){let{defaultMobileButtonStyle:t}=e;const o=(0,s().v3)(),i={...t,fill:(0,a().IS)((e=>({iconStyle:(0,tt().aD)(e).iconStyle,iconContainer:(0,tt().aD)(e).iconContainer})),[]).iconStyle.fill};return(0,Qe.jsx)(Ie().A,{mobileFeedback:!0,style:i,onClick:()=>{var e;if(At(o))null===(e=o.mobileNative)||void 0===e||e.toggleNativeHome();else if((0,be().tv)(o))pe().setExpand({environment:o,isExpanded:!fe().sidebarExpandedStore.state,from:"topbar_mobile",saveDetailsSidebarPreference:!0});else{var t;const{NativeMobileActionBarStore:e}=o,i=e?null===(t=e.state.menu)||void 0===t?void 0:t.type:void 0;"editing"===Pe().default.state.mode||void 0!==i?(I().clear({environment:o}),null==e||e.clear(!1),ke().A.onHide((()=>{n().default.afterNextFlush((()=>pe().open({fromElectron:!1})))}))):pe().open({fromElectron:!1})}y().gS(o)},children:(0,p().b)()})}function Rt(e){return At(e)||!(0,ve().T)("supportsNativeHome")}function Et(e,t,o,i){const{WindowSizeStore:n}=t;let s=`0 ${1/(window.devicePixelRatio||1)}px 0 ${o.regularDividerColor}`;return((0,X().Id)(t)||e)&&(s=void 0),{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100vw",height:d().s1,marginTop:i?n.state.paddingTopCSS:0,paddingLeft:n.getSafePaddingLeftCSS(0),paddingRight:e?n.getSafePaddingRightCSS(0):n.getSafePaddingRightCSS(7),boxShadow:s,background:o.contentBackground,transition:"box-shadow 300ms",WebkitUserSelect:"none",cursor:"pointer"}}function Ft(e){T().IU({environment:e})}function _t(e,t){const o=je().default.state.mainEditorCurrentBlockStore,i=we().Ay.state.lastPageId;if(o){var n;const s=null===(n=e.mobileNative)||void 0===n?void 0:n.supportsNativeHomeOnPhone();s?A().navigateToHomeTab(e):i?B().uK({environment:e,store:Be().Bv.createChildStore(o,{table:S().ev,id:i}),showMoveTo:!1,saveParent:!1,redirect:s,pageVisitSource:c().y8.BackForward}):P().oo({environment:e,url:x().JZ.root,redirect:!0}),t.isMobileHorizon1QuickCapture&&St(e,{action:"cancel"}),K().createAndCommit({userAction:"TopbarMobile.handleCancelQuickAdd",environment:e,canUndo:!0,perform:t=>{R().oD({environment:e,blocks:[o],transaction:t}),t.postSubmitCallbacks.push((t=>{t||(0,w().N)(e,{analyticsName:"delete",from:"mobile_topbar",block_id:o.id,block_type:"page"})}))}})}}async function Nt(e,t){await C().LP({environment:t,blocks:[e],moveToContext:"quick_add",onAccept:e=>function(e){y().l7(e)}(t),isAddTo:!0,isDefaultPrivateLocation:yt(e)})}function Ht(e){let{store:t,shouldShowAddTo:o,showTopPadding:n}=e;const l=(0,a().DP)(),d=(0,s().v3)(),u=(0,s().Y0)(),h=Boolean(d.currentUser.isLoggedIn()||d.publicDomainUserId),g=(0,r().K8)((()=>!(0,me().y)(d)&&d.currentUser.isLoggedIn()),[d]),m=u.isTablet,p=(0,r().K8)((()=>Et(o,d,l,n)),[d,o,l,n]),b=(0,r().K8)((()=>Mt(d,!0,m)),[d,m]);return(0,Qe.jsxs)("div",{onClick:()=>Ft(d),style:p,className:O().byw,children:[g&&(0,Qe.jsxs)(i.Fragment,{children:[(0,Qe.jsx)(Ie().A,{style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:14,paddingRight:14,fontWeight:j().Wy.medium,color:l.regularTextColor,whiteSpace:"nowrap"},mobileFeedback:!0,onClick:()=>function(e){const{currentUserRootStore:t,currentUserSettingsStore:o}=je().default.state;t&&o&&M().t9({environment:e,userRootStore:t,userSettingsStore:o,pageVisitSource:c().y8.SwitchSpace})}(d),children:(0,Qe.jsx)(v().sA,{defaultMessage:"Back",id:"topbarMobile.backButton.label"})}),(0,Qe.jsx)("div",{style:{height:18,width:1,flexShrink:0,marginRight:6,background:l.darkDividerColor}})]}),(0,Qe.jsx)(E().oK,{store:t,style:b,maxAncestorCount:1,showCurrentPageControls:!1,ancestorMaxWidth:100,currentPageMaxWidth:220,isMobile:!0}),(0,Qe.jsxs)(De().Ye,{alignItems:"center",children:[!h&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(rt().S,{store:t}),(0,Qe.jsx)(We().A,{size:8})]}),(0,Qe.jsx)(Ge().A,{store:t,buttonPopupStore:Ae().A,useEllipsisIcon:!h})]})]})}function Lt(e){let{store:t}=e;const o=(0,s().v3)(),i=(0,r().K8)((()=>t.getParentStore()),[t]),n=(0,r().K8)((()=>yt(t)),[t]),l=(0,r().K8)((()=>(null==i?void 0:i.table)===S().ev&&i.isEmptyPage()),[i]),d=(0,r().K8)((()=>!i||!(0,Z().D_)(i)||i instanceof Be().pS?void 0:i.getIcon()),[i]),c=(0,r().K8)((()=>i instanceof Be().SL?(0,ee().GK)(o,i):void 0),[o,i]),u=(0,a().IS)((e=>({folderIcon:{width:16,color:e.icon.primary},folderIconContainer:{height:32,width:32,backgroundColor:e.tint.regular,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:4},filingButton:{display:"flex",alignItems:"center",paddingLeft:20,paddingRight:12,fontSize:j().J.UIRegular.mobile,fontWeight:j().Wy.medium,lineHeight:j().K_.UIRegular.mobile,whiteSpace:"nowrap",minWidth:0,color:e.text.primary}})),[]);return i&&(0,Z().D_)(i)?n?(0,Qe.jsxs)(Ie().A,{mobileFeedback:!0,style:u.filingButton,onClick:()=>Nt(t,o),children:[(0,Qe.jsx)("div",{style:{marginRight:8,...u.folderIconContainer},children:(0,g().E)(u.folderIcon)}),(0,Qe.jsx)(v().sA,{defaultMessage:"Private",id:"topbarMobile.filingPrivateSectionButton.label"})]}):(0,Qe.jsxs)(Ie().A,{mobileFeedback:!0,style:u.filingButton,onClick:()=>Nt(t,o),children:[(0,Qe.jsx)(He().A,{disabled:!0,icon:d,isEmptyPage:l,title:c,size:24,style:{marginRight:8}}),(0,Qe.jsx)(Le().A,{store:i})]}):null}function Wt(){const e=(0,s().v3)(),t=(0,v().tz)(),o=(0,a().IS)((e=>({iconButton:{background:e.tint.regular,marginRight:20,borderRadius:16,width:32,height:32}})),[]);return(0,Qe.jsx)(Re().A,{icon:e=>(0,u().u)({width:20,height:20}),style:o.iconButton,isDarkIconColor:!0,onClick:t=>_t(e,{isMobileHorizon1QuickCapture:!0}),ariaLabel:t.formatMessage({defaultMessage:"Close",id:"topbarMobile.closeButton.label"})})}function Dt(){const e=(0,s().v3)(),t=(0,a().IS)((e=>({doneButton:{display:"flex",alignItems:"center",height:32,paddingLeft:12,paddingRight:12,marginLeft:2,marginRight:16,fontWeight:j().Wy.medium,color:e.text.primary,background:e.tint.regular,borderRadius:16}})),[]);return(0,Qe.jsx)(Ie().A,{mobileFeedback:!0,style:t.doneButton,onClick:t=>function(e,t){const o=je().default.state.mainEditorCurrentBlockStore,i=we().Ay.state.lastPageId;if(o){var n;const e=null===(n=t.mobileNative)||void 0===n?void 0:n.supportsNativeHomeOnPhone();e?A().navigateToHomeTab(t):i?B().uK({environment:t,store:Be().Bv.createChildStore(o,{table:S().ev,id:i}),showMoveTo:!1,saveParent:!1,redirect:e,pageVisitSource:c().y8.BackForward}):P().oo({environment:t,url:x().JZ.root,redirect:!0}),St(t,{action:"done"})}}(0,e),children:(0,Qe.jsx)(v().sA,{defaultMessage:"Done",id:"topbarMobile.doneQuickAddButton.label"})})}function zt(e){let{showingHistoryButtons:t=!0,store:o}=e;const i=(0,s().v3)(),n=(0,s().Y0)().isTablet,a=(0,r().K8)((()=>Mt(i,t,n)),[i,n,t]);return(0,Qe.jsx)(E().oK,{store:o,style:a,maxAncestorCount:n?2:1,showCurrentPageControls:!1,ancestorMaxWidth:n?160:100,currentPageMaxWidth:n?240:220,isMobile:!0})}function Ut(e){let{shouldShowCommentsIndicator:t,store:o}=e;const n=(0,v().tz)(),l=(0,s().v3)(),d=(0,a().IS)((e=>({iconStyle:(0,tt().aD)(e).iconStyle,iconContainer:(0,tt().aD)(e).iconContainer})),[]),c=(0,r().K8)((()=>xe().A.state.open),[]),[u,g]=(0,i.useState)(Date.now());(0,i.useEffect)((()=>{c&&g(Date.now())}),[c]);const{value:m}=(0,ie().fJ)(_().commentsDependency),p=(0,r().K8)((()=>!!m&&(0,N().getDiscussions)(o).length>0),[m,o]),b={position:"relative",height:"100%"},f=(0,i.useCallback)((()=>{(0,Y().u4)({environment:l,event:{eventName:"topbar_comments_menu_click",eventProperties:{has_discussions:p,has_unread_indicator:t}}})}),[l,p,t]),x=(0,ne().X)("comment_sidebar_for_you"),S=(0,r().K8)((()=>je().default.state.mainEditorCurrentBlockStore),[]);return(0,Qe.jsx)(Ke().Ay,{buttonPopupStore:xe().A,popupType:x?Ke().z7.BottomSheet:Ke().z7.SlideUp,alignmentToOrigin:Se().C.Start,placementToOrigin:Se().W.Right,originGap:0,stopClickPropagation:!0,isWideTabletWidth:!0,render:e=>x?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(le().ze,{navigableBlockStore:S}),S&&(0,Qe.jsx)(ae().B,{navigableBlockStore:S,timeViewed:u})]}):(0,Qe.jsx)(re().R,{timeViewed:u,location:"popup",onMobileClose:()=>e.close()}),isFullWidthOnMobile:!0,preventScaleTransition:!0,onClick:f,renderOrigin:e=>(0,Qe.jsxs)("div",{style:b,children:[(0,Qe.jsx)(Re().A,{icon:h().h,iconStyle:d.iconStyle,ariaLabel:n.formatMessage(xt.comments),isDarkIconColor:!0,style:d.iconContainer,mobileFeedback:!0,...e}),t&&(0,Qe.jsx)(lt().tS,{})]})})}function Vt(e){let{store:t,spaceStore:o,spaceViewStore:n,isInvalidPage:a,shouldShowAddTo:l}=e;const d=(0,s().v3)(),{isTablet:c}=(0,s().Y0)(),u=(0,ne().X)("tablet_refresh_gate"),{value:h}=(0,ie().fJ)(_().commentsDependency),g=(0,r().K8)((()=>{if(!h)return!1;const{discussionViewActions:e,discussionHelpers:{getAndSortCommentStoresByTime:o}}=h;return(0,N().getDiscussions)(t).some((t=>!t.getResolved()&&o(t).some((o=>e.isCommentUnread({discussionStore:t,commentStore:o})))))}),[h,t]),m=(0,r().K8)((()=>Boolean(o&&!o.canEdit())),[o]),p=(0,r().K8)((()=>t.canEdit()),[t]),b=(0,r().K8)((()=>t.isFormBlock()),[t]),f=(0,r().K8)((()=>t.isPersonProfile()),[t]),x=(0,at().shouldShowTopbarShareMenu)({isSpaceGuest:m,canEditPage:p,isPersonalHomePage:!1,isPersonProfile:f,isFormBlock:b,isTranslated:!1}),S=(0,r().K8)((()=>(0,at().shouldShowTopbarUpdatesMenu)({canEditPage:p,device:d.device,isPersonalHomePage:!1,isFormBlock:!1,isTranslated:!1})),[p,d.device]),v=(0,r().K8)((()=>H().A.state.open),[]),j=(0,r().K8)((()=>!l&&(!t.isCollectionView()||t.isCollectionViewPageWithContent())&&!b&&!f),[b,l,t,f]),y=!b,w=g||v;return a?null:(0,Qe.jsxs)(i.Fragment,{children:[c&&(0,Qe.jsx)("div",{style:{width:16}}),(0,Qe.jsx)(jt,{}),x&&(0,Qe.jsx)(Pt,{store:t}),j&&(0,Qe.jsx)(Ut,{shouldShowCommentsIndicator:w,store:t}),c&&u&&(0,Qe.jsx)(ct().TopbarFavoriteButton,{store:t,spaceViewStore:n,isTablet:c}),S&&(0,Qe.jsx)(bt().aU,{onClick:()=>function(e){Ce().A.setState({open:!0}),k().nW(e)}(d)}),y&&(0,Qe.jsx)(Bt,{store:t,isLastButton:!l}),l&&(0,Qe.jsx)(Dt,{}),(0,Qe.jsx)("div",{style:{width:4}})]})}function Yt(e){const t=(0,a().DP)(),o=(0,s().v3)(),{isTablet:i}=(0,s().Y0)(),{shouldShowAddTo:n,routerState:l,store:d,spaceStore:c,spaceViewStore:u,isInvalidPage:h,pageVisitStore:g,presenceStore:m,hideActionButtons:p,showTopPadding:f,isSidebarExpanded:x}=e,S=(0,r().K8)((()=>Tt({shouldShowAddTo:n,environment:o})),[n,o]),v=(0,r().K8)((()=>{var e;return null===(e=o.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[o.mobileNative]),{isDraftPost:j,isPersonalHome:y,isTeamHome:k,isPosts:w,isMyTasks:C,isFormBlock:B,teamStore:P,canEdit:A,canEditCollection:T,isRestricted:M,shouldShowCancelQuickAdd:I}=(0,r().K8)((()=>d?{isDraftPost:d.isPost()&&!d.isPublishedPost(),isRestricted:d.isRestricted(),canEdit:d.canEdit(),canEditCollection:d.canEditCollection(),shouldShowCancelQuickAdd:kt(n,d),isMyTasks:(0,Q().sj)(d.id),isPersonalHome:(0,ue().lU)(d),isTeamHome:!1,isFormBlock:d.isFormBlock(),teamStore:void 0,isPosts:!1}:{isRestricted:!1,canEdit:!1,canEditCollection:!1,isPersonalHome:!1,isTeamHome:"team"===l.route.name,isPosts:"posts"===l.route.name,isMyTasks:!1,isFormBlock:!1,shouldShowCancelQuickAdd:!1,teamStore:"team"===l.route.name&&c&&Be().sk.createChildStore(c,{table:"team",id:l.route.teamId,spaceId:c.id})}),[d,c,l,n]),K=(0,r().K8)((()=>(0,ge().hK)()),[]);const R=(0,r().K8)((()=>Et(n||Boolean(j),o,t,f)),[o,n,t,f,j]),E=(0,r().K8)((()=>Rt(o)),[o]),_=(0,r().K8)((()=>wt(n,o)),[o,n]),N=(0,r().K8)((()=>!n&&(!h&&!B)),[n,h,B]),H=(0,r().K8)((()=>(0,te().Es)({blockStore:d})),[d]),L=(0,ne().X)("tablet_refresh_gate"),W=(0,a().IS)((()=>({tabletSidebarButton:{height:b().lD.lg,width:b().lD.lg,marginLeft:19,marginRight:14,marginTop:20,marginBottom:21,stroke:t.icon.primary,strokeWidth:.02}})),[t.icon.primary]);return w?null:(0,Qe.jsx)("div",{onClick:()=>Ft(o),style:R,className:O().byw,children:j&&d?(0,Qe.jsx)(Qt,{store:d}):(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(De().Ye,{alignItems:"center",justifyContent:"flex-start",style:{minWidth:0},children:[E&&!x&&i&&L&&(0,Qe.jsx)(Kt,{defaultMobileButtonStyle:W.tabletSidebarButton}),E&&i&&!L&&(0,Qe.jsx)(It,{}),E&&!i&&(0,Qe.jsx)(It,{}),(0,Qe.jsxs)(U().K,{from:"TopbarMobile.Left",fallback:e=>{let{errorId:t}=e;return(0,Qe.jsx)(V().W,{errorId:t,iconSize:26})},children:[S&&(i||v)&&(0,Qe.jsx)(st,{supportsNativeHomeTabPhone:v}),N&&d&&(0,Qe.jsx)(zt,{store:d,showingHistoryButtons:S}),N&&H&&d&&(0,Qe.jsx)(Je().YC,{blockStore:d}),_&&d&&(0,Qe.jsx)(Lt,{store:d})]})]}),(0,Qe.jsx)(De().Ye,{alignItems:"center",justifyContent:"flex-end",children:(0,Qe.jsxs)(U().K,{from:"TopbarMobile.Right",fallback:e=>{let{errorId:t}=e;return(0,Qe.jsx)(V().W,{errorId:t,iconSize:26})},children:[B&&d&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(Le().A,{store:d,removeIfEmpty:!0,style:{fontSize:14,paddingLeft:6}}),(0,Qe.jsx)(We().A,{size:8})]}),T&&i&&d&&(0,Qe.jsx)(Xe().A,{store:d},d.id),(0,Qe.jsx)(dt().A,{}),function(){if(!p)return B?d?(0,Qe.jsx)(F().A,{formBlockStore:d,inPeekMode:!1}):void 0:y&&d?(0,Qe.jsx)(de().J,{store:d,isInvalidPage:Boolean(h)}):k&&P?(0,Qe.jsx)(Me().c,{teamStore:P}):(0,Qe.jsxs)(Qe.Fragment,{children:[M&&i&&!K&&(0,Qe.jsx)(mt().A,{style:{marginRight:8},onClick:()=>he().Tk(o)}),i&&A&&d&&g&&m&&(0,Qe.jsx)(gt().Ay,{rootStore:d,pageVisitStore:g,presenceStore:m}),I?(0,Qe.jsx)(Wt,{}):C&&d?(0,Qe.jsx)(Ct,{store:d,spaceViewStore:u,isInvalidPage:h}):d?(0,Qe.jsx)(Vt,{store:d,spaceStore:c,spaceViewStore:u,isInvalidPage:h,shouldShowAddTo:n}):null]})}()]})})]})})}function Qt(e){const{store:t}=e,o=(0,s().v3)(),n=(0,v().tz)(),r=(0,i.useCallback)((()=>{if(!t)return;const e=(0,G().Uo)(t);e&&P().oo({environment:o,url:(0,f().a)({teamId:e.id})})}),[o,t]),l=(0,a().IS)((e=>({doneButton:{display:"flex",alignItems:"center",height:32,paddingLeft:12,paddingRight:12,marginRight:16,fontWeight:j().Wy.medium,color:e.text.primary,background:e.tint.regular,borderRadius:16},iconButton:{marginLeft:16,background:e.tint.regular,borderRadius:16,width:32,height:32},rightButtons:{display:"flex",alignItems:"center"}})),[]);return(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(Re().A,{icon:()=>(0,u().u)({width:20,height:20}),style:l.iconButton,isDarkIconColor:!0,onClick:r,ariaLabel:n.formatMessage({defaultMessage:"Close",id:"topbarMobile.closeButton.label"})}),(0,Qe.jsxs)("div",{style:l.rightButtons,children:[(0,Qe.jsx)(Pt,{store:t}),(0,Qe.jsx)(Bt,{store:t,isLastButton:!1}),(0,Qe.jsx)(ft().F,{store:t})]})]})}},526278:(e,t,o)=>{o.d(t,{w:()=>n});o(296540);const i={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M2.411 9.79a.6.6 0 0 1 .147-.232l5.4-5.4a.625.625 0 1 1 .884.884L4.509 9.375H17a.625.625 0 1 1 0 1.25H4.509l4.333 4.333a.625.625 0 1 1-.884.884l-5.4-5.4a.62.62 0 0 1-.147-.651"})},n=(0,o(340498).wt)("arrowStraightLeft",i)},577009:(e,t,o)=>{o.d(t,{QB:()=>s,hR:()=>d,pT:()=>l,JN:()=>u,i8:()=>r,Wt:()=>c,Sx:()=>a});var i=()=>o(645873);const n=new(i().O2)("notifications",(()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(62475),o.e(3151),o.e(98629),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(38664),o.e(24587),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(28721),o.e(3560),o.e(32690),o.e(72365),o.e(69663),o.e(6893)]).then(o.bind(o,262056)))),s=(0,i()._h)(n,(e=>e.GetNotifiedFor)),r=(0,i()._h)(n,(e=>e.TopbarUpdatesMenu)),a=(0,i()._h)(n,(e=>e.UpdateSidebar)),l=(0,i()._h)(n,(e=>e.MobileInboxPopup)),d=(0,i()._h)(n,(e=>e.InboxActionsMenu)),c=((0,i()._h)(n,(e=>e.InboxFilterForUnreadButton)),(0,i()._h)(n,(e=>e.InboxMentionsActionButtons)),(0,i()._h)(n,(e=>e.InboxNotificationSettingsButton)),(0,i()._h)(n,(e=>e.InboxRefreshAllTabButton)),(0,i()._h)(n,(e=>e.NotificationGroupActionsMenu)),(0,i()._h)(n,(e=>e.UnreadMentionsBadge))),u=(0,i()._h)(n,(e=>e.NotificationInboxPanelContent))}}]);