"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[62620,71204],{42120:(e,t,n)=>{n.d(t,{Dl:()=>ee,U2:()=>Y,Zk:()=>te,_R:()=>z,bE:()=>ne,c:()=>G,cJ:()=>Q,eN:()=>$,e_:()=>q,g4:()=>K,qy:()=>X});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(803949),n(581454),n(737550);var o=()=>n(244641),r=()=>n(584262),i=()=>n(66689),a=()=>n(890409),s=()=>n(970013),c=()=>n(597777),l=()=>n(604995),d=()=>n(206267),u=()=>n(433847),p=()=>n(912720),m=()=>n(199378),f=()=>n(179034),v=()=>n(519831),g=()=>n(96689),S=()=>n(854150),y=()=>n(950914),w=()=>n(864779),C=()=>n(919709),_=()=>n(374562),h=()=>n(313892),k=()=>n(813297),A=()=>n(465364),b=()=>n(654062),x=()=>n(601734),T=()=>n(989423),M=()=>n(594794),R=()=>n(972435),V=()=>n(351360),I=()=>n(630116),D=()=>n(908447),E=()=>n(966759),B=()=>n(449506),F=()=>n(235191),j=()=>n(686526),N=()=>n(896628),H=()=>n(246826),L=()=>n(867201),U=()=>n(317909),O=()=>n(345913),P=()=>n(755199);const W="week";function z(e){var t;const{environment:n,transaction:o,tasksBlockStore:r,sprintsBlockStore:i}=e,a=null===(t=i.getFormat())||void 0===t?void 0:t.collection_pointer,s=r.getFormat().collection_pointer;if(!a||!s)return;const c=I().md.createChildStore(i,a),l=c.getRole()??"none";if(!(0,u().q_)(l,"editor"))return;c.getAutomationStores().some((e=>e.isCompleteSprintAutomation()))||Z({environment:n,transaction:o,sprintCollectionStore:c,taskCollectionStore:I().md.createChildStore(r,s),sprintSettingsConfig:y().AL})}function Z(e){const{environment:t,sprintSettingsConfig:n,transaction:o,sprintCollectionStore:r,taskCollectionStore:i}=e,a=r.getSpaceId(),s=(0,M().Z1)({environment:t,table:p().yB,spaceId:a}),c=(0,M().Z1)({environment:t,table:m().SC,spaceId:a});H().eC({environment:t,table:p().yB,inMemoryRecordCache:r.inMemoryRecordCache,value:{id:s,parent_id:r.id,parent_table:r.table,alive:!0,space_id:a,status:n.autoCompleteSprints?"active":"disabled",trigger:{id:d().JW(),type:"recurrence",recurrence:re(n)},action_ids:[c]},transaction:o}),N().zA({stores:[r],update:{automation_ids:[...r.getFormat().automation_ids??[],s]},transaction:o}),H().eC({environment:t,table:m().SC,inMemoryRecordCache:r.inMemoryRecordCache,transaction:o,value:{id:c,parent_id:s,parent_table:p().yB,type:"complete_sprint",alive:!0,space_id:a,config:{sprint_collection:r.getSpaceShardedPointer(),task_collection:i.getSpaceShardedPointer(),complete_sprint_action:n.actionConfig.complete_sprint_action}}})}function q(e){const{environment:t,automationStore:n,transaction:o,newDuration:r,currentSprintBlockStore:i}=e;H().zv({store:n.getTriggerStore().getKeyStore("recurrence"),data:{interval:r},transaction:o}),J({environment:t,transaction:o,automationStore:n,currentSprintBlockStore:i})}function K(e){const{environment:t,automationStore:n,transaction:o,newWeekday:r,currentSprintBlockStore:i}=e;H().zv({store:n.getTriggerStore().getKeyStore("recurrence"),data:{weekdays:[r]},transaction:o}),J({environment:t,transaction:o,automationStore:n,currentSprintBlockStore:i})}function Y(e){const{environment:t,actionStore:n,automationStore:o,transaction:r,newAutocompleteStatus:i,currentSprintBlockStore:s}=e;H().zv({store:o,data:{status:i?"active":"disabled"},transaction:r}),J({environment:t,transaction:r,automationStore:o,currentSprintBlockStore:s});const c=o.getParentPointer();if(!c||c.table!==v().Vl)return;const l=(0,T().ik)(t),d={automation_id:o.id,automation_actions:[{automation_action_id:n.id,type:"complete_sprint"}],automation_triggers:[{type:"recurrence"}],collection_id:c.id};i?(0,a().Ah)(l,d):(0,a().vN)(l,d)}function J(e){const{automationStore:t,currentSprintBlockStore:n,transaction:r,environment:a}=e;if(!t.isActive())return;const s=t.getRecurrence();if(!s)return;const l=(0,w().Vv)(s);if(!l)return;const d=n.getPropertyValue(i().Hx.Dates);if(!d)return;const u=(0,C().Cok)(d)[0];if(!u||"daterange"!==u.type)return;const p=u.start_date,{start_date:m,end_date:f}=(0,w().Me)({currentSprintStartDate:p,sprintSchedule:l});H().zv({store:t.getTriggerStore().getKeyStore("recurrence"),data:{start_date:(0,c().Rz)(o().c9.fromISO(m).plus({minutes:1}).toJSDate())},transaction:r}),A().D5({store:n,propertyId:i().Hx.Dates,transaction:r,environment:a,type:"dateValue",dateValue:{type:"daterange",start_date:p,end_date:f}})}function X(e){const{transaction:t,newRemainingTasksBehavior:n,actionStore:o}=e;H().zv({store:o.getConfigStore(),data:{complete_sprint_action:n},transaction:t})}async function G(e){var t;const{appTemplatesSetupActions:n,appTemplatesSprintBoardActions:o,appConfigs:a}=await x().Aw.load(),{environment:s,collectionContextStore:c,from:l}=e,{currentSpaceViewStore:d}=V().default.state,u=c.collectionStore(),p=null==u?void 0:u.getParentBlockStore(),m=null==p?void 0:p.getParentStore(),v=null==u||null===(t=u.getFormat())||void 0===t?void 0:t.app_config_uri,y=v&&(0,h().lS)(a(),v);if(!u||!p||!m||!d||m.table!==g().NX&&m.table!==f().ev&&m.table!==S().yK||!y)return;const w=p.getFormat().app_id,C=w?await B().callApi({eventName:"getCollectionViewBlocksByAppId",environment:s,data:{spaceId:p.getSpaceId(),appId:w}}):void 0,k="success"===(null==C?void 0:C.type)&&C.data.result.length?C.data.result.map((e=>I().Bv.createChildStore(m,{table:f().ev,id:e.blockId,spaceId:p.getSpaceId()}))):[p];await oe({environment:s,taskCollectionStore:u,executeFn:()=>{const e=U().createAndCommit({userAction:"sprintSettingsActions.handleTurnOnSprints",environment:s,canUndo:!0,perform:e=>{const t=(0,_().We)(),r=n.applyTypedFeatures({environment:s,spaceViewStore:d,appParentStore:m,appUri:y.uri,features:[{type:"simple",featureUri:t.uri}],transaction:e,createOrModify:"modify",appCollectionViewBlockStores:k}),a=o.createSprintPage({environment:s,spaceViewStore:d,appParentStore:m,transaction:e,blockStores:r,creationEntryPoint:{type:"sprint_settings"}});if(j().os({collectionSettingsStore:c.settingsStore}),!a)return;const u=l?{feature:{id:i().yx.TaskToSprintRelation,from:l,type:"notion://projects/tasks_with_sprints_feature"}}:{};return(0,D().Z)({environment:s,collectionContextStore:c,from:"view_settings",property:i().yx.TaskToSprintRelation,property_type:"relation",is_suggested_property:!0,...u}),a}});e.serverCommitResult.then((()=>{const t=e.performResult;t&&L().Y({environment:s,store:t,pageVisitSource:r().y8.Create})}))}})}async function $(e){const{environment:t,collectionContextStore:n,sprintSettingsContext:o,sprintBoardViewBlockIds:a}=e,{sprintCollectionStore:s,automationContext:c,currentCollectionViewBlockStore:l,sprintCollectionViewBlockStore:d,taskCollectionStore:u,taskCollectionViewBlockStore:p}=o;if(!s||!d||!c)return;const m=p.getSpaceId(),v=[d,...a.map((e=>new(I().Bv)(t,{id:e,table:f().ev,spaceId:m})))];l.id===p.id?j().os({collectionSettingsStore:n.settingsStore}):L().Y({environment:t,store:p,pageVisitSource:r().y8.LeaveOrRemove});const{automationActions:g}=await k().QV.automations.load(),{automationStore:S}=c;await oe({environment:t,taskCollectionStore:u,executeFn:()=>{U().createAndCommit({userAction:"sprintSettingsActions.handleTurnOffSprints",environment:t,canUndo:!0,perform:e=>{!function(e){const{transaction:t,blocksToDelete:n,environment:o,taskCollectionStore:r,sprintCollectionStore:a}=e;H().zv({store:a,transaction:t,data:{alive:!1}}),F().BJ({environment:o,collectionStore:r,schema:r.getSchema(),property:i().yx.TaskToSprintRelation,transaction:t,permanentlyDelete:!0}),O().oD({environment:o,blocks:n,transaction:t,permanentlyDelete:!0})}({environment:t,transaction:e,blocksToDelete:v,sprintCollectionStore:s,taskCollectionStore:u}),g.disableAutomation({automationStore:S,environment:t,transaction:e}),g.deleteAutomation({automationStore:S,environment:t,transaction:e})}}),(0,E().i)({environment:t,collectionContextStore:n,property_type:"relation",from:"view_settings",property:i().yx.TaskToSprintRelation})}})}function Q(e){const{environment:t,userSettingsStore:n}=e;U().createAndCommit({userAction:"sprintSettingsActions.handleSeenSprintsEngagementBanner",environment:t,canUndo:!0,perform:e=>{P().mJ({userSettingsStore:n,data:{seen_sprint_settings_engagement_banner:!0},transaction:e})}})}function ee(e){e.settingsStore.setState({open:!0,stack:[{type:"main"},{type:"sprintSettings"}]})}function te(e){const{environment:t,collectionContextStore:n,currentViewBlockStore:o,taskCollectionViewBlockStore:r}=e,a=n.collectionViewStore();if(!a)return;const s=a.getFormat(),c=a.getRawQuery();U().createAndCommit({userAction:"sprintSettingsActions.handleManageSprintFromThisView",environment:t,canUndo:!0,perform:e=>{if((0,b().F)({collectionViewStore:a,transaction:e,update:{name:R().A.formatMessage(_().DZ.tasksCurrentSprintV2ViewName),query2:{...c,filter:void 0},format:{...s,collection_view_icon:"/icons/playback-play-button_gray.svg",property_filters:_().Wo,app_config_uri:i().Lu,hide_linked_collection_name:!0}}}),o.id===r.id){var t;const n=(null===(t=o.getFormat())||void 0===t?void 0:t.app_uri_map)??{},c=s.app_config_uri;c&&delete n[c],N().zA({stores:[r],update:{app_uri_map:{...n,[i().Lu]:a.id}},transaction:e})}}})}function ne(e){const{environment:t,sprintSettingsContext:n}=e;if(!n)return;const o=n.sprintCollectionStore,r=(null==o?void 0:o.getRole())??"none";o&&(0,u().q_)(r,"editor")&&n.automationContextLoaded&&!n.automationContext&&U().createAndCommit({userAction:"sprintSettingsActions.ensureCompleteSprintAutomation",environment:t,canUndo:!0,perform:e=>{Z({environment:t,transaction:e,sprintCollectionStore:o,taskCollectionStore:n.taskCollectionStore,sprintSettingsConfig:y().AL})}})}async function oe(e){const{executeFn:t,environment:n,taskCollectionStore:o}=e;await async function(e){var t;const{environment:n,taskCollectionStore:o}=e,r=o.getFormat().app_uri_map,a=i().yx.TaskToSprintRelation,c=o.getSchema(),l=(null==r?void 0:r[a])??a,d=c[l];if(!d||!(0,s().nC)(d))return;const u=null===(t=(0,s().Nv)(d))||void 0===t?void 0:t.id;if(!u)return;const p=new Set([l]);Object.entries(c).forEach((e=>{var t;let[n,o]=e;o&&(0,s().nC)(o)&&(null===(t=(0,s().Nv)(o))||void 0===t?void 0:t.id)===u&&p.add(n)}));const{serverCommitResult:m}=U().createAndCommit({userAction:"sprintSettingsActions.clearSprintRelationDataFromTaskCollection",environment:n,canUndo:!0,perform:e=>{for(const t of p)F().BJ({environment:n,transaction:e,permanentlyDelete:!0,collectionStore:o,schema:c,property:t});null==r||delete r[a],r&&N().zA({stores:[o],transaction:e,update:{app_uri_map:r}})}});await m}({environment:n,taskCollectionStore:o}),t()}function re(e){return{frequency:W,interval:e.recurrenceConfig.interval,weekdays:e.recurrenceConfig.weekdays,start_date:(0,c().Rz)(o().c9.local().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate()),timezone:(0,l().dB)(),hour:0,minute:0}}},93709:(e,t,n)=>{n.r(t),n.d(t,{CollectionNewViewsPopupComponent:()=>P});n(898992),n(354520),n(581454);var o=n(296540),r=()=>n(484714),i=()=>n(56366),a=()=>n(401497),s=()=>n(663077),c=()=>n(568625),l=()=>n(617668),d=()=>n(959013),u=()=>n(154017),p=()=>n(317909),m=()=>n(767435),f=()=>n(617254),v=()=>n(313892),g=()=>n(94778),S=()=>n(760217),y=()=>n(297872),w=()=>n(928600),C=()=>n(939740),_=()=>n(45552),h=()=>n(8980),k=()=>n(89924),A=()=>n(859428),b=()=>n(972435),x=()=>n(722872),T=()=>n(962730),M=()=>n(351360),R=()=>n(44750),V=()=>n(902842),I=()=>n(913454),D=()=>n(393695),E=()=>n(759709),B=()=>n(423938),F=()=>n(180762),j=()=>n(519839),N=()=>n(745266),H=n(474848);const L=3;function U(e){let{numberOfSuggestedViews:t,isShowingMoreSuggestions:n}=e;return t>=5&&!n}function O(e){let{suggestedWorkflowTemplateViews:t,isShowingMoreSuggestions:n}=e;const o=t.map((e=>e.templateId));return U({numberOfSuggestedViews:o.length,isShowingMoreSuggestions:n})?o.slice(0,L):o}function P(e){let{collectionContextStore:t,onClose:n,showNewViewItems:P}=e;const W=(0,r().v3)(),z=W.device,[Z,q]=(0,o.useState)(!1),K=(0,a().IS)((e=>({showMoreLabel:{color:e.mediumTextColor}})),[]),Y=(0,i().K8)((()=>{const e=t.collectionStore(),n=t.collectionViewBlockStore();if(!e||!n)return[];const o=e.getFormat().app_config_uri,r=o?(0,v().lS)((0,f().appConfigs)(),o):void 0;return r?(0,v().Ib)({environment:W,appConfig:r,collectionStore:e,collectionViewBlockStore:n}):[]}),[t,W]),J=(0,i().K8)((()=>(0,j().NB)(t,z)),[t,z]),X=(0,D().Y)(t).filter((e=>(0,s().Xq)(e,"collection_view"))),G=(0,o.useCallback)((e=>({key:e,render:t=>(0,H.jsx)(S().A,{title:b().A.formatMessage(j().Xg[e]),icon:(0,H.jsx)(N().h,{color:"regular",viewType:e}),...t}),action:()=>{p().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:W,canUndo:!0,perform:n=>{(0,B().Z)({environment:W,collectionContextStore:t,newViewType:e,transaction:n,skipOpenSettings:!1})}}),(0,u().b)({environment:W,collectionContextStore:t,view_type:e})}})),[W,t]),{renderSuggestedTypedView:$}=function(e,t){const n=(0,r().v3)(),a=(0,i().K8)((()=>M().default.state.currentSpaceViewStore),[]),s=(0,i().K8)((()=>e.collectionViewBlockStore()),[e]),c=(0,i().K8)((()=>e.collectionStore()),[e]),l=(0,i().K8)((()=>{var e;if(!c)return;const t=null===(e=c.getFormat())||void 0===e?void 0:e.app_config_uri;return t?(0,v().lS)((0,f().appConfigs)(),t):void 0}),[c]),d=o.useCallback((t=>{if(!s||!l||!a)return;const o=s.getParentStore();if(!o||"block"!==o.table&&"space"!==o.table&&"team"!==o.table)return;if(1!==t.dependencies.length)return;const r=t.dependencies[0];p().createAndCommit({userAction:"CollectionViewSuggestedViews.createView",environment:n,canUndo:!0,perform:i=>{var c;m().applyTypedFeatures({environment:n,spaceViewStore:a,appParentStore:o,appUri:l.uri,features:[{type:"simple",featureUri:t.uri}],appCollectionViewBlockStores:[s],createOrModify:"modify",transaction:i});const d=((null===(c=s.getFormat())||void 0===c?void 0:c.app_uri_map)??{})[r.uri];(0,F().t)({environment:n,collectionContextStore:e,collectionViewId:d,isFullScreen:e.isFullScreenStore.state,isRootChild:e.isRootChildStore.state,isInPeekRenderer:e.isInPeekRendererStore.state}),(0,u().b)({environment:n,collectionContextStore:e,view_type:r.value.type,view_config_uri:t.uri,feature:{id:d,from:"suggested_view",type:t.uri}})}})}),[s,l,a,n,e]),g=o.useCallback((e=>{const n=(e,t)=>{var n;const o=e.dependencies[0],r=(0,H.jsx)(N().h,{color:"regular",viewIcon:null===(n=o.value.format)||void 0===n?void 0:n.collection_view_icon,viewType:o.value.type});return(0,H.jsx)(S().A,{title:o.value.name?o.value.name:"New View",icon:r,...t})};return{key:e.uri,render:t=>(0,H.jsx)(A().A,{placement:T().W.Left,render:o=>n(e,{...t,...o,onMouseEnter:e=>{var n,r;null===(n=o.onMouseEnter)||void 0===n||n.call(o,e),null===(r=t.onMouseEnter)||void 0===r||r.call(t,e)}}),renderTooltip:()=>e.description}),action:()=>{d(e),t()}}}),[d,t]);return{renderSuggestedTypedView:g}}(t,n),{renderSuggestedWorkflowTemplateView:Q}=function(e,t){const n=(0,r().v3)(),o=(0,a().IS)((e=>({icon:{fill:e.regularIconColor}})),[]);return{renderSuggestedWorkflowTemplateView:(r,i,a)=>({key:`workflow.${r.templateId}`,action:()=>{(0,R().p)({environment:n,collectionContextStore:e,template:r,suggestedFeatureAnalytics:{origin:"suggested_views",shownTemplateIds:a,selectedIndex:i}}),t()},render:e=>(0,H.jsx)(S().A,{...e,icon:(0,H.jsx)(V().z,{template:r,size:16,iconStyle:o.icon}),title:(0,I().getWorkflowTemplateName)(r)})})}}(t,n),ee={key:"showMore",render:e=>(0,H.jsx)(S().A,{...e,style:K.showMoreLabel,icon:(0,c().L)({width:14,marginRight:2}),title:(0,H.jsx)(d().sA,{defaultMessage:"More...",id:"collectionViewSuggestedViews.showMore.label"})}),action:()=>{q(!0)}},te={key:"emptyView",render:e=>(0,H.jsx)(S().A,{title:(0,H.jsx)(d().sA,{defaultMessage:"Empty view",id:"collectionTabBar.newEmptyView.title"}),icon:(0,H.jsx)(h().I,{icon:l().plusIcon}),...e}),action:()=>{p().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:W,canUndo:!0,perform:e=>{(0,B().Z)({environment:W,collectionContextStore:t,newViewType:"table",transaction:e,skipOpenSettings:!1})}}),(0,u().b)({environment:W,collectionContextStore:t,view_type:"table"})}},ne=["table","board","chart","list","timeline","calendar","gallery"].map((e=>G(e)));let oe;oe=Y.length?Y.map((e=>$(e))):X.length?X.map(((e,t)=>Q(e,t,O({suggestedWorkflowTemplateViews:X,isShowingMoreSuggestions:Z})))):ne,(0,E().O)({collectionContextStore:t,origin:"suggested_views",shownTemplateIds:O({suggestedWorkflowTemplateViews:X,isShowingMoreSuggestions:Z})});const re={key:"genericViews",render:e=>(0,H.jsx)(k().A,{title:(0,H.jsx)(d().sA,{defaultMessage:"New view",id:"database.collectionTabBar.newViews"}),...e}),items:(X.length||Y.length)&&U({numberOfSuggestedViews:oe.length,isShowingMoreSuggestions:Z})?[te,...oe.slice(0,L),ee]:[te,...oe]},ie={key:"form",render:e=>(0,H.jsx)(k().A,{topBorder:!0,...e}),items:[{key:"formViewItem",action:()=>{},render:e=>(0,H.jsx)(g().A,{collectionContextStore:t,onClose:n,focused:e.focused,isCompact:!1})}]};return(0,H.jsx)(y().A,{capture:!0,allowEsc:!0,render:e=>{let t;return t=z.isPhone?{menuType:x().gu.Modal,right:(0,H.jsx)(_().DoneMenuText,{}),onClickRight:n,...e}:{menuType:x().gu.Popup,minWidth:290,maxWidth:320,maxHeight:"50vh",...e},(0,H.jsx)(w().A,{...t,children:(0,H.jsx)(C().Ay,{type:C().Oh.Vertical,initialFocus:void 0,sections:[re,...P&&!J?[ie]:[]],onAccept:e=>{"showMore"!==e.key&&n()}})})}})}},94778:(e,t,n)=>{n.d(t,{A:()=>v});n(296540);var o=()=>n(484714),r=()=>n(56366),i=()=>n(401497),a=()=>n(575157),s=()=>n(959013),c=()=>n(154017),l=()=>n(317909),d=()=>n(760217),u=()=>n(8980),p=()=>n(645873),m=()=>n(339034),f=n(474848);function v(e){const{collectionContextStore:t,onClose:n,focused:v,isCompact:g}=e,S=(0,o().v3)(),{value:y}=(0,p().fJ)(m().formsEditorDependency),w=(0,i().IS)((e=>({newFormButton:{color:e.mediumTextColor,display:"flex",flexDirection:"row"}})),[]),C=(0,r().K8)((()=>{var e;return(null===(e=t.collectionViewBlockStore())||void 0===e||null===(e=e.inMemoryRecordCache)||void 0===e?void 0:e.isTemporaryData)??!1}),[t]);function _(){l().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:S,canUndo:!0,skipDefaultPostPerformValidationChecks:C,perform:e=>{y&&y.formEditorActions.createAndFocusCollectionFormEditorView({environment:S,collectionContextStore:t,transaction:e})}}),n(),(0,c().b)({environment:S,collectionContextStore:t,view_type:"form_editor"})}if(!y)return null;const h=(0,f.jsx)(d().A,{focused:v,onClick:_,title:(0,f.jsx)("div",{style:w.newFormButton,children:(0,f.jsx)(s().sA,{defaultMessage:"New form",id:"database.collectionViewSelect.newFormButtonTitle"})}),style:{padding:"1 0"},icon:(0,f.jsx)(u().I,{icon:a().D,color:"secondary"})}),k=(0,f.jsx)(d().A,{focused:v,onClick:_,title:(0,f.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:(0,f.jsx)(s().sA,{defaultMessage:"Form",id:"CollectionViewTabBar.newFormItem.title"})}),icon:(0,f.jsx)(u().I,{icon:a().D}),shouldWrapCaption:!0,caption:(0,f.jsx)(s().sA,{defaultMessage:"Create a form to input data directly into this database",id:"CollectionViewTabBar.newFormItem.description"})});return g?h:k}},101209:(e,t,n)=>{n.d(t,{v:()=>r});n(296540);var o=n(474848);const r=(0,n(340498).wt)("boltFilled",{svg:(0,o.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},154017:(e,t,n)=>{n.d(t,{b:()=>i});var o=()=>n(476492),r=()=>n(989423);function i(e){const{environment:t,collectionContextStore:n,view_type:i,view_config_uri:a,...s}=e;!function(e,t){r().vd(e,"create_view",t)}(t,{...(0,o().sl)(n)||{},...s,view_type:i,view_config_uri:a})}},175213:(e,t,n)=>{n.d(t,{G:()=>i});var o=()=>n(989423),r=()=>n(508496);function i(e,t){o().vd(e,"delete_property",t),r().default.logEvent("delete_property")}},265793:(e,t,n)=>{n.d(t,{b:()=>g,w:()=>S});var o=()=>n(484714),r=()=>n(56366),i=()=>n(888325),a=()=>n(187174),s=()=>n(96689),c=()=>n(541801),l=()=>n(449506),d=()=>n(645873),u=()=>n(351360),p=()=>n(441307),m=()=>n(961581),f=()=>n(299177);const v=!1;function g(e){var t;const n=null===(t=(0,d().fJ)(c().xl).value)||void 0===t?void 0:t.loadWorkflowTemplateInstances;(0,r().K8)((()=>{if(!n)return;const t=e instanceof p().A?e.collectionStore():e;t&&n(t)}),[n,e])}function S(){const e=(0,o().v3)(),t=(0,r().K8)((()=>{var e;if(function(){const e=m().A.state.initialRenderCompleted;v&&!e&&console.log("Initial page render is not yet completed, delaying refresh of workflow template instances.");return e}())return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,a().Yb)((async()=>{if(!t)return;(f().A.debug||v)&&console.log("Refreshing workflow template instance map for space",t);const n={table:s().NX,id:t,spaceId:t},o=await l().callApi({eventName:"getWorkflowTemplateInstances",environment:e,data:{spaceId:n.spaceId,scopeTable:n.table,scopeId:n.id,enableInstanceRobustness:!0}});if("success"===o.type){const e=(0,i()._)(n);f().A.setState({...f().A.state,[e]:o.data.instanceMap[e]})}}),[e,t])}},299177:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{}}}const r=new o;n(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},390527:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>I,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>k,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>h,MAX_RECURRENCE_INTERVAL:()=>S,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>y,RRULE_WEEKDAYS_MAP:()=>g,adjustedStartDateIfPossible:()=>b,areRecurrenceSchedulesEqual:()=>j,convertFromUnpersistedRecurrenceConfig:()=>F,convertToUnpersistedRecurrenceConfig:()=>D,getFormattedEndCondition:()=>V,getFormattedNextRecurrenceTime:()=>R,getNewEndTimestamp:()=>E,getNextDateUtc:()=>M,getRecurrenceAfter:()=>x,isRunningBetweenMidnightAnd3AM:()=>T,isValidRecurrenceInterval:()=>w,isValidRecurrenceNumberOfRuns:()=>C,rruleFromRecurrence:()=>_,templateAncestorsViolateRecurrenceNesting:()=>A});n(898992),n(354520),n(581454);var o=()=>n(244641);n(944114);function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(0===n.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(n[0],...n.slice(1)).map((e=>[a,...e])));return i}var i=()=>n(496603),a=()=>n(534177),s=()=>n(720665),c=()=>n(597777),l=()=>n(869190),d=()=>n(416504),u=()=>n(402390);class p extends(()=>n(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>n(912720);const f=(0,n(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),v={day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},g={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},S=99,y=999;function w(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=S}function C(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=y}function _(e){const{start_date:t,frequency:n,interval:o,weekdays:i,timezone:s,hour:l,minute:d}=e,u="week"===n&&i?i.map((e=>g[e])):void 0,m={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,c().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return g[t].nth(n)})):(0,a().HB)(e.monthly_restriction)),new p({freq:v[n],dtstart:(0,c().eU)(t),interval:o,byweekday:u,tzid:s,byhour:l??0,byminute:d??0,bysecond:0,...m})}const h=1,k=1;function A(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=o>h,a=n.length>=k;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:r}}function b(e){var t;const{recurrence:n,afterDate:r}=e;if("number"===(null===(t=n.end_condition)||void 0===t?void 0:t.type)||n.start_date>=r)return n;let i=o().c9.fromMillis(n.start_date,{zone:"utc"});const a=o().c9.fromMillis(r,{zone:"utc"});switch(n.frequency){case"year":{const e=Math.floor(a.diff(i,"years").years/n.interval);i=i.plus({years:e*n.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/n.interval);i=i.plus({months:e*n.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/n.interval);i=i.plus({weeks:e*n.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/n.interval);i=i.plus({days:e*n.interval});break}}return{...n,start_date:(0,c().DH)(i.toMillis())}}function x(e){const{recurrence:t,afterDate:n}=e;if((0,m().wt)(t)){const e=(0,c().l1)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=_(b({recurrence:t,afterDate:n})).after((0,c().eU)(n));if(!e)return;return(0,c().h1)(e)}}function T(e){return 0===e.hour||1===e.hour||2===e.hour}function M(e){return _(e).after((0,c().eU)((0,c().Rz)()))||void 0}function R(e){const{recurrence:t,intl:n}=e,r=M(F(t));if(!r)return;const i=T(t),a=o().c9.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(n)).setZone(t.timezone),s=(0,l().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(i)return n.formatMessage(f.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(o().c9.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(f.dateAtTime,{date:s,time:e})}}function V(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,l().Yq)({date:o().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(f.noEndCondition)}const I=100;function D(e){return{...e,start_date:(0,c().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,c().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function E(e,t,n){return e.plus(n-t)}function B(e,t){const n=o().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,c().Rz)(n.toJSDate())}}function F(e){return{...e,start_date:(0,c().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?B(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function j(e,t){const n=i().fN(e,(e=>void 0!==e)),o=i().fN(t,(e=>void 0!==e));return i().n4(n,o)}},393695:(e,t,n)=>{n.d(t,{Y:()=>s});var o=()=>n(484714),r=()=>n(56366),i=()=>n(200277),a=()=>n(265793);function s(e){const t=(0,o().v3)();return(0,a().b)(e),(0,r().K8)((()=>{const n=e.collectionStore();return n?(0,i().N)(t,n):[]}),[t,e])}},399762:(e,t,n)=>{n.d(t,{O:()=>l,q:()=>d});n(296540);var o=()=>n(401497),r=()=>n(100622),i=()=>n(284371),a=()=>n(288722),s=()=>n(881690),c=n(474848);function l(e){const{value:t,color:n,format:l,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:f,hideTooltip:v,description:g,tooltipPlacement:S,...y}=e,w=(0,o().DP)(),C=(0,o().IS)((e=>({token:{...d&&i().RC}})),[d]),{textColor:_,backgroundColor:h}=(0,r().LD)(w,n);return t?(0,c.jsx)(s().A,{format:l,value:(0,c.jsx)(a().A,{children:t}),description:g,onClickRemove:u,showRemoveButton:p,isSingle:m,color:_,backgroundColor:h,shouldShrink:f,tooltipPlacement:S,showTooltip:v?"never":"overflow",style:C.token,...y}):null}function d(e){const{value:t,color:n,format:l,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:f,groupColor:v,tooltipPlacement:g,description:S,hideTooltip:y,...w}=e,C=(0,o().DP)(),_=(0,o().IS)((()=>({token:{...d&&i().RC}})),[d]);if(!t)return null;const{textColor:h,backgroundColor:k}=(0,r().LD)(C,n??v??"gray");let A;return A=n||(v||"gray"),(0,c.jsx)(s().A,{format:l,value:(0,c.jsx)(a().A,{children:t}),description:S,onClickRemove:u,showRemoveButton:p,isSingle:m,color:h,backgroundColor:k,shouldShrink:f,showTooltip:y?"never":"overflow",style:_.token,isRound:!0,showColoredDot:A,tooltipPlacement:g,...w})}},462892:(e,t,n)=>{n.d(t,{_:()=>r});n(296540);var o=n(474848);const r=(0,n(340498).wt)("layout",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},464699:(e,t,n)=>{n.d(t,{b:()=>r});n(296540);var o=n(474848);const r=(0,n(340498).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},497222:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=n(474848);const r=function(e){const{icon:t,iconStyle:r,title:i,caption:a,right:s,rightStyle:c,isRed:l,isGray:d,isOrange:u,onClick:p,onMouseDown:m,onMouseEnter:f,onMouseLeave:v,disabled:g,showChevron:S,chevronStyle:y,rotateChevron:w,showDragHandle:C,focused:_,textWrapperStyle:h,shouldWrapCaption:k,desktopIconStyle:A,buttonStyle:b}=e,x=(0,n(700251).y$)(),T=(0,n(401497).IS)((e=>({style:{color:d?e.mediumTextColor:u?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularTextColor,fill:d?e.mediumIconColor:u?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:g?.4:void 0,...b},leftIconStyle:{width:x,height:x,...t===n(30626)._&&{height:3},...r},rightStyle:{display:"flex",alignItems:"center",color:g?e.regularTextColor:e.lightTextColor,fill:g?e.regularIconColor:e.lightIconColor,flexShrink:0,...c},rightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out",...y},rightIconRotatedStyle:{transform:"rotate(90deg)"}})),[d,u,g,r,t,y,c,b,x]),{itemRef:M,isTabbable:R,onKeyDown:V,onFocus:I}=(0,n(804773).e)();return(0,o.jsx)(n(760217).A,{ref:M,icon:null==t?void 0:t(T.leftIconStyle),focused:_||!1,disabled:g,title:i,caption:a,shouldWrapCaption:k,desktopTitleStyle:{flexGrow:1,flexShrink:1},onKeyDown:V,onFocus:I,disallowTabbing:!R,showDragHandle:C,buttonStyle:T.style,rightStyle:T.rightStyle,isRedOnHover:l,ignoreLocalHoverState:!!g||void 0,right:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{...n(284371).RC,display:"flex"},children:s}),!g&&S&&(0,n(742117).V)({...T.rightIconStyle,...w&&T.rightIconRotatedStyle})]}),onClick:p,onMouseDown:m,onMouseEnter:f,onMouseLeave:v,textWrapperStyle:h,desktopIconStyle:A})}},759709:(e,t,n)=>{n.d(t,{O:()=>s});var o=n(296540),r=()=>n(484714),i=()=>n(56366),a=()=>n(989423);function s(e){let{collectionContextStore:t,shownTemplateIds:n,origin:s}=e;const c=(0,r().v3)(),l=(0,i().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getWorkflowTemplateId()}),[t]),d=(0,o.useRef)(!1);(0,o.useEffect)((()=>{!d.current&&n.length>0&&((0,a().u4)({environment:c,event:{eventName:"suggested_feature_templates_shown",eventProperties:{origin:s,collection_template_id:l,template_ids_shown:n}}}),d.current=!0)}))}},864779:(e,t,n)=>{n.d(t,{Me:()=>s,Vv:()=>r,Z3:()=>i,wI:()=>a});var o=()=>n(244641);function r(e){if("week"===e.frequency&&e.weekdays&&1===e.weekdays.length)return{weekday:e.weekdays[0],duration:e.interval}}function i(e){const{currentSprintEndDate:t,sprintSchedule:n}=e;return c({startDate:d({dateToAdjust:o().c9.fromISO(t),weekday:n.weekday,wrapForEqualDays:!0}),duration:n.duration})}function a(e){const{userTimeZone:t,sprintSchedule:n}=e;return c({startDate:o().c9.local({zone:t}),duration:n.duration})}function s(e){const{currentSprintStartDate:t,sprintSchedule:n}=e,r=d({dateToAdjust:o().c9.fromISO(t),weekday:n.weekday,wrapForEqualDays:!1}),{end_date:i}=c({startDate:r,duration:n.duration});let a=o().c9.fromISO(i);const s=o().c9.now().startOf("day");for(;a.diff(s,"days").days<0;)a=a.plus({weeks:1});return{type:"daterange",start_date:a.plus({days:1}).minus({weeks:n.duration}).toISODate(),end_date:a.toISODate()}}function c(e){const{startDate:t,duration:n}=e,o=t.plus({weeks:n}).minus({days:1});return{type:"daterange",start_date:t.toISODate(),end_date:o.toISODate()}}const l={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6};function d(e){const{dateToAdjust:t,weekday:n,wrapForEqualDays:o}=e,r=u({currentWeekday:t.weekday%7,nextWeekday:l[n],wrapForEqualDays:o});return t.plus({days:r})}function u(e){const{currentWeekday:t,nextWeekday:n,wrapForEqualDays:o}=e,r="number"==typeof t?t:l[t],i="number"==typeof n?n:l[n];if(r===i)return o?7:0;let a=r,s=0;for(;a!==i;)a===l.SA?a=0:a+=1,s+=1;return s}},888325:(e,t,n)=>{function o(e){return`${e.table}:${e.id}`}n.d(t,{_:()=>o})},926329:(e,t,n)=>{n.d(t,{b:()=>r});n(296540);var o=n(474848);const r=(0,n(340498).wt)("templates",{viewBox:"0 0 20 20",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,o.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,o.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},950914:(e,t,n)=>{n.d(t,{AL:()=>i,Q6:()=>s,vt:()=>a});n(898992),n(672577);var o=()=>n(66689),r=()=>n(254947);const i={autoCompleteSprints:!1,actionConfig:{complete_sprint_action:"complete_sprint_and_move_incomplete_tasks_to_next_sprint"},recurrenceConfig:{interval:2,weekdays:["MO"]}};function a(e){const{eventTracker:t,properties:n}=e;t.DO_NOT_USE_commonTrackEvent({eventName:"complete_sprint_action",properties:n})}function s(e,t){var n;return null===(n=t.groups)||void 0===n||null===(n=n.find((t=>t.id===o().nl||(null==t?void 0:t.name)===r().P0||(null==t?void 0:t.name)===e.formatMessage(r().oz.statusGroupNameComplete))))||void 0===n?void 0:n.name}},966759:(e,t,n)=>{n.d(t,{i:()=>i});var o=()=>n(476492),r=()=>n(175213);function i(e){const{environment:t,collectionContextStore:n,property_type:i,from:a,property:s,...c}=e,l=(0,o().sl)(n)||{};(0,r().G)(t,{property:s,property_type:i,from:a,...c,...l})}}}]);