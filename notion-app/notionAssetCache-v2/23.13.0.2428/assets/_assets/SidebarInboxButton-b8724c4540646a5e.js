"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[28307],{11978:(e,t,n)=>{n.d(t,{O:()=>o});var i=()=>n(56366),r=()=>n(351360);function o(){const{currentSpaceStore:e}=(0,i().K8)((()=>r().default.state),[]);return null==e?void 0:e.id}},51194:(e,t,n)=>{n.d(t,{a:()=>o});var i=n(296540),r=()=>n(525128);function o(){const e=(0,i.useRef)(!1);return(0,r().E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},105127:(e,t,n)=>{n.d(t,{A:()=>l});n(296540);var i=()=>n(56366),r=()=>n(534177),o=()=>n(171347),s=()=>n(179534),a=n(474848);function l(e){const{type:t,...n}=e,l=(0,i().K8)((()=>{switch(t){case"currentSpace":return s().A.getUnreadCountForCurrentSpace().mentions;case"otherSpaces":return s().A.getUnreadMentionsCountForOtherSpaces();case"allSpaces":return s().A.getTotalUnreadMentionsCount();default:(0,r().HB)(t)}}),[t]);return(0,a.jsx)(o().A,{count:l,...n})}},171347:(e,t,n)=>{n.d(t,{A:()=>a,g:()=>o});n(296540);var i=n(474848);const r={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:n(284371).Wy.semibold,borderRadius:4,color:n(100622).Ay.white,position:"static",marginLeft:6,WebkitFontSmoothing:"auto"};let o=function(e){return e[e.Red=0]="Red",e[e.Gray=1]="Gray",e}({});function s(e){return!!e&&e>0}const a=function(e){let{count:t,color:a,style:c,numberStyle:d,fadeIn:u}=e;const f=a===o.Red,p=(0,n(401497).IS)((e=>({badge:{...r,...c,...(t??0)>99&&{width:void 0,padding:2},background:f?e.redBadgeBackground:e.lightIconColor,...u&&{transition:"opacity 0.1s",opacity:s(t)?1:0}}})),[t,u,f,c]);return u||s(t)?(0,i.jsx)("div",{style:p.badge,children:(0,i.jsx)(l,{count:t,numberStyle:d})}):null};function l(e){let{count:t,numberStyle:n}=e;return t?1===t?(0,i.jsx)("span",{style:{marginLeft:-.5,...n},children:"1"}):t>99?(0,i.jsx)("span",{style:{letterSpacing:-.5,...n},children:"99+"}):t>9?(0,i.jsx)("span",{style:{letterSpacing:-.5,marginLeft:-.5,...n},children:t}):(0,i.jsx)("span",{style:{...n},children:t}):null}},198048:(e,t,n)=>{n.d(t,{C:()=>s});var i=n(296540),r=()=>n(51194),o=()=>n(610104);function s(){const e=(0,r().a)(),[t,n]=(0,i.useState)(0),s=(0,i.useCallback)((()=>{e.current&&n(t+1)}),[t]);return[(0,i.useCallback)((()=>o().Gt.postRender(s)),[s]),t]}},203066:(e,t,n)=>{n.d(t,{N:()=>c});var i=n(296540);class r extends i.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function o({children:e,isPresent:t}){const n=(0,i.useId)(),o=(0,i.useRef)(null),s=(0,i.useRef)({width:0,height:0,top:0,left:0});return(0,i.useInsertionEffect)((()=>{const{width:e,height:i,top:r,left:a}=s.current;if(t||!o.current||!e||!i)return;o.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${i}px !important;\n            top: ${r}px !important;\n            left: ${a}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),i.createElement(r,{isPresent:t,childRef:o,sizeRef:s},i.cloneElement(e,{ref:o}))}const s=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:l,presenceAffectsLayout:c,mode:d})=>{const u=(0,n(328601).M)(a),f=(0,i.useId)(),p=(0,i.useMemo)((()=>({id:f,initial:t,isPresent:r,custom:l,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;s&&s()},register:e=>(u.set(e,!1),()=>u.delete(e))})),c?void 0:[r]);return(0,i.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[r]),i.useEffect((()=>{!r&&!u.size&&s&&s()}),[r]),"popLayout"===d&&(e=i.createElement(o,{isPresent:r},e)),i.createElement(n(786719).t.Provider,{value:p},e)};function a(){return new Map}const l=e=>e.key||"";const c=({children:e,custom:t,initial:r=!0,onExitComplete:o,exitBeforeEnter:a,presenceAffectsLayout:c=!0,mode:d="sync"})=>{(0,n(285238).V)(!a,"Replace exitBeforeEnter with mode='wait'");const u=(0,i.useContext)(n(29473).L).forceRender||(0,n(198048).C)()[0],f=(0,n(51194).a)(),p=function(e){const t=[];return i.Children.forEach(e,(e=>{(0,i.isValidElement)(e)&&t.push(e)})),t}(e);let h=p;const m=(0,i.useRef)(new Map).current,g=(0,i.useRef)(h),y=(0,i.useRef)(new Map).current,x=(0,i.useRef)(!0);if((0,n(525128).E)((()=>{x.current=!1,function(e,t){e.forEach((e=>{const n=l(e);t.set(n,e)}))}(p,y),g.current=h})),(0,n(757491).l)((()=>{x.current=!0,y.clear(),m.clear()})),x.current)return i.createElement(i.Fragment,null,h.map((e=>i.createElement(s,{key:l(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:c,mode:d},e))));h=[...h];const b=g.current.map(l),S=p.map(l),v=b.length;for(let n=0;n<v;n++){const e=b[n];-1!==S.indexOf(e)||m.has(e)||m.set(e,void 0)}return"wait"===d&&m.size&&(h=[]),m.forEach(((e,n)=>{if(-1!==S.indexOf(n))return;const r=y.get(n);if(!r)return;const a=b.indexOf(n);let x=e;if(!x){const e=()=>{m.delete(n);const e=Array.from(y.keys()).filter((e=>!S.includes(e)));if(e.forEach((e=>y.delete(e))),g.current=p.filter((t=>{const i=l(t);return i===n||e.includes(i)})),!m.size){if(!1===f.current)return;u(),o&&o()}};x=i.createElement(s,{key:l(r),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:c,mode:d},r),m.set(n,x)}h.splice(a,0,x)})),h=h.map((e=>{const t=e.key;return m.has(t)?e:i.createElement(s,{key:l(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)})),i.createElement(i.Fragment,null,m.size?h:h.map((e=>(0,i.cloneElement)(e))))}},477293:(e,t,n)=>{n.d(t,{r:()=>o});var i=()=>n(56366),r=()=>n(508496);function o(e){return(0,i().K8)((()=>r().default.getGroup(e)),[e])}},490044:(e,t,n)=>{n.d(t,{A:()=>f});n(296540);var i=()=>n(484714),r=()=>n(56366),o=()=>n(401497),s=()=>n(500066),a=()=>n(159588),l=()=>n(963589),c=()=>n(644914),d=n(474848);function u(){const e=(0,o().IS)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.regularTextColor:"#3E3C38",stroke:"dark"===e.mode?e.surface.wash:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,d.jsx)("div",{children:(0,s().G)(e.icon)})}function f(e){var t;const n=(0,i().v3)(),s=n.device.isMobile,{isTablet:f}=(0,i().Y0)(),p=(0,l().X)("tablet_refresh_gate"),h=(0,r().K8)((()=>{var t,i;if(s)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(i=e.style)||void 0===i?void 0:i.paddingLeft:10)}),[n.WindowSizeStore,s,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),m=(0,o().IS)((t=>({wrapper:{...s?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:f&&p?4:8,paddingBottom:f&&p?4:8,paddingLeft:h,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:void 0,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:e.isBottomItem?24:27,height:c().Zr,paddingTop:4,paddingBottom:4,...(0,a().ic)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:s?28:22,height:s?24:18,marginRight:8,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.mediumTextColor,width:s?24:c().ry,height:s?24:c().ry,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!s?"clip":"ellipsis",...e.childrenStyle}})),[s,f,p,h,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle]);return(0,d.jsxs)("div",{role:e.role,dir:"ltr","aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:m.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,d.jsx)("div",{style:m.left,children:e.left}),e.icon&&(0,d.jsxs)("div",{style:m.icon,children:[e.icon,e.isAlias&&(0,d.jsx)(u,{})]}),(0,d.jsx)("div",{style:m.children,children:e.children}),e.right&&(0,d.jsx)("div",{style:m.right,children:e.right})]})}},563864:(e,t,n)=>{n.d(t,{S:()=>r});n(296540);var i=n(474848);const r=(0,n(340498).wt)("newSidebarInbox",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.79331 5.57891C6.02276 5.21835 6.42052 5 6.84789 5H13.1521C13.5795 5 13.9772 5.21835 14.2067 5.57891C14.2139 5.59022 14.2214 5.60134 14.2292 5.61225L16.6496 9H12.25C11.8358 9 11.5 9.33579 11.5 9.75C11.5 10.5784 10.8284 11.25 10 11.25C9.17157 11.25 8.5 10.5784 8.5 9.75C8.5 9.33579 8.16421 9 7.75 9H3.35037L5.77082 5.61225C5.77861 5.60134 5.78611 5.59022 5.79331 5.57891ZM3 10.5V14.25C3 14.9404 3.55964 15.5 4.25 15.5H15.75C16.4404 15.5 17 14.9404 17 14.25V10.5H12.9055C12.5725 11.7939 11.3979 12.75 10 12.75C8.60212 12.75 7.42755 11.7939 7.09451 10.5H3ZM6.84789 3.5C5.91491 3.5 5.04609 3.97299 4.53955 4.75532L1.82609 8.55319C1.61401 8.85003 1.5 9.20572 1.5 9.57053V14.25C1.5 15.7688 2.73122 17 4.25 17H15.75C17.2688 17 18.5 15.7688 18.5 14.25V9.57053C18.5 9.20572 18.386 8.85003 18.1739 8.55319L15.4604 4.75531C14.9539 3.97299 14.0851 3.5 13.1521 3.5H6.84789Z"})})},693142:(e,t,n)=>{n.r(t),n.d(t,{SidebarInboxButton:()=>G,inboxMessages:()=>O});n(898992),n(354520),n(672577),n(430670),n(581454);var i=n(296540),r=()=>n(484714),o=()=>n(56366),s=()=>n(401497),a=()=>n(563864),l=()=>n(959044),c=()=>n(204384),d=()=>n(959013),u=()=>n(496603),f=()=>n(534177),p=()=>n(284371),h=()=>n(203066),m=()=>n(153321),g=()=>n(56086),y=n(474848);const x=.4,b=1,S=24,v=432,C=1;function w(e){const{emojis:t,children:n,emojiStyle:r}=e,[o,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(0),d=(0,i.useCallback)((e=>{c(0),a(!0);const t=[...e,"number"];let n=0;const i=setInterval((()=>{n=(n+1)%t.length,n===t.length-1&&(clearInterval(i),a(!1)),c(n)}),1e3*(x+b));return i}),[]);(0,i.useEffect)((()=>{let e;return t.length>0&&(e&&clearInterval(e),e=d(t)),()=>{e&&clearInterval(e)}}),[t,d]);const u=function(e){return(0,s().IS)((t=>({emoji:{fontSize:15,...e}})),[e])}(r);return(0,y.jsx)("div",{children:(0,y.jsx)(h().N,{mode:"wait",children:o?(0,y.jsx)(m().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:x,type:"spring",damping:S,stiffness:v,mass:C},style:u.emoji,children:t[l]&&(0,y.jsx)(g().A,{char:t[l]})},`emoji-${l}`):t.length>0?(0,y.jsx)(m().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:x,type:"spring",damping:S,stiffness:v,mass:C},children:n},"number"):n})})}var j=()=>n(35392),I=()=>n(296798),k=()=>n(859428),E=()=>n(171347),M=()=>n(490044),R=()=>n(299545),A=()=>n(477293),L=()=>n(963589),B=()=>n(11978),T=()=>n(770906),z=()=>n(441199),W=()=>n(644914),P=()=>n(179534),F=()=>n(962730),H=()=>n(351360),K=()=>n(630116),_=()=>n(105127);function G(e){const t=(0,r().v3)(),n=(0,d().tz)(),h=(0,B().O)(),[m,g]=(0,i.useState)([]),x=(0,o().K8)((()=>"inbox"===z().default.state.contentType&&z().default.isOpen()),[]),b=(0,o().K8)((()=>z().default.state.mode),[]),S=x&&"panel"===b,v=(0,i.useCallback)((()=>{T().ZT({environment:t,contentType:"inbox"})}),[t]),C=(0,s().IS)((e=>({sidebarItem:{...S&&{fontWeight:p().Wy.semibold,background:e.sidebarItemSelectedBackground}},badge:{width:void 0,minWidth:16,paddingLeft:3,paddingRight:3},number:{fontWeight:p().Wy.semibold,letterSpacing:.12,fontSize:10,fontVariantNumeric:"lining-nums tabular-nums",fontFeatureSettings:"lnum",MozFontFeatureSettings:"lnum",WebkitFontFeatureSettings:"lnum"},shortcutLabel:{color:e.text.contrastSecondary},emojiStyle:{fontSize:15}})),[S]),G=(0,W().ab)(),U="on"===(0,A().r)("inbox_activity_split"),V=(0,o().K8)((()=>U?P().A.getUnreadCountForCurrentSpace().comments:0),[U]),$=U?(0,y.jsx)(E().A,{count:V,color:E().g.Red,style:C.badge,numberStyle:C.number,fadeIn:!0}):(0,y.jsx)(_().A,{type:"currentSpace",color:E().g.Red,style:C.badge,numberStyle:C.number,fadeIn:!0}),N=(0,L().X)("animated_emoji_badge"),Z=(0,o().K8)((()=>H().default.state.currentSpaceStore),[]);(0,o().K8)((()=>{const e=P().A.state.results;g(e.flatMap((e=>{var t;return(null===(t=e.unreceived)||void 0===t?void 0:t.notificationIds)||[]})))}),[]);const X=(0,o().K8)((()=>{if(!h||!Z||!m.length)return[];const e=m.map((e=>K().sk.createChildStore(Z,{table:l()._p,id:e})));return u().oE(e.map((e=>{const t=R().g5(e);if(null!=t&&t.isReady())return t}))).filter((e=>"reacted"===(null==e?void 0:e.getType()))).filter((e=>!(null!=e&&e.getInvalid()))).flatMap((e=>{const t=((null==e?void 0:e.getEdits())||[]).find((e=>e&&"reaction_id"in e&&"reaction-created"===e.type));return(null==t?void 0:t.reaction_id)??[]})).map((e=>Z.getRecordStore(Z,{table:c().ez,id:e,spaceId:h}))).map((e=>null==e?void 0:e.getIcon())).filter(f().O9)}),[Z,h,m]);return(0,y.jsx)(k().A,{renderTooltip:()=>(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{children:n.formatMessage(O.tooltip)}),(0,y.jsx)(j().A,{style:C.shortcutLabel,name:"toggleAllUpdates"})]}),originGap:6,placement:F().W.Right,render:t=>{var i;return(0,y.jsx)(I().A,{style:{...G.baseSidebarItem,...C.sidebarItem,...S&&G.currentSelectedSidebarItem},onClick:v,hoveredStyle:null===(i=e.styles)||void 0===i?void 0:i.buttonHoveredStyle,...t,children:(0,y.jsx)(M().A,{left:(0,a().S)(G.topButtonIcon),right:N?(0,y.jsx)(w,{emojis:X,emojiStyle:C.emojiStyle,children:$}):$,children:n.formatMessage(U?O.messagesTitle:O.inboxTitle)})})}})}const O=(0,d().YK)({tooltip:{id:"sidebar.inbox.tooltip",defaultMessage:"View recent updates and notifications"},inboxTitle:{id:"sidebar.inbox.button",defaultMessage:"Inbox"},messagesTitle:{id:"sidebar.messages.button",defaultMessage:"Messages"}})},757491:(e,t,n)=>{n.d(t,{l:()=>r});var i=n(296540);function r(e){return(0,i.useEffect)((()=>()=>e()),[])}}}]);