"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[52009],{33218:(e,t,o)=>{o.d(t,{UQ:()=>y,gL:()=>_});o(16280),o(898992),o(672577),o(803949);var r=()=>o(651124),i=()=>o(792071),n=()=>o(688728),a=()=>o(369186),l=()=>o(475140),s=()=>o(235692),d=()=>o(778781),p=()=>o(696706),c=()=>o(896628),u=()=>o(317909);function y(e){let{environment:t,transaction:o,layoutStore:r,position:s,updatedModule:d,sessionId:p}=e;const c=n().Zm[s.area],y=r.getRawModules();if("form_conditional_modules"===c){const e=null==y?void 0:y[c];if(!(null==e?void 0:e[s.moduleId]))throw new Error("Unable to find module being updated.");return void u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:r,operation:i().N4X.updateModuleInArea({pointer:r.pointer,area:c,module:(0,a().Lv)(d)})})},userAction:"BuilderLayoutModules.updateModule"})}if(!y)throw new Error("Unable to find modules");const m=(0,l().LC)(y,(e=>e.id===s.moduleId));if(!m||m.area!==c)throw new Error("Unable to find module being updated.");u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:r,operation:i().N4X.updateModuleInArea({pointer:r.pointer,module:(0,a().Lv)(d),..."views_main_tab_modules"===m.area?{area:m.area,viewId:m.viewId}:{area:m.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function m(e){var t,o,r;let{collectionStore:i,layoutStore:n}=e;const a=new Map,l=i.getFormat(),s=[...null===(t=n.getModules())||void 0===t?void 0:t.page_main,...null===(o=n.getModules())||void 0===o?void 0:o.page_details],p=new Map;null===(r=l.property_visibility)||void 0===r||r.forEach((e=>{p.set(e.property,e)})),s.forEach((e=>{if(!(0,d()._Q)(e))return(0,d().gx)(e)?(a.set(e.propertyId,{property:e.propertyId}),void p.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{a.set(e,{property:e}),p.set(e,{property:e,visibility:"show"})}))}));const c=i.getNormalizedPropertyGroups();var u;c?c.forEach((e=>{var t;null===(t=e.propertyIds)||void 0===t||t.forEach((e=>{a.has(e)||a.set(e,{property:e})}))})):null===(u=l.collection_page_properties)||void 0===u||u.forEach((e=>{a.has(e.property)||a.set(e.property,e)}));return{propertiesFormat:Array.from(a.values()),propertyVisibility:Array.from(p.values())}}function _(e){let{environment:t,transaction:o,collectionStore:n,layoutStore:a}=e;const{propertiesFormat:l,propertyVisibility:y}=m({collectionStore:n,layoutStore:a});u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){const t=a.getBlockChildrenPointers(),o=a.getFormat(),m=a.firstModuleOfType("viewsMain");m&&(0,d().y6)(m)&&t.find((e=>p().L3.isEqual(e,m.collection_view_block_pointer)))&&u().applyOperation({transaction:e,store:a,operation:i().N4X.removeBlockChild(a.pointer,m.collection_view_block_pointer.id)});const _=null==o?void 0:o.previousViewsMainCollectionViewBlockPointer,f=_&&t.find((e=>p().L3.isEqual(e,_)));f&&u().applyOperation({transaction:e,store:a,operation:i().N4X.removeBlockChild(a.pointer,f.id)}),u().applyOperation({transaction:e,store:a,operation:i().N4X.setModulesByAreas(a.pointer,(0,s().K5)())}),u().applyOperation({transaction:e,store:a,operation:i().N4X.deleteFormat(a.pointer)});const v=n.getFormat(),{page_section_visibility:g}=v;c().zA({stores:[n],update:{property_groups:void 0,collection_page_properties:l,property_visibility:y,...g?{page_section_visibility:r().Zi}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},155185:(e,t,o)=>{o.d(t,{I:()=>a,_:()=>n});const r={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1},i={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0};function n(e){return r[e.type]}function a(e){return i[e.type]}},235692:(e,t,o)=>{o.d(t,{K5:()=>c,_u:()=>d,oP:()=>u,wC:()=>s,xN:()=>p});o(898992),o(354520),o(581454);var r=()=>o(183558),i=()=>o(155185),n=()=>o(778781),a=()=>o(369186);const l={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},s={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},d={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyLabels:"hide",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[]};function p(e){return(0,a().jr)({modulesByArea:l,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function c(){return{page_layout_schema:(0,a().ke)(l.page_main).map((e=>{if(!(0,n().cn)(e))return(0,i().I)(e)?{...e,id:(0,r().Ay)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,a().ke)(l.page_details).map((e=>{if(!(0,n().cn)(e))return(0,i().I)(e)?{...e,id:(0,r().Ay)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0}}function u(e,t){const o=void 0===t?[{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:e},{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:[{id:(0,r().Ay)(),type:"cover"},{id:(0,r().Ay)(),type:"formTitle"},...o,{id:(0,r().Ay)(),type:"formSubmit"}]}}},447934:(e,t,o)=>{o.d(t,{$L:()=>A,Fv:()=>P,HD:()=>j,V_:()=>L,bV:()=>T,jP:()=>C,nh:()=>B,w8:()=>O});o(16280),o(18107),o(967357),o(898992),o(354520);var r=()=>o(206267),i=()=>o(792071),n=()=>o(688728),a=()=>o(475140),l=()=>o(235692),s=()=>o(924329),d=()=>o(778781),p=()=>o(144081),c=()=>o(334261),u=()=>o(661920),y=()=>o(435009),m=()=>o(317909),_=()=>o(519839),f=()=>o(594794),v=()=>o(869562),g=()=>o(351360),h=()=>o(712505),b=()=>o(630116),S=()=>o(449476),w=()=>o(640868),I=()=>o(204521),x=()=>o(33218);function A(e){let{environment:t,transaction:o,collectionStore:r,userId:n,modules:a}=e;const s=(0,f().zP)({environment:t,spaceId:r.getSpaceId(),table:p().zx}),d=b().sk.createChildStore(r,s),{model:c,operations:[u]}=i().wfN.create({pointer:s,parent:r.pointer,createdByUserId:n,modules:a??(0,l().K5)()});m().applyOperation({transaction:o,store:d,operation:u});const y=i().BnK.setLayout(r.pointer,s);return m().applyOperation({transaction:o,store:r,operation:y}),{model:c,store:d}}function k(e){let t;return e?t=e:h().default.state.open&&h().default.state.targetStore?t=h().default.state.targetStore:g().default.state.mainEditorCurrentBlockStore&&(t=g().default.state.mainEditorCurrentBlockStore),t}function M(e){v().setUpdateExpand({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!1}),u().VN({environment:e,from:"open_page_layout_editor",preventAnimation:!0})}function B(e){var t,o;let{environment:i,blockStore:n,collectionStore:a,collectionViewStore:l,from:s,initialSelectedModuleType:d}=e;const p=function(e){var t;let o=k(e);if(null!==(t=o)&&void 0!==t&&t.isCollectionView()){const e=(0,_().UH)(o);o=e?e.resultsInViewOrder(1).at(0):void 0}return o}(n),c=window.location.href;M(i);const u=r().JW();S().A.setState({isOpen:!0,mode:"layout-editor",collectionStore:a,pageStore:p,siteRootBlockStore:void 0,sessionId:u,initialSelectedModuleId:null==p||null===(t=p.getAssociatedCollectionStore())||void 0===t||null===(t=t.getLayoutStore())||void 0===t||null===(t=t.getModel())||void 0===t||null===(t=t.firstRawModuleOfType(d??"titleWithIcon"))||void 0===t?void 0:t.id,urlOnOpen:c}),(0,I().Ko)({environment:i,from:s,context:"layout",sessionId:u,collectionId:null==a?void 0:a.id,existingLayoutId:null==a||null===(o=a.getLayoutStore())||void 0===o?void 0:o.id,collectionViewId:null==l?void 0:l.id})}function C(e){let{environment:t,store:o,siteRootBlockStore:i,from:n}=e;const a=k(o);M(t);const l=r().JW();S().A.setState({isOpen:!0,mode:"site-settings-editor",pageStore:a,siteRootBlockStore:i,sessionId:l}),(0,I().Ko)({environment:t,context:"site",from:n,sessionId:l,collectionId:void 0,existingLayoutId:void 0})}function L(e){let{slideBlockStore:t}=e;const o=t.getNavigableBlockStore(),i=r().JW();S().A.setState({isOpen:!0,mode:"presentation",pageStore:o,currentSlideStore:t,sessionId:i}),window.document.documentElement.requestFullscreen()}function T(e){let{slideBlockStore:t}=e;S().A.setState({isOpen:!1}),window.document.fullscreenElement&&window.document.exitFullscreen()}function O(e){S().A.getState().isOpen&&P(e)}function P(e){let{environment:t}=e;const o=S().A.getState();if(!o.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");"layout-editor"===o.mode&&o.urlOnOpen&&window.location.href!==o.urlOnOpen&&y().aX(t),S().A.setState({isOpen:!1})}function j(e){var t;let{environment:o,transaction:r,property:i,layoutStore:l}=e;const p=S().A.getSessionId(),u=null===(t=l.getModel())||void 0===t?void 0:t.getRawModules(),y=l.getCollectionModel();if(!u||!y)return;const m=b().md.createChildStore(l,y.pointer),_=(0,a().yn)(u,(e=>"titleWithIcon"===e.type));if(_&&(0,d().Mj)(_.module)){var f;const{module:e,position:t}=_,a={...e,type:"titleWithIcon",propertyIds:null===(f=e.propertyIds)||void 0===f?void 0:f.filter((e=>e!==i))};(0,x().UQ)({environment:o,sessionId:p,transaction:r,layoutStore:l,position:{area:(0,n().Fw)(t.area),moduleId:e.id},updatedModule:(0,s().X)(a)})}const v=(0,a().LP)(u,(e=>"property"===e.type&&e.propertyId===i));for(const{module:a,position:s}of v){const e=a.id,t=(0,n().Fw)(s.area);(0,w().U)({environment:o,sessionId:p,transaction:r,layoutStore:l,position:{area:t,moduleId:e}})}const g=y.getFormat().collection_page_sections;if(g){const e=g.filter((e=>e.section!==i));c().LK({store:m,pageSectionFormats:e,transaction:r,environment:o})}}},505902:(e,t,o)=>{o.r(t),o.d(t,{default:()=>x});var r=o(296540),i=()=>o(56366),n=()=>o(401497),a=()=>o(481235),l=()=>o(138856),s=()=>o(959013),d=()=>o(324089),p=()=>o(317909),c=()=>o(864145),u=()=>o(891078),y=()=>o(962730),m=()=>o(496889),_=()=>o(145214),f=()=>o(704152),v=()=>o(554509),g=()=>o(859428),h=o(474848);const b=(0,s().YK)({startPresentation:{id:"slideBlock.startPresentation",defaultMessage:"Start presentation"},ratioLockToggle:{id:"slideBlock.ratioLockToggle",defaultMessage:"Lock/unlock ratio"},moreActions:{id:"slideBlock.moreActions",defaultMessage:"More actions"}});function S(e,t){const a=(0,o(484714).v3)(),l=(0,r.useRef)(null),y=(0,u().bx)(e.store,e.disabled),[m,_]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),S=(0,i().K8)((()=>(0,c().B)(e.store,m)),[m,e.store]),x=(0,i().K8)((()=>e.store.getContentStore()),[e.store]),A=(0,i().K8)((()=>[].findIndex((t=>t===e.store.id))+1),[e.store.id]),k=(0,n().IS)((()=>({root:{display:"flex",width:"100%",position:"relative",flexDirection:"column",minWidth:0,padding:4},lockedAspectRatio:{aspectRatio:"16 / 9",overflowY:"scroll"}})),[]),M=(0,h.jsx)("div",{role:"note",style:{display:"flex",flexDirection:"column",padding:"4px 0px"},ref:l,children:(0,h.jsxs)("div",{style:{...e.style,...k.root},onMouseLeave:()=>_(!1),onMouseEnter:()=>_(!0),children:[(0,h.jsx)(I,{isVisible:m||S===c().l.Selected,store:e.store,onPresent:()=>{o(447934).V_({slideBlockStore:e.store})},onChangeAspectRatioLock:()=>b(!g),slideIndex:A}),(0,h.jsx)("div",{style:g?k.lockedAspectRatio:void 0,children:(0,h.jsx)(o(199896).A,{store:e.store,analyticsName:"page_content",canSelect:!1,canDrag:!1,isListContainer:!0,style:{display:"flex",flexDirection:"column"},children:(0,h.jsx)(o(99945).A,{disabled:e.disabled,store:x,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu||S!==c().l.SelectedDescendant,disableDrag:e.disableDrag,disableContent:!1,emptyPlaceholder:(0,h.jsx)(f().A,{onClick:()=>function(e,t){p().createAndCommit({userAction:"SlideBlock.handlePlaceholderClick",environment:t,canUndo:!0,perform:o=>{d()._N({environment:t,store:e,transaction:o})}})}(e.store,a),disabled:!y,style:{padding:4,borderRadius:4},children:(0,h.jsx)(v().D,{colorName:"secondary",children:(0,h.jsx)(s().sA,{defaultMessage:"Empty slide. Click here to start typing or drop blocks inside.",id:"slideBlock.emptyBlock.placeholderText"})})})})},e.store.id)}),(0,h.jsx)(w,{isHovered:m})]})});return(0,u().NW)(e.store,t,(0,r.useMemo)((()=>({renderedType:"slide",getNode:()=>l.current,getBlockStore:()=>e.store})),[e.store]),M)}function w(e){let{isHovered:t}=e;const o=(0,n().IS)((e=>({halo:{position:"absolute",inset:-4,pointerEvents:"none",borderRadius:8,border:`1px solid ${e.stroke.secondary}`},hovered:{border:`2px solid ${e.stroke.primary}`}})),[]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(_().A,{visible:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{...o.halo,...o.hovered}}),(0,h.jsx)(_().A,{visible:!t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:o.halo})]})}function I(e){let{isVisible:t,store:o,onPresent:r,onChangeAspectRatioLock:i,slideIndex:d}=e;const p=(0,s().tz)(),c=(0,n().IS)((e=>({actionBar:{width:"auto",position:"absolute",right:-2,zIndex:1e4,marginTop:-42,height:28,fontSize:14,lineHeight:1.2,display:"flex",alignItems:"center",whiteSpace:"nowrap",background:e.popoverBackground,boxShadow:e.shadowSM,borderRadius:8},actionBarIcon:{width:14,height:14,marginRight:0,fill:e.icon.secondary},actionBarSection:{display:"flex",alignItems:"center",flexDirection:"row",gap:2,height:"100%",padding:"0 8px",borderRight:`1px solid ${e.stroke.primary}`}})),[]);return(0,h.jsxs)(_().A,{visible:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:c.actionBar,children:[(0,h.jsx)("div",{style:c.actionBarSection,children:(0,h.jsx)(v().D,{styleName:"Body-12px/Medium",colorName:"secondary",children:(0,h.jsx)(s().sA,{defaultMessage:"Slide {slideIndex}",id:"slideBlock.numberLabel",values:{slideIndex:d}})})}),(0,h.jsx)(g().A,{renderTooltip:()=>(0,h.jsx)(s().sA,{...b.startPresentation}),placement:y().W.Top,delayThreshold:300,render:e=>(0,h.jsx)(f().A,{...e,ariaLabel:p.formatMessage(b.startPresentation),style:c.actionBarSection,onClick:r,children:(0,l().u)({...c.actionBarIcon,width:12,height:12})})}),(0,h.jsx)(g().A,{renderTooltip:()=>(0,h.jsx)(s().sA,{...b.ratioLockToggle}),placement:y().W.Top,delayThreshold:300,render:e=>(0,h.jsx)(f().A,{...e,ariaLabel:p.formatMessage(b.ratioLockToggle),style:c.actionBarSection,onClick:()=>{i()},children:(0,a().H)(c.actionBarIcon)})}),(0,h.jsx)(m().A,{store:o,fadeIn:!1,tooltipContent:p.formatMessage(b.moreActions),style:{width:30,height:"100%"},iconStyle:c.actionBarIcon})]})}const x=r.memo(r.forwardRef(S),o(821062).A)},640868:(e,t,o)=>{o.d(t,{U:()=>c});o(16280);var r=()=>o(454984),i=()=>o(688728),n=()=>o(475140),a=()=>o(789280),l=()=>o(778781),s=()=>o(317909),d=()=>o(204521),p=()=>o(658616);function c(e){let{environment:t,transaction:o,layoutStore:c,position:u,sessionId:y,beforePerformDeleteModule:m}=e;const _=c.getModules();if(!_)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const f=(0,n().EX)(_,(e=>e.id===u.moduleId));if(!f)return;const{module:v,position:g}=f;if(!(0,a().Fe)(v))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var h;(s().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){!function(e){const{transaction:t,layoutStore:o,moduleLocation:n,moduleToDelete:a,beforePerformDeleteModule:d}=e;d&&d(t);(0,l().V6)(a)&&(0,p().deleteViewsModuleDependencies)({layoutStore:o,viewsModule:a,transaction:t});if("form_conditional_modules"===n.area){const e=r().N4.removeChildModule({pointer:o.pointer,modulesByArea:o.getModules(),module:a});for(const r of e)s().applyOperation({transaction:t,store:o,operation:r})}else{const e="views_main_tab_modules"===n.area?{area:n.area,viewId:n.viewId}:{area:i().Zm[n.area]};s().applyOperation({transaction:t,store:o,operation:r().N4.deleteModuleInArea({...e,pointer:o.pointer,moduleId:a.id})})}}({environment:t,transaction:e,layoutStore:c,moduleLocation:g,moduleToDelete:v,beforePerformDeleteModule:m})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),y)&&d().PS({environment:t,module:v,sessionId:y,collectionId:null===(h=c.getCollectionModel())||void 0===h?void 0:h.id,layoutId:c.id,context:(0,i().We)(u.area),area:u.area})}},658616:(e,t,o)=>{o.r(t),o.d(t,{deleteViewsModuleDependencies:()=>a});var r=()=>o(220719),i=()=>o(44729),n=()=>o(630116);function a(e){const{layoutStore:t,viewsModule:o,transaction:a}=e,l=(0,r().o9)(n().Bv.createChildStore(t,o.collection_view_block_pointer));i().zz({childStore:l,parentStore:t,transaction:a})}},789280:(e,t,o)=>{o.d(t,{Fe:()=>n,wm:()=>a});const r={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1},i={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1};function n(e){return r[e.type]}function a(e){return i[e.type]}}}]);