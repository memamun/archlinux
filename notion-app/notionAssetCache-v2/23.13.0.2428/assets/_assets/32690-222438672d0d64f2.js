"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[32690],{6533:(e,t,i)=>{i.d(t,{A:()=>a});var o=i(296540),n=()=>i(56366),r=i(474848);const s=i(757695).default.createClass(!1,{name:"OpenStore"});const a=function(e){let{items:t,visible:a}=e;const d=(0,i(401497).DP)(),c=(0,n().uB)(void 0,s),u=(0,n().O$)(c),v=(0,o.useCallback)((()=>function(e){e.setState(!0)}(c)),[c]);return u||t.length<=a?(0,r.jsx)("div",{children:t}):(0,r.jsxs)("div",{children:[t.slice(0,a),(0,r.jsx)(i(704152).A,{onClick:v,style:l(d),children:(0,r.jsx)(i(959013).sA,{defaultMessage:"View {moreCount} more",id:"activity.viewMoreButton.label",values:{moreCount:t.length-a}})})]})};function l(e){return{display:"flex",alignItems:"center",height:28,fontSize:12,color:e.lightTextColor,padding:0,paddingLeft:52,paddingRight:16}}},12296:(e,t,i)=>{i.d(t,{$5:()=>p,P:()=>h,Qo:()=>d,em:()=>g,hx:()=>c,jU:()=>u,jv:()=>v,uY:()=>l});var o=()=>i(244309),n=()=>i(848259),r=()=>i(989423),s=()=>i(212326),a=()=>i(606846);function l(e){const t=e.mightCloseTab??!0;f({target:"body",...e,mightCloseTab:t})}function d(e){const t=e.mightCloseTab??!0;f({target:"title",...e,mightCloseTab:t})}function c(e){f({target:"approve_request_access",...e,mightCloseTab:!1})}function u(e){f({target:"deny_request_access",...e,mightCloseTab:!1})}function v(e){f({target:"remove_reaction",...e,mightCloseTab:!1})}function h(e){f({target:"add_reaction",...e,mightCloseTab:!1})}function f(e){const{target:t,environment:i,activity:s,notification:l,source:d,tab:c,mightCloseTab:u}=e,v="notifications_tab"===d?a().Ay.state.sessionId:void 0,h="notifications_tab"===d?a().Ay.isFilteredToUnreadOnly():void 0;n().nR(i,{target:t,activity_id:s.id,notification_id:null==l?void 0:l.id,notification_page_id:null==l?void 0:l.navigable_block_id,sessionId:v,is_filtered:h,tab:c}),u&&n().s$({environment:i,target:t}),l&&o().v((0,r().ik)(i),{alreadyRead:l.read,notificationId:l.id,activityId:l.activity_id,from:t,sessionId:v})}function g(e){const{notification:t,activity:i,environment:o,tab:r}=e,s={environment:o,activity:i,notificationId:null==t?void 0:t.id,alreadyRead:Boolean(null==t?void 0:t.read),tab:r};return{onBacklinkClicked:e=>n().uK({...s,backlinkPageId:e}),onNotificationFrameClicked:()=>n().Hd(s),...p({notification:t,activity:i,environment:o,tab:r})}}function p(e){const{notification:t,activity:i,environment:o,tab:r}=e,a={environment:o,activity:i,notificationId:null==t?void 0:t.id,alreadyRead:Boolean(null==t?void 0:t.read),tab:r},l=()=>{const e={notification_type:null==t?void 0:t.type,notification_page_id:null==t?void 0:t.navigable_block_id,tab:s().dl()};return"commented"===(null==t?void 0:t.type)&&(e.discussion_id=null==i?void 0:i.discussion_id),e};return{onArchiveClicked:()=>n().R0({...a,otherArgs:l()}),onUnarchiveClicked:()=>n().sL({...a,otherArgs:l()}),onMarkAsReadClicked:()=>n().oy({...a,otherArgs:l()}),onMarkAsUnreadClicked:()=>n().bl({...a,otherArgs:l()}),onNotificationBodyClicked:()=>n().e0({...a,otherArgs:l()})}}},60499:(e,t,i)=>{i.d(t,{A:()=>ae});i(581454);var o=i(296540),n=()=>i(484714),r=()=>i(56366),s=()=>i(401497),a=()=>i(187174),l=()=>i(563884),d=()=>i(281067),c=()=>i(921997),u=()=>i(801634),v=()=>i(959013),h=()=>i(496603),f=()=>i(720665),g=()=>i(129546),p=()=>i(848259),m=()=>i(645873);const y=new(m().O2)("activityUpdate",(async()=>await i.e(13319).then(i.bind(i,523526)))),b=(0,m()._h)(y,(e=>e.ActivityUpdate));var x=()=>i(299545),A=()=>i(37433),S=()=>i(721273),I=()=>i(963589),j=()=>i(941541),k=()=>i(423817),C=()=>i(155959),M=()=>i(224239),_=()=>i(351360),T=()=>i(463830),w=()=>i(227440);class R extends(()=>i(757695))().default{getInitialState(){return{selectedItems:[]}}}const B=R;var L=()=>i(606846),D=(i(944114),()=>i(17022)),O=(i(16280),i(898992),i(354520),()=>i(197959)),U=(i(823215),()=>i(813206)),P=()=>i(438632),K=()=>i(343666),N=()=>i(919709),V=()=>i(175499),z=()=>i(331542),H=()=>i(999598),F=i(474848);const E=["block-deleted","block-created","block-changed"];function W(e){return 0===e.length?["\n"]:e}const Y=function(e){let{batch:t,rootStore:a,pageTitleElem:l,activityTime:d,source:c,currentPageTitle:u}=e;const h=(0,n().v3)(),f=(0,v().tz)(),g=(0,r().K8)((()=>{var e;return null===(e=_().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),p=(0,o.useMemo)((()=>D().A.withListenerIgnored((()=>t.map((e=>{const t=e.edits;let i;i="comment-created"===e.type?function(e,t,i,o){var n,r;const s=t.getRecordStore(t,{table:O().$Y,id:i,spaceId:o});if(!s||0===e.length||!e[0].comment_id)return{beforeValue:"",afterValue:"",diffs:[],error:"invalid comment/discussion"};const a=e[0],l=t.getRecordModel({table:K().SN,id:a.comment_id,spaceId:a.space_id}),d=s.getModel();return d?{beforeValue:"",afterValue:`New comment on text: "${null===(n=(0,H().pN)(d))||void 0===n?void 0:n[0][0]}" in the document. The comment says: "${null==l||null===(r=l.getText())||void 0===r?void 0:r.toString()}"`,diffs:[],error:void 0}:{beforeValue:"",afterValue:"",diffs:[],error:"invalid comment/discussion"}}(e.edits,a,e.discussion_id,e.space_id):function(e,t){const i=[],o=[],n=[];if(e.every(U().Z1))return{beforeValue:"",afterValue:"",diffs:[],error:"unsupported"};for(const r of e){const e=(0,U().hd)(r,t).title,s=null==e?void 0:e.type,a="text"===s||"title"===s,l=E.includes(r.type);if(a||l){if("block-changed"===r.type&&a){const e=(0,V().De)(r.block_data.before.block_value,"title"),t=(0,V().De)(r.block_data.after.block_value,"title");i.push(e),o.push(t),n.push(P().yR({before:e,after:t,insertionAnnotation:[N().Ifu.Inserted],deletionAnnotation:[N().Ifu.Deleted]}))}else if("block-created"===r.type&&a){const e=(0,V().De)(r.block_data.block_value,"title");o.push(e),n.push(P().yR({before:[],after:e,insertionAnnotation:[N().Ifu.Inserted],deletionAnnotation:[N().Ifu.Deleted]}))}else if("block-deleted"===r.type&&a){const e=(0,V().De)(r.block_data.block_value,"title");i.push(e),n.push(P().yR({before:e,after:[],insertionAnnotation:[N().Ifu.Inserted],deletionAnnotation:[N().Ifu.Deleted]}))}}else{const e=`Invalid types '${r.type}', '${s}' for AI summary.`;i.push([e]),o.push([e])}}return{beforeValue:i.map((e=>JSON.stringify(W(e)))).join(", "),afterValue:o.map((e=>JSON.stringify(W(e)))).join(", "),diffs:n,error:void 0}}(e.edits,f);const o=function(e,t,i){return(0,H().Ln)({edits:e,rootStore:i}).map((e=>e.isUser()?e.getFullName(t):"A bot ")).join(", ")}(t,f,a);return{authors:o,before:i.beforeValue,after:i.afterValue,end_time:e.end_time}}))))),[t,f,a]),[m,y]=(0,o.useState)(""),b=(0,s().IS)((e=>({inner:{color:e.text.primary,fontSize:14,margin:13,marginBottom:-5},text:{margin:5,marginLeft:2}})),[]);return(0,o.useEffect)((()=>{(async()=>{const e=i(206267).JW(),t={type:"edit_history",edits:p,page_title:u};if(!g)return;const o=await i(449506).callStreamApi({eventName:"getCompletion",environment:h,data:{id:(0,i(498212).lZ)(),context:t,model:"openai-gpt-4o-mini",spaceId:g,isSpacePermission:!1,aiSessionId:e,inferenceReason:"home_tile_prototype",metadata:{}},headers:(0,i(386164).WS)({spaceId:g})});if("success"!==o.type)return;let n="";if(i(532659).hS.is(o.data))for await(const i of o.data)"success"===i.type&&(n+=i.completion);y(n)})()}),[h,g,u,d,p]),(0,F.jsxs)("div",{style:b.inner,children:["home_tile"===c&&(0,F.jsx)(v().sA,{id:"activityUpdate.aiSummary",defaultMessage:"{pageTitle} Â· {activityTime}",values:{pageTitle:l,activityTime:(0,i(907514).nl)(d)}}),void 0===m||""===m?(0,F.jsxs)("div",{style:b.text,children:[(0,F.jsx)(z().A,{style:{display:"inline"}}),(0,F.jsx)("span",{style:{marginLeft:"10px"},children:"Loading summary... "}),(0,F.jsx)("br",{})]}):(0,F.jsx)("div",{style:b.text,children:m})]})};var $=()=>i(397682);const J=function(e){const{batch:t,rootStore:a,tabArgs:l,isLast:d}=e,c=(0,n().v3)(),u=(0,v().tz)(),h=(0,s().IS)((e=>({details:{color:e.text.secondary,fontSize:12,marginLeft:15,marginTop:9,marginBottom:10},hr:{border:"none",height:1,backgroundColor:e.tableDividerColor}})),[]),f=(0,o.useMemo)((()=>D().A.withListenerIgnored((()=>t.activities.map((e=>{if("block-edited"===e.type)return{type:"block-edited",end_time:parseInt(e.end_time),edits:(0,i(191278).E)(e.getEdits())};if("commented"===e.type){const t=a.getRecordStore(a,{table:O().$Y,id:e.discussion_id,spaceId:e.space_id});if(!t.isDefined())return;const i=(0,$().s6)(e.getEdits(),l.source,t);if(!(0,$().Aj)(i)||0===i.length)return;return{type:"comment-created",end_time:parseInt(e.end_time),edits:i,discussion_id:e.discussion_id,space_id:e.space_id}}throw new Error("Unsupported activity type")})).filter(i(534177).O9)))),[t,a,l.source]),g=(0,r().K8)((()=>{if(0===f.length)return;const e=f[0].edits[0];return e&&i(630116).Bv.createChildStore(a,{table:i(179034).ev,id:e.navigable_block_id})}),[f,a]),p=(0,r().K8)((()=>g&&(0,i(71304).Qe)(g,u,c,!0)),[c,u,g]);return 0!==f.length&&g?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Y,{batch:f,rootStore:a,activityTime:f[0].end_time,source:l.source,pageTitleElem:(0,F.jsx)(i(423213).A,{titledRecordStore:g,activity:t.activities[0],tabArgs:l,getRecordModel:a.getRecordModel}),currentPageTitle:p??"No page title"}),(0,F.jsx)("details",{style:h.details,open:!1,children:t.activities.map((e=>(0,F.jsx)(b,{activity:e,rootStore:a,tabArgs:l,isLast:d},e.id)))}),(0,F.jsx)("hr",{style:h.hr})]}):null};const X=function(e){let{activities:t,rootStore:i}=e;const n=(0,o.useMemo)((()=>D().A.withListenerIgnored((()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;const i=[],o={};for(const n of e){const e=n.navigable_block_id;if(!e)continue;if(!o[e]){o[e]=[n];continue}const r=o[e][o[e].length-1];Math.abs((Number(r.end_time)-parseInt(n.end_time))/36e5)<=t?o[e].push(n):(o[e].sort(((e,t)=>parseInt(t.end_time)-parseInt(e.end_time))),i.push({page:e,activities:o[e],latest_activity_end_time:parseInt(o[e][0].end_time)}),o[e]=[n])}for(const n in o)o[n].length>0&&(o[n].sort(((e,t)=>parseInt(t.end_time)-parseInt(e.end_time))),i.push({page:n,activities:o[n],latest_activity_end_time:parseInt(o[n][0].end_time)}));return i.sort(((e,t)=>t.latest_activity_end_time-e.latest_activity_end_time)),i}(t).slice(0,20)))),[t]);return(0,F.jsx)("section",{role:"feed","aria-label":"Recent updates",children:n.map(((e,t)=>(0,F.jsx)(J,{batch:e,rootStore:i,isLast:t===e.activities.length-1,tabArgs:{tab:"homeTile",source:"home_tile"}},t)))})};var G=()=>i(228927),Z=()=>i(125565),Q=()=>i(575695),q=()=>i(760217),ee=()=>i(297401),te=()=>i(821879);const ie=function(e){let{mode:t,title:i,onChange:n,disabled:s,focused:a,onMenuDismiss:l,items:d,addItemLabel:c,tokenInputPlaceholder:u,resultSectionTitle:v,componentDebugName:h,icon:f,getItemLabel:g,options:p,store:m}=e;const y=(0,r().uB)(m,B),b=(0,r().O$)(y);return(0,o.useEffect)((()=>{y.setState({selectedItems:d})}),[d,y]),(0,F.jsx)(te().A,{mode:t,hasItemsSelected:b.selectedItems.length>0,title:i,icon:f,items:d,onChange:e=>{n(e)},disabled:s,focused:a,renderFilter:(e,t)=>(0,F.jsx)(re,{getItemLabel:g,item:e,args:t}),renderToken:e=>(0,F.jsx)(ne,{item:e}),renderItemForSummary:e=>(0,F.jsx)(oe,{item:e}),addItemLabel:c,labelText:{title:i,tokenInputPlaceholder:u,resultSectionTitle:v,componentDebugName:h},performRequest:e=>function(e,t){let{query:i}=e;return Promise.resolve(t.filter((e=>e.includes(i))))}(e,p),renderResultMenuItem:(e,i)=>(0,F.jsx)(se,{getItemLabel:g,mode:t,store:y,item:e,props:i}),onMenuDismiss:l})};function oe(e){let{item:t}=e;return(0,F.jsx)(F.Fragment,{children:`hello${t}`})}function ne(e){let{item:t}=e;return(0,F.jsx)(F.Fragment,{children:t})}function re(e){let{item:t,args:i,getItemLabel:o}=e;const{disabled:r,onRemove:s,onClick:a}=i,l=function(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:4}}}((0,n().v3)()),d=(0,F.jsx)(ee().A,{disabled:r,onClick:s});return(0,F.jsx)(q().A,{title:(null==o?void 0:o(t))||t,disabled:r,focused:!1,right:d,style:l.menuItem,desktopTitleStyle:l.menuItemTitle,onClick:a})}function se(e){let{item:t,props:i,getItemLabel:n,mode:s,store:a}=e;const l=(0,r().uB)(a,B),d=(0,r().K8)((()=>l.state.selectedItems),[l]);return(0,o.createElement)(q().A,{...i,key:t,title:(null==n?void 0:n(t))||t,checkState:s===te().C.Pill&&d.includes(t)})}function ae(e){var t;const{spaceId:i,navigableBlockStore:l,collectionId:d,source:u}=e,p=null==l?void 0:l.id,m=(0,n().v3)(),y=(0,r().uB)(void 0,M().L),R=(0,r().uB)(void 0,T().A),B=(0,s().IS)((e=>({placeholderContent:ue(m,e),banner:{padding:"12px 10px"}})),[m]),D=(0,o.useMemo)((()=>h().nF((e=>function(e,t){t.update((e=>({...e,shouldLoadNewerActivities:!0})))}(0,y)),1e3)),[y]),O=(0,o.useMemo)((()=>f().Hg(D)),[D]),U=(0,o.useMemo)((()=>f().Hg(D)),[D]);(0,o.useEffect)((()=>{let e,t;if(p){const t=(0,c().O$)(p);e=j().Ay.addListener(t,void 0,O,void 0,m)}if(d){const e=(0,c().zB)(d);t=j().Ay.addListener(e,void 0,U,void 0,m)}return()=>{e&&j().Ay.removeListener(e,m),t&&j().Ay.removeListener(t,m)}}),[d,m,U,O,p]);const P=(0,r().K8)((()=>w().A.state.online),[]),K=(0,r().K8)((()=>{const e=y.state;return 0===e.filterActivityTypes.length&&void 0===e.filterDateRange.ending&&void 0===e.filterDateRange.starting}),[y]),N=(0,r().K8)(A().XL,[]),V=(0,I().X)("updates_ai"),{currentUserStore:z,currentSpaceStore:H}=(0,r().K8)((()=>{const{currentUserStore:e,currentSpaceStore:t}=_().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),{shouldLoadOlderActivities:E,shouldLoadNewerActivities:W,filterActivityTypes:Y,filterDateRange:$,activityIds:J,hasOlderActivities:Q}=(0,r().K8)((()=>{const{shouldLoadOlderActivities:e,shouldLoadNewerActivities:t,filterActivityTypes:i,filterDateRange:o,activityIds:n,hasOlderActivities:r}=y.state;return{shouldLoadOlderActivities:e,shouldLoadNewerActivities:t,filterActivityTypes:i,filterDateRange:o,activityIds:n,hasOlderActivities:r}}),[y]),[q]=(0,a().Yb)((async()=>{if(!P||!z||!H)return;const e=L().Ay.startLoading();W?await g().Xc(m,{store:y,activityIds:J,spaceId:i,filterActivityTypes:Y,filterDateRange:$,navigableBlockId:p,collectionId:d}):E&&Q&&("home_tile"===u?await g().Yc(m,{store:y,activityIds:J,spaceId:i,filterActivityTypes:Y,filterDateRange:$,navigableBlockId:p,collectionId:d}):await g().rL(m,{store:y,activityIds:J,spaceId:i,filterActivityTypes:Y,filterDateRange:$,navigableBlockId:p,collectionId:d})),L().Ay.endLoading(e)}),[J,y,d,H,z,m,Y,$,Q,P,p,W,E,i,u]),ee=q.error,te="resolved"===q.status,ie=(0,r().K8)((()=>{if(!z)return[];const e=z.id,t=(0,C().T)("supportsNativeHome"),o={spaceId:i,userId:e,navigableBlockId:p,collectionId:d,filterDateRange:$,filterActivityTypes:Y},n=t&&0===J.length&&!te?S().oV(o):J;return t&&te&&S().tK(o,J),function(e){return h().oE(e.map((e=>function(e){const{currentUserStore:t,currentSpaceStore:i}=_().default.state;if(!t||!i)return;const o=(0,x().jA)(i,e,i.id),n=o.getModel();return n&&!n.invalid?n:null}(e))))}(n)}),[J,d,z,Y,$,p,te,i]);if(!P)return(0,F.jsx)(ve,{});if(!z||!H)return null;const oe=0===ie.length&&!Q&&te,ne=H;if(ee)return(0,F.jsx)("div",{style:B.placeholderContent,children:(0,F.jsx)(v().sA,{defaultMessage:"Something went wrong.",id:"activityUpdate.unknownErrorLoadingActivities.message"})});if(0===ie.length&&!te)return(0,F.jsxs)("div",{children:[N&&(0,F.jsx)(le,{collectionId:d,source:u,activityUpdatesStore:y,filterPopupStore:R}),(0,F.jsx)(k().J,{areaHeight:window.innerHeight})]});const re=(0,F.jsx)(Z().A,{isSecondaryColor:!0,isMultiline:!0,children:(0,F.jsxs)("div",{style:{paddingTop:"15px",paddingRight:"10px",marginBottom:"-8px",paddingLeft:"10px"},children:["We're testing out AI summaries of updates on suggested pages. AI can make mistakes. Please leave feedback ",(0,F.jsx)("a",{href:"https://dev.notion.so/notion/Home-feed-with-AI-summary-feedback-doc-fffb35e6e67f8083b14ecc64c6ed465d",children:"here"}),"!"]})}),se=(0,F.jsxs)("div",{style:{...B.banner,marginTop:"-10px"},children:["Did you read to the end? Please let us know ",(0,F.jsx)("a",{href:"https://dev.notion.so/notion/Home-feed-with-AI-summary-feedback-doc-fffb35e6e67f8083b14ecc64c6ed465d",children:"here"}),", particularly if anything was helpful or unhelpful!"]});return(0,F.jsxs)("div",{children:[V&&"home_tile"===u&&re,N&&(0,F.jsx)(le,{collectionId:d,source:u,activityUpdatesStore:y,filterPopupStore:R}),(0,F.jsxs)("div",{style:oe?B.placeholderContent:ce(m,u),className:oe?"":"notranslate",children:[oe?null===(t=e.empty)||void 0===t?void 0:t.call(e,{hasFiltersOn:!K}):null,V&&"home_tile"===u?(0,F.jsx)(X,{activities:ie,rootStore:ne}):(0,F.jsx)("section",{role:"feed",children:ie.map(((e,t,i)=>{const o=i.length-1===t,n="notifications_tab"===u?{tab:"all",source:u}:"updates_sidebar"===u?{tab:"pageUpdatesSidebar",source:u}:{tab:"homeTile",source:u};return(0,F.jsx)(b,{activity:e,rootStore:ne,isLast:o,tabArgs:n},e.id)}))}),(0,F.jsx)(G().A,{onChange:e=>{e<200&&te&&!E&&Q&&(K||ie.length>0)&&y.update((e=>({...e,shouldLoadOlderActivities:!0})))},children:!te&&Q?(0,F.jsx)(he,{isPaginated:!0}):null})]}),V&&("home_tile"===u?(0,F.jsx)(Z().A,{isSecondaryColor:!0,isMultiline:!0,children:se}):null)]})}function le(e){const{collectionId:t,source:i,activityUpdatesStore:o,filterPopupStore:n}=e,{currentUserStore:s,currentSpaceStore:a}=(0,r().K8)((()=>{const{currentUserStore:e,currentSpaceStore:t}=_().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),l=(0,r().K8)((()=>o.state.filterActivityTypes.length>0||o.state.filterDateRange.ending||o.state.filterDateRange.starting),[o]);return s&&a?(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"12px 10px",width:"100%",gap:6},children:[(0,F.jsx)(de,{collectionId:t,source:i,filterPopupStore:n,activityUpdatesStore:o}),(0,F.jsx)(ye,{source:e.source,activityUpdatesStore:o,filterPopupStore:n}),l&&(0,F.jsx)(me,{source:e.source,activityUpdatesStore:o})]}):null}function de(e){const{collectionId:t,source:i,activityUpdatesStore:s,filterPopupStore:a}=e,l=(0,v().tz)(),c=(0,n().v3)(),h=t?u().Fv:u().IP,f=(0,r().uB)(void 0,B),g=(0,r().K8)((()=>s.state.filterActivityTypes),[s]),p=(0,o.useCallback)((()=>{ge(a)}),[a]);return(0,F.jsx)(ie,{store:f,focused:!1,icon:d().v,options:[...h].sort(),items:g,mode:te().C.Pill,title:(0,F.jsx)(v().sA,{id:"activityUpdates.filterMenu.byType.title",defaultMessage:"Activity type"}),tokenInputPlaceholder:l.formatMessage({id:"activityUpdates.filterMenu.byType.search",defaultMessage:"Search for a type"}),resultSectionTitle:l.formatMessage({id:"activityUpdates.filterMenu.byType.resultSectionTitle",defaultMessage:"Activity Types"}),addItemLabel:l.formatMessage({id:"activityUpdates.filterMenu.byType.addItemLabel",defaultMessage:"Add an activity type"}),componentDebugName:"ActivityUpdatesSearchEditTypesFilter",onChange:e=>pe((()=>s.update((t=>({...t,filterActivityTypes:e,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0,shouldLoadNewerActivities:!1})))),c,i,s),onMenuDismiss:p,getItemLabel:e=>e.split("-").map((e=>e.replace(/(^.)/,(e=>e.toUpperCase())))).join(" ")})}function ce(e,t){return{minHeight:e.device.isMobile?void 0:"75vh",padding:t&&"home_tile"===t?"10px":void 0}}function ue(e,t){const{device:i}=e;return{...ce(e),paddingTop:i.isMobile?32:void 0,paddingBottom:i.isMobile?32:void 0,minHeight:i.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:t.mediumTextColor,flexDirection:"column",flex:"1 1 0%"}}function ve(){const e=(0,n().v3)(),t=(0,s().IS)((t=>({offlineMessage:ue(e,t)})),[e]);return(0,F.jsx)("div",{style:t.offlineMessage,children:(0,F.jsx)(v().sA,{defaultMessage:"Please go online to view updates.",id:"activityUpdates.offlineMessage"})})}function he(e){let{isPaginated:t}=e;const i=(0,n().v3)(),o=(0,s().IS)((e=>({spinner:{...ue(i,e),minHeight:t?64:220}})),[i,t]);return(0,F.jsx)("div",{style:o.spinner,children:(0,F.jsx)(z().A,{})})}function fe(e){var t,i;const{filterActivityTypes:o,filterDateRange:n}=e.state;return{activityTypes:o,dateRange:{start:null===(t=n.starting)||void 0===t?void 0:t.start_date,end:null===(i=n.ending)||void 0===i?void 0:i.start_date}}}function ge(e){e.setState({...e.state,open:!1})}function pe(e,t,i,o){const n=fe(o);e();const r=fe(o);p().Xl({environment:t,activityUpdatesSource:i,filters:r,prevFilters:n})}function me(e){let{source:t,activityUpdatesStore:i}=e;const o=(0,n().v3)(),r=(0,s().IS)((e=>({clearButton:{flexGrow:1,textAlign:"right",cursor:"pointer",fontSize:14,color:e.mediumTextColor,marginRight:8}})),[]);return(0,F.jsx)("div",{style:r.clearButton,onClick:()=>pe((()=>i.reset()),o,t,i),children:(0,F.jsx)(v().sA,{defaultMessage:"Clear",id:"activityUpdates.clearFilters"})})}function ye(e){let{source:t,activityUpdatesStore:i,filterPopupStore:s}=e;const a=(0,n().v3)(),d=(0,o.useCallback)((()=>ge(s)),[s]),c=(0,r().K8)((()=>i.state.filterDateRange),[i]);return(0,F.jsx)(Q().A,{mode:te().C.Pill,focused:!1,showButtons:!0,title:(0,F.jsx)(v().sA,{id:"activityUpdates.filterMenu.byDate",defaultMessage:"Date Range"}),icon:l().k,value:c,onMenuDismiss:d,onChange:e=>pe((()=>i.update((t=>({...t,filterDateRange:e,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0})))),a,t,i)})}},77179:(e,t,i)=>{i.d(t,{Ay:()=>B,H8:()=>R});var o=i(296540),n=()=>i(484714),r=()=>i(56366),s=()=>i(401497),a=()=>i(563884),l=()=>i(823279),d=()=>i(693954),c=()=>i(179034),u=()=>i(959013),v=()=>i(534177),h=()=>i(82926),f=()=>i(38337),g=()=>i(907514),p=()=>i(630116),m=()=>i(285790),y=()=>i(128295),b=()=>i(859428),x=()=>i(256863),A=()=>i(453697),S=()=>i(659799),I=()=>i(365136),j=()=>i(999598),k=i(474848);const C=16,M={paddingTop:12},_={fontSize:14,lineHeight:1.4,flexGrow:1,minWidth:0},T=i(757695).default.createClass(!1,{name:"HoveredStore"});const w={marginTop:2,marginRight:8,flexShrink:0};function R(e){const{authors:t,size:i,style:o,iconStyle:r,showAvatarShadow:a,showWarningIcon:l}=e,c=(0,n().v3)(),u=(0,s().IS)((e=>({container:{position:"relative"},icon:{position:"absolute",right:5,bottom:-3,fill:e.icon.yellowPrimary,height:12,width:12}})),[]),h=t.sort(((e,t)=>(0,j().G7)({actor:e,environment:c})-(0,j().G7)({actor:t,environment:c})))[0],f=i,g={...w,...o},p={...u.icon,...r};return h?h.isBot()?(0,k.jsxs)("div",{style:u.container,children:[(0,k.jsx)(x().A,{botValue:h,style:g,size:f}),l&&(0,d().Q)(p)]}):h.isUser()?(0,k.jsxs)("div",{style:u.container,children:[(0,k.jsx)(A().A,{userValue:h,style:g,size:f,avatarShouldShowShadow:a??!0}),l&&(0,d().Q)(p)]}):h.isAgent()?null:void(0,v().HB)(h):null}const B=function(e){let{children:t,icon:i,timestamp:s,header:a,navigableBlockId:l,rootStore:d,onBacklinkClicked:c,showSnapshotButton:u,isPrivate:v,isLast:h}=e;const g=(0,n().v3)(),p=(0,r().uB)(void 0,T),m=(0,o.useCallback)((()=>function(e){e.setState(!1)}(p)),[p]),y=(0,o.useCallback)((()=>function(e){e.setState(!0)}(p)),[p]),b=(0,o.useId)(),x=(0,r().K8)((()=>g.WindowSizeStore.state.paddingLeftCSS),[g]),A=(0,r().K8)((()=>g.WindowSizeStore.state.paddingRightCSS),[g]),S=(0,k.jsxs)("div",{style:{...M,paddingBottom:t?12:8,paddingLeft:g.device.isMobile?x:0,paddingRight:g.device.isMobile?A:0},children:[(0,k.jsxs)("div",{style:{display:"flex",paddingLeft:C,paddingRight:C},children:[(0,k.jsxs)("div",{className:f().a9W,style:{display:"flex",alignItems:"flex-start",position:"relative"},children:[(0,k.jsx)("div",{style:{marginRight:4}}),i]}),(0,k.jsx)(z,{timestamp:s,header:a,children:t,navigableBlockId:l,rootStore:d,onBacklinkClicked:c,titleAriaId:b}),(0,k.jsx)(V,{showSnapshotButton:u,timestamp:s,navigableBlockId:l,rootStore:d}),(0,k.jsx)(L,{isPrivate:v})]}),t&&(0,k.jsx)(D,{children:t})]});return(0,k.jsxs)("article",{onMouseOver:y,onMouseLeave:m,"aria-labelledby":b,children:[S,(0,k.jsx)(N,{isLast:h})]})};function L(e){let{isPrivate:t}=e;return t?(0,k.jsx)(I().A,{style:{marginTop:1,marginBottom:4,marginLeft:8}}):null}function D(e){let{children:t}=e;return(0,k.jsx)("div",{className:f().CyB,children:t})}function O(e){return{borderBottom:`1px solid ${e.regularDividerColor}`}}function U(e){return{fontSize:12,color:e.lightTextColor}}function P(e){return{fontSize:12,color:e.lightTextColor,whiteSpace:"nowrap"}}function K(e){return{fontSize:12,color:e.lightTextColor,marginLeft:4,marginRight:4}}function N(e){let{isLast:t}=e;const i=(0,s().DP)();return t?null:(0,k.jsx)("div",{style:O(i)})}function V(e){let{showSnapshotButton:t,timestamp:i,navigableBlockId:o,rootStore:r}=e;const s=(0,n().v3)(),a=(0,u().tz)();if(!t)return null;if(i<new Date("2018-10-26").getTime())return null;const d=a.formatMessage({defaultMessage:"View version for this update",id:"activitySection.viewVersionForUpdate.tooltip"});return o?(0,k.jsx)(b().A,{renderTooltip:()=>d,render:e=>(0,k.jsx)(m().A,{ariaLabel:d,onClick:()=>function(e,t,i,o){if(o){const n=p().Bv.createChildStore(e,{table:c().ev,id:o});h().WE({environment:i,blockStore:n,openSnapshotNearTimestamp:t.toString(),from:"activity"})}}(r,i,s,o),icon:l().L,...e})}):null}function z(e){let{titleAriaId:t,timestamp:i,header:n,children:r,navigableBlockId:l,rootStore:d,onBacklinkClicked:u}=e;const v=(0,s().DP)(),h=(0,g().nl)(i),m=(0,g().x$)(i),b=(0,o.useMemo)((()=>l?p().Bv.createChildStore(d,{table:c().ev,id:l}):void 0),[l,d]);return(0,k.jsxs)("div",{style:_,children:[(0,k.jsx)("div",{id:t,className:f().k2l,children:n}),(0,k.jsxs)("div",{style:{display:"flex",marginTop:4,marginBottom:r?8:4},children:[(0,k.jsx)("div",{style:P(v),className:f().Cxn,children:(0,k.jsx)(S().A,{text:h,tooltipText:m,icon:a().k})}),d&&b&&(0,k.jsx)(y().Ay,{isLink:!0,innerStyle:U(v),store:b,left:(0,k.jsx)("div",{style:K(v),children:"Â·"}),onClick:u})]})]})}},81905:(e,t,i)=>{i.d(t,{A:()=>u,I:()=>v});i(296540);var o=()=>i(401497),n=()=>i(959013),r=()=>i(848259),s=()=>i(572080),a=()=>i(317909),l=()=>i(493823),d=()=>i(360137),c=i(474848);function u(e){var t;const{isMobile:i,environment:n,rootStore:r,activity:s,tabArgs:a}=e,{source:l}=a,u=Boolean(null===(t=a.notification)||void 0===t?void 0:t.visited),h=(0,o().IS)((()=>({container:{paddingLeft:(0,d().F9)({source:l,isMobile:i})-8,paddingTop:4}})),[i,l]);return u?(0,c.jsx)("div",{style:h.container,children:(0,c.jsx)(v,{tabArgs:a,environment:n,rootStore:r,activity:s})}):null}function v(e){const{tabArgs:t,environment:i,rootStore:u,activity:v}=e,{notification:h,tab:f}=t,g=(0,o().IS)((e=>({secondaryButton:(0,d().AG)(e)})),[]);return Boolean(null==h?void 0:h.visited)?(0,c.jsx)(l().p,{isGray:!0,size:"xs",onClick:()=>{h&&(a().createAndCommit({userAction:"Activity.handleUnarchive",environment:i,canUndo:!0,perform:e=>{s().JV({notificationId:h.id,visited:!1,rootStore:u,transaction:e})}}),r().sL({environment:i,activity:v,tab:f,notificationId:h.id,alreadyRead:h.read}))},style:g.secondaryButton,children:(0,c.jsx)(n().sA,{defaultMessage:"Unarchive",id:"activity.actions.unarchiveButton.label"})}):null}},82926:(e,t,i)=>{i.d(t,{j8:()=>g,un:()=>h,p2:()=>v,WE:()=>u,n5:()=>p,Xn:()=>f});var o=()=>i(161479);const n=(0,i(583835).Dv)("restoreSnapshot");var r=()=>i(570323),s=()=>i(989423);var a=()=>i(136833);var l=()=>i(357625),d=()=>i(496414);const c=(0,i(959013).YK)({restoringPreviousVersion:{id:"historyModalActions.restoringPreviousVersion.loadingMessage",defaultMessage:"Restoringâ¦"}});function u(e){const{environment:t,from:i,...o}=e;!function(e,t){s().vd(e,"open_history",{from:t})}(t,i),r().A.setState({...o,open:!0,size:50})}function v(){const e=r().A.state;e.open&&r().A.setState({...e,size:e.size+20})}function h(){r().A.setState({open:!1})}function f(e){const{environment:t,snapshot:i,nextFutureSnapshot:o}=e;!function(e,t){s().vd(e,"select_snapshot",{ageMs:(0,a().S)(t)})}(t,i);const n=r().A.state;n.open&&r().A.setState({...n,snapshot:i,nextFutureSnapshot:o,openSnapshotNearTimestamp:void 0})}function g(){const e=r().A.state;e.open&&r().A.setState({...e,snapshot:void 0,nextFutureSnapshot:void 0})}async function p(e,t){if(!r().A.state.open||!r().A.state.snapshot)return;if(!r().A.state.snapshot)return;!function(e,t){s().vd(e,"restore_snapshot",{ageMs:(0,a().S)(t)})}(e,r().A.state.snapshot),d().m({message:c.restoringPreviousVersion});const i=await l().UT(e,n,{block:{id:r().A.state.blockStore.id,spaceId:(0,o().e)(r().A.state.blockStore.pointer.spaceId)},timestamp:r().A.state.snapshot.timestamp,shouldRestoreCollection:t??!1}).next();if(d().V(),i.value.error)throw i.value.error}},129546:(e,t,i)=>{i.d(t,{Xc:()=>d,Yc:()=>u,rL:()=>c});i(16280);var o=()=>i(604995),n=()=>i(161479),r=()=>i(496603),s=()=>i(351360),a=()=>i(449506);const l=20;async function d(e,t){const{store:i,activityIds:o,spaceId:s,filterActivityTypes:d,filterDateRange:c,navigableBlockId:u,collectionId:h}=t,f=r().$1(o),g=await a().callApi({eventName:"getActivityLog",environment:e,data:{spaceId:s,navigableBlock:u?{id:u,spaceId:(0,n().e)(void 0)}:void 0,collection:h?{id:h,spaceId:(0,n().e)(void 0)}:void 0,endingBeforeId:f,limit:l,activityTypes:d,...v(c)}});if("failed"===g.type)throw g.error;const p=g.data.activityIds;i.update((e=>({...e,shouldLoadNewerActivities:!1,activityIds:p.concat(o)})))}async function c(e,t){const{store:i,activityIds:o,spaceId:s,filterActivityTypes:d,filterDateRange:c,navigableBlockId:u,collectionId:h}=t,f=r().HV(o),g=await a().callApi({eventName:"getActivityLog",environment:e,data:{spaceId:s,navigableBlock:u?{id:u,spaceId:(0,n().e)(void 0)}:void 0,collection:h?{id:h,spaceId:(0,n().e)(void 0)}:void 0,startingAfterId:f,limit:l,activityTypes:d,...v(c)}});if("failed"===g.type)throw g.error;const p=g.data.activityIds;i.update((e=>({...e,shouldLoadOlderActivities:!1,activityIds:o.concat(p),hasOlderActivities:p.length>0})))}async function u(e,t){var i;const{store:o,activityIds:n}=t,r=null===(i=s().default.state.currentSpaceViewStore)||void 0===i?void 0:i.id;if(!r)throw new Error("No space view id");const l=await a().callApi({eventName:"getActivityFeedForHomePrototypeDoNotUse",environment:e,data:{spaceViewId:r}});if("failed"===l.type)throw l.error;const d=l.data.activityIds;o.update((e=>({...e,shouldLoadOlderActivities:!1,activityIds:n.concat(d),hasOlderActivities:!1})))}function v(e){var t,i;const n=null!==(t=e.ending)&&void 0!==t&&t.start_date?o().C6.isoToUnixMs(e.ending.start_date):void 0;return{startingAfterTimeMs:null!==(i=e.starting)&&void 0!==i&&i.start_date?o().C6.isoToUnixMs(e.starting.start_date):void 0,endingBeforeTimeMs:n?o().K1({date:n,daysToAdd:1}):void 0}}},136833:(e,t,i)=>{function o(e){return Date.now()-parseInt(e.timestamp)}i.d(t,{S:()=>o})},173019:(e,t,i)=>{i.d(t,{r:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},191278:(e,t,i)=>{i.d(t,{A:()=>k,E:()=>j});i(898992),i(354520),i(581454),i(296540);var o=()=>i(484714),n=()=>i(56366),r=()=>i(584262),s=()=>i(700500),a=()=>i(427704),l=()=>i(179034),d=()=>i(343666),c=()=>i(107273),u=()=>i(959013),v=()=>i(630116),h=()=>i(296798),f=()=>i(921194),g=()=>i(6533),p=()=>i(12296),m=()=>i(999598),y=()=>i(81905),b=()=>i(360137),x=()=>i(423213),A=()=>i(77179),S=()=>i(479233),I=i(474848);function j(e){return(0,c().W9)(e).filter((e=>{const{block_value:t}="block-changed"===e.type?e.block_data.after:e.block_data;return t.parent_table!==d().SN}))}function k(e){const{activity:t,tabArgs:i,rootStore:r,isLast:s}=e,{notification:a,tab:d}=i,c=(0,o().v3)(),h=(0,n().K8)((()=>j(t.getEdits())),[t]),f=h[0],b=(0,n().K8)((()=>parseInt(t.end_time)),[t]),k=(0,n().K8)((()=>f&&v().Bv.createChildStore(r,{table:l().ev,id:f.navigable_block_id})),[f,r]),M=(0,n().K8)((()=>(0,m().Ln)({edits:h,rootStore:r})),[h,r]),_=(0,n().K8)((()=>(0,m().bD)(M)),[M]),T=(0,n().K8)((()=>k&&(0,m().DU)({recordId:k.id,recordType:"block",tab:d,rootStore:r,environment:c})),[k,d,r,c]);if(0===h.length||!k)return null;const w=(0,I.jsx)(x().A,{titledRecordStore:k,activity:t,tabArgs:i,getRecordModel:r.getRecordModel});return(0,I.jsxs)(A().Ay,{timestamp:b,header:(0,I.jsx)("span",{children:(0,I.jsx)(u().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited {pageTitle}} other {{authorOrAuthors} edited {pageTitle}}}",id:"activity.blockEdited.header",values:{numberOfAuthors:M.length,authorOrAuthors:_,pageTitle:w}})}),isLast:s,isPrivate:T,rootStore:r,navigableBlockId:k.id,icon:(0,I.jsx)(A().H8,{authors:M,size:24}),showSnapshotButton:(0,S().m)(i),...(0,p().em)({notification:a,activity:t,environment:c,tab:d}),children:[(0,I.jsx)(g().A,{visible:5,items:h.map(((e,o)=>(0,I.jsx)(C,{edit:e,index:o,activity:t,rootStore:r,tabArgs:i},o)))}),(0,I.jsx)(y().A,{tabArgs:i,activity:t,isMobile:c.device.isMobile,environment:c,rootStore:r})]})}function C(e){let{edit:t,index:i,activity:d,rootStore:c,tabArgs:u}=e;const v=(0,o().v3)(),{source:g}=u,m=(0,n().K8)((()=>{let e=c.getRecordModel({table:l().ev,id:t.block_id});return e&&e.type===s().xd.tableRow&&(e=c.getRecordModel({table:l().ev,id:e.parent_id})),e?e.getRenderUrl({getRecordModel:c.getRecordModel,pageVisitSource:r().y8.Activity}):a().JZ.root}),[t.block_id,c]),y=v.device.isMobile;return"block-deleted"===t.type?t.block_data.block_value.type===s().xd.page?(0,I.jsx)(h().A,{href:m,onClick:()=>(0,p().uY)({...u,environment:v,activity:d}),innerStyle:(0,b().aY)({source:g,isMobile:y}),children:(0,I.jsx)(f().A,{edit:t,rootStore:c})},i):(0,I.jsx)("div",{style:(0,b().aY)({source:g,isMobile:y}),children:(0,I.jsx)(f().A,{edit:t,rootStore:c})},i):(0,I.jsx)(h().A,{href:m,onClick:()=>(0,p().uY)({...u,environment:v,activity:d}),innerStyle:(0,b().aY)({source:g,isMobile:y}),children:(0,I.jsx)(f().A,{edit:t,rootStore:c})},i)}},224239:(e,t,i)=>{i.d(t,{L:()=>o});class o extends(()=>i(757695))().default{getInitialState(){return{activityIds:[],shouldLoadNewerActivities:!1,shouldLoadOlderActivities:!0,hasOlderActivities:!0,filterActivityTypes:[],filterDateRange:{starting:void 0,ending:void 0}}}}},331132:(e,t,i)=>{i.d(t,{A:()=>s});i(296540);var o=()=>i(401497),n=()=>i(100622),r=i(474848);function s(){const e=(0,o().IS)((e=>({blockContext:{flexShrink:0,display:"flex",width:3,borderRadius:4,marginLeft:2,marginRight:8,minHeight:20,background:(0,n().eb)(e.mode)}})),[]);return(0,r.jsx)("div",{style:e.blockContext})}},360137:(e,t,i)=>{i.d(t,{AG:()=>d,Ei:()=>u,F9:()=>l,aY:()=>a,a_:()=>s,kI:()=>r,vF:()=>n,xC:()=>c});const o={userSelect:"text",WebkitUserSelect:"text"},n={padding:1,...o},r={display:"inline-flex",marginRight:2,verticalAlign:"text-top"},s={fontWeight:i(284371).Wy.semibold};function a(e){return{padding:0,paddingLeft:l(e),paddingRight:16,paddingBottom:3,...o}}function l(e){const{source:t,isMobile:i}=e;return"notifications_tab"===t?52+(i?3:2):52}function d(e){return{height:26,paddingLeft:8,paddingRight:8,color:e.mediumTextColor}}function c(e){return{display:"inline",whiteSpace:"normal",marginRight:e?3:0,wordBreak:"break-word",...s}}function u(e){return{boxShadow:e.shadow2XS,height:26,paddingLeft:8,paddingRight:8,fontWeight:500,color:e.regularTextColor}}},397682:(e,t,i)=>{i.d(t,{Aj:()=>R,mV:()=>N,s6:()=>B});i(898992),i(823215),i(354520),i(581454);var o=i(296540),n=()=>i(484714),r=()=>i(56366),s=()=>i(401497),a=()=>i(179034),l=()=>i(197959),d=()=>i(161479),c=()=>i(919709),u=()=>i(959013),v=()=>i(534177),h=()=>i(284371),f=()=>i(848259),g=()=>i(774733),p=()=>i(902731),m=()=>i(712030),y=()=>i(921855),b=()=>i(108944),x=()=>i(630116),A=()=>i(493823),S=()=>i(296798),I=()=>i(77179),j=()=>i(12296),k=()=>i(331132),C=()=>i(999598),M=()=>i(81905),_=()=>i(360137),T=i(474848);function w(e){return"comment-created"===e.type}function R(e){return e.length>0&&e.every(w)}function B(e,t,i){if(!i)return[];let o=e.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":case"suggestion-created":return!0;default:(0,v().HB)(e)}}));0===o.length&&0!==e.length&&"updates_sidebar"!==t&&(o=e);const n="suggestion"===(null==i?void 0:i.getType())&&(null==i?void 0:i.getCommentPointers()[0]),r=o[0];return r&&n&&r&&"comment-created"===r.type&&r.comment_id===n.id&&(o=o.slice(0)),o}function L(e){const{activity:t,rootStore:s,isLast:d,tabArgs:c}=e,{source:h,tab:f,notification:g}=c,m=(0,n().v3)(),y=(0,r().K8)((()=>{const e=s.getRecordStore(s,{table:l().$Y,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,s]),A=(0,r().K8)((()=>null==y?void 0:y.getType()),[y]),k=(0,r().K8)((()=>{const e=null==y?void 0:y.getModel();if(e)return(0,C().pN)(e)}),[y]),M=(0,r().K8)((()=>{const e=null==y?void 0:y.getParentPointer();if(e)return x().Bv.createChildStore(s,e)}),[y,s]),w=(0,r().K8)((()=>Boolean(M&&M.isDefined())),[M]),R=(0,r().K8)((()=>{const e=null==M?void 0:M.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,M]),L=x().Bv.createChildStore(s,{table:a().ev,id:R}),O=(0,r().K8)((()=>L.isDefined()),[L]),P=(0,r().K8)((()=>Boolean(M&&(0,b().yR)((0,b().g7)(M)))),[M]),N=(0,r().K8)((()=>{if(!P||!M)return;const e=M.getModel();return e?e.getRenderUrl({getRecordModel:s.getRecordModel,discussionId:t.discussion_id,pageVisitSource:i(584262).y8.Notification}):void 0}),[P,M,s,t]),V=(0,r().K8)((()=>B(t.getEdits(),h,y)),[t,y,h]),z=V.length>0,H=(0,r().K8)((()=>(0,C().Ln)({edits:V,rootStore:s})),[V,s]),F=(0,r().K8)((()=>(0,C().bD)(H)),[H]),E=P,W=(0,o.useCallback)((e=>{if((0,j().uY)({...c,environment:m,activity:t,mightCloseTab:E}),!P&&M&&y){var i;const o=e.target;p().IX({environment:m,discussionStore:y,rect:o.getBoundingClientRect(),blockStore:M,discussionLocation:K({forReplyMenu:!0,source:c.source}),activityId:t.id,notificationId:null===(i=c.notification)||void 0===i?void 0:i.id})}}),[t,P,M,y,m,c,E]),Y=(0,o.useCallback)((e=>{"Removed"===e?(0,j().jv)({...c,environment:m,activity:t,mightCloseTab:E}):"Added"===e?(0,j().P)({...c,environment:m,activity:t,mightCloseTab:E}):(0,v().HB)(e)}),[c,m,t,E]),$=(0,T.jsx)(i(423213).A,{titledRecordStore:L,getRecordModel:s.getRecordModel,activity:t,tabArgs:c}),J=(0,r().K8)((()=>(0,C().DU)({recordId:R,recordType:a().ev,tab:f,rootStore:s,environment:m})),[R,f,s,m]),X=m.device.isMobile,G=(0,r().K8)((()=>K({source:h,forReplyMenu:!1})),[h]),Z=(0,r().K8)((()=>parseInt(t.end_time)),[t]);return z&&O&&w&&y?(0,T.jsxs)(I().Ay,{timestamp:Z,header:"suggestion"===A?(0,T.jsx)("span",{children:(0,T.jsx)(u().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} suggested in {blockName}} other {{authorOrAuthors} suggested in {blockName}}}",values:{numberOfAuthors:H.length,authorOrAuthors:F,blockName:$},id:"activity.commentActivity.header.suggestion"})}):(0,T.jsx)("span",{children:(0,T.jsx)(u().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented in {blockName}} other {{authorOrAuthors} commented in {blockName}}}",values:{numberOfAuthors:H.length,authorOrAuthors:F,blockName:$},id:"activity.commentActivity.header"})}),isLast:d,isPrivate:J,rootStore:s,navigableBlockId:R,icon:(0,T.jsx)(I().H8,{authors:H,size:24}),showSnapshotButton:!1,...(0,j().em)({notification:g,environment:m,tab:f,activity:t}),children:[y&&k&&(0,T.jsx)(D,{rootStore:s,discussionStore:y,onClick:W,source:h,url:N}),(0,T.jsx)(i(6533).A,{visible:5,items:V.map(((e,t,o)=>(0,T.jsx)(S().A,{onClick:W,href:N,innerStyle:(0,_().aY)({source:h,isMobile:X}),children:(0,T.jsx)(i(921194).A,{edit:e,rootStore:s,type:"comment-edit",discussionLocation:G,onReactionToggle:Y,hideAuthorName:!1})},t)))}),(0,T.jsx)(U,{activity:t,rootStore:s,tabArgs:c})]}):null}function D(e){const{rootStore:t,discussionStore:i,onClick:o,source:a,url:l}=e,d=(0,r().K8)((()=>i.getType()),[i]),c=(0,n().v3)().device.isMobile,u=(0,s().IS)((e=>({linkbox:{...(0,_().aY)({source:a,isMobile:c}),display:"flex",alignItems:"center",fontSize:14,paddingTop:2,paddingBottom:6,marginBottom:0}})),[c,a]);return(0,T.jsx)(S().A,{href:l,onClick:o,innerStyle:u.linkbox,children:"suggestion"===d?(0,T.jsx)(g().c4,{discussionStore:i,collapsed:!1}):(0,T.jsx)(O,{rootStore:t,discussionStore:i})})}function O(e){const t=(0,n().v3)(),i=(0,s().DP)(),{rootStore:o,discussionStore:a}=e,l=(0,r().K8)((()=>{const e=a.getModel();if(e)return(0,C().pN)(e)}),[a]),d=0===(0,c().j2Y)(l).length,u=(0,s().IS)((e=>({text:{...h().RC,...d&&{color:e.mediumTextColor}}})),[d]),v=(0,r().K8)((()=>(0,y().S5)({environment:t,textValue:l?{value:l,spaceId:o.id}:void 0,parentStore:o,disableHover:!0,disableStyleAnnotations:d,disableInsertedDeletedAnnotations:d,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disabled:!0,highlightDiscussionId:a.id,theme:i,emojiType:(0,m().FN)(t),katex:t.KatexStore.getKatex(),formulaValueTypes:[]})),[t,l,o,d,a.id,i]);return(0,T.jsxs)(T.Fragment,{children:[d&&(0,T.jsx)(k().A,{}),(0,T.jsx)("div",{style:u.text,children:v})]})}function U(e){const{activity:t,rootStore:i,tabArgs:c}=e,{source:v,notification:h,tab:g}=c,m=(0,r().K8)((()=>{const e=i.getRecordStore(i,{table:l().$Y,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,i]),y=(0,n().v3)(),b=y.device.isMobile,S=(0,r().K8)((()=>x().sk.createChildStore(i,{table:l().$Y,id:t.discussion_id,spaceId:(0,d().e)(i.pointer.spaceId)})),[t,i]),I=(0,r().K8)((()=>null==m?void 0:m.getParentId()),[m]),j=(0,o.useCallback)((e=>{if(!I)return;const o=x().Bv.createChildStore(i,{table:a().ev,id:I}),n=e.target,r=null==h?void 0:h.id;p().IX({environment:y,discussionStore:S,rect:n.getBoundingClientRect(),blockStore:o,discussionLocation:K({forReplyMenu:!0,source:v}),activityId:t.id,notificationId:r}),"notifications_tab"===v&&f().ZP({environment:y,notificationId:r,alreadyRead:Boolean(null==h?void 0:h.read),activity:t,tab:g})}),[t,S,y,h,I,i,v,g]),k=(0,s().IS)((e=>({container:{paddingLeft:(0,_().F9)({source:v,isMobile:b}),paddingTop:12,paddingBottom:4},actionButton:(0,_().Ei)(e)})),[b,v]),C=Boolean(null==h?void 0:h.visited);return m?(0,T.jsxs)("div",{style:k.container,children:[(0,T.jsx)(A().p,{isGray:!0,size:"xs",onClick:j,style:k.actionButton,children:(0,T.jsx)(u().sA,{defaultMessage:"Reply",id:"activityUpdate.replyButton.label"})}),C&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(P,{}),(0,T.jsx)(M().I,{tabArgs:c,environment:y,rootStore:i,activity:t})]})]}):null}function P(){return(0,T.jsx)("div",{style:{width:5,display:"inline-block"}})}function K(e){const{forReplyMenu:t,source:i}=e;if("updates_sidebar"===i)return t?"reply_menu_updates_sidebar":"updates_sidebar";return`${t?"reply_menu_":"updates_menu_"}${f().jD()}`}const N=o.memo(L)},423213:(e,t,i)=>{i.d(t,{A:()=>f});var o=i(296540),n=()=>i(56366),r=()=>i(584262),s=()=>i(179034),a=()=>i(854150),l=()=>i(466872),d=()=>i(16006),c=()=>i(12296),u=()=>i(360137),v=i(474848);function h(e){const{titledRecordStore:t,getRecordModel:h,activity:f,tabArgs:g,permissionRole:p,shouldRenderEmpty:m}=e,y=(0,n().K8)((()=>t.getModel()),[t]),b=(0,i(484714).v3)(),x=(0,i(959013).tz)(),A=(0,n().K8)((()=>null==y?void 0:y.getRenderIcon({getRecordModel:h})),[y,h]),S=(0,i(401497).IS)((()=>({container:p?{...u().vF,display:"flex",alignItems:"center"}:u().vF,icon:u().kI,recordTitle:(0,u().xC)(void 0!==A),role:{marginLeft:4,padding:0},titleAndRole:{display:"flex",flexFlow:"row",padding:1}})),[A,p]),I=(0,o.useCallback)((()=>{const e=t.table;switch(e){case s().ev:case i(519831).Vl:case i(96689).NX:(0,c().Qo)({environment:b,activity:f,...g});break;case a().yK:(0,c().uY)({environment:b,activity:f,...g}),i(848237).L0({environment:b,teamStore:t,shouldScroll:!0}),l().A.setState({...l().A.state,open:!1});break;default:(0,i(534177).HB)(e)}}),[f,b,g,t]),j=(0,n().K8)((()=>y&&y.table!==a().yK?y.getRenderUrl({getRecordModel:h,pageVisitSource:r().y8.Notification}):m&&t.table===s().ev?(0,i(921940).A)({pageId:t.id,pageVisitSource:r().y8.LinkInPage}):void 0),[y,h,m,t.table,t.id]);if(!y&&!m)return null;const k=p?(0,v.jsxs)("div",{style:S.titleAndRole,children:[(0,v.jsx)(d().A,{store:t,style:S.recordTitle}),(0,v.jsx)(i(125565).A,{style:S.role,isSecondaryColor:!0,children:`(${x.formatMessage((0,i(433847).an)(p,s().ev)).toLocaleLowerCase()})`})]}):(0,v.jsx)(d().A,{store:t,style:S.recordTitle});return(0,v.jsxs)(i(296798).A,{href:j,onClick:I,external:!1,innerStyle:S.container,inline:!0,children:[(A||m)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(i(614505).A,{disabled:!0,icon:A,isEmptyPage:!1,size:18,style:S.icon}),(0,v.jsx)("span",{children:" "})]}),k]})}const f=o.memo(h)},423817:(e,t,i)=>{i.d(t,{J:()=>s});i(581454),i(296540);var o=()=>i(401497),n=()=>i(710149),r=i(474848);function s(e){let t=Math.floor(e.areaHeight/124);0===t&&(t=1);const i=(0,o().IS)((e=>({skeletonRect:{height:8,borderRadius:4,margin:10,backgroundColor:e.lightDividerColor},skeletonCircle:{display:"flex",width:28,height:28,marginRight:8,backgroundColor:e.lightDividerColor,borderRadius:20},skeletonSection:{display:"flex",width:"100%",margin:20,flexDirection:"row"}})),[8,10,20]),s=[...Array(t)].map(((e,t)=>(0,r.jsxs)("div",{style:i.skeletonSection,children:[(0,r.jsx)(n().A,{style:i.skeletonCircle}),(0,r.jsxs)("div",{style:{width:"80%"},children:[(0,r.jsx)(n().A,{style:{width:"80%",...i.skeletonRect,marginTop:0}}),(0,r.jsx)(n().A,{style:{width:"50%",...i.skeletonRect}}),(0,r.jsx)(n().A,{style:{width:"60%",...i.skeletonRect}}),(0,r.jsx)(n().A,{style:{width:"50%",...i.skeletonRect}})]})]},t)));return(0,r.jsx)("div",{children:s})}},479233:(e,t,i)=>{function o(e){return"pageUpdatesSidebar"===e.tab}i.d(t,{m:()=>o})},502176:(e,t,i)=>{i.d(t,{A:()=>s});i(296540);var o=()=>i(401497),n=i(474848);const r=(0,i(340498).wt)("inbox",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M4.445 25.3h20.532c2.296 0 3.457-1.16 3.457-3.421v-6.715c0-.902-.13-1.324-.563-1.887l-4.406-5.53c-1.195-1.5-1.793-1.934-3.668-1.934H9.625c-1.875 0-2.473.433-3.668 1.933l-4.406 5.531c-.434.563-.563.985-.563 1.887v6.715c0 2.273 1.172 3.422 3.457 3.422zm10.266-6.948c-1.734 0-2.93-1.442-2.93-3v-.059c0-.422-.234-.785-.738-.785h-8.11c-.304 0-.374-.27-.222-.469l4.664-5.93c.574-.726 1.207-1.02 2.121-1.02h10.43c.914 0 1.547.294 2.12 1.02l4.665 5.93c.164.2.094.469-.211.469h-8.121c-.504 0-.738.363-.738.785v.059c0 1.558-1.196 3-2.93 3zM4.469 23.859c-1.313 0-2.028-.703-2.028-2.05v-5.977h7.957c.188 2.25 2.004 3.855 4.313 3.855 2.309 0 4.125-1.617 4.312-3.855h7.957v5.977c0 1.347-.738 2.05-2.027 2.05H4.47z"})});function s(e){const{message:t,title:i}=e,s=(0,o().IS)((e=>({wrapper:{textAlign:"center",paddingLeft:20,paddingRight:20,height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",minHeight:220},icon:{width:48,fill:e.mediumTextColor},message:{fontSize:14,color:e.lightTextColor,marginTop:2,marginBottom:4,maxWidth:380,textWrap:"balance"},title:{fontSize:14,fontWeight:500,color:e.mediumTextColor,maxWidth:380,textWrap:"balance"}})),[]),a=e.icon||r;return(0,n.jsxs)("div",{style:s.wrapper,children:[(0,n.jsx)("div",{style:{paddingBottom:12},children:a(s.icon)}),(0,n.jsx)("div",{style:s.title,children:i}),(0,n.jsx)("div",{style:s.message,children:t})]})}},659799:(e,t,i)=>{i.d(t,{A:()=>l});i(296540);var o=()=>i(401497),n=()=>i(284371),r=()=>i(962730),s=()=>i(859428),a=i(474848);function l(e){let{text:t,tooltipText:i,icon:l}=e;const d=(0,o().IS)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.shadowSM},container:{display:"flex",alignItems:"center",fontWeight:n().Wy.regular,color:e.mediumTextColor,fontSize:n().J.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,a.jsx)(s().A,{style:d.tooltip,render:e=>(0,a.jsx)("div",{style:d.text,...e,children:t}),renderTooltip:()=>(0,a.jsxs)("div",{style:d.container,children:[l(d.icon),(0,a.jsx)("div",{children:i})]}),alignment:r().C.Start,placement:r().W.Bottom})}},721273:(e,t,i)=>{i.d(t,{Cn:()=>n,oV:()=>a,tK:()=>s});i(581454);var o=()=>i(534177);let n=function(e){return e[e.Sidebar=0]="Sidebar",e[e.SidebarMobile=1]="SidebarMobile",e[e.MobileBottomBarPhone=2]="MobileBottomBarPhone",e[e.MobileBottomBarTablet=3]="MobileBottomBarTablet",e[e.TopbarMobile=4]="TopbarMobile",e[e.RenderAsPage=5]="RenderAsPage",e}({});const r=new Map;function s(e,t){r.set(l(e),t)}function a(e){return r.get(l(e))??[]}function l(e){return(0,o().uv)(e).sort().map((t=>{const i=e[t];return JSON.stringify(i)})).join("-")}},823279:(e,t,i)=>{i.d(t,{L:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("versionHistoryThick",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M0 7C0 3.136 3.129 0 6.993 0C10.864 0 14 3.136 14 7C14 10.864 10.864 14 6.993 14C3.129 14 0 10.864 0 7ZM1.4 7C1.4 10.094 3.906 12.6 7 12.6C10.094 12.6 12.6 10.094 12.6 7C12.6 3.906 10.094 1.4 7 1.4C3.906 1.4 1.4 3.906 1.4 7ZM6.3 3.5H7.35V7.175L10.5 9.044L9.975 9.905L6.3 7.7V3.5Z"})})},999598:(e,t,i)=>{i.d(t,{G7:()=>M,T9:()=>B,bD:()=>w,Jd:()=>R,Ln:()=>T,U6:()=>O,pN:()=>U,DU:()=>D,_S:()=>_,j1:()=>L,_4:()=>P});i(18107),i(967357),i(898992),i(430670),i(581454),i(737550),i(296540);var o=()=>i(908006),n=()=>i(764880),r=(i(354520),i(672577),()=>i(959013)),s=()=>i(284371),a=i(474848);var l=()=>i(601813),d=()=>i(912720),c=()=>i(179034),u=()=>i(824862),v=()=>i(519831),h=()=>i(197959),f=()=>i(798880),g=()=>i(919709),p=()=>i(220719),m=()=>i(496603),y=()=>i(763824),b=()=>i(534177),x=()=>i(686526),A=()=>i(837570),S=()=>i(519839),I=()=>i(972435),j=()=>i(731320),k=()=>i(351360),C=()=>i(630116);function M(e){let{actor:t,environment:i}=e;return t.isBot()?2:i.currentUser.id===t.id?1:0}function _(e){const{authorStores:t,currentUserId:i}=e;if(!i||0===t.length)return{frontActorStore:void 0,backActorStore:void 0};const o=t.some((e=>e.id===i)),n=t.sort(((e,t)=>(e.id===i?1:0)-(t.id===i?1:0)));return{frontActorStore:n.at(0)||void 0,backActorStore:n.at(Math.max(1,n.length-(o?2:1)))||void 0}}function T(e){const{edits:t,rootStore:i}=e,o=m().Mp(t.flatMap((e=>e.authors||[])),m().n4),n=m().oE(o.map((e=>B(e,i))));return n.sort(((e,t)=>M({actor:e,environment:i.environment})-M({actor:t,environment:i.environment}))),n}function w(e,t){const{currentUserStore:i}=k().default.state,o=null==i?void 0:i.id;return function(e,t,i,o){const l=t.find((e=>e.id===i)),d=t.map((t=>(0,n().lR)(e,t))),c={fontWeight:s().Wy.semibold,...o};if(1===t.length)return l?(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{defaultMessage:"You",id:"activitySection.authorPhrase.forOneAuthorCurrentUser.label",values:{b:e=>(0,a.jsx)("span",{style:c,children:e})}})}):(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{defaultMessage:"<b>{author}</b>",id:"activitySection.authorPhrase.forOneAuthor.label",values:{author:d[0],b:e=>(0,a.jsx)("span",{style:c,children:e})}})});if(2===t.length){if(l){const i=t.filter((e=>e!==l)).map((t=>(0,n().lR)(e,t)));return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{defaultMessage:"<b>{firstAuthor}</b> and you",id:"activitySection.authorPhrase.forTwoAuthorsCurrentUser.label",values:{firstAuthor:i[0],b:e=>(0,a.jsx)("span",{style:c,children:e})}})})}return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{defaultMessage:"<b>{firstAuthor}</b> and <b>{secondAuthor}</b>",id:"activitySection.authorPhrase.forTwoAuthors.label",values:{firstAuthor:d[0],secondAuthor:d[1],b:e=>(0,a.jsx)("span",{style:c,children:e})}})})}if(d.length>2){if(l){const i=t.filter((e=>e!==l)).map((t=>(0,n().lR)(e,t))),o=(0,a.jsx)(r().sA,{defaultMessage:"{numberOfOtherAuthors, plural, =0 {<b>{firstAuthor}</b>, <b>{secondAuthor}</b> and you} one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, you and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, you and {numberOfOtherAuthors} others}}",id:"activitySection.authorPhrase.forMoreThanTwoAuthorsCurrentUser.label",values:{numberOfOtherAuthors:i.length-2,firstAuthor:i[0],secondAuthor:i[1],b:e=>(0,a.jsx)("span",{style:c,children:e})}});return(0,a.jsx)("span",{children:o})}{const e=(0,a.jsx)(r().sA,{defaultMessage:"{numberOfOtherAuthors, plural, one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} others}}",id:"activitySection.authorPhrase.forMoreThanTwoAuthors.label",values:{numberOfOtherAuthors:d.length-2,firstAuthor:d[0],secondAuthor:d[1],b:e=>(0,a.jsx)("span",{style:c,children:e})}});return(0,a.jsx)("span",{children:e})}}return(0,a.jsx)("span",{style:c,children:(0,a.jsx)(r().sA,{defaultMessage:"Nobody",id:"activitySection.authorPhrase.forNoAuthors.label"})})}(I().A.getIntl(),e,o,t)}function R(e,t){return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{defaultMessage:"<b>{author}</b>",id:"activitySection.authorPhrase.forOneAuthor.email",values:{author:e,b:e=>(0,a.jsx)("span",{style:t,children:e})}})})}function B(e,t){if(e.table===f().oo){const i=L(e.id,t);if(i)return(0,n().A7)(i)}else{const i=function(e,t){const i=(0,C().Oo)(t,{table:u().GP,id:e});return i.getValue()}(e.id,t);if(i)return(0,n().qt)(i)}}function L(e,t){return C().LU.createChildStore(t,{table:f().oo,id:e}).getValue()}function D(e){const{tab:t,recordId:i,recordType:o,rootStore:n,environment:r}=e;if("all"===t){if(!i)return!1;let e;return"block"===o?e=C().Bv.createChildStore(n,{table:c().ev,id:i}):"collection"===o?e=C().md.createChildStore(n,{table:v().Vl,id:i}):(0,b().HB)(o),(0,j().X9)(r,e)}return!1}function O(e){const{activity:t,rootStore:i}=e;if("commented"!==t.type)return;const o=i.getRecordModel({table:h().$Y,id:t.discussion_id,spaceId:t.space_id});if(!o)return;const n=U(o);return n?{id:o.id,context:n}:void 0}function U(e){const t=e.getPersistedContext(),i=t?(0,l().l8)({discussionContextData:t,discussionType:(0,p().o9)(e.getType()),discussionId:e.id,intl:I().A.getIntl()}):void 0;if(i)return(0,g().JJ$)(i,(t=>!(0,g().iQL)(t)||(0,g().Orm)(t)===e.id))}async function P(e){const{environment:t,automationNavigableBlockStore:i,automationId:n,source:r,rootStore:s}=e;await o().default.afterNextFlush();const a=await async function(e,t){const i=Date.now(),o=async()=>{const n=e();return void 0!==n?n:Date.now()-i>=t?void 0:(await(0,y().wR)(10),await o())};return await o()}((()=>(0,S().UH)(i)),2e3);if(!a)return;const l=a.settingsStore;if(l)if(n){"event"===s.getRecordStore(s,{table:d().yB,id:n,spaceId:s.getSpaceId()}).getTriggerType()&&(x().Ow({collectionContextStore:a,collectionSettingsStore:l}),A().h({environment:t,collectionContextStore:a,collectionSettingsStore:l,mode:"edit_automation",automationId:n,source:r}))}else x().Ow({collectionContextStore:a,collectionSettingsStore:l}),x().R8({collectionSettingsStore:l,item:{type:"automationSettings",source:r}})}}}]);