"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66169],{126617:(e,t,o)=>{o.d(t,{Y:()=>a});o(296540);const i={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M3.2 6.725a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55"})},a=(0,o(340498).wt)("ellipsisSmall",i)},205160:(e,t,o)=>{o.d(t,{K:()=>n,v:()=>a});var i=()=>o(959013);const a=(0,i().YK)({addAPageInside:{defaultMessage:"Add a page inside",id:"sidebarItem.addAPageInside.tooltip"}}),n=(0,i().YK)({addPageTooltip:{defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"}})},403315:(e,t,o)=>{o.d(t,{a:()=>i});const i=(0,o(340498).xh)("checkmark",{default:{loader:()=>o.e(38978).then(o.bind(o,29037))},small:{loader:()=>o.e(7180).then(o.bind(o,349679))},fill:{loader:()=>o.e(43920).then(o.bind(o,94701))},fillSmall:{loader:()=>o.e(38789).then(o.bind(o,73956))}},["check","tick","confirm","approve","success"])},522246:(e,t,o)=>{o.d(t,{Y:()=>S});o(581454);var i=()=>o(56366),a=()=>o(636090),n=()=>o(187174),r=()=>o(519831),s=()=>o(630116),d=()=>o(449506);var l=()=>o(271372),c=()=>o(645873),p=()=>o(963589),u=()=>o(106628),m=()=>o(361330),g=()=>o(832820),h=()=>o(188669);function S(e){let{environment:t,spaceStore:o,joinedTeamIds:S,parentStore:v,moveToTargets:b,overrideDatabaseType:f}=e;const x=(0,i().K8)((()=>{const e=null==o?void 0:o.id;if(e)return function(e){if(!g().c.state)return;if(e!==g().c.state.spaceId)return;return g().c.state.typedDatabases}(e)}),[null==o?void 0:o.id]),y=(0,p().X)("typed_move_to_improved_default_results"),A=(0,c().fJ)(u().T.searchActions),[{value:w,status:T}]=(0,n().Yb)((async()=>{if(x)return x;if(!o||!v)return;const e=f??h().Ay.getDatabaseType();if(!e)return;if("resolved"!==A.status)return;const i=A.value;let n=[];if(y){const a=((await i.searchCollectionsWithRecents({environment:t,query:"",limit:20,databaseType:[e],spaceStore:o,parentStore:o,collectionViewBlockStore:void 0,searchSessionId:h().Ay.state.isOpen?h().Ay.state.flowId:void 0})).results||[]).map((e=>s().md.createChildStore(v,{table:r().Vl,id:e})));n=(0,l().vl)({typedDatabases:a,blocksToFilterParents:b})}else{const i=await async function(e){let{environment:t,spaceId:o,databaseType:i,parentStore:a}=e;if(!o)return;const n=await d().callApi({eventName:"getTypedDatabases",environment:t,data:{spaceId:o,databaseType:i}});return"success"===n.type?n.data.result.map((e=>s().md.createChildStore(a,{table:r().Vl,id:e.collectionId}))):void 0}({environment:t,spaceId:o.id,databaseType:e,parentStore:v})??[];n=(0,l().gq)({environment:t,typedDatabases:i,spaceStore:o,joinedTeamIds:S})}return g().c.setState({typedDatabases:n,spaceId:o.id}),h().Ay.update((e=>({...e,variant:a().Xy}))),n}),[x,o,v,f,A.status,A.value,y,t,b,S],{debounce:m().tu,throttle:m().tu});return x?{success:!0,typedDatabases:x}:"resolved"===T&&w?{success:!0,typedDatabases:w}:{success:!1}}},651591:(e,t,o)=>{o.r(t),o.d(t,{AiLandingPageExperimentSwitcher:()=>I});o(581454);var i=o(296540),a=()=>o(401497),n=()=>o(403315);const r=(0,o(340498).xh)("gear",{default:{loader:()=>o.e(10862).then(o.bind(o,212727))},small:{loader:()=>o.e(84352).then(o.bind(o,274065))},fill:{loader:()=>o.e(29468).then(o.bind(o,682563))},fillSmall:{loader:()=>o.e(22433).then(o.bind(o,830586))}},["gear","settings","cog","options","tools"]);var s=()=>o(959013),d=()=>o(534177),l=()=>o(760217),c=()=>o(406699),p=()=>o(285790),u=()=>o(928600),m=()=>o(939740),g=()=>o(460292),h=()=>o(14235),S=()=>o(89924),v=()=>o(859428),b=()=>o(722872),f=()=>o(553965),x=()=>o(477293),y=()=>o(327300),A=()=>o(962730),w=()=>o(686594),T=()=>o(996675),M=o(474848);const j=(0,s().YK)({aiLandingPageExperimentSwitcher:{id:"aiLandingPageExperimentSwitcher",defaultMessage:"AI Landing Page Experiment Switcher"},tooltipLabel:{id:"aiLandingPageExperimentSwitcherTooltip",defaultMessage:"[dev only] experience switcher"},sidebarVariantsSectionMenuTitle:{id:"aiLandingPageExperimentSwitcherSectionMenuTitle",defaultMessage:"[Dev Only] Sidebar Experience"},chatModeSelectorSectionMenuTitle:{id:"aiLandingPageExperimentSwitcherChatModeSelectorSectionMenuTitle",defaultMessage:"[Dev Only] Chat Mode Selector"}});function I(e){const{isHovered:t,isFocused:o,tooltipStore:n,parentTooltipStore:d}=e,l=(0,s().tz)(),u=(0,i.useMemo)((()=>!1),[]),m=(0,T().pK)({showRightIcons:t||o}),S=(0,T().Kd)(),b=(0,a().IS)((e=>({button:{...S.button,paddingTop:2,height:24,width:24},icon:{fill:e.sidebarTextColor,height:18,width:18}})),[S.button]);return u?(0,M.jsx)(v().A,{store:n,disableTooltip:!0,renderTooltip:()=>l.formatMessage(j.tooltipLabel),originGap:6,placement:A().W.Right,render:e=>(0,M.jsx)(c().Ay,{popupType:h().nl.Popup,renderOrigin:t=>(0,M.jsx)("div",{...e,style:m.iconContainer,children:(0,M.jsx)(p().A,{...(0,f().A)(t,{onClick:()=>{d.setState({focused:!1,hovered:!1})}}),style:b.button,icon:e=>(0,M.jsx)(g().Q,{iconGroup:r,variantName:"default",style:{...e,...b.icon}}),ariaLabel:l.formatMessage(j.aiLandingPageExperimentSwitcher)})}),render:e=>(0,M.jsx)(C,{onSelect:()=>{e.close(),d.setState({focused:!1,hovered:!1})}})})}):null}function C(e){const t=(0,s().tz)(),{onSelect:o}=e,a=(0,x().r)("ai_sidebar_v2"),r=(0,x().r)("ai_chat_mode_selector"),d=(0,i.useCallback)((e=>{w().A.updateLocalOverrideConfig("ai_sidebar_v2",e),o()}),[o]),c=(0,i.useCallback)((e=>{w().A.updateLocalOverrideConfig("ai_chat_mode_selector",e),o()}),[o]);return(0,M.jsx)(u().A,{menuType:b().gu.Popup,width:320,children:(0,M.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:void 0,sections:[{key:"sidebar_variants",render:e=>(0,M.jsx)(S().A,{...e,title:t.formatMessage(j.sidebarVariantsSectionMenuTitle)}),items:y().ML.map((e=>({key:e,render:t=>(0,M.jsx)(l().A,{...t,title:(0,M.jsx)(P,{sidebarVariant:e}),caption:(0,M.jsx)(L,{sidebarVariant:e}),shouldWrapCaption:!0,right:a===e?(0,M.jsx)(g().Q,{iconGroup:n().a,variantName:"small"}):null}),action:()=>{d(e)}})))},{key:"chat_mode_selector",render:e=>(0,M.jsx)(S().A,{...e,title:t.formatMessage(j.chatModeSelectorSectionMenuTitle)}),items:y().qn.map((e=>({key:e,render:t=>(0,M.jsx)(l().A,{...t,title:(0,M.jsx)(_,{chatModeSelectorVariant:e}),caption:(0,M.jsx)(k,{chatModeSelectorVariant:e}),shouldWrapCaption:!0,right:r===e?(0,M.jsx)(g().Q,{iconGroup:n().a,variantName:"small"}):null}),action:()=>{c(e)}})))}]})})}function _(e){let{chatModeSelectorVariant:t}=e;return"control"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcher.ChatModeSelectorTitleControl",defaultMessage:"Button row"}):"dropdown"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcher.ChatModeSelectorTitleDropdown",defaultMessage:"Dropdown"}):(0,d().HB)(t)}function k(e){let{chatModeSelectorVariant:t}=e;return"control"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcher.ChatModeSelectorDescriptionControl",defaultMessage:"Auto-switches mode. Uses button row layout."}):"dropdown"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcher.ChatModeSelectorDescriptionDropdown",defaultMessage:"Uses a dropdown to switch mode. Auto is the default mode. When mode is not-auto, we will not auto-select the mode."}):(0,d().HB)(t)}function P(e){let{sidebarVariant:t}=e;return"control"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcher.SidebarVariantTitleControl",defaultMessage:"Control"}):"unified_home"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcherSidebar.VariantTitleUnifiedHome",defaultMessage:"Unified Home"}):"separate_home_and_ai"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcherSidebar.VariantTitleSeparateHomeAndAi",defaultMessage:"Separate Home and AI"}):"separate_home_and_ai_with_home_module"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcherSidebar.VariantTitleSeparateHomeAndAiWithHomeModule",defaultMessage:"Separate Home and AI with Home Module"}):(0,d().HB)(t)}function L(e){let{sidebarVariant:t}=e;return"control"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcher.SidebarVariantDescriptionControl",defaultMessage:"Current production experience. Separate üè° Home and üòä AI items."}):"unified_home"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcher.SidebarVariantDescriptionUnifiedHome",defaultMessage:"Unified AI <> Home experience. AI is a module in Home, routes to chat."}):"separate_home_and_ai"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcher.SidebarVariantDescriptionSeparateHomeAndAi",defaultMessage:"Separate üè° Home and üòä AI item, but AI item uses new chat experience."}):"separate_home_and_ai_with_home_module"===t?(0,M.jsx)(s().sA,{id:"aiLandingPageExperimentSwitcher.SidebarVariantDescriptionSeparateHomeAndAiWithHomeModule",defaultMessage:"Separate üè° Home and üòä AI items, but there‚Äôs also a module in Home, that routes to new AI chat."}):(0,d().HB)(t)}},832820:(e,t,o)=>{o.d(t,{D:()=>a,c:()=>i});const i=o(757695).default.createValue(void 0,{name:"CachedTypedDatabasesStore"});function a(e){const t=i.state;t&&i.setState({...t,typedDatabases:[...t.typedDatabases,e]})}},863330:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,plusSmallIcon:()=>a});o(296540);const i={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M8 2.3a.7.7 0 0 0-.7.7v4.3H3a.7.7 0 1 0 0 1.4h4.3V13a.7.7 0 1 0 1.4 0V8.7H13a.7.7 0 1 0 0-1.4H8.7V3a.7.7 0 0 0-.7-.7"})},a=(0,o(340498).wt)("plusSmall",i)},996675:(e,t,o)=>{o.d(t,{Ay:()=>z,Kd:()=>$,pK:()=>Z});o(18107),o(967357),o(581454);var i=o(296540),a=()=>o(484714),n=()=>o(56366),r=()=>o(401497),s=()=>o(126617),d=()=>o(863330),l=()=>o(869558),c=()=>o(959013),p=()=>o(901265),u=()=>o(872539),m=()=>o(778417),g=()=>o(765370),h=()=>o(317909),S=()=>o(869562),v=()=>o(441307),b=()=>o(630116),f=()=>o(611371),x=()=>o(519839),y=()=>o(248662),A=()=>o(559102);var w=()=>o(704152),T=()=>o(760217),M=()=>o(406699),j=()=>o(928600),I=()=>o(939740),C=()=>o(45552),_=()=>o(8980),k=()=>o(614505),P=()=>o(16006),L=()=>o(89924),V=()=>o(859428),D=()=>o(972435),H=()=>o(722872),B=()=>o(553965),E=()=>o(108944),K=()=>o(115512),O=()=>o(962730),F=()=>o(351360),W=()=>o(522246),U=()=>o(205160),Y=o(474848);function R(e){const{store:t,from:i,type:r,canEditItem:s,itemDepth:d,isHovered:l,isFocused:c,onToggle:p}=e,{isMobile:u}=(0,a().Y0)(),m=u||l||c,g=(0,n().K8)((()=>{var e;const o=Boolean(t.getAppContainerBlockStore()),i=t.isPlaceholderWorkflowTemplateBlock(),a=null===(e=t.getCollectionStore())||void 0===e?void 0:e.isSyncedCollection();return Boolean(t.getType()&&s&&!o&&!i&&!a)}),[t,s]),h=Z({showRightIcons:m});return r===o(946065).yy?null:(0,Y.jsxs)("div",{style:h.iconContainer,children:[(0,Y.jsx)(J,{store:t,from:i,type:e.type,itemIndex:e.itemIndex,itemDepth:d}),g&&(0,Y.jsx)(G,{store:t,onToggle:p,isTopLevelItem:0===d,from:i,type:r})]})}const z=i.memo(R);function G(e){const{store:t,onToggle:o,isTopLevelItem:i,from:r,type:s}=e,d=(0,a().v3)(),{isMobile:c}=d.device,p=(0,n().K8)((()=>t.isCollectionView()),[t]),m=(0,n().K8)((()=>t.getLinkedViewCollectionBlockStores()),[t]),g=(0,n().K8)((()=>{var e;const o=null===(e=t.getCollectionViewStores().at(0))||void 0===e?void 0:e.id;if(!o)return;const i=b().pS.createChildStore(t,{table:l().Gy,id:o});return null==i?void 0:i.getFormatStore().getValue()}),[t]),h=(0,n().K8)((()=>{const e=null==g?void 0:g.collection_view_source;if("typed"===(null==e?void 0:e.type))return null==e?void 0:e.databaseType}),[g]),S=D().A.formatMessage(U().v.addAPageInside);return p&&!g&&0===m.length?(0,Y.jsx)(q,{disabled:!0}):p&&h?(0,Y.jsx)(Q,{store:t,databaseType:h}):m.length<=1?(0,Y.jsx)(V().A,{renderTooltip:()=>S,placement:O().W.Bottom,render:e=>{const a={...e,onClick:e=>{u().y6({blockStore:m[0]??t,shouldNavigateToSource:!1,environment:d,event:e,analytics:{from:r,type:s},toggleOptions:{onToggle:o,isTopLevelItem:i}})}};return(0,Y.jsx)(q,{events:a})}}):(0,Y.jsx)(V().A,{renderTooltip:()=>S,placement:O().W.Bottom,render:e=>(0,Y.jsx)(M().Ay,{popupType:c?M().z7.SlideUp:M().z7.Popup,renderOrigin:t=>(0,Y.jsx)(q,{events:(0,B().A)(e,t)}),render:e=>(0,Y.jsx)(X,{store:t,onToggle:o,parent:e,isTopLevelItem:i,from:r,type:s})})})}const N=[];function Q(e){const{store:t,databaseType:o}=e,r=(0,a().v3)(),s=(0,n().K8)((()=>F().default.state.currentSpaceViewStore),[]),d=(0,n().K8)((()=>F().default.state.currentSpaceStore),[]),c=(0,n().K8)((()=>null==s?void 0:s.getTeamsStores().map((e=>e.id))),[s]),p=(0,W().Y)({environment:r,spaceStore:d,parentStore:d,joinedTeamIds:c??N,overrideDatabaseType:o,moveToTargets:N}),u=(0,n().r6)((()=>p.success?p.typedDatabases:[]),[p]),m=(0,n().O$)(u),w=(0,i.useCallback)((e=>{const o=u.state;o&&function(e){var t;const{store:o,typedDatabases:i,environment:a}=e,n=x().UH(o);if(!(0,f().EF)(a))return;a.device.isMobile&&S().close();const r=null===(t=o.getCollectionViewStores().at(0))||void 0===t?void 0:t.id;if(!n&&!r)return;const s=n??new(v().A)(a);if(!n&&r){const e=b().pS.createChildStore(o,{table:l().Gy,id:r});(0,A().d)({environment:a,collectionViewBlockStore:o,collectionViewStore:e,collectionStore:void 0,collectionContextStore:s,isFullScreen:!0,isRootChild:!0,isInPeekRenderer:!1,viewsModuleContext:void 0}),s.remoteCollectionIdsStore.setState(i.map((e=>e.id)))}else 0===s.collectionStoresStore.state.length&&s.remoteCollectionIdsStore.setState(i.map((e=>e.id)));h().createAndCommit({userAction:"collectionViewActions.handleAddMultiSourceViewPageButtonClick.updatePreferredDatabase",environment:a,canUndo:!0,perform:e=>{(0,g().w)({collectionContextStore:s,transaction:e})}}),h().createAndCommit({userAction:"collectionViewActions.handleAddMultiSourceViewPageButtonClick",environment:a,canUndo:!0,perform:e=>{(0,y().T)({transaction:e,store:o,collectionContextStore:s,environment:a,shouldCoerce:!0,templateStore:s.defaultPageTemplateStore.state,showMoveTo:!0,peekModeOverride:"center_peek",from:{createBlock:"sidebar_new_page_button"}})}})}({store:t,event:e,typedDatabases:o,environment:r})}),[r,u,t]),T=D().A.formatMessage(U().v.addAPageInside);return p.success&&0!==m.length?(0,Y.jsx)(V().A,{renderTooltip:()=>T,placement:O().W.Bottom,render:e=>{const t={...e,onClick:w};return(0,Y.jsx)(q,{events:t})}}):(0,Y.jsx)(q,{disabled:!0})}function q(e){const{isMobile:t}=(0,a().Y0)(),o=$();return(0,Y.jsx)(w().A,{ariaLabel:D().A.formatMessage(U().v.addAPageInside),mobileFeedback:t,style:o.button,disabled:e.disabled,disabledFeedback:e.disabled,...e.events,children:(0,Y.jsx)(_().I,{icon:d().plusSmallIcon,size:"sm",color:t?"tertiary":"secondary"})})}function X(e){const{store:t,onToggle:o,parent:i,isTopLevelItem:s,from:d,type:l}=e,p=(0,a().v3)(),{isMobile:m}=p.device,g=(0,n().K8)((()=>t.getLinkedViewCollectionBlockStores()),[t]),h=(0,r().IS)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),S={menuType:m?H().gu.Modal:H().gu.Popup,right:m?(0,Y.jsx)(C().DoneMenuText,{}):void 0},v={key:"collections",render:e=>(0,Y.jsx)(L().A,{...e,title:(0,Y.jsx)(c().sA,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})}),items:g.map((e=>({key:e.id,render:t=>(0,Y.jsx)(T().A,{...t,title:(0,Y.jsx)("div",{style:h.menuItem,children:(0,Y.jsx)(P().A,{store:e})}),icon:(0,Y.jsx)(k().A,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:14})}),action:t=>{u().y6({blockStore:e,environment:p,event:t.event,shouldNavigateToSource:!0,analytics:{from:d,type:l},toggleOptions:{onToggle:o,isTopLevelItem:s}})}})))};return(0,Y.jsx)(j().A,{...S,children:(0,Y.jsx)(I().Ay,{type:I().Oh.Vertical,onAccept:i.close,initialFocus:void 0,sections:[v]})})}function J(e){const{store:t,from:o,type:i,itemDepth:n,itemIndex:r}=e,d=(0,c().tz)(),l=(0,a().v3)(),{isMobile:u}=l.device,g=$(),h=e=>{const a=E().Uo(t);m().Lt({environment:l,store:t}),p().it({environment:l,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:a,type:0===n?"top_level":"nested",outliner_type:i,outliner_position:r,outliner_depth:n,outliner_location:"main_sidebar"===o?"sidebar":"pane"}})},S="bookmarks"===i?d.formatMessage({defaultMessage:"Remove, rename, and more‚Ä¶",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):d.formatMessage({defaultMessage:"Delete, duplicate, and more‚Ä¶",id:"sidebarItem.pageMenuButton.tooltip"});return(0,Y.jsx)(V().A,{renderTooltip:()=>S,placement:O().W.Bottom,render:e=>(0,Y.jsx)(w().A,{ariaLabel:S,mobileFeedback:u,style:g.button,onClick:h,...e,children:(0,Y.jsx)(_().I,{icon:s().Y,size:"sm",color:u?"tertiary":"secondary"})})})}function $(){const e=(0,a().v3)().device.isMobile;return(0,r().IS)((t=>({button:e?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:4,marginLeft:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,marginLeft:4}})),[e])}function Z(e){const{showRightIcons:t}=e;return(0,r().IS)((()=>({iconContainer:{display:"flex",paddingLeft:3,...t?{}:{...K().Qg,display:"block"}}})),[t])}}}]);