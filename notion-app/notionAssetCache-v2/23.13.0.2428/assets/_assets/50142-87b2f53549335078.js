"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[50142],{6731:(e,t,r)=>{r.d(t,{D:()=>c});r(898992),r(803949);var n=r(296540),s=()=>r(56366),o=()=>r(364692),i=()=>r(388821),a=()=>r(317909),d=()=>r(841696),l=()=>r(351360);function c(e){let{unpersistedInMemoryRecordCache:t}=e;const r=(0,s().K8)((()=>{var e;return null===(e=l().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]);return{createAndCommit:(0,n.useCallback)((e=>{let{perform:n}=e;const s=new(d().Z)({deadlockTimeoutMs:a().DEADLOCK_WARNING_TIMEOUT_MS}),l=n(s),c=i().RecordMap.create();s.stores.forEach((e=>{const t=e.getRecordModel(e.pointer);t&&c.addModel(t)})),(0,o().NI)({operations:s.operations,recordMap:c,updateOnly:!1});for(const o of c){const{model:e,pointer:n}=o;t.setModelAndRole({pointer:n,userId:r},e,"editor")}return t.emitAll(),{performResult:l,serverCommitResult:Promise.resolve(void 0)}}),[t,r])}}},47582:(e,t,r)=>{r.d(t,{V:()=>I});r(898992),r(354520);var n=r(296540),s=()=>r(56366),o=()=>r(534177),i=()=>r(722872),a=()=>r(962730),d=()=>r(377586),l=()=>r(463830),c=()=>r(406699),u=()=>r(928600),m=()=>r(939740),p=()=>r(221844),h=()=>r(484714),g=()=>r(179034),b=()=>r(496603),f=()=>r(317909),S=()=>r(6731),C=()=>r(630116),v=()=>r(89924),y=()=>r(604484),M=()=>r(944850),x=r(474848);function T(e){let{blockStore:t,filterDeletedPermissions:r}=e;const{mockBlockStore:o}=function(e){let{blockStore:t,filterDeletedPermissions:r}=e;const o=(0,h().v3)(),i=(0,s().K8)((()=>(0,b().mg)(t.inMemoryRecordCache.data)),[t]),a=(0,n.useMemo)((()=>new(p().A)({name:"adminContentSearch.deletedFromTrashPermissionsView",data:i,isTemporaryData:!0})),[i]),d=(0,S().D)({unpersistedInMemoryRecordCache:a}),{mockBlockStore:l}=(0,s().K8)((()=>{const e=r?r(t):[],n=new(C().Bv)(o,{table:g().ev,id:t.id},{inMemoryRecordCache:a});return d.createAndCommit({userAction:"adminContentSearch.restoreDeletedFromTrashPermissionsOptimistically",perform:t=>{f().applyOperation({store:n,operation:{pointer:n,command:"set",path:["permissions"],args:e},transaction:t})}}),{inMemoryRecordCache:a,mockBlockStore:n}}),[o,t,a,d,r]);return{mockBlockStore:l}}({blockStore:t,filterDeletedPermissions:r}),a=(0,M().d)(o),d=(0,y().x)({permissionItems:a});return(0,x.jsx)(u().A,{menuType:i().gu.Popup,width:248,children:(0,x.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:void 0,sections:[{key:"deletedFromTrashPermissions",render:e=>(0,x.jsx)(v().A,{...e}),items:d}]})})}var P=()=>r(824176),k=()=>r(451830);function I(e){let{blockStore:t,getValidDeletedPermissions:r,placementToOrigin:p,renderPopupOrigin:h,environment:g,includeNonRestoreActions:b,onRestoreOrDeletePage:f,from:S}=e;const C=(0,s().uB)(void 0,l().A),v=(0,k().o)(),[y,M]=(0,n.useState)(!1),I=(0,P().QV)({blockStore:t,getValidDeletedPermissions:r}),A=[(0,P().j9)({environment:g,pageStatus:"deleted_from_trash",popupStore:C,blockStore:t,from:S,handleOpenDeletedPermissionsMenu:()=>M(!0),includeNonRestoreActions:b,onRestoreOrDeletePage:f,...I}),(0,P().CT)({environment:g,from:S,pageStatus:"deleted_from_trash",popupStore:C,blockStore:t,includeNonRestoreActions:b,onRestoreOrDeletePage:f,...I})].filter(o().O9);return(0,x.jsx)(c().Ay,{popupType:d().n.Popup,alignmentToOrigin:a().C.Start,placementToOrigin:p,style:v.popupMenu,render:()=>y?(0,x.jsx)(T,{blockStore:t,filterDeletedPermissions:r}):(0,x.jsx)(u().A,{menuType:i().gu.Popup,width:248,children:(0,x.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:void 0,sections:A})}),onClose:()=>{M(!1)},buttonPopupStore:C,renderOrigin:h})}},101919:(e,t,r)=>{r.d(t,{A:()=>s});r(296540);var n=r(474848);const s=function(e){const{hasMarginTop:t}=e,s=(0,r(401497).IS)((e=>{const r={display:"block",marginBottom:4,fontSize:12,color:e.mediumTextColor};return t&&(r.marginTop=14),{style:r}}),[t]),{forId:o,children:i,style:a}=e;return(0,n.jsx)("label",{style:{...s.style,...a},htmlFor:o,children:i})}},126553:(e,t,r)=>{r.d(t,{x:()=>s});r(296540);var n=r(474848);const s=(0,r(340498).wt)("settingsSecurity",{viewBox:"0 0 11 20",svg:(0,n.jsx)("path",{d:"M4.92129 19.3231C5.26719 19.627 5.74092 19.6649 6.07178 19.3383L8.38779 16.9913C8.71865 16.6571 8.70361 16.1558 8.38027 15.8292L7.2749 14.7127L8.92168 13.0569C9.2375 12.7379 9.22998 12.229 8.90664 11.8948L7.41026 10.3757C9.44805 9.35026 10.5985 7.64127 10.5985 5.62847C10.5985 2.78016 8.32012 0.486328 5.49277 0.486328C2.66543 0.486328 0.394531 2.77257 0.394531 5.62847C0.394531 7.67166 1.54502 9.50217 3.37979 10.3301V17.4622C3.37979 17.7357 3.4625 18.0471 3.69561 18.2446L4.92129 19.3231ZM5.49277 17.9863L4.68066 17.166V9.34266C2.95869 8.9629 1.73301 7.4438 1.73301 5.62847C1.73301 3.53972 3.40986 1.84592 5.49277 1.84592C7.57569 1.84592 9.24502 3.53212 9.24502 5.62847C9.24502 7.42101 8.01181 8.96289 6.13194 9.38824V11.0289L7.57569 12.4872L6.03418 14.0214V15.3887L7.04931 16.3989L5.49277 17.9863ZM5.49277 5.67405C6.23721 5.67405 6.83877 5.06641 6.83877 4.32205C6.83877 3.5777 6.23721 2.97005 5.49277 2.97005C4.74834 2.97005 4.1543 3.5701 4.1543 4.32205C4.1543 5.06641 4.75586 5.67405 5.49277 5.67405Z"})})},245981:(e,t,r)=>{r.d(t,{L:()=>s});var n=()=>r(989423);function s(e,t){(0,n().u4)({environment:e,event:{eventName:"cdrr_page_delete_permanently",eventProperties:{page_id:t.pageId,from:t.from}}})}},373204:(e,t,r)=>{r.d(t,{K:()=>s});r(296540);var n=r(474848);const s=(0,r(340498).wt)("lockShield",{viewBox:"0 0 21 25",svg:(0,n.jsx)("path",{d:"M10.418 24.75C10.6289 24.75 10.9453 24.668 11.25 24.5039C17.9766 20.8359 20.3203 19.1484 20.3203 14.8828V6.01172C20.3203 4.62891 19.7812 4.13672 18.6211 3.64453C17.3203 3.09375 12.9258 1.54688 11.6367 1.125C11.2617 0.996094 10.8164 0.914062 10.418 0.914062C10.0312 0.914062 9.58594 1.01953 9.19922 1.125C7.92188 1.47656 3.52734 3.10547 2.22656 3.64453C1.06641 4.125 0.527344 4.62891 0.527344 6.01172V14.8828C0.527344 19.1484 2.87109 20.8242 9.59766 24.5039C9.90234 24.668 10.2188 24.75 10.418 24.75ZM10.418 22.2891C10.2539 22.2891 10.0781 22.2305 9.75 22.0195C4.38281 18.7617 2.71875 17.8711 2.71875 14.4375V6.38672C2.71875 5.97656 2.8125 5.8125 3.12891 5.68359C4.86328 4.98047 8.23828 3.86719 9.80859 3.24609C10.0664 3.15234 10.2539 3.11719 10.418 3.11719C10.5938 3.11719 10.7695 3.15234 11.0273 3.24609C12.6094 3.86719 15.9492 5.05078 17.707 5.68359C18.0352 5.80078 18.1172 5.97656 18.1172 6.38672V14.4375C18.1172 17.8945 16.3945 18.832 11.0977 22.0195C10.7578 22.2305 10.5938 22.2891 10.418 22.2891ZM6.22266 16.7695C6.22266 17.6602 6.62109 18.0703 7.44141 18.0703H13.4062C14.2266 18.0703 14.625 17.6602 14.625 16.7695V12.1992C14.625 11.3906 14.2969 10.9805 13.6406 10.9219V9.58594C13.6406 7.44141 12.3398 5.98828 10.4297 5.98828C8.50781 5.98828 7.21875 7.44141 7.21875 9.58594V10.9102C6.55078 10.9805 6.22266 11.3906 6.22266 12.1992V16.7695ZM8.57812 10.8984V9.46875C8.57812 8.17969 9.31641 7.32422 10.4297 7.32422C11.5312 7.32422 12.2695 8.17969 12.2695 9.46875V10.8984H8.57812Z"})})},425736:(e,t,r)=>{r.d(t,{s:()=>s});r(296540);var n=r(474848);const s=(0,r(340498).wt)("privateTeam",{viewBox:"0 0 28 28",svg:(0,n.jsx)("path",{d:"M20.6455 21.2744C20.9092 21.5469 21.3311 21.5645 21.6035 21.2744C21.8936 20.9844 21.8672 20.5889 21.6035 20.3164L6.9082 5.62988C6.64453 5.36621 6.21387 5.36621 5.94141 5.62988C5.68652 5.88477 5.68652 6.33301 5.94141 6.58789L20.6455 21.2744ZM13.8076 6.13086C12.2783 6.13086 10.8896 6.39453 9.59766 6.8252L10.7578 7.97656C11.7246 7.68652 12.7178 7.51953 13.8076 7.51953C19.5908 7.51953 24.2754 12.6172 24.2754 13.6631C24.2754 14.375 22.7373 16.291 20.3027 17.7852L21.3838 18.8662C24.1611 17.0645 25.8135 14.7002 25.8135 13.6631C25.8135 11.8613 20.9092 6.13086 13.8076 6.13086ZM13.8076 21.1953C15.4424 21.1953 16.9365 20.9053 18.2988 20.4395L17.1475 19.2881C16.1016 19.6133 14.9941 19.8066 13.8076 19.8066C8.01562 19.8066 3.33105 14.9023 3.33105 13.6631C3.33105 13.0479 4.95703 11 7.5498 9.44434L6.45996 8.35449C3.5332 10.165 1.79297 12.5996 1.79297 13.6631C1.79297 15.4561 6.79395 21.1953 13.8076 21.1953ZM18.3164 15.5879C18.5889 14.999 18.7383 14.3398 18.7383 13.6631C18.7383 10.9121 16.541 8.74121 13.8076 8.74121C13.1133 8.74121 12.4629 8.89062 11.874 9.14551L18.3164 15.5879ZM13.8076 18.585C14.5811 18.585 15.3105 18.3916 15.9609 18.0752L9.36914 11.4834C9.04395 12.1338 8.85938 12.8721 8.85938 13.6631C8.86816 16.3438 11.0566 18.585 13.8076 18.585Z"})})},451830:(e,t,r)=>{r.d(t,{o:()=>a});var n=()=>r(56366),s=()=>r(401497),o=()=>r(663590),i=()=>r(623275);function a(){const e=(0,n().K8)((()=>(0,o().FI)()),[]);return(0,s().IS)((t=>({changePermissionsIcon:{height:18,width:18,fill:"currentColor"},icon:{marginRight:3,height:15,width:15,fill:"currentColor"},destructiveMenuItemHover:{background:t.tint.uiRedHover},destructiveMenuItemPressed:{background:t.tint.uiRedPressed},openLinkIcon:{marginRight:3,height:15,width:15,fill:"currentColor",transform:"rotate(-45deg)"},popupMenu:{width:248},popupShareModal:{width:i().$D,...e&&{borderRadius:i().Sg}}})),[e])}},454354:(e,t,r)=>{r.d(t,{A:()=>i});var n=()=>r(351360),s=()=>r(630116);class o extends(()=>r(757695))().default{getInitialState(){return{changePermissionsEnabled:!1,privatePageStore:void 0,loading:!1,error:void 0}}shouldSaveTransactionWithSudoMode(e){const t=e===this.state.privatePageStore,r=this.doesUserAlreadyHaveEditorAccess(e.pointer);return t&&this.state.changePermissionsEnabled&&!r}shouldUserHaveAccessToPrivatePageBlock(){var e,t;const r=null===(e=n().default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin(),s="enterprise"===(null===(t=n().default.state.currentSpaceStore)||void 0===t?void 0:t.getSubscriptionTier());return this.state.privatePageStore&&r&&s}doesUserAlreadyHaveEditorAccess(e){const t=n().default.state.currentSpaceStore;if(!t)return!1;return(e.table===r(179034).ev?s().Bv.createChildStore(t,e):s().md.createChildStore(t,e)).canAdmin()}}const i=o},482707:(e,t,r)=>{r.d(t,{k:()=>o});var n=()=>r(645873);const s=new(n().O2)("shareMenuContainer",(async()=>await Promise.all([r.e(23806),r.e(75134),r.e(43380),r.e(9304),r.e(96346),r.e(36192),r.e(44711),r.e(53321),r.e(16471),r.e(90825),r.e(37353),r.e(49889),r.e(97727),r.e(55373),r.e(29151),r.e(16908),r.e(62475),r.e(3151),r.e(98629),r.e(58550),r.e(22900),r.e(85128),r.e(95555),r.e(90409),r.e(63077),r.e(74562),r.e(95794),r.e(46414),r.e(8184),r.e(99353),r.e(52681),r.e(14518),r.e(17713),r.e(28271),r.e(17254),r.e(4422),r.e(59794),r.e(67435),r.e(75355),r.e(48315),r.e(47123),r.e(847),r.e(5887),r.e(70769),r.e(97965),r.e(17989),r.e(3965),r.e(38911),r.e(9034),r.e(52012),r.e(56985),r.e(50142),r.e(20838),r.e(21627),r.e(88860),r.e(83210),r.e(26090),r.e(82472),r.e(96345),r.e(10596),r.e(73285),r.e(75659),r.e(78846),r.e(47858),r.e(13324),r.e(51860),r.e(15724),r.e(81141),r.e(27274),r.e(99346),r.e(92448),r.e(65638),r.e(72915),r.e(28721),r.e(69689),r.e(23463),r.e(25426),r.e(6463),r.e(91056),r.e(26483),r.e(29333),r.e(5396),r.e(1440),r.e(34576),r.e(95810),r.e(89109),r.e(3560),r.e(77169),r.e(24071),r.e(68610),r.e(67064),r.e(49978),r.e(3720),r.e(47762),r.e(85475),r.e(11740),r.e(97996),r.e(5066),r.e(35299),r.e(68117),r.e(14267),r.e(33731),r.e(30016),r.e(14410),r.e(49471),r.e(31185),r.e(75681)]).then(r.bind(r,928421)))),o=(0,n()._h)(s,(e=>e.ShareMenuContainer))},604484:(e,t,r)=>{r.d(t,{o:()=>D,x:()=>O});r(944114),r(581454);var n=r(296540),s=()=>r(738418),o=()=>r(959013),i=()=>r(859428),a=()=>r(484714),d=()=>r(56366),l=()=>r(401497),c=()=>r(824862),u=()=>r(630116),m=()=>r(710149),p=()=>r(678553),h=()=>r(256863),g=r(474848);function b(e){let{botId:t}=e;const r=(0,o().tz)(),n=(0,a().v3)(),s=(0,d().K8)((()=>u().sk.createUniqueRootStore(n,{table:c().GP,id:t})),[t,n]),i=(0,d().K8)((()=>s.getDisplayName(r)),[s,r]),m=(0,d().K8)((()=>s.getParentStore()),[s]),b=(0,d().K8)((()=>{if(m){if(m instanceof u().LU)return m.getDisplayName(r);if(m instanceof u().SL)return m.getName()}}),[m,r]),S=(0,l().IS)((()=>({desktopIconStyle:{alignSelf:"center",width:24,fontSize:18}})),[]);return i?(0,g.jsx)(p().A,{desktopIconStyle:S.desktopIconStyle,icon:(0,g.jsx)(h().A,{botStore:s,size:24}),title:i,caption:(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.botMenuItem.createdBy",defaultMessage:"Created by {creatorName}",values:{creatorName:b}})}):(0,g.jsx)(f,{})}function f(){const e=(0,l().IS)((e=>({container:{userSelect:"none",minHeight:45,fontSize:14,padding:"4px 8px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},textContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:6},icon:{flexGrow:0,flexShrink:0,width:24,height:24,borderRadius:"0.25em",marginRight:4,marginTop:1},title:{flexGrow:0,flexShrink:0,width:80,height:14,borderRadius:"0.25em",marginLeft:4},byline:{flexGrow:0,flexShrink:0,width:150,height:10,borderRadius:"0.25em",marginLeft:4}})),[]);return(0,g.jsxs)("div",{style:e.container,children:[(0,g.jsx)(m().A,{style:e.icon}),(0,g.jsxs)("div",{style:e.textContainer,children:[(0,g.jsx)(m().A,{emphasized:!1,style:e.title}),(0,g.jsx)(m().A,{emphasized:!1,style:e.byline})]})]})}var S=()=>r(234194),C=()=>r(351360),v=()=>r(614505);const y=(0,o().YK)({editor:{id:"adminContentSearchTab.sharedWith.permissions.editor",defaultMessage:"Full access"},readAndWrite:{id:"adminContentSearchTab.sharedWith.permissions.readAndWrite",defaultMessage:"Can edit"},commentOnly:{id:"adminContentSearchTab.sharedWith.permissions.commentOnly",defaultMessage:"Can comment"},reader:{id:"adminContentSearchTab.sharedWith.permissions.reader",defaultMessage:"Can view"},none:{id:"adminContentSearchTab.sharedWith.permissions.none",defaultMessage:"None"}});function M(e,t){switch(t){case"editor":return e.formatMessage(y.editor);case"read_and_write":return e.formatMessage(y.readAndWrite);case"comment_only":return e.formatMessage(y.commentOnly);case"reader":return e.formatMessage(y.reader);case"none":return e.formatMessage(y.none)}}function x(e){let{name:t,icon:r,role:n}=e;const s=(0,o().tz)(),i=(0,d().K8)((()=>C().default.state.currentSpaceStore),[]),a=M(s,n),c=(0,l().IS)((e=>({defaultIcon:{height:18,width:18,color:e.lightTextColor,fill:"currentColor"},defaultGroupIcon:{height:20,width:20,color:e.lightTextColor,fill:"currentColor"}})),[]);return(0,g.jsx)(p().A,{desktopIconStyle:{alignSelf:"center",width:24,fontSize:18},icon:(0,g.jsx)(v().A,{disabled:!0,icon:r&&i?{pointer:i.pointer,icon:r}:void 0,size:20,isEmptyPage:!1,title:t,defaultIcon:(0,S().M)(c.defaultGroupIcon)}),title:t||(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.untitledPage",defaultMessage:"Untitled{maybeRoleString}",values:{maybeRoleString:a?` · ${a}`:""}}),caption:(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.group",defaultMessage:"Group{maybeRoleString}",values:{maybeRoleString:a?` · ${a}`:""}})})}var T=()=>r(68263),P=()=>r(898808);function k(e){let{permissionItem:t}=e;const r=(0,o().tz)(),n=(0,d().K8)((()=>C().default.state.currentSpaceStore),[]),s=(0,d().K8)((()=>{var e;return null===(e=C().default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),i=null==t?void 0:t.role,a=(0,T().PW)(i)?M(r,i):void 0;return(0,g.jsx)(p().A,{desktopIconStyle:{alignSelf:"center",width:24},icon:n?(0,g.jsx)(P().x,{disabled:!0,store:n,size:24}):void 0,title:s,caption:(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.spaceMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:a?` · ${a}`:""}})})}var I=()=>r(425736),A=()=>r(854150);function w(e){let{teamId:t,role:r,onlyOwners:n}=e;const s=(0,a().v3)(),i=(0,o().tz)(),l=(0,d().K8)((()=>new(u().h4)(s,{table:A().yK,id:t})),[s,t]),c=M(i,r),m=(0,d().K8)((()=>l.getName()),[l]),h=m||(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.unknownTeamName",defaultMessage:"Private teamspace"});return(0,g.jsx)(p().A,{desktopIconStyle:{alignSelf:"center",width:24},icon:m?(0,g.jsx)(P().x,{disabled:!0,store:l,size:24}):(0,I().s)(),title:h,caption:n?(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamOwners",defaultMessage:"Owners{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}}):(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}})})}var R=()=>r(798880),j=()=>r(695608),_=()=>r(453697);function W(e){let{userId:t,role:r,isGuest:n}=e;const s=(0,o().tz)(),i=(0,a().v3)(),{userStore:l,userName:c}=(0,d().K8)((()=>{const e=new(u().LU)(i,{table:R().oo,id:t}),r=(0,j().c6)(s,e.getModel());return{userStore:e,userName:r}}),[i,t,s]),m=M(s,r);return(0,g.jsx)(p().A,{desktopIconStyle:{alignSelf:"center",width:24},icon:(0,g.jsx)(_().A,{userStore:l,size:24}),title:c,caption:n?(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.guest",defaultMessage:"Guest{maybeRoleString}",values:{maybeRoleString:m?` · ${m}`:""}}):(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.member",defaultMessage:"Member{maybeRoleString}",values:{maybeRoleString:m?` · ${m}`:""}})})}const L=(0,o().YK)({sharedWithWorkspaceMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWorkspaceMembers",defaultMessage:"Workspace members"},sharedWithTeamOwners:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamOwners",defaultMessage:"Teamspace owners"},sharedWithTeamMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamMembers",defaultMessage:"Teamspace members"},sharedWithMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithMembers",defaultMessage:"{numMembers, plural, one {# member} other {# members}}"},sharedWithGroups:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGroups",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},sharedWithGuests:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGuests",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}"},sharedWithBots:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithBots",defaultMessage:"{numBots, plural, one {# connection} other {# connections}}"},separator:{defaultMessage:", ",id:"adminContentSearchTab.pagesTable.sharedWithCell.separator"}});function B(e){let{blockStore:t}=e;const n=(0,r(944850).d)(t),a=function(e,t){const{mostPermissivePublicItem:r,spacePermission:n,groupPermissions:a,guestUserPermissions:d,memberUserPermissions:l,teamSharePermissions:c,teamOwnerSharePermissions:u,botPermissions:m}=e,p=n&&"none"!==n.permissionItem.role;if(r&&"none"!==r.permissionItem.role)return(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWeb",defaultMessage:"Shared to web"});if(!p&&0===a.length&&0===d.length&&0===l.length&&0===c.length&&0===u.length&&0===m.length)return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage",defaultMessage:"Nobody"}),(0,g.jsx)(i().A,{render:e=>(0,g.jsx)("div",{...e,children:(0,s().G)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,g.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage.tooltip",defaultMessage:"No person, group, or teamspace has any access to this page."})})]});const h=[];p?h.push(t.formatMessage(L.sharedWithWorkspaceMembers)):(u.length>0&&0===c.length?h.push(t.formatMessage(L.sharedWithTeamOwners)):c.length>0&&h.push(t.formatMessage(L.sharedWithTeamMembers)),l.length>0&&h.push(t.formatMessage(L.sharedWithMembers,{numMembers:l.length})),a.length>0&&h.push(t.formatMessage(L.sharedWithGroups,{numGroups:a.length})));d.length>0&&h.push(t.formatMessage(L.sharedWithGuests,{numGuests:d.length}));m.length>0&&h.push(t.formatMessage(L.sharedWithBots,{numBots:m.length}));return h.join(t.formatMessage(L.separator))}(n,(0,o().tz)()),d=O({permissionItems:n});return(0,g.jsx)(r(75491).ED,{title:a,items:d,disabled:0===d.length})}function O(e){let{permissionItems:t}=e;return[...t.spacePermission?[{key:"space-permission",render:e=>{var r;return(0,g.jsx)(k,{...e,permissionItem:null===(r=t.spacePermission)||void 0===r?void 0:r.permissionItem})},action:()=>{}}]:[],...t.teamOwnerSharePermissions.map((e=>({key:`${e.team_id}-owners`,render:t=>(0,g.jsx)(w,{...t,onlyOwners:!0,teamId:e.team_id,role:e.role}),action:()=>{}}))),...t.teamSharePermissions.map((e=>({key:`${e.team_id}-members`,render:t=>(0,g.jsx)(w,{...t,teamId:e.team_id,role:e.role}),action:()=>{}}))),...t.groupPermissions.map((e=>({key:e.id,render:()=>(0,g.jsx)(x,{name:e.name,icon:e.icon,role:e.role}),action:()=>{}}))),...t.memberUserPermissions.map((e=>({key:e.user_id,render:t=>(0,g.jsx)(W,{...t,userId:e.user_id,role:e.role}),action:()=>{}}))),...t.guestUserPermissions.map((e=>({key:e.user_id,render:t=>(0,g.jsx)(W,{...t,isGuest:!0,userId:e.user_id,role:e.role}),action:()=>{}}))),...t.botPermissions.map((e=>({key:e.bot_id,render:t=>(0,g.jsx)(b,{...t,botId:e.bot_id}),action:()=>{}})))]}const D=n.memo(B)},623275:(e,t,r)=>{r.d(t,{$D:()=>l,CJ:()=>m,Sg:()=>d,iM:()=>S,kJ:()=>p,kx:()=>g,qj:()=>f,rL:()=>o,sH:()=>h,u6:()=>i,wo:()=>b,zr:()=>c});var n=()=>r(278238),s=()=>r(115512);const o=16,i=20,a=10,d=12,l=456,c=24,u=24,m=48;function p(e){let{theme:t,inheritanceBannerEnabled:r,isMobile:n}=e;return{background:t.tint.regular,borderRadius:8,paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,marginLeft:n?0:o,marginRight:n?0:o,marginTop:4,marginBottom:8}}function h(e){let{isRedesignEnabled:t,isMobile:r}=e;return t?{...b({isMobile:r}),width:"unset",height:m,paddingTop:6,paddingBottom:6}:{}}function g(e){let{environment:t,isRedesignEnabled:r}=e;return r?(0,s().ny)(t,t.device.isMobile?"UISmall":"UIRegular"):(0,s().ny)(t,"UISmall")}function b(e){let{isMobile:t}=e;return{borderRadius:a,transition:"background 150ms ease-out"}}function f(e){let{isMobile:t}=e;return t?12:10}function S(e){let{theme:t,colorOverride:r,size:s=u,useLargeBorderRadius:o,useLightBackgroundColor:i,icon:a}=e;return{background:r||(a&&(0,n().T8)(a)?(0,n().ez)({icon:a,mode:t.mode,useLightGrayColor:i}):i?t.lightDividerColor:t.regularDividerColor),width:s,height:s,borderRadius:o?6:"0.25em"}}},824176:(e,t,r)=>{r.d(t,{CT:()=>w,QV:()=>I,j9:()=>A});r(944114),r(581454),r(296540);var n=()=>r(56366),s=()=>r(401497),o=()=>r(584262),i=()=>r(857639),a=()=>r(452951),d=()=>r(657222),l=()=>r(126553),c=()=>r(735384),u=()=>r(112452),m=()=>r(959013),p=()=>r(534177),h=()=>r(245981),g=()=>r(884107),b=()=>r(755636),f=()=>r(345913),S=()=>r(492414),C=()=>r(108944),v=()=>r(962730),y=()=>r(351360),M=()=>r(760217),x=()=>r(89924),T=()=>r(859428),P=()=>r(451830),k=r(474848);function I(e){const{getValidDeletedPermissions:t,blockStore:r}=e;return(0,n().K8)((()=>{var e;const n=C().$l(C().g7(r));if(Boolean((null==n?void 0:n.id)!==r.id))return{ancestorBlockStore:n,canRestoreAncestor:!0,canRestoreOriginalAccess:!1};const s=t?t(r):[],o=Boolean(r.getParentSpaceStore()&&0===s.length);return{ancestorBlockStore:n,canRestoreAncestor:!1,canRestoreOriginalAccess:!Boolean(null===(e=r.getParentBlockStore())||void 0===e?void 0:e.pathHasDeletedPermission())&&!o}}),[r,t])}function A(e){const t=(0,P().o)(),{environment:r,pageStatus:n,popupStore:s,blockStore:i}=e;async function d(){const e=(0,S().Ay)({store:i,pageVisitSource:o().y8.CopyLink}),t=await g().R.clipboardActions.load();await t.copyString({environment:r,stringValue:e,copiedMessage:t.clipboardMessages.copiedLinkToClipboard}),s.setState({open:!1})}const c=[];switch(n){case"alive":case"in_trash":{const{handleOpenPermissionsMenu:r}=e;c.push(function(e){let{iconStyle:t,action:r}=e;return{key:"change-permissions",render:e=>(0,k.jsx)(M().A,{...e,icon:(0,l().x)(t),title:(0,k.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.page.actions.changePermissions",defaultMessage:"Change permissions"})}),action:r}}({iconStyle:t.changePermissionsIcon,action:r}),_({iconStyle:t.icon,action:d}));break}case"deleted_from_trash":{const{ancestorBlockStore:n,canRestoreAncestor:i,canRestoreOriginalAccess:u,handleOpenDeletedPermissionsMenu:p,includeNonRestoreActions:h}=e;if(n&&i){const e=()=>{const e=(0,S().Ay)({store:n,pageVisitSource:o().y8.DeletedFromTrashPageActions});b().f({environment:r,url:e}),s.setState({open:!1})};c.push(function(e){let{iconStyle:t,action:r}=e;return{key:"go-to-parent-page",render:e=>(0,k.jsx)(M().A,{...e,icon:(0,a().Z)(t),title:(0,k.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.page.actions.navigateToParent",defaultMessage:"Open parent in new tab"})}),action:r}}({iconStyle:t.openLinkIcon,action:e}))}u&&c.push(function(e){let{iconStyle:t,action:r}=e;return{key:"view-original-permissions",render:e=>(0,k.jsx)(M().A,{...e,icon:(0,l().x)(t),title:(0,k.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.page.actions.viewOriginalPermissions",defaultMessage:"View original permissions"})}),action:r}}({iconStyle:t.changePermissionsIcon,action:p})),h&&c.push(_({iconStyle:t.icon,action:d}));break}default:(0,p().HB)(n)}if(0!==c.length)return{key:"actions",render:e=>(0,k.jsx)(x().A,{...e}),items:c}}function w(e){const{from:t,pageStatus:r,environment:s,blockStore:o,popupStore:a,onRestoreOrDeletePage:d}=e,l=(0,P().o)(),g=[],b=(0,n().K8)((()=>{var e;return(null===(e=y().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id)===o.id}),[o]);switch(r){case"alive":return;case"in_trash":{async function S(){await f().iN({environment:s,block:o,spaceId:o.getSpaceId(),from:"adminContentSearch.restorePage",restoreWithoutNavigation:!0}),null==d||d(o.id),a.setState({open:!1})}function C(){const e=d?e=>{e.length>1&&i().log({level:"warning",from:"usePageCellActions",type:"multipleBlocksDeletedFromTrash",data:{blockIds:e.map((e=>e.id))}}),e.length>0&&d(e[0].id)}:void 0;f().Ne({environment:s,blocks:[o],from:"adminContentSearch",handleSuccess:e}),a.setState({open:!1})}g.push(j({iconStyle:l.icon,action:S,disable:!1}),function(e){let{iconStyle:t,action:r}=e;return{key:"delete-from-trash",render:e=>(0,k.jsx)(R,{...e,icon:(0,c().I)(t),title:(0,k.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.page.actions.deleteFromTrash",defaultMessage:"Delete from Trash"})}),action:r}}({iconStyle:l.icon,action:C}));break}case"deleted_from_trash":{const{canRestoreAncestor:v,canRestoreOriginalAccess:T,includeNonRestoreActions:I}=e,A=v||!T,w=v?(0,k.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restore.tooltip.restoreParent",defaultMessage:"Restore the parent page to restore the original permissions."}):T?void 0:(0,k.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restore.tooltip.pageCannotBeRestored",defaultMessage:"This page cannot have its original permissions restored."});g.push(j({iconStyle:l.icon,action:async()=>{await f().tP({environment:s,blockStore:o,spaceId:o.getSpaceId(),from:`${t}.restoreRetainedPage`}),null==d||d(o.id),a.setState({open:!1})},disable:A,tooltip:w}),function(e){let{iconStyle:t,action:r}=e;return{key:"restore-to-private",render:e=>(0,k.jsx)(M().A,{...e,icon:(0,u()._)(t),shouldWrapCaption:!0,title:(0,k.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restoreToPrivate",defaultMessage:"Restore to Private pages"})}),action:r}}({iconStyle:l.icon,action:async()=>{await f().Ys({environment:s,blockStore:o,spaceId:o.getSpaceId(),navigateToPage:b,from:`${t}.restoreRetainedPage`}),null==d||d(o.id),a.setState({open:!1})}})),I&&g.push(function(e){let{iconStyle:t,action:r}=e;return{key:"purge",render:e=>(0,k.jsx)(R,{...e,icon:(0,c().I)(t),title:(0,k.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.page.actions.purge",defaultMessage:"Permanently delete"})}),action:r}}({iconStyle:l.icon,action:()=>{f().tz({environment:s,blockStore:o,handleSuccess:e=>{null==d||d(e),h().L(s,{pageId:o.id,from:"content_search"})}}),a.setState({open:!1})}}));break}default:(0,p().HB)(r)}return{key:"inactive-page-actions",render:e=>(0,k.jsx)(x().A,{...e,topBorder:!0}),items:g}}function R(e){const t=(0,s().IS)((e=>({destructiveMenuItemHover:{background:e.tint.uiRedHover},destructiveMenuItemPressed:{background:e.tint.uiRedPressed}})),[]);return(0,k.jsx)(M().A,{...e,isRedOnHover:!0,hoveredStyle:t.destructiveMenuItemHover,pressedStyle:t.destructiveMenuItemPressed})}function j(e){let{iconStyle:t,action:r,disable:n,tooltip:s}=e;const o=e=>(0,k.jsx)(M().A,{...e,disabled:n,disallowTabbing:n,disabledFeedback:!0,icon:(0,u()._)(t),shouldWrapCaption:!0,title:(0,k.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restore",defaultMessage:"Restore to original location"})});return{key:"restore",render:e=>s?(0,k.jsx)(T().A,{textWrap:!0,renderTooltip:()=>s??null,placement:v().W.Right,render:t=>(0,k.jsx)("div",{...t,children:o(e)})}):o(e),action:r}}function _(e){let{iconStyle:t,action:r}=e;return{key:"copy-link",render:e=>(0,k.jsx)(M().A,{...e,icon:(0,d().w)(t),title:(0,k.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:r}}},904671:(e,t,r)=>{r.d(t,{$:()=>u,B:()=>c});var n=()=>r(221844),s=()=>r(223116),o=()=>r(179034),i=()=>r(508496),a=()=>r(630116),d=()=>r(597898),l=()=>r(449506);async function c(e){const{environment:t,sudoModeStore:r,pageBlockId:n,currentSpaceStore:o}=e,a=r.state.privatePageStore&&r.state.privatePageStore.id===n;if(t.device.isMobile||a||r.state.loading||r.state.error)return;await i().default.waitUntilStatsigReady();const c=(null==o?void 0:o.isReady())&&(null==o?void 0:o.canAdmin()),m=await function(e,t){return(0,d().Se)(e,{name:"sudo_mode",spaceId:t,userId:e.currentUser.id})}(t,null==o?void 0:o.id);if(!(n&&c&&o&&m))return;r.setState({...r.state,privatePageStore:void 0,loading:!0});const p=o.id,h=await l().callApi({eventName:"getPrivatePageInfo",environment:t,data:{id:n}});if("failed"===h.type)return void r.setState({...r.state,loading:!1,error:h.error});const g=h.data,b=u({environment:t,blockId:n,privateRecordCacheName:s().Rb,ancestorData:g,spaceId:p});r.setState({...r.state,privatePageStore:b,loading:!1,error:void 0})}function u(e){const{environment:t,privateRecordCacheName:r,ancestorData:s,spaceId:i,blockId:d}=e,l=new(n().A)({name:r});for(const n of s)switch(n.table){case"block":case"collection":case"team":l.setRecord({pointer:{spaceId:i,table:n.table,id:n.value.id},userId:t.currentUser.id},{role:"editor",value:n.value})}const c=new(a().Bv)(t,{table:o().ev,id:d},{inMemoryRecordCache:l});return c.inMemoryRecordCache.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),c}},944850:(e,t,r)=>{r.d(t,{d:()=>m});r(944114),r(898992),r(354520),r(672577),r(581454),r(908872);var n=()=>r(56366),s=()=>r(68263),o=()=>r(437607),i=()=>r(468006),a=()=>r(108944),d=()=>r(731320),l=()=>r(605402),c=()=>r(134217),u=()=>r(749240);function m(e){return(0,n().K8)((()=>{const t=u().subscriptionDataStoreInstance.state,r=t?(0,c().Be)(t):[],n=(0,d().i0)(e),m=l().A.state.permissionGroupsAndMemberCounts.map((e=>e.group)),p=(0,a().Uo)(e),h=n.find((e=>{let{permissionItem:t}=e;return s().FP(t)})),g=n.find((e=>{let{permissionItem:t}=e;return s().Lg(t)})),b=p?n.find((e=>{let{permissionItem:t}=e;return(0,i().O1)(t,p.id)})):void 0,f=n.map((e=>{let{permissionItem:t}=e;return t})).filter(s().gl),S=n.map((e=>{let{permissionItem:t}=e;return t})).filter(s().nl),C=n.map((e=>{let{permissionItem:t}=e;return t})).filter(s().Ds).reduce(((e,t)=>{const r=t.group_id,n=t.role,s=m.find((e=>e.group_id===r));if(s){const t={group_id:s.group_id,id:(0,o().T1)({spacePermissionGroupId:s.group_id,spaceId:s.space_id}),name:s.name,space_id:s.space_id,icon:s.icon,version:s.getVersion(),role:n};e.push(t)}return e}),[]),[v,y]=n.map((e=>{let{permissionItem:t}=e;return t})).filter(s().B2).reduce(((e,t)=>{const n=r.find((e=>e.userId===t.user_id));return Boolean(n&&!s().Km(n.role)&&!s().p2(n.role))?[e[0].concat(t),e[1]]:[e[0],e[1].concat(t)]}),[[],[]]);return{groupPermissions:C,mostPermissivePublicItem:h,spacePermission:g,teamPermission:b,teamSharePermissions:f,teamOwnerSharePermissions:S,guestUserPermissions:v,memberUserPermissions:y,botPermissions:n.map((e=>{let{permissionItem:t}=e;return t})).filter((e=>(0,s().P3)(e)))}}),[e])}},985595:(e,t,r)=>{r.d(t,{n:()=>s});r(296540);var n=r(474848);const s=(0,r(340498).wt)("mailRound",{viewBox:"0 0 17 12",svg:(0,n.jsx)("path",{d:"M3.09961 11.9639H14.1055C15.3359 11.9639 16.0469 11.2529 16.0469 9.84473V2.29785C16.0469 0.896484 15.3291 0.185547 13.9004 0.185547H2.89453C1.66406 0.185547 0.953125 0.889648 0.953125 2.29785V9.84473C0.953125 11.2598 1.6709 11.9639 3.09961 11.9639ZM7.68652 6.41992L2.52539 1.32715C2.67578 1.26562 2.85352 1.23145 3.05859 1.23145H13.9414C14.1533 1.23145 14.3379 1.26562 14.4883 1.33398L9.34082 6.41992C9.04688 6.71387 8.78027 6.84375 8.51367 6.84375C8.24023 6.84375 7.97363 6.70703 7.68652 6.41992ZM1.99902 9.84473V2.29785C1.99902 2.24316 1.99902 2.27051 1.99902 2.22266L5.92969 6.08496L2.00586 9.96094C1.99902 9.92676 1.99902 9.88574 1.99902 9.84473ZM15.001 2.30469V9.85156C15.001 9.87891 15.001 9.91309 15.001 9.94043L11.0977 6.08496L15.001 2.24316C15.001 2.30469 15.001 2.30469 15.001 2.30469ZM3.05859 10.918C2.86719 10.918 2.70312 10.8906 2.55957 10.8291L6.64746 6.78906L7.0918 7.22656C7.57031 7.69824 8.02832 7.89648 8.51367 7.89648C8.99219 7.89648 9.45703 7.69824 9.93555 7.22656L10.3799 6.78906L14.4609 10.8223C14.3105 10.8906 14.1396 10.918 13.9414 10.918H3.05859Z"})})},991221:(e,t,r)=>{r.d(t,{T:()=>u});r(517642),r(658004),r(733853),r(845876),r(432475),r(515024),r(731698),r(898992),r(672577),r(803949);var n=r(296540),s=()=>r(56366),o=(r(354520),()=>r(534177)),i=()=>r(142748);var a=()=>r(68263),d=()=>r(108944),l=()=>r(605402),c=()=>r(134217);function u(e){let{subscriptionData:t}=e;const{userIsMember:r,permissionGroupExists:u}=(0,s().K8)((()=>{if(!t)return{userIsMember:()=>!1,permissionGroupExists:()=>!1};const e=new Set;c().Ye(t).forEach((t=>{e.add(t.userId)}));const r=new Set;l().A.state.permissionGroupsAndMemberCounts.forEach((e=>{r.add(e.group.group_id)}));return{userIsMember:t=>e.has(t),permissionGroupExists:e=>r.has(e)}}),[t]);return(0,n.useCallback)((e=>{var t;const n=null===(t=e.getPermissionItems().find(a().Ny))||void 0===t?void 0:t.previous_permissions;return n?function(e){var t;let{deletedPermissions:r,ancestorPath:n,userIsMember:s,permissionGroupExists:a}=e;const d=null===(t=(0,i().vv)(n))||void 0===t?void 0:t.id;return r.filter((e=>{const t=e.type;switch(t){case"trusted_domain_permission":case"public_permission":case"deleted_permission":case"bot_permission":return!1;case"exclusive_user_permission":case"user_permission":return s(e.user_id);case"explicit_team_guest_permission":case"explicit_team_owner_permission":case"explicit_team_permission":return e.team_id===d;case"group_permission":return a(e.group_id);case"team_owner_permission":case"team_permission":case"restricted_permission":case"space_permission":return!0;default:(0,o().HB)(t)}}))}({deletedPermissions:n,ancestorPath:(0,d().E)(e),userIsMember:r,permissionGroupExists:u}):[]}),[r,u])}}}]);