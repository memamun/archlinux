"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[13402],{5580:(e,t,o)=>{o.d(t,{n:()=>s});var n=()=>o(56366),a=()=>o(209199),i=()=>o(351360);function s(){return(0,n().K8)((()=>{var e;const t=(null===(e=i().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.preferred_locale)??a().q;return(0,a().o_)(t)}),[])}},67696:(e,t,o)=>{o.d(t,{y:()=>p});var n=o(296540),a=()=>o(56366),i=()=>o(401497),s=()=>o(959013),r=()=>o(745766),l=()=>o(907514),d=()=>o(962730),c=()=>o(706965),u=()=>o(859428),g=o(474848);function p(e){const{store:t,isExpanded:o,isWindowSmall:p,isElectron:m,isShowingTabBar:f,style:v}=e,S=(0,i().DP)(),b=(0,a().K8)((()=>t.getLastEditedTime()),[t]),[h,y]=(0,n.useState)("flex"),[x,k]=(0,n.useState)(0);(0,n.useEffect)((()=>{let e;return o||p?o?(k(0),y("none")):(k(0),e=setTimeout((()=>y("none")),150)):(y("flex"),e=setTimeout((()=>k(1)),150)),()=>clearTimeout(e)}),[o,p]);const B=b?(0,l().nl)(b,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):"";return B?(0,g.jsx)("span",{style:{opacity:x,transition:"opacity 150ms linear",display:h,alignItems:"center",fontSize:14,color:S.lightTextColor,height:28,whiteSpace:"nowrap",lineHeight:1.2,...v},children:(0,g.jsx)("div",{style:{display:"flex",flexFlow:"wrap"},children:(0,g.jsx)(u().A,{placement:d().W.Bottom,alignment:d().C.Start,renderTooltip:()=>(0,g.jsx)(c().A,{store:t,compactFormat:!0}),render:e=>{return(0,g.jsx)("div",{...e,style:{...(0,r().g)({noDrag:m&&!f})},children:(t=B,(0,g.jsx)(s().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:t}}))});var t}})})}):null}},164664:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(463830).A)},204263:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(959013),a=o(474848);const i=function(){const e=(0,n().tz)(),t=(0,o(484714).v3)(),i=(0,n().YK)({helpTitle:{defaultMessage:"Learn about tasks",id:"myTasks.helpTooltip.title"}}),s=(0,o(863059).gQ)();return(0,a.jsx)(o(859428).A,{placement:o(962730).W.Bottom,renderTooltip:t=>e.formatMessage(i.helpTitle),render:n=>(0,a.jsx)(o(285790).A,{icon:o(133033).$,iconStyle:s.icon,ariaLabel:e.formatMessage(i.helpTitle),style:{width:s.iconButton.width,height:s.iconButton.height},onClick:e=>{e.preventDefault(),o(755636).f({environment:t,url:o(696746).hI,targetSelf:!1})},...n})})}},274570:(e,t,o)=>{o.d(t,{y:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.625 5.725a.625.625 0 1 0-1.25 0v3.65H6.4a.625.625 0 1 0 0 1.25H10c.345 0 .625-.28.625-.625z"}),(0,n.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},i=(0,o(340498).wt)("clock",a)},361946:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),a=()=>o(959013),i=()=>o(645302),s=()=>o(712505),r=o(474848);const l=function(e){const{store:t,shouldShowMoveToMenu:l,iconStyle:d,style:c}=e,u=(0,o(484714).v3)(),g=(0,a().tz)(),p=(0,o(56366).K8)((()=>(0,o(492414).Ay)({store:t,fullyQualified:!1,openInCenterPeek:!t.isPost()&&void 0,pageVisitSource:o(584262).y8.Expand})),[t]),m=(0,o(401497).IS)((e=>({keyboardShortcut:{color:e.text.contrastSecondary},iconButtonWrapper:{height:24}})),[]),f=(0,n.useCallback)((()=>{var e,t,o;i().uO(u,{isNewPage:l,peek_mode:s().default.state.mode,from:"topbar_button",target_page_id:null===(e=s().default.peekTargetStore.state)||void 0===e?void 0:e.id}),i().Zh(u,{peek_mode:s().default.state.mode,from:"topbar_open_as_page_button",target_page_id:null===(t=s().default.peekTargetStore.state)||void 0===t?void 0:t.id,target_parent_id:null===(o=s().default.peekTargetStore.state)||void 0===o?void 0:o.getParentId()})}),[u,l]);return(0,r.jsx)(o(859428).A,{renderTooltip:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(a().sA,{defaultMessage:"Open in full page",id:"peekTopbar.navigateToPage.tooltip"})}),(0,r.jsx)(o(35392).A,{style:m.keyboardShortcut,name:"commandEnter"})]}),render:t=>(0,r.jsx)("div",{style:m.iconButtonWrapper,children:(0,r.jsx)(o(285790).A,{...t,icon:o(405758).y,iconStyle:{width:16,height:16,...d},hasBackground:e.hasBackground,href:p,onClick:f,ariaLabel:g.formatMessage({id:"peekTopbar.navigateToPage.tooltip",defaultMessage:"Open in full page"}),style:c})})})}},405758:(e,t,o)=>{o.d(t,{y:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("openAsPageThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.16895 7.19629C2.59277 7.19629 2.90723 6.88867 2.90723 6.45801V5.96582L2.75684 3.81934L4.35645 5.50098L6.3252 7.4834C6.46875 7.63379 6.65332 7.70215 6.85156 7.70215C7.30957 7.70215 7.6377 7.39453 7.6377 6.93652C7.6377 6.72461 7.55566 6.54004 7.41211 6.39648L5.43652 4.4209L3.74805 2.82129L5.91504 2.96484H6.44141C6.86523 2.96484 7.18652 2.65723 7.18652 2.22656C7.18652 1.7959 6.87207 1.48145 6.44141 1.48145L2.64746 1.48145C1.86816 1.48145 1.41699 1.93262 1.41699 2.71875L1.41699 6.45801C1.41699 6.88184 1.73828 7.19629 2.16895 7.19629ZM9.55176 14.6543H13.3389C14.125 14.6543 14.5762 14.2031 14.5762 13.417V9.67773C14.5762 9.25391 14.2549 8.93945 13.8242 8.93945C13.4004 8.93945 13.0859 9.24707 13.0859 9.67773V10.1699L13.2295 12.3164L11.6299 10.6348L9.66113 8.65234C9.52441 8.50195 9.33984 8.43359 9.1416 8.43359C8.68359 8.43359 8.35547 8.74121 8.35547 9.19922C8.35547 9.41113 8.43066 9.5957 8.57422 9.73926L10.5566 11.7148L12.2383 13.3145L10.0781 13.1709H9.55176C9.12793 13.1709 8.80664 13.4785 8.80664 13.9092C8.80664 14.3398 9.12109 14.6543 9.55176 14.6543Z"})})},462113:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(296540),a=()=>o(484714),i=()=>o(56366),s=()=>o(401497),r=()=>o(959013),l=()=>o(285790),d=()=>o(859428),c=o(474848);const u=(0,r().YK)({edit:{id:"FormEmbedActionButtons.edit",defaultMessage:"Edit form"},copyLink:{id:"FormEmbedActionButtons.link",defaultMessage:"Copy link to form"},copiedLink:{id:"FormTopbarActionButtons.copiedLinkToForm.tooltip",defaultMessage:"Copied"}}),g=function(e){const t=(0,a().v3)(),g=(0,r().tz)(),p=(0,s().DP)(),m=(0,n.useRef)(null),{isMobile:f}=(0,a().Y0)(),{formBlockStore:v,inPeekMode:S}=e,b=(0,i().K8)((()=>o(351360).default.state.currentSpaceViewStore),[]),h=(0,i().K8)((()=>!!b&&(0,o(245128).A)({spaceViewStore:b,pageId:v.id})),[b,v]),y=(0,s().IS)((e=>({actionButtonStyle:{width:S?24:32,height:S?"auto":28,marginLeft:S?0:4,marginRight:0},actionIconStyle:{width:S?14:20,height:S?14:20,fill:S?e.icon.secondary:e.regularIconColor},actionIconStyleEditForm:{width:S?16:20,height:S?16:20,fill:S?e.icon.secondary:e.regularIconColor},actionIconStyleShareForm:{width:S?14:18,height:S?14:18,fill:S?e.icon.secondary:e.regularIconColor},actionIconStyleFavorite:{width:S?16:20,height:S?16:20,fill:S?e.icon.secondary:e.regularIconColor}})),[S]),[x,k]=(0,n.useState)(!1),B=(0,i().K8)((()=>v.getIsFormPublic()),[v]),w=(0,i().K8)((()=>{var e;return!B&&!f&&(t.currentUser.id===v.getCreatedById()&&Boolean(null===(e=v.getFormBlockParentBlockStore())||void 0===e?void 0:e.canEditCollection()))}),[t.currentUser.id,f,v,B]),C=(0,n.useMemo)((()=>async()=>{k(!0);const e=(0,o(465741).px)(v);(await o(884107).R.clipboardActions.load()).copyString({stringValue:e,environment:t,copiedMessage:f?o(614787).l.copiedLinkToForm:void 0}),setTimeout((()=>{k(!1)}),1e3)}),[v,t,f]);function T(){const e=v.getFormBlockParentBlockStore();var n;e&&o(857783).uK({environment:t,store:e,collectionViewId:null===(n=v.getParentStore())||void 0===n?void 0:n.id,pageVisitSource:o(584262).y8.FormInternalPage})}const A=(0,c.jsxs)(c.Fragment,{children:[w&&(0,c.jsx)(d().A,{renderTooltip:()=>(0,c.jsx)(c.Fragment,{children:g.formatMessage(u.edit)}),render:e=>(0,c.jsx)(l().A,{...e,style:{...y.actionButtonStyle,marginRight:void 0},icon:o(173019).r,iconStyle:y.actionIconStyleEditForm,ariaLabel:g.formatMessage(u.edit),onClick:T})}),(0,c.jsx)(d().A,{originGap:t.device.isElectronWindows?10:void 0,forceVisibleState:!!x||void 0,renderTooltip:()=>(0,c.jsx)(r().sA,{...x?u.copiedLink:u.copyLink}),render:e=>(0,c.jsx)(l().A,{...e,style:y.actionButtonStyle,icon:o(657222).w,iconStyle:y.actionIconStyleShareForm,ariaLabel:g.formatMessage(u.copyLink),onClick:C})}),!B&&(0,c.jsx)(o(618968).TopbarFavoriteButton,{store:v,useDefaultTooltipPlacement:!0,iconStyle:{...y.actionIconStyleFavorite,fill:h?p.topbarFavorite:y.actionIconStyleFavorite.fill},buttonStyle:y.actionButtonStyle,spaceViewStore:b}),S&&(0,c.jsx)(o(361946).A,{store:v,shouldShowMoveToMenu:!1,hasBackground:!0,iconStyle:y.actionIconStyle,style:{width:24}})]});return S?(0,c.jsx)("div",{ref:m,children:(0,c.jsx)(o(48105).Y,{align:"right",containerRef:m,height:28,style:{position:"absolute",borderRadius:1,marginTop:6,marginRight:10},children:A})}):A}},488134:(e,t,o)=>{o.d(t,{n:()=>i});var n=()=>o(645873);const a={TopbarLayoutInfoButton:new(n().O2)("TopbarLayoutInfoButton",(async()=>Promise.all([o.e(23806),o.e(9304),o.e(81141),o.e(72915),o.e(69689),o.e(43647),o.e(2597)]).then(o.bind(o,555801))))},i=(0,n()._h)(a.TopbarLayoutInfoButton,(e=>e.TopbarLayoutInfoButton))},514799:(e,t,o)=>{o.d(t,{H:()=>r});var n=()=>o(484714),a=()=>o(56366),i=()=>o(185078),s=()=>o(910302);function r(e){const{detectedLanguage:t,canSuggestInConfidence:o}=function(e){const{pageStore:t,enabled:o,forceUpdate:i=!1}=e,r=(0,n().v3)();return(0,a().K8)((()=>o?s().bY({pageStore:t,environment:r,enabled:o,forceUpdate:i}):{detectedLanguage:void 0,canSuggestInConfidence:!1}),[t,r,o,i])}(e);return t&&!(0,i().cE)(t)?{detectedLanguage:void 0,canSuggestInConfidence:!1}:{detectedLanguage:t,canSuggestInConfidence:o}}},518773:(e,t,o)=>{o.d(t,{A:()=>i});var n=()=>o(835338),a=()=>o(534177);function i(e,t){switch(e){case"all":return{following:!0,followSettings:{...(0,n().JY)({explicitly_set_by_user:!0}),feed_setting:t}};case"important":return{following:!0,followSettings:{...(0,n().gK)({explicitly_set_by_user:!0}),feed_setting:t}};case"comments":return{following:!0,followSettings:{...(0,n().lx)({explicitly_set_by_user:!0}),feed_setting:t}};case"none":return{following:!1,followSettings:{...(0,n().gU)({explicitly_set_by_user:!0}),feed_setting:t}};default:(0,a().HB)(e)}}},545340:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(757695))().default{getInitialState(){return{trustedDomainPointers:[],enabledTrustedEmailDomains:[],lastEmitData:{value:-1,spaceId:void 0}}}getForSpace(e){if(!e)return;const{enabledTrustedEmailDomains:t,trustedDomainPointers:o,lastEmitData:n}=this.state;return n.spaceId===e.id?{enabledTrustedEmailDomains:t,trustedDomainPointers:o}:void 0}shouldRefetchTrustedDomains(e){let{currentSpaceId:t,emitValue:o}=e;const{spaceId:n,value:a}=this.state.lastEmitData;return t!==n||o!==a}}const a=n},568394:(e,t,o)=>{o.d(t,{aU:()=>A,Ay:()=>P});var n=o(296540),a=()=>o(484714),i=()=>o(56366),s=()=>o(401497),r=()=>o(274570),l=o(474848);const d=(0,o(340498).wt)("mobileTopbarUpdate",{viewBox:"0 0 26 26",svg:(0,l.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0004 4.65002C8.38881 4.65002 4.65039 8.38845 4.65039 13C4.65039 17.6116 8.38881 21.35 13.0004 21.35C17.612 21.35 21.3504 17.6116 21.3504 13C21.3504 8.38845 17.612 4.65002 13.0004 4.65002ZM3.15039 13C3.15039 7.56002 7.56039 3.15002 13.0004 3.15002C18.4404 3.15002 22.8504 7.56002 22.8504 13C22.8504 18.44 18.4404 22.85 13.0004 22.85C7.56039 22.85 3.15039 18.44 3.15039 13Z"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.6504 7.70002C14.0646 7.70002 14.4004 8.03581 14.4004 8.45002V13.65C14.4004 14.0642 14.0646 14.4 13.6504 14.4H8.45039C8.03618 14.4 7.70039 14.0642 7.70039 13.65C7.70039 13.2358 8.03618 12.9 8.45039 12.9H12.9004V8.45002C12.9004 8.03581 13.2362 7.70002 13.6504 7.70002Z"})]})});var c=()=>o(959013),u=()=>o(848259),g=()=>o(778417),p=()=>o(38337),m=()=>o(553965),f=()=>o(869562),v=()=>o(644914),S=()=>o(737230),b=()=>o(962730),h=()=>o(973618),y=()=>o(712505),x=()=>o(406699),k=()=>o(285790),B=()=>o(859428),w=()=>o(281401),C=()=>o(863059);const T=(0,c().YK)({updates:{id:"topbar.updatesButton.title",defaultMessage:"Updates"}});function A(e){const t=(0,c().tz)(),{isMobile:o}=(0,a().Y0)(),n=(0,C().gQ)(),i=(0,s().IS)((e=>{if(o){const t=(0,w().aD)(e);return{icon:t.iconStyle,button:t.iconContainer}}return{icon:n.icon,button:n.iconButton}}),[o,n]);return(0,l.jsx)(k().A,{icon:o?d:r().y,iconStyle:i.icon,style:i.button,ariaLabel:t.formatMessage(T.updates),className:p().V4_,disabled:e.disabled,...e})}const P=function(e){let{spaceStore:t,buttonPopupStore:s,blockStore:r}=e;const d=(0,a().v3)(),p=(0,i().K8)((()=>y().default.state.open&&y().default.state.targetStore),[]),m=(0,i().K8)((()=>v().KM(d)),[d]),f=(0,i().K8)((()=>!o(227440).A.state.online),[]);(0,n.useEffect)((()=>{p!==r&&h().E.state&&(M(r,d),h().E.setState(!1),u().zP({environment:d,pageId:r.pointer.id,isCurrentlyFollowing:(0,o(518773).A)(r.getFollowSettingsKey()).following,from:"email"}))}),[r,p,d]);const{device:S}=d;if(p!==r){const e=f?(0,l.jsx)(c().sA,{defaultMessage:"Unavailable while offline",id:"topbar.updatesButton.offlineTooltip"}):m?(0,l.jsx)(c().sA,{defaultMessage:"Close all updates",id:"topbar.updatesButton.closeSidebartTooltip"}):(0,l.jsx)(c().sA,{defaultMessage:"View all updates",id:"topbar.updatesButton.openSidebartTooltip"});return(0,l.jsx)(B().A,{placement:b().W.Bottom,renderTooltip:()=>e,render:e=>(0,l.jsx)(A,{...e,onClick:()=>M(r,d),hovered:v().KM(d)&&!y().default.state.open,disabled:f})})}return(0,l.jsx)(x().Ay,{onClick:()=>function(e){g().IU({environment:e}),u().nW(e)}(d),disabled:!t,popupType:S.isMobile?x().z7.SlideUp:x().z7.Popup,buttonPopupStore:s,renderOrigin:e=>(0,l.jsx)(j,{buttonPopupEvents:e,isOffline:f}),originGap:8,render:()=>(0,l.jsx)(o(577009).i8,{blockStore:r,spaceStore:t}),style:{width:440,overflow:"hidden"}})};function j(e){let{buttonPopupEvents:t,isOffline:o}=e;const n=(0,a().v3)(),{device:i}=n,s=o?(0,l.jsx)(c().sA,{defaultMessage:"Unavailable while offline",id:"topbar.updatesButton.offlineTooltip"}):(0,l.jsx)(c().sA,{defaultMessage:"View past changes to this page",id:"topbar.updatesButton.tooltip"});return i.isMobile?null:(0,l.jsx)(B().A,{placement:b().W.Bottom,renderTooltip:()=>s,render:e=>(0,l.jsx)(A,{...(0,m().A)(t,e),disabled:o})})}function M(e,t){f().handleSidebarButtonClick(t,e,S().tF.Updates,"topbar")}},586252:(e,t,o)=>{o.d(t,{V:()=>m});var n=o(296540),a=()=>o(484714),i=()=>o(56366),s=()=>o(591779),r=()=>o(185078),l=()=>o(5580),d=()=>o(514799);var c=()=>o(989423),u=()=>o(351360),g=()=>o(430483),p=()=>o(77246);function m(e){const t=(0,a().v3)(),o=(0,i().K8)((()=>{var t;return null===(t=p().Uv.getStateForBlock(e.id))||void 0===t?void 0:t.mode}),[e]),m=(0,i().K8)((()=>g().zD.isFullPageTranslateEnabled()),[]),f=(0,i().K8)((()=>{const e=u().default.state.currentUserSettingsStore;return!!e&&void 0===e.getSettingsStore().getKeyStore("ai_page_translation_dismissed_at").getValue()}),[]),v=m&&f,{detectedPageLanguage:S,suggestedPageTranslationLanguage:b,canSuggestInConfidence:h}=function(e){const{pageStore:t,enabled:o}=e,{detectedLanguage:n,canSuggestInConfidence:a}=(0,d().H)({pageStore:t,enabled:o}),i=(0,l().n)();return n&&n!==i&&(0,r().FM)(i)?{detectedPageLanguage:n,suggestedPageTranslationLanguage:i,canSuggestInConfidence:a}:{detectedPageLanguage:void 0,suggestedPageTranslationLanguage:void 0,canSuggestInConfidence:!1}}({pageStore:e,enabled:v}),[y,x]=(0,n.useState)(!1);(0,s().ZC)(e.id)!==e.id&&y&&x(!1);const k=Boolean(h&&!y&&v&&b&&(void 0===o||"default"===o));return(0,n.useEffect)((()=>{k&&S&&b&&function(e){let{environment:t,detectedLanguage:o,suggestedLanguage:n}=e;(0,c().u4)({environment:t,event:{eventName:"suggested_page_translation",eventProperties:{detected_language:o,suggested_language:n}}})}({environment:t,detectedLanguage:S,suggestedLanguage:b})}),[k]),{suggestTranslation:k,detectedPageLanguage:S,suggestedPageTranslationLanguage:b,setTranslationSuggestionDismissed:x}}},614787:(e,t,o)=>{o.d(t,{l:()=>n});const n=(0,o(959013).YK)({copiedLinkToForm:{id:"FormActionButtons.copiedLinkToForm",defaultMessage:"Copied link to form"}})},618968:(e,t,o)=>{o.r(t),o.d(t,{TopbarFavoriteButton:()=>T});var n=o(296540),a=()=>o(484714),i=()=>o(56366),s=()=>o(401497),r=()=>o(877788),l=o(474848);const d={viewBox:"0 0 20 20",svg:(0,l.jsx)("path",{d:"M10.594 2.83a.625.625 0 0 0-1.188 0L7.899 7.468H3.025a.625.625 0 0 0-.367 1.13L6.6 11.462l-1.506 4.636a.625.625 0 0 0 .962.699L10 13.932l3.943 2.865a.625.625 0 0 0 .962-.699L13.4 11.462l3.943-2.865a.625.625 0 0 0-.367-1.13H12.1z"})},c=(0,o(340498).wt)("starFill",d);var u=()=>o(959013),g=()=>o(778417),p=()=>o(317909),m=()=>o(989423),f=()=>o(38337),v=()=>o(245128),S=()=>o(963589),b=()=>o(869562),h=()=>o(962730),y=()=>o(285790),x=()=>o(35392),k=()=>o(859428),B=()=>o(281401),w=()=>o(863059);const C=(0,u().YK)({isBookmarkedMessage:{defaultMessage:"Favorited",id:"topbar.favoriteButton.activeTitle"},isNotBookmarkedMessage:{defaultMessage:"Favorite",id:"topbar.favoriteButton.title"},isBookmarkedTooltip:{defaultMessage:"Remove from your favorites",id:"topbar.favoriteButton.activeTooltip1"},isNotBookmarkedTooltip:{defaultMessage:"Add to your favorites",id:"topbar.favoriteButton.tooltip1"}});function T(e){let{spaceViewStore:t,store:o,iconStyle:d,buttonStyle:x,showKeyboardShortcut:T,useDefaultTooltipPlacement:P,isTablet:j}=e;const M=(0,a().v3)(),I=(0,u().tz)(),_=(0,i().K8)((()=>!!t&&(0,v().A)({spaceViewStore:t,pageId:o.id})),[t,o]),L=_?c:r().w,E=(0,n.useMemo)((()=>_?()=>function(e,t,o){if(!o)return;g().IU({environment:t}),m().vd(t,"unbookmark",{from:"topbar"}),p().createAndCommit({userAction:"TopbarFavoriteButton.handleUnbookmarkClick",environment:t,canUndo:!0,perform:t=>{b().unbookmarkPage({spaceViewStore:o,store:e,transaction:t})}})}(o,M,t):()=>function(e,t,o){if(!o)return;g().IU({environment:t}),m().vd(t,"bookmark",{from:"topbar"}),p().createAndCommit({userAction:"TopbarFavoriteButton.handleBookmarkClick",environment:t,canUndo:!0,perform:t=>{b().bookmarkPage({spaceViewStore:o,store:e,transaction:t})}})}(o,M,t)),[_,o,M,t]),F=(0,S().X)("tablet_refresh_gate"),K=(0,w().gQ)(),D=(0,s().IS)((e=>({icon:{...j&&F?K.tabletIcon:K.icon,..._?{fill:e.topbarFavorite}:void 0,...d},button:{...K.iconButton,...x}})),[K.icon,K.tabletIcon,K.iconButton,_,d,x,j,F]),V=(0,s().IS)((e=>({iconContainer:(0,B().aD)(e).iconContainer})),[]);return(0,l.jsx)(k().A,{placement:P?void 0:h().W.Bottom,originGap:M.device.isElectronWindows?10:void 0,renderTooltip:()=>(0,l.jsx)(A,{isBookmarked:_,showKeyboardShortcut:T}),render:e=>(0,l.jsx)(y().A,{...e,className:f().ZEs,icon:L,style:j?V.iconContainer:D.button,iconStyle:D.icon,onClick:E,ariaLabel:I.formatMessage(_?C.isBookmarkedMessage:C.isNotBookmarkedMessage)})})}function A(e){let{isBookmarked:t,showKeyboardShortcut:o}=e;const n=(0,s().DP)();return(0,l.jsxs)("div",{style:{textAlign:"center"},children:[(0,l.jsx)("div",{children:(0,l.jsx)(u().sA,{...t?C.isBookmarkedTooltip:C.isNotBookmarkedTooltip})}),o&&(0,l.jsx)(x().A,{style:{color:n.text.contrastSecondary},name:"toggleFavorite"})]})}},657982:(e,t,o)=>{o.d(t,{Z6:()=>i,rN:()=>s});var n=()=>o(645873);const a={translation:new(n().O2)("translation",(()=>Promise.all([o.e(23806),o.e(3773),o.e(8340)]).then(o.bind(o,136768)))),TranslateBanner:new(n().O2)("TranslateBanner",(async()=>await Promise.all([o.e(23806),o.e(3773)]).then(o.bind(o,151985))))},i=(0,n()._h)(a.translation,(e=>e.TopbarAmbientSuggestTranslateButton)),s=(0,n()._h)(a.TranslateBanner,(e=>e.TranslateBanner))},726360:(e,t,o)=>{o.d(t,{H:()=>i,U:()=>a});var n=o(296540);const a=(0,n.createContext)(new(o(545340).A));function i(){return(0,n.useContext)(a)}a.displayName="TrustedDomainsContext"},764172:(e,t,o)=>{o.d(t,{Ay:()=>m,tS:()=>p,xG:()=>f});o(898992),o(737550);var n=o(296540),a=()=>o(484714),i=()=>o(56366),s=()=>o(401497),r=()=>o(959013),l=()=>o(100622),d=()=>o(116008),c=()=>o(644914),u=o(474848);const g=(0,r().YK)({updates:{id:"topbar.commentsButton.title",defaultMessage:"Comments"}});function p(){const e=(0,a().v3)(),{isMobile:t}=e.device,{dot:o}=(0,s().IS)((e=>({dot:{position:"absolute",top:t?6:1.8,right:t?10:5.5,height:11,width:11,border:`2px solid ${e.whiteButtonBackground}`,borderRadius:12,background:l().Ay.red,pointerEvents:"none"}})),[t]);return(0,u.jsx)("div",{style:o})}const m=function(e){let{blockStore:t}=e;const s=(0,r().tz)(),l=(0,a().v3)(),{value:m}=(0,o(645873).fJ)(o(774733).commentsDependency),f=(0,i().K8)((()=>{if(!m)return!1;const{discussionViewActions:e,discussionHelpers:{getDiscussionsForSidebar:o,getAndSortCommentStoresByTime:n}}=m;return o({blockStore:t,ignoreAfterTime:Date.now()}).some((t=>!t.getResolved()&&n(t).some((o=>e.isCommentUnread({discussionStore:t,commentStore:o})))))}),[m,t]),v=(0,o(963589).X)("comment_sidebar_for_you"),S=(0,i().K8)((()=>v?c().Nk(l):c().me(l)),[l,v]),b=S?(0,u.jsx)("div",{style:{textAlign:"center"},children:(0,u.jsx)(r().sA,{defaultMessage:"Close all comments",id:"topbar.commentsButton.closeSidebartTooltip"})}):(0,u.jsx)("div",{style:{textAlign:"center"},children:(0,u.jsx)(r().sA,{defaultMessage:"View all comments",id:"topbar.commentsButton.openSidebartTooltip"})}),h=(0,i().K8)((()=>(o(555776).A.state.isActivelyComposing||d().A.hasContent())&&d().A.isDraftCommentOnValidSelection()&&d().A.ifPropertyCommentShouldDisplay()),[]),y=(0,o(863059).gQ)(),x=(0,n.useCallback)((()=>{var e;const n=null==m||null===(e=m.discussionHelpers)||void 0===e?void 0:e.getDiscussions,a=!!n&&n(t).length>0,i=d().A.state.open;(0,o(989423).u4)({environment:l,event:{eventName:"topbar_comments_menu_click",eventProperties:{has_discussions:a,has_unread_indicator:f||i}}}),o(869562).handleSidebarButtonClick(l,t,o(737230).tF.Comments,"topbar")}),[l,t,f,m]);return(0,u.jsx)(o(859428).A,{placement:o(962730).W.Bottom,renderTooltip:()=>b,render:e=>(0,u.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,u.jsx)(o(285790).A,{...e,icon:o(49621).h,iconStyle:y.icon,onClick:x,style:y.iconButton,ariaLabel:s.formatMessage(g.updates),hovered:S&&!o(712505).default.state.open,className:o(38337).rm}),(f||h)&&(0,u.jsx)(p,{})]})})};function f(e){const{device:t,isPersonalHomePage:o,isFormBlock:n,store:a}=e,i=a.isPost()&&!a.isPublishedPost();return!t.isMobile&&!o&&!n&&(!a.isCollectionView()||a.isCollectionViewPageWithContent())&&!i}},813401:(e,t,o)=>{o.d(t,{E:()=>i});var n=()=>o(645873);const a=new(n().O2)("topbarShareButton",(async()=>await Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(62475),o.e(3151),o.e(98629),o.e(58550),o.e(22900),o.e(85128),o.e(95555),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(72915),o.e(28721),o.e(69689),o.e(23463),o.e(25426),o.e(6463),o.e(91056),o.e(26483),o.e(29333),o.e(5396),o.e(1440),o.e(34576),o.e(95810),o.e(89109),o.e(3560),o.e(77169),o.e(24071),o.e(68610),o.e(67064),o.e(49978),o.e(3720),o.e(47762),o.e(85475),o.e(11740),o.e(97996),o.e(5066),o.e(35299),o.e(68117),o.e(14267),o.e(33731),o.e(30016),o.e(14410),o.e(49471),o.e(31185),o.e(75681)]).then(o.bind(o,136805)))),i=(0,n()._h)(a,(e=>e.TopbarShareButton))},813402:(e,t,o)=>{o.r(t),o.d(t,{TopbarActionButtons:()=>ge,shouldShowTopbarShareMenu:()=>pe,shouldShowTopbarUpdatesMenu:()=>me});var n=o(296540),a=()=>o(484714),i=()=>o(56366),s=()=>o(401497),r=()=>o(996624),l=()=>o(175947),d=()=>o(959013),c=()=>o(462113),u=()=>o(835066),g=()=>o(780054),p=()=>o(869609),m=()=>o(813401),f=()=>o(783423),v=()=>o(454305),S=()=>o(964345),b=()=>o(186445),h=()=>o(38337),y=()=>o(891078),x=()=>o(963589),k=()=>o(204263),B=()=>o(696746),w=()=>o(869562),C=()=>o(644914),T=()=>o(737230),A=()=>o(351360),P=()=>o(77246),j=()=>o(948914),M=()=>o(508496),I=()=>o(548821),_=()=>o(566009),L=()=>o(164664),E=()=>o(795179),F=()=>o(538233),K=()=>o(427155),D=()=>o(657982),V=(o(581454),()=>o(921997)),U=()=>o(277816),H=()=>o(941541),W=()=>o(545340),z=()=>o(378941);function R(e){let{spaceId:t,trustedDomainsStore:o,trustedDomains:n,value:a}=e;const i=n.map((e=>({table:U().A,id:e.id,spaceId:t}))),s=n.map((e=>e.getEmailDomain()));o.setState({trustedDomainPointers:i,enabledTrustedEmailDomains:s,lastEmitData:{value:a,spaceId:t}})}var N=()=>o(726360),O=()=>o(212727),Y=()=>o(493823),G=()=>o(8980),Z=()=>o(859428),$=()=>o(962730),Q=()=>o(691093),X=()=>o(46986),q=o(474848);const J=(0,d().YK)({customizeWorkflow:{id:"workflows.topbar.workflowEditorButton.customizeWorkflow",defaultMessage:"Customize workflow"}});function ee(e){const{store:t}=e,o=(0,a().v3)(),r=(0,d().tz)(),l=(0,s().IS)((()=>({dismissButton:{height:28,width:32,padding:0,display:"flex",alignItems:"center",justifyContent:"center",marginRight:2}})),[]),c=(0,i().K8)((()=>t.isCollectionView()&&t.canEdit()&&!t.isLocked()&&(0,X().s)()),[t]),u=(0,n.useCallback)((()=>{(0,Q().openWorkflowEditor)({environment:o})}),[o]);return c?(0,q.jsx)(Z().A,{placement:$().W.Bottom,originGap:o.device.isElectronWindows?10:void 0,renderTooltip:()=>(0,q.jsx)(d().sA,{...J.customizeWorkflow}),render:e=>(0,q.jsx)(Y().p,{...e,onClick:u,style:l.dismissButton,ariaLabel:r.formatMessage(J.customizeWorkflow),children:(0,q.jsx)(G().I,{icon:O().gearIcon})})}):null}var te=()=>o(67696),oe=()=>o(260893),ne=()=>o(764172),ae=()=>o(618968),ie=()=>o(488134),se=()=>o(126126),re=()=>o(277201),le=()=>o(568394),de=()=>o(586252),ce=()=>o(863059);const ue=3;function ge(e){const t=(0,a().v3)(),{device:o}=t,g=(0,d().tz)(),{store:M}=e,U=(0,i().K8)((()=>M.canEdit()),[M]),[O,Y]=(0,i().$y)(void 0,v().A),[G,Z]=(0,n.useState)(!1),$=(0,i().K8)((()=>b().sj(M.id)),[M]),{currentSpaceStore:Q,currentSpaceViewStore:X,pageVisitStore:J,presenceStore:ge}=(0,i().O$)(A().default),fe=(0,i().K8)((()=>{var e;return null===(e=P().Uv.getStateForBlock(M.id))||void 0===e?void 0:e.mode}),[M]),ve=(0,i().K8)((()=>(0,B().Nh)(M.id)),[M]),{isPost:Se,isFormBlock:be,isPageBlock:he,isEOIPBlock:ye}=(0,i().K8)((()=>({isPost:M.isPost(),isFormBlock:M.isFormBlock(),isPageBlock:M.isPageBlock(),isEOIPBlock:M.isExternalObjectInstancePageBlockStore()})),[M]),xe=(0,x().X)("comment_sidebar_for_you"),ke=(0,i().K8)((()=>!xe&&me({canEditPage:U,device:o,isFormBlock:be,isPersonalHomePage:ve,isTranslated:"translate_locked"===fe})),[xe,U,o,fe,be,ve]),Be=(0,i().K8)((()=>Boolean(Q&&!Q.canEdit())),[Q]),we=(0,i().K8)((()=>(0,C().Nk)(t)),[t]),Ce=(0,i().K8)((()=>(0,u().xK)(t,!1)<1150),[t]),Te=(0,i().K8)((()=>pe({isSpaceGuest:Be,canEditPage:U,isFormBlock:be,isPersonalHomePage:ve,isPersonProfile:!1,isTranslated:"translate_locked"===fe})),[Be,U,be,ve,fe]);(0,n.useEffect)((()=>{Z(!we)}),[we]);const{canShowUpdateSidebarUnexpander:Ae,shouldShowUpdateSidebarUnexpander:Pe}=(0,i().K8)((()=>{const e=!G&&we;return{canShowUpdateSidebarUnexpander:e,shouldShowUpdateSidebarUnexpander:e&&(T().Ay.state.mouseEntered||O.mouseEntered)}}),[G,we,O]),je=(0,i().K8)((()=>Ae?T().Ay.state.width:void 0),[Ae]),{sidebarExpanded:Me,sidebarIsAnimating:Ie}=(0,i().K8)((()=>({sidebarExpanded:T().Ay.state.expanded,sidebarIsAnimating:T().Ay.state.isAnimating})),[]),_e=(0,i().O$)(b().$o),Le=(0,i().K8)((()=>(0,ne().xG)({device:o,isPersonalHomePage:ve,isFormBlock:be,store:M})),[o,ve,be,M]),Ee=(0,i().O$)(S().gZ),{suggestTranslation:Fe,suggestedPageTranslationLanguage:Ke,detectedPageLanguage:De,setTranslationSuggestionDismissed:Ve}=(0,de().V)(M),Ue=(0,i().K8)((()=>!o.isMobile&&!ve&&!be),[o.isMobile,ve,be]),He=(0,i().K8)((()=>!o.isMobile&&(he||ye)&&!be),[o.isMobile,he,be,ye]),We=(0,i().K8)((()=>Boolean(j().A.state.isShowingTabBar)),[]),ze=(0,y().i0)(M),Re=function(e){let{spaceId:t}=e;const o=(0,a().v3)(),[i]=(0,n.useState)(new(W().A));return(0,n.useEffect)((()=>{if(!t)return;(0,z().XC)({environment:o,spaceId:t}).then((e=>R({spaceId:t,trustedDomainsStore:i,trustedDomains:e,value:0})));const e=H().Ay.addListener((0,V()._i)({spaceId:t}),void 0,(async(e,n)=>{if(i.shouldRefetchTrustedDomains({currentSpaceId:t,emitValue:n})){const e=await(0,z().XC)({environment:o,spaceId:t});R({spaceId:t,trustedDomainsStore:i,trustedDomains:e,value:n})}}),void 0,o);return()=>{e&&H().Ay.removeListener(e,o)}}),[o,t,i]),i}({spaceId:null==Q?void 0:Q.id}),Ne=(0,ce().Nq)(),Oe=(0,s().IS)((()=>({actionButtonsWrapStyle:{flexGrow:0,flexShrink:0,display:"flex",alignItems:"center",paddingRight:o.isMobile?4:0,paddingLeft:Ne,width:je,justifyContent:"space-between",zIndex:101,height:l().ek(t.device.isElectronMac),opacity:_e?0:1,transition:`\n\t\t\t\t\topacity ${oe().L}ms,\n\t\t\t\t\tcolor ${oe().L}ms\n\t\t\t\t`},rightButtonsContainer:{display:"flex",alignItems:"center"},pageFreshnessContainer:Te?{}:{marginRight:12}})),[o.isMobile,Ne,je,t.device.isElectronMac,_e,Te]);if(e.isInvalidPage)return null;const Ye=(!o.isElectronMac||!_e)&&Ae&&(o.isElectron||Pe)&&!Ie;return(0,q.jsx)(N().U.Provider,{value:Re,children:(0,q.jsxs)("div",{style:Oe.actionButtonsWrapStyle,onMouseMove:()=>{Y({...O,mouseEntered:!0})},onMouseLeave:()=>{Y({...O,mouseEntered:!1})},className:h()._6K,children:[Ye?(0,q.jsx)(re().i,{isVisible:Ye,icon:r().a,caption:g.formatMessage({defaultMessage:"Close panel",id:"updateSidebarUnexpandButton.closePanel.tooltip"}),onClick:()=>{Z(!0),w().setUpdateExpand({environment:t,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!0})},keyboardShortcutName:"toggleUpdateSidebar"}):(0,q.jsx)("div",{}),(0,q.jsxs)("div",{style:Oe.rightButtonsContainer,children:[Ke&&De&&(0,q.jsx)(D().Z6,{store:M,isVisible:Fe,setTranslationSuggestionDismissed:()=>Ve(!0),suggestedPageTranslationLanguage:Ke,detectedPageLanguage:De}),(0,q.jsx)(f().M,{store:M,isVisible:"suggest"===fe&&!be}),!ve&&!be&&!Ee&&!Fe&&"suggest"!==fe&&"ai_co_editing"!==fe&&(0,q.jsx)(te().y,{store:M,isExpanded:we,isWindowSmall:Ce,isElectron:o.isElectron,style:Oe.pageFreshnessContainer,isShowingTabBar:We}),U&&!Se&&J&&ge&&!be&&(0,q.jsx)(se().Ay,{rootStore:M,pageVisitStore:J,presenceStore:ge,maxUsers:Me?ue:void 0}),Te&&(0,q.jsx)(m().E,{store:M,buttonPopupStore:F().A}),He&&(0,q.jsx)(ie().n,{blockStore:M,buttonPopupStore:_().A,pageViewBlockContext:I().Rr.Frame}),Le&&(0,q.jsx)(ne().Ay,{blockStore:M,spaceStore:Q,buttonPopupStore:L().A}),ke&&(0,q.jsx)(le().Ay,{blockStore:M,spaceStore:Q,buttonPopupStore:K().A}),!ze&&!be&&"translate_locked"!==fe&&(0,q.jsx)(ae().TopbarFavoriteButton,{store:M,spaceViewStore:X}),$&&(0,q.jsx)(k().A,{}),be&&(0,q.jsx)(c().A,{formBlockStore:M,inPeekMode:!1}),(0,q.jsx)(ee,{store:M}),Ue&&(0,q.jsx)(p().u,{store:M,buttonPopupStore:E().A})]})]})})}function pe(e){const{canEditPage:t,isSpaceGuest:o,isFormBlock:n,isPersonalHomePage:a,isPersonProfile:i,isTranslated:s}=e;return!!g().A.isAdminMode||!(n||a||s||i)&&(!o||t)}function me(e){const{canEditPage:t,device:o,isFormBlock:n,isPersonalHomePage:a,isTranslated:i}=e;if(g().A.isAdminMode)return!0;const s=M().default.checkGate({gateName:"tablet_refresh_gate"});return!(n||a||i||!t||o.isPhone||o.isTablet&&s)&&"on"!==M().default.getEligibleGroup({experimentId:"remove_updates_topbar_button_v2",defaultGroup:"control"})}}}]);