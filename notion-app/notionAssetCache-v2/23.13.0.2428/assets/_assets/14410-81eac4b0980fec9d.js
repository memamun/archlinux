"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[14410],{23815:(e,t,o)=>{o.d(t,{$6:()=>s,Vu:()=>l,zX:()=>i});var n=()=>o(66689),r=()=>o(799829),a=()=>o(685889);const i=(0,o(959013).YK)({sprintUncategorizedGroup:{defaultMessage:"Backlog (No {name})",id:"database.sprintDatabaseView.uncategorizedGroupLabel"}});function l(e){const{collectionStore:t,property:o,propertySchema:r,parentStore:i}=e;let l=!1;if(null!=t&&t.isDefined()){const e=t.getPropertyMapping();l=(null==e?void 0:e[n().yx.TaskToSprintRelation])===o}return(0,a().LQ)(r,i)===n().av||l}function s(e){return(0,r().wy)({appUri:e.getFormatStore().getKeyStore("app_config_uri").getValue(),collectionSchema:e.getSchema()})}},31902:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(959013),r=o(474848);const a=function(e){let{collectionViewName:t,collectionViewType:a}=e;return t?(0,r.jsx)(o(288722).A,{children:t}):"page"===a?(0,r.jsx)(n().sA,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,r.jsx)(n().sA,{...o(519839).Xg[a]})}},68207:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M6.328 3c0-.18.145-.325.325-.325h6.694c.18 0 .325.146.325.325v.474c0 .948-.404 1.85-1.112 2.481l-.402.36.19 1.944.039.013a4.325 4.325 0 0 1 2.938 4.097V13c0 .18-.145.325-.325.325h-4.17v3.38a1.1 1.1 0 0 1-.1.46l-.44.956-.063.087a.35.35 0 0 1-.564-.103l-.432-.94a1.1 1.1 0 0 1-.1-.46v-3.38H5A.325.325 0 0 1 4.675 13v-.63a4.325 4.325 0 0 1 2.938-4.098l.039-.013.19-1.945-.402-.359a3.33 3.33 0 0 1-1.112-2.481z"})},r=(0,o(340498).wt)("pinFill",n)},89849:(e,t,o)=>{o.d(t,{h:()=>a});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10 13.504a3.5 3.5 0 1 0-.001-7.002A3.5 3.5 0 0 0 10 13.504m1.167-3.502a1.168 1.168 0 1 1-2.335.002 1.168 1.168 0 0 1 2.335-.002"}),(0,n.jsx)("path",{d:"M10 3.895c-4.093 0-7.662 2.189-9.351 5.408-.231.44-.231.964 0 1.404 1.689 3.22 5.258 5.408 9.351 5.408s7.662-2.189 9.351-5.408c.231-.44.231-.964 0-1.404-1.689-3.22-5.258-5.408-9.351-5.408m-8.245 5.99C3.218 7.096 6.347 5.144 10 5.144s6.782 1.952 8.245 4.74a.26.26 0 0 1 0 .24c-1.463 2.788-4.592 4.74-8.245 4.74s-6.782-1.952-8.245-4.74a.26.26 0 0 1 0-.24"})]})},a=(0,o(340498).wt)("eye",r)},154017:(e,t,o)=>{o.d(t,{b:()=>a});var n=()=>o(476492),r=()=>o(989423);function a(e){const{environment:t,collectionContextStore:o,view_type:a,view_config_uri:i,...l}=e;!function(e,t){r().vd(e,"create_view",t)}(t,{...(0,n().sl)(o)||{},...l,view_type:a,view_config_uri:i})}},167170:(e,t,o)=>{o.d(t,{_:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M3.3 4.825c0-.842.683-1.525 1.525-1.525h3.15c.842 0 1.525.683 1.525 1.525v10.35c0 .842-.683 1.525-1.525 1.525h-3.15A1.525 1.525 0 0 1 3.3 15.175zm1.525-.275a.275.275 0 0 0-.275.275v10.35c0 .152.123.275.275.275h3.15a.275.275 0 0 0 .275-.275V4.825a.275.275 0 0 0-.275-.275zm5.675.275v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525h-3.15c-.842 0-1.525.683-1.525 1.525m1.525-.275h3.15c.152 0 .275.123.275.275v3.15a.275.275 0 0 1-.275.275h-3.15a.275.275 0 0 1-.275-.275v-3.15c0-.152.123-.275.275-.275m0 5.95c-.842 0-1.525.683-1.525 1.525v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525zm-.275 1.525c0-.152.123-.275.275-.275h3.15c.152 0 .275.123.275.275v3.15a.275.275 0 0 1-.275.275h-3.15a.275.275 0 0 1-.275-.275z"})},r=(0,o(340498).wt)("layout",n)},195071:(e,t,o)=>{o.d(t,{A:()=>C});o(944114),o(898992),o(803949),o(581454),o(296540);var n=()=>o(67657),r=()=>o(959013),a=()=>o(496603),i=()=>o(478184),l=()=>o(722372),s=()=>o(722872),u=()=>o(553965),c=()=>o(962730),p=()=>o(509060),d=()=>o(760217),g=()=>o(928600),m=()=>o(939740),y=()=>o(45552),h=()=>o(89924),v=()=>o(859428),f=()=>o(662971),x=o(474848);const S=(0,r().YK)({noneText:{defaultMessage:"None",id:"database.propertyAggregationMenu.noneText"}});const C=(0,r().j4)((function(e){let{onClose:t,property:a,schema:i,currentAggregation:u,source:c,noneText:p,intl:v,onChange:C}=e;const A=(0,o(484714).v3)(),{device:G}=A;let V;V=G.isMobile?{menuType:s().gu.Modal,title:(0,x.jsx)(r().sA,{defaultMessage:"Table aggregation",id:"database.mobilePropertyAggregationMenu.title"}),right:(0,x.jsx)(y().DoneMenuText,{}),onClickRight:t}:{menuType:s().gu.Popup,width:200};const[M,B]=function(e){let{property:t,schema:o,source:r,intl:a,onChange:i,environment:u,currentAggregation:c,noneText:p}=e;const v=[];let C=0,A=0;const{device:G}=u,V=function(e,t,o,r,a){const i={},l=null==a?void 0:a.enforceMaxAggregationLimit,s=null==a?void 0:a.aggregator,u=t[e];if(!u)return{};const c=e=>o(e,l);for(const p of n().VD)i[p]=b(p===s,p,c);if((0,n().wG)(u))for(const p of n().CG)i[p]=b(p===s,p,c);if((0,n().OC)(u))for(const p of n().Sn)i[p]=b(p===s,p,c);if((0,n().fo)(u))for(const p of n().zE)i[p]=b(p===s,p,c);if((0,n().s_)(u))for(const p of n().QO)i[p]=b(p===s,p,c);if((0,n().q0)(u))for(const p of n().nJ)i[p]=j(e,p,a,t,o,r);if((0,n().pe)(u))for(const p of n().A3)i[p]=b(p===s,p,c);return i}(t,o,i,u,c);v.push({key:"none",render:e=>(0,x.jsx)(d().A,{...e,checkState:!c,title:p||a.formatMessage(S.noneText)}),action:()=>i(void 0)});let M="tableAggregation"===r?1:2;return Object.entries(n().Kn).forEach((e=>{let[t,o]=e;const a=[];for(const i of o)if(V[i]){if("show_unique"===i)switch(r){case"tableAggregation":continue;case"rollupPropertyMenu":v.splice(1,0,V[i]),(null==c?void 0:c.aggregator)===i&&(C=1);continue}a.push(V[i]),(c&&(0,n().ET)(null==c?void 0:c.aggregator)&&c.aggregator.operator===i||(null==c?void 0:c.aggregator)===i)&&(C=M,A=a.length-1)}const u=[];if("count_aggregations"===t&&"tableAggregation"===r&&u.push({key:"limitToggleSection",render:e=>(0,x.jsx)(h().A,{...e}),items:[w(c,i)]}),u.push({key:"aggregations",render:e=>(0,x.jsx)(h().A,{topBorder:!0,...e}),items:a}),a.length>0){M++;const e=l().jA[t],o={key:e,render:(t,o)=>(0,x.jsx)(f().A,{...t,disableDefaultClick:!0,onFocus:o.onFocus,renderOrigin:(t,o)=>(0,x.jsx)(d().A,{...t,ref:o,title:e}),renderExtension:(t,n)=>{let r;return r=G.isMobile?{menuType:s().gu.Modal,title:e,right:(0,x.jsx)(y().DoneMenuText,{}),onClickRight:n.close,...t}:{menuType:s().gu.Popup,width:250,...t},(0,x.jsx)(g().A,{...r,children:(0,x.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:A,sections:u,onAccept:(e,t,r)=>{n.close(),o.onAccept&&o.onAccept(e,t,r)}})})}}),action:()=>null};v.push(o)}})),[v,C]}({property:a,schema:i,source:c,intl:v,onChange:C,environment:A,currentAggregation:u,noneText:p});return(0,x.jsx)(g().A,{...V,children:(0,x.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:B??0,sections:[{key:0,render:e=>(0,x.jsx)(h().A,{...e}),items:M}],onAccept:t})})}));function A(e){let{isSelected:t,aggregationType:o,label:n,props:r}=e;const a=l().cx[o];return(0,x.jsx)(v().A,{placement:c().W.Right,delayThreshold:0,render:e=>(0,x.jsx)(d().A,{title:n,checkState:t,...(0,u().A)(e,r)}),renderTooltip:()=>(0,x.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[a&&(0,x.jsx)("img",{src:(0,i().L)(a),style:{borderRadius:4,width:140,marginTop:4}}),l().fp[o]]})},r.key)}function b(e,t,o){const n=l().zY[t],r=l().cx[t];return{key:n,render:o=>(0,x.jsx)(v().A,{placement:c().W.Right,delayThreshold:0,render:t=>(0,x.jsx)(d().A,{title:n,checkState:e,...(0,u().A)(t,o)}),renderTooltip:()=>(0,x.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[r&&(0,x.jsx)("img",{src:(0,i().L)(r),style:{borderRadius:4,width:140,marginTop:4}}),l().fp[t]]})},o.key),action:()=>{o(t)}}}function j(e,t,o,r,i,u){const{device:c}=u,p=l().zY[t],v=a().oE(function(e,t,o,r,a){const i=r[t];if(!i||"status"!==i.type)return;const l=i.groups;return l?l.map((t=>{const r=(e&&(0,n().ET)(e.aggregator)&&e.aggregator.operator===o&&e.aggregator.groupName===t.name)??!1;return{key:`${o}${t.name}`,render:e=>(0,x.jsx)(A,{isSelected:r,aggregationType:o,label:t.name,props:e}),action:()=>{a({operator:o,groupName:t.name})}}})):void 0}(o,e,t,r,i));let S=0;if(o&&(0,n().ET)(null==o?void 0:o.aggregator)&&o.aggregator.operator===t){const e=o.aggregator.groupName,n=v.findIndex((o=>o.key===`${t}${e}`));-1!==n&&(S=n)}return{key:t,render:(e,t)=>(0,x.jsx)(f().A,{...e,onFocus:t.onFocus,renderOrigin:e=>(0,x.jsx)(d().A,{...e,title:p}),renderExtension:(e,o)=>{let n;return n=c.isMobile?{menuType:s().gu.Modal,title:p,right:(0,x.jsx)(y().DoneMenuText,{}),onClickRight:o.close,...e}:{menuType:s().gu.Popup,width:200,...e},(0,x.jsx)(g().A,{...n,children:(0,x.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:S,sections:[{key:"groups",render:e=>(0,x.jsx)(h().A,{...e}),items:v}],onAccept:t.onAccept})})}}),action:()=>null}}function w(e,t){const o=Boolean(null==e?void 0:e.enforceMaxAggregationLimit);return{key:"aggregationLimitToggle",render:e=>(0,x.jsx)(p().A,{on:o,menuListItemProps:e}),action:()=>{t(e?e.aggregator:"count",!o)}}}},259464:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(690471);o(944114),o(898992),o(908872);var r=o(474848);const a=16;function i(e){const{startPoint:t,endPoint:o,style:a,showArrowHead:i,useRightAngles:u,cornerRadiusOverride:c,handleMouseMove:p,handleMouseLeave:d}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{startPoint:t,startCurvePoint:u?void 0:{x:t.x+n().g_,y:t.y},endPoint:i?{x:o.x-1.5,y:o.y}:o,endCurvePoint:u?void 0:{x:o.x-n().g_,y:o.y},cornerRadiusOverride:c,style:a,handleMouseMove:p,handleMouseLeave:d,children:e.children}),i&&(0,r.jsx)(l,{endPoint:o,style:a})]})}function l(e){const{endPoint:t,style:o}=e;return(0,r.jsx)("polyline",{points:`${t.x-5},${t.y-6} ${t.x},${t.y} ${t.x-5},${t.y+6}`,style:o,fill:"transparent"})}function s(e){const{startPoint:t,startCurvePoint:o,endPoint:n,endCurvePoint:i,style:l,cornerRadiusOverride:s,handleMouseMove:u,handleMouseLeave:c}=e;let p="";p=o&&i?`M ${t.x} ${t.y} L ${o.x} ${o.y} L ${i.x} ${i.y} L ${n.x} ${n.y}`:`M ${t.x} ${t.y} L ${t.x} ${n.y} L ${n.x} ${n.y}`;const d=function(e,t){function o(e,t,o){const r=t.x-e.x,a=t.y-e.y,i=Math.sqrt(r*r+a*a);return n(e,t,Math.min(1,o/i))}function n(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function r(e,t){e.length>2&&(e[e.length-2]=t.x.toString(),e[e.length-1]=t.y.toString())}function a(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}const i=e.split(/[,\s]/).reduce(((e,t)=>{const o=t.match("([a-zA-Z])(.+)");return o?(e.push(o[1]),e.push(o[2])):e.push(t),e}),[]).reduce((function(e,t){return!isNaN(parseFloat(t))&&e.length?e[e.length-1].push(t):e.push([t]),e}),[]);let l=[];if(i.length>1){const e=a(i[0]);let s=null;"Z"===i[i.length-1][0]&&i[0].length>2&&(s=["L",e.x.toString(),e.y.toString()],i[i.length-1]=s),l.push(i[0]);for(let u=1;u<i.length;u++){const e=l[l.length-1],c=i[u],p=c===s?i[1]:i[u+1];if(p&&e&&e.length>2&&"L"===c[0]&&p.length>2&&"L"===p[0]){const i=a(e),s=a(c),u=a(p),d=o(s,i,t),g=o(s,u,t);r(c,d),l.push(c);const m=n(d,s,.5),y=n(s,g,.5),h=["C",m.x.toString(),m.y.toString(),y.x.toString(),y.y.toString(),g.x.toString(),g.y.toString()];l.push(h)}else l.push(c)}if(s){const e=a(l[l.length-1]);l.push(["Z"]),r(l[0],e)}}else l=i;return l.reduce((function(e,t){return`${e}${t.join(" ")} `}),"")}(p,s||a);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d,style:l,fill:"transparent"}),(u||c)&&(0,r.jsxs)("g",{onMouseMove:u,onMouseLeave:c,children:[(0,r.jsx)("path",{d,style:{strokeOpacity:0,strokeWidth:16,pointerEvents:"stroke",cursor:"default"},fill:"transparent"}),e.children]})]})}},265793:(e,t,o)=>{o.d(t,{b:()=>h,w:()=>v});var n=()=>o(484714),r=()=>o(56366),a=()=>o(888325),i=()=>o(187174),l=()=>o(96689),s=()=>o(541801),u=()=>o(449506),c=()=>o(645873),p=()=>o(351360),d=()=>o(441307),g=()=>o(961581),m=()=>o(299177);const y=!1;function h(e){var t;const o=null===(t=(0,c().fJ)(s().xl).value)||void 0===t?void 0:t.loadWorkflowTemplateInstances;(0,r().K8)((()=>{if(!o)return;const t=e instanceof d().A?e.collectionStore():e;t&&o(t)}),[o,e])}function v(){const e=(0,n().v3)(),t=(0,r().K8)((()=>{var e;if(function(){const e=g().A.state.initialRenderCompleted;y&&!e&&console.log("Initial page render is not yet completed, delaying refresh of workflow template instances.");return e}())return null===(e=p().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,i().Yb)((async()=>{if(!t)return;(m().A.debug||y)&&console.log("Refreshing workflow template instance map for space",t);const o={table:l().NX,id:t,spaceId:t},n=await u().callApi({eventName:"getWorkflowTemplateInstances",environment:e,data:{spaceId:o.spaceId,scopeTable:o.table,scopeId:o.id,enableInstanceRobustness:!0}});if("success"===n.type){const e=(0,a()._)(o);m().A.setState({...m().A.state,[e]:n.data.instanceMap[e]})}}),[e,t])}},287531:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(296540),r=o(474848);function a(e){const{pageName:t,targetCollectionStore:n,...a}=e,i=(0,o(484714).Y0)(),l=(0,o(56366).K8)((()=>n.getIcon()),[n]),s=(0,o(401497).IS)((e=>({medium:{color:e.mediumTextColor},dbName:{display:"flex",alignItems:"center",marginLeft:4},title:{marginLeft:o(246219).g1*(i.isRetina?.5:1)},icon:{width:16,fill:e.mediumIconColor}})),[i.isRetina]),u=(0,r.jsxs)("div",{style:s.dbName,children:[(0,r.jsx)(o(614505).A,{disabled:!0,icon:l,isEmptyPage:!1,size:i.isMobile?24:20}),(0,r.jsx)(o(16006).A,{store:n,style:s.title})]});return(0,r.jsx)(o(760217).A,{title:(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,r.jsx)(o(959013).sA,{id:"database.searchRelation.createNewPageFooter",defaultMessage:"<medium>New</medium> {pageName} <medium> in</medium> {databaseNameWithIcon}",values:{medium:e=>(0,r.jsx)("span",{style:s.medium,children:e}),pageName:(0,r.jsx)("span",{style:{marginLeft:4,marginRight:4},children:t}),databaseNameWithIcon:u}})}),icon:(0,o(689094).W)(s.icon),...a})}const i=n.memo(a)},330557:(e,t,o)=>{o.d(t,{p:()=>K});o(898992),o(581454),o(737550);var n=o(296540),r=()=>o(484714),a=()=>o(56366),i=()=>o(401497),l=()=>o(764880),s=()=>o(921598),u=()=>o(970013),c=()=>o(356596),p=()=>o(799829),d=()=>o(179034),g=()=>o(519831),m=()=>o(959013),y=()=>o(496603),h=()=>o(534177),v=()=>o(284371),f=()=>o(901389),x=()=>o(175116),S=()=>o(594794),C=()=>o(722872),A=()=>o(106628),b=()=>o(361330),j=()=>o(970585),w=()=>o(630116),G=()=>o(251126),V=()=>o(297872),M=()=>o(623580),B=()=>o(419357),k=()=>o(928600),F=()=>o(939740),_=()=>o(64e3),T=()=>o(204063),I=()=>o(305390),P=()=>o(89924),R=()=>o(287531),L=()=>o(457688),z=o(474848);function K(e){const{onChange:t,currentGroups:o,groupBy:i,groupFormat:l,onClose:u,schema:c,parentStore:p}=e,[d,g]=(0,n.useState)(""),y=(0,a().uB)(void 0,j().A),h=(0,r().Y0)(),v=(0,n.useCallback)((()=>{D({onChange:t,currentGroups:o,groupBy:i,groupFormat:l,inputValue:d,onClose:u})}),[o,i,l,d,t,u]);let f;return(0,n.useEffect)((()=>{var e;l&&("select"===l.value.type||"multi_select"===l.value.type)&&l.value.value?g(l.value.value):l&&(0,s().kO)(l.value)&&"exact"===(null===(e=l.value.value)||void 0===e?void 0:e.type)&&g(l.value.value.value)}),[l]),f=h.isMobile?{menuType:C().gu.Modal,title:l?(0,z.jsx)(m().sA,{defaultMessage:"Rename group",id:"codeBlock.databaseEditGroupMenu.renameGroupTitle"}):(0,z.jsx)(m().sA,{defaultMessage:"Add a group",id:"codeBlock.databaseEditGroupMenu.addGroupTitle"}),left:(0,z.jsx)(m().sA,{defaultMessage:"Cancel",id:"codeBlock.databaseEditGroupMenu.cancelButton.label"}),right:(0,z.jsx)(m().sA,{defaultMessage:"Done",id:"codeBlock.databaseEditGroupMenu.doneButton.label"}),onClickRight:v,onClickLeft:u}:{menuType:C().gu.Popup,width:H(i)?300:240,maxHeight:"50vh"},(0,z.jsx)(V().A,{capture:!0,render:e=>(0,z.jsx)(k().A,{...f,...e,children:(0,z.jsx)(q,{groupBy:i,schema:c,onChange:t,currentGroups:o,groupFormat:l,onClose:u,parentStore:p,inputValue:d,setInputValue:g,menuListStore:y})})})}function E(){return(0,z.jsx)(m().sA,{defaultMessage:"Group already exists.",id:"database.groupExistsAlreadyError.message"})}function H(e){return"select"===e.type||"multi_select"===e.type||(0,s().Vs)(e.type)}function N(e){let{currentGroups:t,onChange:o,groupFormat:i,onClose:u,inputValue:c,menuListStore:p}=e;const d=(0,r().v3)(),g=(0,m().tz)(),h=(0,a().uB)(p,j().A),[v,x]=(0,n.useState)(c);return(0,z.jsx)(G().A,{request:v,performRequest:e=>async function(e,t){const o=await A().T.searchActions.load();return(await o.searchVisibleSpaceUsers({environment:t,query:e,membersOnly:!1})).slice(0,20)}(e,d),debounce:b().tu,render:(e,n,r)=>{n||(n=[]);const a=y().oE(n.map((e=>({key:e.id,render:t=>(0,z.jsx)(L().A,{actor:(0,l().A7)(e),...t}),action:()=>{const n={type:"person",value:{table:"notion_user",id:e.id}};return i&&y().n4(n,i.value)?(null==u||u(),null):t.some((e=>(0,s().OF)(n,e.value)))?(f().f1((0,z.jsx)(E,{})),null):void o({newGroupValue:n})}}))));let c;return c=r&&n&&0===a.length?(0,z.jsx)(P().A,{children:(0,z.jsx)(_().A,{title:(0,z.jsx)(m().sA,{defaultMessage:"No results",id:"database.noPersonSearchResults.message"})})}):(0,z.jsx)(F().Ay,{type:F().Oh.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,z.jsx)(P().A,{...e}),items:a}],store:h}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(P().A,{children:(0,z.jsx)(B().Ay,{value:v,focus:!0,placeholder:g.formatMessage({defaultMessage:"Search for a person…",id:"database.searchPerson.placeholder"}),onChange:e=>{x(e.target.value),h.setState({...h.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}})}),c]})}})}function W(e,t,o,n,r,a){const i=o[n.property];if(!i||"relation"!==i.type)return null;const l=u().Nv(i);if(!l)return null;const s=w().md.createChildStore(t,l);return s.isDefined()&&a.length>0?{key:"new-page",render:e=>(0,z.jsx)(R().A,{targetCollectionStore:s,pageName:a,...e}),action:()=>{const t=(0,S().Z1)({environment:e,table:d().ev,spaceId:s.getSpaceId()}),o={table:d().ev,id:t,spaceId:s.getSpaceId()};r({newGroupValue:{type:"relation",value:o},newPage:{id:o.id,spaceId:o.spaceId,name:a}})}}:null}function D(e){let{onChange:t,currentGroups:o,groupBy:n,groupFormat:r,inputValue:a,onClose:i}=e;const l=a.trim().replace(/,/g,"");let u;"select"===n.type||"multi_select"===n.type?u={type:n.type,value:l}:(0,s().Vh)(n)&&(u={type:n.type,value:{type:"exact",value:l}}),u&&l?r&&y().n4(u,r.value)?null==i||i():o.some((e=>u&&(0,s().OF)(u,e.value)))?f().f1((0,z.jsx)(E,{})):t({newGroupValue:u}):null==i||i()}function $(e,t,o,n,r,a,i,l,u){const c=null==u?void 0:u.relativeVariableStore.state,d=c&&c[t.id],g=(e,o)=>{const r=w().md.createChildStore(n,t);if(!r.isDefined())return;const a=r.getFormat().app_config_uri;return a&&o?e.formatMessage(p().n$[a][o].messageDescriptor):void 0};return e.map((e=>{const t=w().Bv.createChildStore(n,e);if(t.isTemplate())return;const u=d?(0,p().cE)(t.id,d):void 0;return{key:t.id,render:e=>(0,z.jsx)(I().A,{store:t,titlePrefix:g(r,u),...e}),action:()=>{let t={type:"relation",value:e};u&&(t={type:"relation",value:{type:"relative",value:{type:"builtin",variable:u}}}),i&&y().n4(t,i.value)?null==l||l():o.some((e=>(0,s().OF)(t,e.value)))?f().f1((0,z.jsx)(E,{})):a({newGroupValue:t})}}}))}function O(e){let{onChange:t,currentGroups:o,groupBy:a,groupFormat:l,onClose:s,inputValue:u,setInputValue:p,menuListStore:d}=e;const g=(0,m().tz)(),y=(0,i().DP)(),h=(0,n.useCallback)((()=>D({onChange:t,currentGroups:o,groupBy:a,groupFormat:l,inputValue:u,onClose:s})),[t,o,a,l,u,s]),f=(0,n.useCallback)((e=>function(e,t,o,n,r,a,i){13===e.keyCode?D({onChange:t,currentGroups:o,groupBy:n,groupFormat:r,inputValue:a,onClose:i}):27===e.keyCode&&(null==i||i())}(e,t,o,a,l,u,s)),[t,o,a,l,u,s]),x=(0,n.useCallback)((e=>function(e,t,o){t(e.target.value),o.setState({...o.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}(e,p,d)),[d,p]),S=(0,r().WS)(),C=l?g.formatMessage({id:"database.collectionEditGroupMenu.renameGroupLabel.placeholder",defaultMessage:"Rename group"}):g.formatMessage({id:"database.collectionEditGroupMenu.newGroupLabel.placeholder",defaultMessage:"New group"});return S?(0,z.jsx)(P().A,{children:(0,z.jsx)(B().Ay,{value:u,focus:!0,selectAll:!0,showClearButton:!1,focusInitial:!0,placeholder:C,onChange:x,onKeyDown:f})}):(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:6,width:"100%",background:y.inputBackground},children:[(0,z.jsx)(M().A,{value:u,focus:!0,selectAll:!0,focusInitial:!0,placeholder:C,onChange:x,onKeyDown:f,format:M().C.Transparent,style:{fontSize:v().J.UIRegular.desktop}}),(0,z.jsxs)(T().A,{onClick:h,children:[(0,z.jsx)(m().sA,{defaultMessage:"Done",id:"database.collectionEditGroupMenu.submitButton.label"}),(0,c().K)({height:14,width:14,fill:"currentColor",marginLeft:6,marginTop:2})]})]})}function U(e){let{parentStore:t,schema:o,groupBy:i,currentGroups:l,onChange:s,groupFormat:c,onClose:p,inputValue:m,setInputValue:y,menuListStore:h}=e;const v=(0,r().v3)(),f=(0,n.useMemo)((()=>{const e=o[i.property];return!(!e||"relation"!==e.type)&&u().Nv(e)}),[i.property,o]);return(0,a().K8)((()=>{if(!f)return!1;return w().md.createChildStore(t,f).isDefined()}),[f,t])&&f?(0,z.jsx)(G().A,{request:m,performRequest:e=>async function(e,t,o,n,r){const a=o[t.property];if(!a||!(0,u().nC)(a))return;const i=a.collection_pointer;if(!i)return;const l=w().md.createChildStore(n,{table:g().Vl,id:i.id});if(await l.load(),!l.isDefined())return;const s=l.getSpaceId(),c=await A().T.searchActions.load();return(await c.searchPagesInCollection({environment:r,query:e,collectionId:i.id,spaceId:s,excludeTemplates:!0,source:"collection_group_value",limit:20,includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!1})).results.map((e=>({table:d().ev,id:e,spaceId:s})))}(e,i,o,t,v),debounce:b().tu,render:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return(0,z.jsx)(Z,{ready:r,results:n,parentStore:t,schema:o,groupBy:i,currentGroups:l,onChange:s,groupFormat:c,onClose:p,inputValue:m,setInputValue:y,menuListStore:h,collectionPointer:f,environment:v})}}):null}function Z(e){let{parentStore:t,schema:o,groupBy:r,currentGroups:i,onChange:l,groupFormat:s,onClose:u,inputValue:c,setInputValue:p,menuListStore:d,results:g,ready:h,collectionPointer:v,environment:f}=e;const S=(0,m().tz)(),C=(0,n.useContext)(x().p2),A=(0,a().K8)((()=>y().oE([...$(g,v,i,t,S,l,s,u,C),W(f,t,o,r,l,c)])),[f,C,v,i,r,s,c,S,l,u,t,g,o]);let b;return b=h&&g&&0===A.length?(0,z.jsx)(P().A,{children:(0,z.jsx)(_().A,{title:(0,z.jsx)(m().sA,{defaultMessage:"No results",id:"database.noRelationSearchResults.message"})})}):(0,z.jsx)(F().Ay,{type:F().Oh.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,z.jsx)(P().A,{...e}),items:A}],store:d}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(P().A,{children:(0,z.jsx)(B().Ay,{value:c,focus:!0,placeholder:S.formatMessage({defaultMessage:"Type to search...",id:"database.searchRelation.placeholder"}),onChange:e=>{p(e.target.value),d.setState({...d.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}})}),b]})}function q(e){let{groupBy:t,schema:o,onChange:n,currentGroups:r,groupFormat:a,onClose:i,parentStore:l,inputValue:u,setInputValue:c,menuListStore:p}=e;return o[t.property]?"select"===t.type||"multi_select"===t.type?(0,z.jsx)(O,{onChange:n,currentGroups:r,groupBy:t,groupFormat:a,onClose:i,inputValue:u,setInputValue:c,menuListStore:p}):"person"===t.type?(0,z.jsx)(N,{currentGroups:r,onChange:n,groupFormat:a,onClose:i,inputValue:u,menuListStore:p}):"relation"===t.type?(0,z.jsx)(U,{parentStore:l,schema:o,groupBy:t,currentGroups:r,onChange:n,groupFormat:a,onClose:i,inputValue:u,setInputValue:c,menuListStore:p}):(0,s().Vs)(t.type)?(0,z.jsx)(O,{onChange:n,currentGroups:r,groupBy:t,groupFormat:a,onClose:i,inputValue:u,setInputValue:c,menuListStore:p}):"number"===t.type||"status"===t.type||"date"===t.type||"formula"===t.type||"checkbox"===t.type||"created_time"===t.type||"last_edited_time"===t.type||"created_by"===t.type||"last_edited_by"===t.type||"last_visited_time"===t.type||"location"===t.type?null:void(0,h().HB)(t.type):null}},344482:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(672577);class n extends(()=>o(959180))().A{findTableHeaderCell(e,t){return this.find((o=>o.collectionContextStore===e&&o.property===t))}}const r=new n},359454:(e,t,o)=>{o.d(t,{P:()=>i});var n=()=>o(725614),r=()=>o(351360),a=()=>o(630116);function i(e){const{environment:t,collectionContextStore:o}=e;let i=o.collectionStore();const l=o.collectionViewBlockStore();if(!i||!l)return;const{mainEditorCurrentBlockStore:s}=r().default.state;s&&o.isFullScreenStore.state&&(i=a().md.createChildStore(s,i.pointer)),n().selectAllText({environment:t,store:i.getNameStore(),canSelectAllBlocks:!1})}},370873:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("myTasksLarge",{viewBox:"0 0 48 48",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M21.693 39.17a9.05 9.05 0 0 1-.73 1.238H39.52c1.65 0 2.892-.413 3.727-1.238.835-.824 1.253-2.05 1.253-3.68V19.203c0-1.628-.418-2.855-1.253-3.68-.835-.824-2.078-1.236-3.727-1.236H16.253c-1.66 0-2.908.412-3.744 1.237-.824.814-1.237 2.04-1.237 3.68v5.28c.212-.02.423-.036.635-.047a6.387 6.387 0 0 1 1.269 0c.222.01.438.027.65.048v-5.14c0-.824.211-1.448.634-1.87.423-.424 1.031-.635 1.824-.635h23.188c.783 0 1.39.212 1.824.634.434.423.65 1.047.65 1.872v16.003c0 .825-.216 1.449-.65 1.872-.433.423-1.041.634-1.824.634H22.248a8.47 8.47 0 0 1-.555 1.316ZM15.364 10.082c-.38.381-.629.93-.745 1.65h26.55c-.127-.72-.38-1.269-.761-1.65-.37-.39-.952-.586-1.745-.586H17.125c-.793 0-1.38.195-1.76.586ZM18.52 5.816c-.38.338-.591.846-.634 1.523h20.016c-.053-.677-.275-1.185-.666-1.523-.38-.349-.936-.523-1.665-.523H20.2c-.729 0-1.29.174-1.68.523Z"}),(0,n.jsx)("path",{d:"M9.448 42.073a7.71 7.71 0 0 0 3.11.634c1.088 0 2.12-.211 3.092-.634a8.253 8.253 0 0 0 2.57-1.745 8.123 8.123 0 0 0 1.76-2.57 7.712 7.712 0 0 0 .634-3.108 7.75 7.75 0 0 0-.634-3.124 8.032 8.032 0 0 0-1.729-2.57 8.03 8.03 0 0 0-2.57-1.728 7.75 7.75 0 0 0-3.124-.635 7.71 7.71 0 0 0-3.109.635 7.907 7.907 0 0 0-2.569 1.744 8.253 8.253 0 0 0-1.745 2.57A7.639 7.639 0 0 0 4.5 34.65c0 1.11.211 2.152.634 3.125a8.254 8.254 0 0 0 1.745 2.57 8.03 8.03 0 0 0 2.57 1.728Zm3.807-2.649c-.17.18-.402.27-.698.27-.296 0-.534-.09-.714-.27-.169-.18-.253-.412-.253-.698v-3.108H8.48c-.286 0-.518-.09-.698-.27-.18-.17-.27-.402-.27-.698 0-.296.09-.528.27-.698.18-.18.412-.27.698-.27h3.109v-3.108c0-.285.084-.518.253-.698.18-.18.418-.27.714-.27s.529.09.698.27c.18.18.27.413.27.698v3.109h3.108c.286 0 .518.09.698.27.18.169.27.401.27.697 0 .296-.09.529-.27.698-.18.18-.412.27-.698.27h-3.108v3.108c0 .286-.09.519-.27.698ZM27.229 32.326c.292.341.664.512 1.116.512.514 0 .903-.198 1.166-.592l5.693-8.58c.095-.14.164-.277.21-.413a1.3 1.3 0 0 0 .068-.401c0-.354-.124-.646-.37-.876a1.246 1.246 0 0 0-.901-.352c-.247 0-.456.05-.63.149-.168.094-.328.259-.48.493l-4.78 7.506-2.394-2.868c-.259-.3-.584-.45-.974-.45-.366 0-.668.117-.907.351a1.186 1.186 0 0 0-.357.883c0 .16.024.312.073.456.054.14.15.286.29.438l3.177 3.744Z"})]})})},396671:(e,t,o)=>{o.d(t,{d:()=>i});o(944114),o(898992),o(354520),o(672577),o(803949),o(581454);var n=()=>o(56366),r=()=>o(921598),a=()=>o(10594);function i(e){let{collectionContextStore:t,groupBy:o,groupsFormatKey:i,reducerResult:l,groupsLimit:s,renderGroupsFromAggregationArgs:u,removeUncategorized:c,forBoardColumns:p,groupByColumns:d}=e;return(0,n().Fy)((()=>{var e;const n=t.normalizedFormatStore.state,g=t.normalizedSchemaStore.state,m=t.collectionViewBlockStore(),y=p?d:o;if("v2"===(null==l?void 0:l.version)){if(!y)return{version:"v2",currentGroups:[],visibleGroups:[],hiddenGroups:[],pinnedGroups:[],hasMore:!1};const e=[],t=[];l.results.forEach((o=>{const n=l.pinnedResults.find((e=>(0,r().AC)(e.value)===(0,r().AC)(o.value)));o.visible?e.push({property:y.property,value:o.value,pinned:Boolean(n)}):t.push({property:y.property,value:o.value,hidden:!0,pinned:Boolean(n)})}));const o=l.pinnedResults.map((e=>({property:y.property,value:e.value,pinned:!0,hidden:!e.visible})));return{version:"v2",currentGroups:[...e,...t],visibleGroups:e,hiddenGroups:t,pinnedGroups:o,hasMore:l.hasMore}}if(!o||!m)return{version:"v1",currentGroups:[],visibleGroups:[],hiddenGroups:[],total:0};const h=(0,r().oH)({schema:g,groupBy:o}),v="chart_subgroups"===i&&null!=l&&l.subGroupResults?l.subGroupResults:null==l?void 0:l.results,f=(0,a().ck)({groupBy:o,schema:g,formatGroups:n[i]||[],schemaGroups:h,reducerResults:v,getRecordModel:m.getRecordModel,getRecordRole:m.getRecordRole,relativeVariableResult:t.relativeVariableStore.state,viewAppConfigUri:null===(e=t.collectionViewStore())||void 0===e?void 0:e.getFormat().app_config_uri,allowedCollectionStores:t.collectionStoresStore.state,renderGroupsFromAggregationArgs:u,removeUncategorized:c}),x=f.filter((e=>!(0,r().tx)(e))).slice(0,s),S=f.filter((e=>(0,r().tx)(e))),C=l?l.total:0;return{version:"v1",currentGroups:[...x,...S],visibleGroups:x,hiddenGroups:S,total:C}}),[t,p,d,o,l,i,u,c,s])}},424599:(e,t,o)=>{o.d(t,{M:()=>c});o(581454);var n=()=>o(594013),r=()=>o(901610),a=()=>o(686526),i=()=>o(246826),l=()=>o(317909),s=()=>o(519839),u=()=>o(493260);async function c(e){var t;const{environment:o,collectionStore:c,collectionContextStore:p,collectionSettingsStore:d,shouldSkipViewSelection:g}=e,m=p.collectionViewBlockStore(),y=p.collectionViewStore(),h=c.getParentBlockStore();if(!m||!h||!y)return;const v=null===(t=c.getModel())||void 0===t?void 0:t.getNormalizedSchema();if("chart"===y.getType()&&v){const e=y.getFormat(),t=e.chart_config;if(!t)return;const a="placeholder"===t.type?t.placeHolderType:t.type;let s;return(0,r().I)(a)?s=(0,n().EZ)({collectionSchema:v,axisChartType:a}):"donut"===a&&(s=(0,n().ZS)({collectionSchema:v})),l().createAndCommit({userAction:"slashMenu.create.chartViewExistingSource",environment:o,canUndo:!0,perform:t=>{i().zv({store:y.getFormatStore(),transaction:t,data:{...e,hide_linked_collection_name:!0,subitem_display_mode:"flattened",chart_config:s||null}})}}),void d.setState({open:!0,stack:[{type:"main"}]})}if(g)a().a2({collectionSettingsStore:d,item:{type:"main"}});else{await Promise.all([...h.getCollectionViewStores().map((e=>e.load())),...m.getCollectionViewStores().map((e=>e.load()))]);(0,s().Mf)({collectionStore:c,sourceCollectionViewBlockStore:h,currentCollectionViewBlockStore:m,currentCollectionViewStore:y,constraints:(0,u().v)(y.id)}).length>0?a().a2({collectionSettingsStore:d,item:{type:"duplicateExistingView"}}):a().a2({collectionSettingsStore:d,item:{type:"createView"}})}}},509060:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(959013),r=o(474848);const a=function(e){let{on:t,menuListItemProps:a}=e;return(0,r.jsx)(o(574036).A,{...a,on:t,style:{alignItems:"flex-start",paddingTop:8,paddingBottom:8},title:(0,r.jsx)(n().sA,{defaultMessage:"Show large counts as 99+",id:"BoardAggregations.aggregationLimitToggle.title"}),captionStyle:{marginTop:6},shouldWrapCaption:!0,caption:(0,r.jsx)(n().sA,{defaultMessage:"This improves performance for large databases.",id:"BoardAggregations.aggregationLimitToggle.description"})})}},532564:(e,t,o)=>{o.d(t,{V:()=>l,Z:()=>i});o(16280);var n=o(296540),r=o(474848);const a=n.createContext(void 0);function i(e){return(0,r.jsx)(a.Provider,{value:e.value,children:e.children})}function l(){const e=n.useContext(a);if(!e)throw new Error("useChartStore must be used within a ChartContextProvider");return e}a.displayName="ChartContext"},573812:(e,t,o)=>{o.d(t,{_:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"m4.897 3.085-.122-.142a.625.625 0 0 0-.95.814l3.56 4.152-.013.131a4.625 4.625 0 0 0-2.997 4.33V13c0 .345.28.625.625.625h4.13v3.08c0 .158.035.317.1.46l.433.94a.35.35 0 0 0 .565.103l.063-.087.44-.956c.065-.142.1-.3.1-.46v-3.08h1.453l2.941 3.432a.625.625 0 0 0 1.042-.67L4.989 3.228a.6.6 0 0 1-.093-.144m3.258 6.007a.6.6 0 0 0 .169-.088l2.889 3.371H5.625v-.006c0-1.447.922-2.733 2.293-3.197zm7.259 4.379a.62.62 0 0 0 .212-.47v-.63a4.625 4.625 0 0 0-2.997-4.33l-.157-1.603.289-.258a3.63 3.63 0 0 0 1.212-2.705V3a.625.625 0 0 0-.625-.625H6.653a.62.62 0 0 0-.516.272l1.216 1.419a2.4 2.4 0 0 1-.07-.441h5.434a2.38 2.38 0 0 1-.79 1.621l-.525.47a.63.63 0 0 0-.206.527l.227 2.318a.63.63 0 0 0 .422.531l.237.08a3.375 3.375 0 0 1 2.291 3.084z"})},r=(0,o(340498).wt)("pinSlash",n)},607517:(e,t,o)=>{o.d(t,{V:()=>m,r:()=>g});o(898992),o(354520),o(672577),o(581454);var n=()=>o(921598),r=()=>o(496603),a=()=>o(10594),i=()=>o(972435),l=()=>o(436696),s=()=>o(901389),u=()=>o(317909),c=()=>o(786452),p=()=>o(878781),d=()=>o(916260);function g(e){const{environment:t,collectionContextStore:o,isHidden:g,groupByKey:m,groupsFormatKey:y,currentGroups:h,newGroupIds:v}=e,f=(0,n().H2)(o.normalizedFormatStore.state,m,y),x=f?(0,n().Kq)(f):void 0,S=h.filter((e=>v.indexOf((0,n().Ix)(e))<0)),C=h.filter((e=>v.indexOf((0,n().Ix)(e))>=0)),A=r().Ul(C,(e=>{const t=v.indexOf((0,n().Ix)(e));return t>=0?t:1/0})),b=g?[...S,...A]:[...A,...S];u().createAndCommit({userAction:`collectionGroupActions.handleGroupReorder#${y}`,environment:t,canUndo:!0,perform:e=>{(0,c().y)({sortType:"manual",environment:t,collectionContextStore:o,groupByKey:m,groupsFormatKey:y,transaction:e}),(0,d().o)({collectionContextStore:o,newGroups:b,groupsFormatKey:y,transaction:e})}});const j="board_columns"===y?g?"board_reorder_hidden_groups":"board_reorder_groups":g?"reorder_hidden_groups":"reorder_groups";(0,l().X)({environment:t,collectionContextStore:o,action:j}),f&&x&&function(e){const{environment:t,collectionContextStore:o,groupByKey:n,groupsFormatKey:r,previousGroupBy:l,previousSortType:d}=e;"manual"!==d&&s().ui({message:i().A.formatMessage(p().D.removeGroupSortingConfirmation,{sortType:i().A.formatMessage((0,a().rA)(l,d))}),items:[{label:i().A.formatMessage(p().D.removeGroupSortingButton),color:"red",onAccept:()=>{}},{label:i().A.formatMessage(p().D.removeGroupSortingCancel),onAccept:()=>{u().createAndCommit({userAction:"collectionGroupActions.offerToRemoveGroupSort",environment:t,canUndo:!0,perform:e=>{(0,c().y)({environment:t,collectionContextStore:o,transaction:e,groupByKey:n,groupsFormatKey:r,sortType:d})}})}}],showCancel:!1,keepFocus:!0})}({environment:t,collectionContextStore:o,groupByKey:m,groupsFormatKey:y,previousGroupBy:f,previousSortType:x.type})}function m(e){const{environment:t,collectionContextStore:o,groupByKey:a,groupsFormatKey:i,currentGroups:s,newGroupIds:p}=e,g=o.normalizedFormatStore.state[i]??[],m=s||g;let y=r().Ul(m,(e=>{const t=p.indexOf((0,n().Ix)(e));return t>=0?t:1/0}));s&&(y=y.map((e=>g.find((t=>(0,n().Mn)(e,t)))??e)));const[h,v]=r().jB(y,(e=>!e.hidden)),f=[...h,...v];u().createAndCommit({userAction:`collectionGroupActions.handleGroupReorder#${i}`,environment:t,canUndo:!0,perform:e=>{(0,c().y)({sortType:"manual",environment:t,collectionContextStore:o,groupByKey:a,groupsFormatKey:i,transaction:e}),(0,d().o)({collectionContextStore:o,newGroups:f,groupsFormatKey:i,transaction:e})}});let x="reorder_groups";"board_columns"===i?x="board_reorder_groups":"chart_subgroups"===i&&(x="chart_reorder_groups"),(0,l().X)({environment:t,collectionContextStore:o,action:x})}},610101:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return!1}}const r=new n},632537:(e,t,o)=>{o.d(t,{A:()=>N});o(898992),o(672577);var n=o(296540),r=()=>o(484714),a=()=>o(56366),i=()=>o(401497),l=()=>o(764880),s=()=>o(584262),u=()=>o(921598),c=()=>o(970013),p=()=>o(713998),d=()=>o(784892),g=()=>o(729650),m=()=>o(72135),y=()=>o(799829),h=()=>o(959013),v=()=>o(534177),f=()=>o(284371),x=()=>o(686526),S=()=>o(374562),C=()=>o(519839),A=()=>o(186445),b=()=>o(10594),j=()=>o(522827),w=()=>o(23815),G=()=>o(492414),V=()=>o(351360),M=()=>o(630116),B=()=>o(330557),k=()=>o(831194),F=()=>o(704152),_=()=>o(406699),T=()=>o(625830),I=()=>o(296798),P=()=>o(614505),R=()=>o(16006),L=()=>o(859428),z=()=>o(448693),K=()=>o(512052),E=()=>o(399762),H=o(474848);const N=function(e){let{schema:t,groupFormat:n,collectionContextStore:r,isHiddenGroup:i,style:l,uncategorizedIconStyle:s,currentGroups:u,groupBy:p,onChange:d,onClose:g,disabled:m}=e;const y=(0,a().uB)(void 0,o(463830).A),h=(0,a().K8)((()=>{const e=r.groupsStore.getGroupState(n);return null==e?void 0:e.groupUiParentStore}),[r,n]),v=(0,a().K8)((()=>{const e=t[n.property];if(e&&(0,c().nC)(e)&&h)return(0,o(685889).LQ)(e,h)}),[t,n,h]),f=n.value,x=void 0===f.value,S=t[n.property];if(!S)return null;if(x)return(0,H.jsx)(ee,{groupFormat:n,schema:t,isHiddenGroup:i,collectionContextStore:r,style:l,uncategorizedIconStyle:s,parentStore:h});if("formula"===f.type){if("formula"!==f.type)return null;const e=f.value;return e?(0,H.jsx)(ue,{schema:t,currentGroups:u,groupBy:p,groupFormat:n,onChange:d,onClose:g,disabled:m,style:l,isHiddenGroup:i,collectionContextStore:r,buttonPopupStore:y,parentStore:h,relatedCollectionAppConfigUri:v,groupValue:e,propertySchema:S}):null}return(0,H.jsx)(ue,{schema:t,currentGroups:u,groupBy:p,groupFormat:n,onChange:d,onClose:g,disabled:m,style:l,isHiddenGroup:i,collectionContextStore:r,buttonPopupStore:y,parentStore:h,relatedCollectionAppConfigUri:v,groupValue:f,propertySchema:S})},W={overflow:"hidden",padding:3,borderRadius:4,fontWeight:f().Wy.medium};function D(e){const{isHiddenGroup:t}=e;return t?(0,H.jsx)($,{...e,tooltipEvents:void 0}):(0,H.jsx)(L().A,{renderTooltip:()=>(0,H.jsx)(h().sA,{defaultMessage:"Any items with an empty <b>{name}</b> property will go here. This group cannot be removed.",values:{name:null,b:e=>(0,H.jsx)("span",{style:{fontWeight:f().Wy.semibold},children:e})},id:"database.boardView.uncategorizedColumnTooltip"}),style:{width:240},textWrap:!0,render:t=>(0,H.jsx)($,{...e,tooltipEvents:t})})}function $(e){const t={display:"flex",alignItems:"center",lineHeight:1.2,paddingLeft:2,paddingRight:4,whiteSpace:"nowrap",overflow:"hidden",fontWeight:f().Wy.medium},{style:o,uncategorizedIconStyle:n,tooltipEvents:r,formattedLabelMessage:a}=e;return(0,H.jsxs)("div",{style:{...t,paddingLeft:0,...o},...r,children:[(0,g().M)({width:14,marginLeft:6,marginRight:6,...n}),(0,H.jsx)("span",{style:{marginLeft:4,...f().RC},children:a})]})}function O(e){let{value:t}=e;return"other"===t.type?(0,H.jsx)(h().sA,{defaultMessage:"Other",id:"database.collectionGroupValue.textGroup.other"}):"alphabet_prefix"===t.type||"exact"===t.type?(0,H.jsx)(H.Fragment,{children:t.value}):void(0,v().HB)(t)}function U(e){let{groupFormat:t,schema:o}=e;const n=o[t.property];if(!n||"status"!==n.type)return null;const r=t.value;if(r.type!==n.type)return null;const{value:a}=r;if(!a)return null;const i=n.options??[],l=n.groups??[];if("by_group"===a.type){const e=l.find((e=>e.name===a.group));return e?(0,H.jsx)(k().RS,{group:e,style:{fontWeight:500},showIcon:!0,showColor:!0}):null}if("by_option"===a.type){const e=(0,p().jy)(i,a.option),t=e&&l.find((t=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)}));return e?(0,H.jsx)("span",{style:{fontWeight:500,lineHeight:"normal",overflow:"hidden",paddingRight:6},children:(0,H.jsx)(E().q,{format:d().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1,groupColor:null==t?void 0:t.color})}):null}(0,v().HB)(a)}function Z(e){let{value:t}=e;const o=(0,h().tz)();return(0,H.jsx)(H.Fragment,{children:(0,b().nc)({intl:o,value:t})})}function q(e){let{value:t,format:o}=e;const n=(0,h().tz)();return(0,H.jsx)(H.Fragment,{children:(0,b()._T)({intl:n,value:t,format:o})})}function Y(e){let{groupValue:t,propertySchema:o,style:n}=e;const r=(0,i().IS)((()=>({checkboxStyle:{display:"inline-flex",marginRight:6},wrapperStyle:{fontWeight:f().Wy.medium,marginRight:3,display:"flex",alignItems:"center"}})),[]);return"checkbox"!==t.type?null:(0,H.jsxs)("div",{style:{...f().RC,...r.wrapperStyle,...n},children:[(0,H.jsx)(T().A,{checked:t.value,checkSize:10,size:14,disabled:!0,style:r.checkboxStyle}),(0,H.jsx)("span",{children:null==o?void 0:o.name})]})}function X(e){let{groupValue:t,style:o}=e;return(0,u().DH)(t)&&t.value?(0,H.jsx)("div",{style:{...J,...f().RC,...o},children:(0,H.jsx)(Z,{value:t.value})}):null}function Q(e){let{groupValue:t,propertySchema:o,style:n}=e;if("number"!==t.type||!t.value)return null;const r=(null==o?void 0:o.number_format)||m().C4;return(0,H.jsx)("div",{style:{...J,...n},children:(0,H.jsx)(q,{value:t.value,format:r})})}const J={overflow:"hidden",padding:3,paddingRight:6,borderRadius:4,fontWeight:f().Wy.medium};function ee(e){let{groupFormat:t,schema:o,isHiddenGroup:n,collectionContextStore:r,style:i,uncategorizedIconStyle:l,parentStore:s}=e;const u=o[t.property],p=(0,a().K8)((()=>r.collectionStore()),[r]),d=(0,a().K8)((()=>{let e=!1;return null!=p&&p.isDefined()&&u&&(0,c().nC)(u)&&s&&(e=(0,w().Vu)({collectionStore:p,property:t.property,propertySchema:u,parentStore:s})),e}),[p,t,u,s]);if(!u)return null;const{name:g}=u;return d?(0,H.jsx)(D,{style:i,uncategorizedIconStyle:l,isHiddenGroup:n,formattedLabelMessage:(0,H.jsx)(h().sA,{...w().zX.sprintUncategorizedGroup,values:{name:g}})}):(0,H.jsx)(D,{style:i,uncategorizedIconStyle:l,isHiddenGroup:n,formattedLabelMessage:(0,H.jsx)(h().sA,{...b().K0.emptyGroupLabel,values:{name:g}})})}function te(e){let{style:t,collectionContextStore:o,groupValue:n,parentStore:r}=e;const i=(0,a().K8)((()=>{var e;return null===(e=o.collectionViewBlockStore())||void 0===e?void 0:e.id}),[o]),l=r&&"location"===n.type&&n.value?M().md.createChildStore(r,n.value):void 0,u=(0,a().K8)((()=>null==l?void 0:l.getParentBlockStore()),[l]),c=(0,a().K8)((()=>{let e=s().y8.LocationProperty;return i?((0,A().sj)(i)&&(e=o.isInHomeWidgetStore.state?s().y8.PersonalHomeTileTasks:s().y8.PersonalHomePageTasks),e):e}),[i,o]),p=(0,a().K8)((()=>u?(0,G().Ay)({store:u,fullyQualified:!1,pageVisitSource:c}):void 0),[u,c]),d=(0,a().K8)((()=>null==l?void 0:l.getIcon()),[l]);return"location"===n.type&&n.value&&r&&l?(0,H.jsxs)(I().A,{href:p,style:{...t,display:"flex"},ignoreLocalHoverState:!0,children:[(0,H.jsx)(P().A,{disabled:!0,icon:d,size:20,isEmptyPage:!1,style:{marginTop:2,marginRight:6}}),(0,H.jsx)(R().A,{store:l,underline:!0,style:{fontWeight:f().Wy.medium}})]}):null}function oe(e){let{groupValue:t,schema:o,groupFormat:n,collectionContextStore:r,style:i,parentStore:l,relatedCollectionAppConfigUri:s}=e;const p=o[n.property],d=p&&"relation"===p.type?c().Nv(p):void 0,g=l&&d?M().md.createChildStore(l,d):void 0,m=(0,a().K8)((()=>null==g?void 0:g.isDefined()),[g]);return l&&"relation"===t.type&&p&&"relation"===p.type&&d&&g&&t.value?(0,u().zx)(t.value)?s&&m?(0,H.jsx)(ne,{relatedCollectionAppUri:s,groupValueInner:t.value,collectionContextStore:r,collectionPointer:d,targetCollectionStore:g,parentStore:l,style:i,relationPropertySchema:p}):null:(0,u().WO)(t.value)?(0,H.jsx)(re,{parentStore:l,groupValueInner:t.value,collectionContextStore:r,propertySchema:p}):null:null}function ne(e){var t;let{relatedCollectionAppUri:o,groupValueInner:n,collectionContextStore:i,collectionPointer:l,targetCollectionStore:u,relationPropertySchema:c,parentStore:p,style:d}=e;const g=(0,h().tz)(),m=(0,r().v3)(),A=n.value.variable,b=(0,a().K8)((()=>u.isDefined()),[u]),w=(0,a().K8)((()=>(0,j().ax)(i,A,l,u)),[i,A,l,u]),M=(0,a().K8)((()=>V().default.state.mainEditorCurrentBlockStore),[]),B=(0,a().K8)((()=>w?C().wy({environment:m,store:w,mainEditorCurrentBlockStore:M,collectionContextStore:i})??(0,G().Ay)({store:w,pageVisitSource:s().y8.LinkInPage}):void 0),[m,w,M,i]);let k;"current"===A?k=g.formatMessage(S().DZ.tasksCurrentSprintV2ViewNamePrefix):"next"===A?k=g.formatMessage(S().DZ.tasksNextSprintV2ViewNamePrefix):"last"===A?k=g.formatMessage(S().DZ.tasksLastSprintV2ViewNamePrefix):(0,v().HB)(A);const F=null===(t=y().n$[o])||void 0===t?void 0:t[A];if(b){if(!w)return(0,H.jsx)("div",{style:{fontWeight:f().Wy.medium},children:(0,H.jsx)(h().sA,{...null==F?void 0:F.messageDescriptor})});if(w)return(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,H.jsxs)("div",{style:{fontWeight:f().Wy.medium,marginBottom:.25},children:[k,":"]}),(0,H.jsx)(I().A,{style:{...d,marginLeft:1},innerStyle:{...J},href:B,onClick:()=>{x().os({collectionSettingsStore:i.settingsStore})},children:(0,H.jsx)(K().A,{format:z().Ay.Format.Medium,blockId:w.id,isSingle:!0,shouldShrink:!0,parentStore:p,relationPropertySchema:c})})]})}return(0,H.jsx)("div",{style:{fontWeight:f().Wy.medium,marginBottom:.25},children:(0,H.jsx)(h().sA,{...null==F?void 0:F.messageDescriptor})})}function re(e){let{parentStore:t,groupValueInner:o,collectionContextStore:n,propertySchema:i,style:l}=e;const u=(0,r().v3)(),c=M().Bv.createChildStore(t,o),p=(0,a().K8)((()=>V().default.state.mainEditorCurrentBlockStore),[]),d=(0,a().K8)((()=>C().wy({environment:u,store:c,mainEditorCurrentBlockStore:p,collectionContextStore:n})??(0,G().Ay)({store:c,pageVisitSource:s().y8.LinkInPage})),[u,c,p,n]);return(0,H.jsx)(I().A,{style:l,innerStyle:{...J},href:d,onClick:()=>{x().os({collectionSettingsStore:n.settingsStore})},children:(0,H.jsx)(K().A,{format:z().Ay.Format.Medium,blockId:o.id,isSingle:!0,shouldShrink:!0,parentStore:t,relationPropertySchema:i})})}function ae(e){let{schema:t,currentGroups:o,groupBy:n,groupFormat:r,onChange:a,onClose:i,buttonPopupStore:l,parentStore:s}=e;return s?(0,H.jsx)(B().p,{groupFormat:r,groupBy:n,currentGroups:o,schema:t,onChange:e=>{l.reset(),null==a||a(e)},onClose:()=>{l.reset(),null==i||i()},parentStore:s}):null}function ie(e){var t;let{schema:o,currentGroups:a,groupBy:i,groupFormat:l,onChange:s,onClose:u,disabled:g,style:m,buttonPopupStore:y,parentStore:h}=e;const v=(0,r().v3)(),f=(0,n.useCallback)((()=>(0,H.jsx)(ae,{schema:o,currentGroups:a,groupBy:i,groupFormat:l,onChange:s,onClose:u,buttonPopupStore:y,parentStore:h})),[o,a,i,l,s,u,y,h]),x=o[l.property];if(!x||!c().lx(x))return null;const S=l.value;if(null===(t=x.options)||void 0===t||!t.length||void 0===S.value||S.type!==x.type)return null;const C=(0,p().jy)(x.options,S.value);return C?(0,H.jsx)(_().Ay,{render:f,disabled:g,buttonPopupStore:y,popupType:v.device.isMobile?_().z7.SlideUp:_().z7.Popup,originGap:4,renderOrigin:e=>(0,H.jsx)(F().A,{style:{...J,...m},disabled:g,...e,children:(0,H.jsx)(E().O,{format:d().NY.Medium,isSingle:!0,value:C.value,color:C.color,showRemoveButton:!1})})}):null}function le(e){let{groupValue:t,schema:o,currentGroups:i,groupBy:s,groupFormat:c,onChange:p,onClose:d,disabled:g,style:m,isHiddenGroup:y,buttonPopupStore:h,parentStore:v}=e;const f=(0,r().v3)(),x=(0,n.useCallback)((()=>(0,H.jsx)(ae,{schema:o,currentGroups:i,groupBy:s,groupFormat:c,onChange:p,onClose:d,buttonPopupStore:h,parentStore:v})),[o,i,s,c,p,d,h,v]),{value:S}=t,C=(0,a().K8)((()=>t.value&&(0,u().GG)(t)&&v?(0,l().xC)({pointer:t.value,getRecordValue:v.getRecordValue}):void 0),[t,v]);return(0,u().GG)(t)&&S&&v&&null!=C&&C.asActor?(0,H.jsx)(_().Ay,{render:x,disabled:g,buttonPopupStore:h,popupType:f.device.isMobile?_().z7.SlideUp:_().z7.Popup,originGap:4,renderOrigin:e=>(0,H.jsx)(F().A,{style:{...J,...m},disabled:g,...e,children:(0,H.jsx)(z().Ay,{format:z().Ay.Format.Medium,actor:C,showRemoveButton:!1,isSingle:!0,disableAvatarTooltip:y,shouldShrink:!0})})}):null}function se(e){let{groupValue:t,schema:o,currentGroups:a,groupBy:i,groupFormat:l,onChange:s,onClose:c,disabled:p,style:d,buttonPopupStore:g,parentStore:m}=e;const y=(0,r().v3)(),h=(0,n.useCallback)((()=>(0,H.jsx)(ae,{schema:o,currentGroups:a,groupBy:i,groupFormat:l,onChange:s,onClose:c,buttonPopupStore:g,parentStore:m})),[o,a,i,l,s,c,g,m]);if(!(0,u().kO)(t))return null;if(void 0!==t.value){const e=(0,H.jsx)(O,{value:t.value});return"exact"===t.value.type?(0,H.jsx)(_().Ay,{render:h,disabled:p,buttonPopupStore:g,popupType:y.device.isMobile?_().z7.SlideUp:_().z7.Popup,originGap:4,renderOrigin:t=>(0,H.jsx)(F().A,{style:{...W,...f().RC,...d},disabled:p,...t,children:e})}):(0,H.jsx)("div",{style:W,children:e})}return null}function ue(e){let{groupValue:t,propertySchema:o,schema:n,currentGroups:r,groupBy:a,groupFormat:i,onChange:l,onClose:s,disabled:c,style:p,isHiddenGroup:d,collectionContextStore:g,buttonPopupStore:m,parentStore:y,relatedCollectionAppConfigUri:h}=e;return"select"===t.type||"multi_select"===t.type?(0,H.jsx)(ie,{schema:n,currentGroups:r,groupBy:a,groupFormat:i,onChange:l,onClose:s,disabled:c,style:p,buttonPopupStore:m,parentStore:y}):"status"===t.type?(0,H.jsx)(U,{groupFormat:i,schema:n}):(0,u().r4)(t.type)?(0,H.jsx)(le,{schema:n,currentGroups:r,groupBy:a,groupFormat:i,onChange:l,onClose:s,disabled:c,style:p,isHiddenGroup:d,buttonPopupStore:m,parentStore:y,groupValue:t}):"relation"===t.type?(0,H.jsx)(oe,{schema:n,groupFormat:i,collectionContextStore:g,style:p,parentStore:y,relatedCollectionAppConfigUri:h,groupValue:t}):"location"===t.type?(0,H.jsx)(te,{style:p,collectionContextStore:g,parentStore:y,groupValue:t}):(0,u()._o)(t.type)?(0,H.jsx)(X,{style:p,groupValue:t}):(0,u().Vs)(t.type)?(0,H.jsx)(se,{schema:n,currentGroups:r,groupBy:a,groupFormat:i,onChange:l,onClose:s,disabled:c,style:p,buttonPopupStore:m,parentStore:y,groupValue:t}):"number"===t.type?(0,H.jsx)(Q,{style:p,groupValue:t,propertySchema:"number"===o.type?o:void 0}):"checkbox"===t.type?(0,H.jsx)(Y,{style:p,propertySchema:o,groupValue:t}):void(0,v().HB)(t.type)}},636740:(e,t,o)=>{function n(e){const{dateRangeStart:t,dateRangeEnd:o,collectionContextStore:n}=e;n.dateRangeStartStore.setState(t),n.dateRangeEndStore.setState(o)}o.d(t,{r:()=>n})},748054:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},r=(0,o(340498).wt)("flag",n)},760077:(e,t,o)=>{o.d(t,{U:()=>i});var n=()=>o(246826),r=()=>o(317909),a=()=>o(407031);function i(e){const{viewToDuplicateStore:t,collectionContextStore:o,collectionViewStore:i,environment:l,temporaryStore:s}=e,u=o.collectionStore(),c=t.getType();if(!c||!u)return;const p=t.getName(),d=t.getPageSort(),g=t.getFormat(),m=t.getKeyStore("query2").getValue();r().createAndCommit({userAction:"CollectionSettingsDuplicateExistingView.duplicateViewSettings",environment:l,canUndo:!0,perform:e=>{n().zv({store:s??i,data:{name:p,type:c,page_sort:d,format:{...g,collection_pointer:u.pointer},query2:m},transaction:e})}}),(0,a().S)({collectionContextStore:o})}},786452:(e,t,o)=>{o.d(t,{y:()=>i});var n=()=>o(921598),r=()=>o(436696),a=()=>o(896628);function i(e){const{environment:t,collectionContextStore:o,transaction:i,groupByKey:l,groupsFormatKey:s,sortType:u}=e;if("chart_config"===l)return;const c=(0,n().H2)(o.normalizedFormatStore.state,l,s),p=o.collectionViewStore();if(!c||!p)return;if((0,n().Nf)(c).includes(u)){if("formula"===c.type){const e={...c,groupBy:{...c.groupBy,sort:{type:u}}};a().zA({stores:[p],update:{[l]:e},transaction:i})}else a().zA({stores:[p],update:{[l]:{...c,sort:{type:u}}},transaction:i});(0,r().X)({environment:t,collectionContextStore:o,action:"update_group_sort"})}}},893952:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var n=()=>o(484714),r=()=>o(401497),a=()=>o(100622),i=o(474848);const l=function(e){const{color:t}=e;return(0,i.jsx)(o(760217).A,{...e,icon:(0,i.jsx)(s,{color:t}),title:(0,o(27178).mN)(t)})};function s(e){let{color:t}=e;const o=(0,r().DP)(),l=(0,n().v3)(),s=(0,a().LD)(o,t);return(0,i.jsx)("div",{style:{width:l.device.isMobile?24:18,height:l.device.isMobile?24:18,background:s.menuBackgroundColor,color:s.textColor,boxShadow:o.innerBorderBoxShadow,borderRadius:4}})}},916260:(e,t,o)=>{o.d(t,{o:()=>r});var n=()=>o(896628);function r(e){const{collectionContextStore:t,newGroups:o,groupsFormatKey:r,transaction:a}=e,i=t.collectionViewStore();i&&n().zA({stores:[i],update:{[r]:o},transaction:a})}},939466:(e,t,o)=>{o.d(t,{m:()=>l});o(898992),o(354520),o(581454);var n=()=>o(921598),r=()=>o(436696),a=()=>o(317909),i=()=>o(916260);function l(e){const{environment:t,collectionContextStore:o,currentGroups:l,groupsFormatKey:s,groupFormat:u,action:c}=e,p="toggle_group_pin"===c&&"board_columns"!==s,d=o.normalizedFormatStore.state[s]??[],g=new Map;for(const r of d)g.set((0,n().Ix)(r),r);const m=new Map;for(const r of l)m.set((0,n().Ix)(r),r);const y=l.filter((e=>!g.has((0,n().Ix)(e)))),h=y.length>0?[...d,...y]:d;if(!o.permissionScopesStore.state.canConfigureBlock||p)return h;const v=g.get((0,n().Ix)(u))??m.get((0,n().Ix)(u))??(0,n().QF)(u.property,u.value),f=h.map((e=>{if((0,n().Mn)(e,v)){if("toggle_group_pin"===c)return{...v,pinned:!v.pinned||void 0};if("toggle_group_visibility"===c)return{...v,hidden:!v.hidden}}return e}));return a().createAndCommit({userAction:"CollectionSettingsViewGroup.handleToggleGroupFormat",environment:t,canUndo:!0,perform:e=>{(0,i().o)({collectionContextStore:o,newGroups:f,groupsFormatKey:s,transaction:e})}}),(0,r().X)({environment:t,collectionContextStore:o,action:"toggle_group_pin"}),f}}}]);