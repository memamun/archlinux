"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[27942],{246760:(e,t,i)=>{i.d(t,{G:()=>o});const o=(0,i(340498).xh)("questionMarkCircled",{default:{loader:()=>i.e(35839).then(i.bind(i,835839))},small:{loader:()=>i.e(83633).then(i.bind(i,183633))},mini:{loader:()=>i.e(58431).then(i.bind(i,658431))},large:{loader:()=>i.e(38405).then(i.bind(i,838405))}})},254017:(e,t,i)=>{i.d(t,{V:()=>o});const o=(0,i(340498).xh)("blockLimit",{default:{loader:()=>i.e(77704).then(i.bind(i,477704))},small:{loader:()=>i.e(46014).then(i.bind(i,546014))},mini:{loader:()=>i.e(69062).then(i.bind(i,469062))},large:{loader:()=>i.e(31414).then(i.bind(i,531414))}})},333618:(e,t,i)=>{i.r(t),i.d(t,{default:()=>K});i(296540);var o=()=>i(56366),r=()=>i(807778),n=()=>i(847554),a=()=>i(749240),s=()=>i(484714),l=()=>i(852507),c=()=>i(254017),d=()=>i(959013),u=()=>i(252105),b=()=>i(246826),g=()=>i(317909),p=()=>i(179030),m=()=>i(176983),f=()=>i(351360),h=()=>i(991249),v=()=>i(134217),k=()=>i(714300),M=i(474848);const S=(0,d().YK)({overFreeBlockLimitLong:{id:"subscriptionActions.overFreeBlockLimit.longMessage",defaultMessage:"You are over the block limit for the Free plan"},overFreeBlockLimitMobileNative:{id:"subscriptionActions.overFreeBlockLimit.mobileNative",defaultMessage:"Your free blocks have been used up. Unfortunately, unlimited blocks cannot be purchased on mobile."},upgradeForUnlimited:{id:"subscriptionActions.upgradeForUnlimitedBlocks.longMessage",defaultMessage:"Upgrade for unlimited"},upgradePlan:{id:"subscriptionActions.upgradePlan",defaultMessage:"Upgrade plan"},gracePeriodMessage:{id:"subscriptionActions.gracePeriodMessage",defaultMessage:"You have {dayCount, plural, one {1 day} other {{dayCount} days}} left to upgrade"},overFreeBlockLimitShort:{id:"subscriptionActions.overFreeBlockLimitShort",defaultMessage:"You've used all of this workspace's free blocks"}});function _(){const{isMobileNative:e}=(0,s().Y0)(),t=(0,s().v3)(),i=(0,o().K8)((()=>f().default.state.currentSpaceStore),[]),r=(0,o().O$)(a().subscriptionDataStoreInstance),c=(0,m().J)(),d=(0,n().b)(r);return(0,l().l)((()=>{const e=null==i?void 0:i.pointer.spaceId;if(e&&c){var o;const n=null===(o=i.getSettings())||void 0===o?void 0:o.reach_block_limit_time;!n&&r&&v().V$(t,e,r,d)&&g().createAndCommit({userAction:"OverFreeBlockLimitBanner.initialMount",environment:t,canUndo:!0,perform:e=>{b().zv({store:i,data:{settings:{...i.getSettings(),reach_block_limit_time:Date.now()}},transaction:e})}}),u().ab(t,{reach_block_limit_time:n??Date.now(),eligible_for_trial:!1})}})),e?(0,M.jsx)(y,{}):(0,M.jsx)(F,{})}function F(){const e=(0,d().tz)(),t=(0,o().O$)(a().subscriptionDataStoreInstance),i=(0,n().b)(t),l=(0,s().v3)(),u=(0,o().K8)((()=>(0,r().Km)(i)),[i]),b=(0,o().K8)((()=>{var e;return null===(e=f().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),g=(0,k().l)({spaceId:b}),m=(0,o().K8)((()=>v().GU({billingData:g,spaceStore:f().default.state.currentSpaceStore})),[g]),_=(0,o().K8)((()=>function(e,t){if(!t)return e.formatMessage(S.overFreeBlockLimitLong);const i=(0,r().PK)();return i>0?e.formatMessage(S.gracePeriodMessage,{dayCount:i}):e.formatMessage(S.overFreeBlockLimitShort)}(e,u)),[u,e]),F=(0,o().K8)((()=>function(e){if(!e)return"red";return(0,r().PK)()>0?"yellow":"red"}(u)),[u]),y=[{label:u?e.formatMessage(S.upgradePlan):e.formatMessage(S.upgradeForUnlimited),onClick:()=>{h().K(l,{from:"block_limit_banner",upsell:{type:"product",product:"plus",limit:{type:"none"}}})}}];return(0,M.jsx)(p().l,{label:_,display:"full-width",tint:F,iconGroup:c().V,actions:m?y:[]})}function y(){const e=(0,d().tz)().formatMessage(S.overFreeBlockLimitMobileNative);return(0,M.jsx)(p().l,{label:e,display:"full-width",tint:"red"})}function K(){const e=(0,o().O$)(a().subscriptionDataStoreInstance),t=(0,n().b)(e);return(0,o().K8)((()=>(0,r().Km)(t)),[t])?(0,M.jsx)("div",{style:{position:"sticky",left:0,right:"100%",width:"100%"},children:(0,M.jsx)(_,{})}):(0,M.jsx)(_,{})}}}]);