"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[14358],{246779:(e,t,n)=>{n.d(t,{j:()=>P});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(484714),s=()=>n(56366),a=()=>n(401497),r=()=>n(187174),c=()=>n(246760),l=()=>n(898615),d=()=>n(386164),u=()=>n(979340),g=()=>n(959013),p=()=>n(449506),h=()=>n(436572),m=()=>n(84817),v=()=>n(625830),f=()=>n(623580),x=()=>n(7674),y=()=>n(460292),S=()=>n(554509),j=()=>n(107683),_=()=>n(859428),w=()=>n(994006),b=()=>n(21140),I=()=>n(2609),C=()=>n(602105),A=()=>n(989423),k=()=>n(384100),M=()=>n(58293),T=()=>n(962730),D=()=>n(232802),W=()=>n(798880),B=()=>n(498212),F=()=>n(246826),N=()=>n(317909),z=()=>n(351360);var U=n(474848);function P(e){const{userId:t}=e,n=(0,i().v3)(),o=(0,M().r)(),[{status:a,value:c}]=(0,r().Yb)((async()=>{const e=null==o?void 0:o.id;if(e)return p().callApi({eventName:"getVisibleUsers",environment:n,data:{spaceId:e,supportsEdgeCache:!0},headers:(0,d().WS)({spaceId:e})})}),[n,o]),l=(0,s().K8)((()=>{if(c&&"success"===c.type&&"users"in c.data&&o){return c.data.users.filter((e=>e.userId&&"editor"===e.role)).map((e=>(0,k().z)({userId:e.userId,currentSpaceStore:o})))}return[]}),[c,o]);return o&&t&&"pending"!==a?(0,U.jsx)(L,{spaceStore:o,workspaceOwners:l,...e}):null}function L(e){const{onDismiss:t}=e,n=(0,g().tz)(),[i,s]=o.useState(e.workspaceOwners.map((e=>e.id)));return(0,U.jsx)(j().s,{ariaLabel:n.formatMessage({id:"highlightPlanRequestButton.modal.ariaLabel",defaultMessage:"Upgrade plan request modal"}),isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:400},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,U.jsx)(K,{...e,checkedState:i,setCheckedState:s})})}function K(e){let{feature:t,onDismiss:n,setRequestState:s,spaceStore:r,userId:d,workspaceOwners:p,checkedState:j,setCheckedState:k,entrypoint:M}=e;const P=(0,g().tz)(),L=(0,i().v3)(),[K,H]=o.useState(""),R=(0,a().IS)((e=>({outlineIcon:{height:30,width:30,color:e.text.secondary},input:{padding:"10px 8px",width:"100%",height:36,background:e.surface.wash,borderRadius:6},modalHeaderIcon:{marginBottom:4},modalHeaderTitle:{padding:"0 8px"},modalHeaderByline:{padding:"0 40px"},usersContainer:{padding:"16px 0 16px 16px",borderRadius:C().V.medium,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary},learnMoreTooltip:{width:240,whiteSpace:"normal"}})),[]);return(0,U.jsx)(x().tf,{showDismissButton:!0,header:(0,U.jsx)(I().rQ,{icon:(0,U.jsx)("div",{style:R.modalHeaderIcon,children:(0,l().F)(R.outlineIcon)}),title:(0,U.jsx)("div",{style:R.modalHeaderTitle,children:P.formatMessage({id:"highlightPlanRequestButton.modal.title",defaultMessage:"Request an upgrade to use {feature}"},{feature:u().v0[t].defaultMessage})}),byline:(0,U.jsx)("div",{style:R.modalHeaderByline,children:P.formatMessage({id:"highlightPlanRequestButton.modal.subtitle",defaultMessage:"Let your workspace owners know that you're interested in this feature"})})}),footer:(0,U.jsx)(I().jl,{primaryText:P.formatMessage({id:"highlightPlanRequestButton.modal.submitButton",defaultMessage:"Submit request"}),primaryAction:()=>{!function(e){var t;const{feature:n,spaceId:o,userId:i,environment:s,entrypoint:a,setRequestState:r,reasonForRequest:c,adminsToNotify:l}=e,d=null===(t=z().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id;if(!d||!o||!i)return;const u={id:(0,B().Ay)(),space_id:o,request:n,created_time:Date.now(),created_by_id:i,created_by_table:W().oo,parent_id:d,parent_table:"space_view",entrypoint:a,reason_for_request:c,last_edited_time:Date.now(),last_edited_by_id:i,last_edited_by_table:W().oo,request_status:"pending",admins_to_notify:l};N().createAndCommit({userAction:`UpgradeRequestModal.${n}.onClick`,environment:s,canUndo:!0,perform:e=>{F().eC({environment:s,table:D().GU,value:u,transaction:e,inMemoryRecordCache:s.defaultRecordCache.inMemoryRecordCache})}}),r("pending")}({feature:t,spaceId:r.id,userId:d,environment:L,entrypoint:M,setRequestState:s,reasonForRequest:K,adminsToNotify:j}),(0,A().u4)({environment:L,event:{eventName:"upgrade_request_submitted",eventProperties:{feature:t,entrypoint:M,number_admins_notified:j.length,added_note:K.length>0}}}),h().D6({label:P.formatMessage({id:"RequestUpgradeForm.modal.submitted.toast.label",defaultMessage:"Successfully sent request"})}),n()},secondaryText:P.formatMessage({id:"highlightPlanRequestButton.modal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:()=>{(0,A().u4)({environment:L,event:{eventName:"upgrade_request_canceled",eventProperties:{feature:t,entrypoint:M}}}),n()}}),children:(0,U.jsxs)(m().Y1,{gap:24,padding:2,children:[(0,U.jsxs)(m().Y1,{gap:8,children:[(0,U.jsxs)(m().Y1,{gap:4,direction:"horizontal",children:[(0,U.jsx)(S().D,{styleName:"Caption-12px/Medium",colorName:"secondary",children:P.formatMessage({id:"highlightPlanRequestButton.modal.selectWorkspaceOwners",defaultMessage:"Select who to notify"})}),(0,U.jsx)(_().A,{style:R.learnMoreTooltip,placement:T().W.Right,renderTooltip:()=>(0,U.jsx)(b().wt,{gap:2,children:(0,U.jsx)(S().D,{styleName:"UISmall-12px/Medium",children:P.formatMessage({id:"highlightPlanRequestButton.modal.notifyTooltip",defaultMessage:"Select who will receive an inbox notification for your request. Every workspace owner will be able to see all requests via the Requests tab in Settings."})})}),render:e=>(0,U.jsx)("div",{...e,children:(0,U.jsx)(y().Q,{iconGroup:c().G,variantName:"small",colorName:"tertiary"})})})]}),(0,U.jsx)("div",{style:R.usersContainer,children:p.length>0&&(0,U.jsx)(b().wt,{gap:16,style:{width:"100%",maxHeight:128,overflowY:"auto"},children:p.map((e=>(0,U.jsxs)(b().Ye,{gap:8,style:{alignItems:"center",justifyContent:"flex-start"},children:[(0,U.jsx)(v().A,{size:14,checked:j.includes(e.id),onClick:()=>{k((t=>t.includes(e.id)?t.filter((t=>t!==e.id)):[...t,e.id]))},style:{marginRight:8}},`check-${e.id}`),(0,U.jsx)(S().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,U.jsx)(w().A,{avatarSize:32,userStore:e})})]},e.id)))})})]}),(0,U.jsxs)(m().Y1,{gap:8,direction:"vertical",children:[(0,U.jsx)(S().D,{styleName:"Caption-12px/Medium",colorName:"secondary",children:P.formatMessage({id:"highlightPlanRequestButton.modal.noteLabel",defaultMessage:"Add a note (optional)"})}),(0,U.jsx)(f().A,{style:R.input,value:K,focusInitial:!0,onChange:e=>{H(e.target.value)}})]})]})})}},384100:(e,t,n)=>{n.d(t,{z:()=>s});var o=()=>n(798880),i=()=>n(630116);function s(e){let{userId:t,currentSpaceStore:n}=e;return i().LU.createChildStore(n,{table:o().oo,id:t})}},457974:(e,t,n)=>{n.r(t),n.d(t,{UniversalQnaModals:()=>yn});var o=n(296540),i=()=>n(484714),s=()=>n(56366),a=()=>n(187174),r=()=>n(576590),c=()=>n(634877),l=()=>n(291075),d=()=>n(963702),u=()=>n(351360),g=()=>n(430483),p=()=>n(508496),h=()=>n(756315),m=()=>n(99254),v=()=>n(597898),f=()=>n(235195),x=()=>n(174636),y=(n(581454),()=>n(401497)),S=()=>n(654777),j=()=>n(595797),_=()=>n(959013),w=()=>n(284371),b=()=>n(449506),I=()=>n(705540),C=()=>n(704152),A=()=>n(890494),k=()=>n(957986),M=()=>n(21140),T=()=>n(989423),D=()=>n(836251),W=()=>n(866515),B=()=>n(340498),F=n(474848);const N=(0,B().wt)("arrowsLeftRight",{viewBox:"0 0 16 16",svg:(0,F.jsx)("path",{d:"M13.7791 3.59799C13.9305 3.74539 14.004 3.9196 13.9998 4.1206C13.9998 4.32607 13.9263 4.50251 13.7791 4.64992L10.5317 8.0268C10.3888 8.1742 10.2269 8.24791 10.0462 8.24791C9.84861 8.24791 9.68676 8.1809 9.56065 8.0469C9.43874 7.91736 9.37779 7.74986 9.37779 7.54439C9.37779 7.34785 9.44295 7.18481 9.57326 7.05528L10.9227 5.66834L11.8937 4.77722L10.5506 4.83082L2.66857 4.83082C2.4752 4.83082 2.31546 4.76382 2.18935 4.62982C2.06323 4.49581 2.00018 4.32831 2.00018 4.1273C2.00018 3.91736 2.06323 3.74539 2.18935 3.61139C2.31546 3.48185 2.4752 3.41708 2.66857 3.41708L10.5506 3.41709L11.8937 3.47069L10.9227 2.57286L9.57326 1.19263C9.44295 1.05863 9.37779 0.893355 9.37779 0.696817C9.37779 0.491345 9.43874 0.323841 9.56065 0.194305C9.68676 0.0647681 9.84861 -1.81463e-07 10.0462 -1.72827e-07C10.2269 -1.64925e-07 10.3888 0.0737017 10.5317 0.221105L13.7791 3.59799ZM2.21457 12.4087C2.06744 12.2568 1.99597 12.0804 2.00018 11.8794C2.00018 11.6784 2.07164 11.5042 2.21457 11.3568L5.47459 7.9799C5.61331 7.8325 5.77516 7.75879 5.96012 7.75879C6.1577 7.75879 6.31744 7.82356 6.43935 7.9531C6.56126 8.0871 6.62222 8.25684 6.62222 8.46231C6.62222 8.65438 6.55916 8.81742 6.43305 8.95142L5.08364 10.3317L4.10626 11.2295L5.44937 11.1759L13.3314 11.1759C13.5248 11.1759 13.6845 11.2429 13.8107 11.3769C13.9368 11.5109 13.9998 11.6784 13.9998 11.8794C13.9998 12.0849 13.9368 12.2546 13.8107 12.3886C13.6845 12.5226 13.5248 12.5896 13.3314 12.5896L5.44937 12.5896L4.10626 12.536L5.08364 13.4338L6.43305 14.8141C6.55916 14.9436 6.62222 15.1066 6.62222 15.3032C6.62222 15.5087 6.56126 15.6762 6.43935 15.8057C6.31744 15.9352 6.1577 16 5.96012 16C5.77516 16 5.61331 15.9285 5.47459 15.7856L2.21457 12.4087Z"})});var z=()=>n(426388);function U(e){const{integrationLogoIcon:t,title:n,subtext:o}=e,i=(0,y().IS)((e=>({logoSection:{padding:"40px 20px 24px 20px",gap:8,justifyContent:"center",alignItems:"center"},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:e.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",textAlign:"center",alignItems:"center"},title:{fontSize:16,width:352,fontWeight:w().Wy.medium,lineHeight:"22px",marginBottom:"2px",justifyContent:"center",textWrap:"balance"},subtext:{fontSize:14,fontWeight:w().Wy.regular,color:`${e.text.secondary}`,textAlign:"center",alignItems:"center",justifyContent:"center",paddingLeft:20,paddingRight:20,textWrap:"balance"},wrapper:{paddingBottom:16}})),[]);return(0,F.jsxs)("div",{style:i.wrapper,children:[(0,F.jsxs)(M().Ye,{style:i.logoSection,children:[(0,z().S)(i.logos),N(i.arrowLogo),t(i.logos)]}),(0,F.jsxs)(M().wt,{style:i.titleWrapper,children:[(0,F.jsx)(M().Ye,{style:i.title,children:n}),o?(0,F.jsx)(M().Ye,{style:i.subtext,children:o}):(0,F.jsx)(F.Fragment,{})]})]})}function P(){const e=(0,i().v3)(),t=(0,y().IS)((e=>({wrapper:{width:400,gap:16,alignContent:"center"},waitingForConnectionWrapper:{gap:4},note:{fontWeight:w().Wy.regular,fontSize:14,lineHeight:"18px",width:330,marginLeft:8},noteHeading:{fontWeight:w().Wy.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px"},learnMoreButton:{gap:4,alignItems:"center",fontSize:14,color:e.text.secondary,justifyContent:"center",padding:4},buttonContainer:{justifyContent:"center"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"}})),[]),n=(0,s().K8)((()=>"connecting"===l().o.state.currentScreen),[]),a=(0,s().K8)((()=>{var e;return null===(e=u().default.getState().currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,W().n)((async()=>{if(!a)return;if("connecting"!==l().o.state.currentScreen)return;const t=await b().callApi({eventName:"getGithubAIConnectorStatus",environment:e,data:{spaceId:a}});"success"===t.type&&t.data.isConnected&&l().o.setState({...l().o.state,currentScreen:"confirmation"})}),1e3,!0);const r=(0,o.useCallback)((()=>[(0,F.jsxs)(M().wt,{style:{gap:4},children:[(0,F.jsx)("div",{style:t.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalQna.github.waitingForConnectionNoteHeading1",defaultMessage:"GitHub should open automatically on a new tab."},"note1-1")}),(0,F.jsx)("div",{style:t.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.github.waitingForConnectionNoteBody1",defaultMessage:"If it doesn't, {ClickHereToRetry}",values:{ClickHereToRetry:(0,F.jsx)("a",{style:t.link,href:l().o.state.authUrl,target:"_blank",children:(0,F.jsx)(_().sA,{id:"universalQna.github.confirmModalNote1Retry",defaultMessage:"click here to retry"})})}},"note1-2")})]},"note-1"),(0,F.jsxs)(M().wt,{style:{gap:4},children:[(0,F.jsx)("div",{style:t.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.github.workspaceAdminHeading",defaultMessage:"If you are a GitHub organization administrator:"},"note2-2")}),(0,F.jsx)("div",{style:t.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.github.workspaceAdminBody",defaultMessage:"Follow GitHub's instructions to connect. Return to this window, and the process will continue automatically."},"note2-3")}),(0,F.jsxs)(M().wt,{style:{marginTop:16,gap:4},children:[(0,F.jsx)("div",{style:t.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.github.notWorkspaceAdminHeading",defaultMessage:"If you are not authorized to install external apps:"},"note2-4")}),(0,F.jsx)("div",{style:t.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.github.notWorkspaceAdminBody",defaultMessage:"Follow the instructions to request access to install the app. Then, revisit the connect menu to continue setup."},"note2-5")})]})]},"note-2")]),[t]),c=(0,o.useCallback)((()=>{const t=(0,D().xS)("guides.aiConnectorGithub");(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"learn_more_click_connecting_modal",integration_type:"github",setup_session_id:l().o.state.sessionId,from:l().o.state.analyticsFrom}}}),e.device.isElectron?I().openExternalUrl(t):window.open(t,"_blank")}),[e]),d=(0,o.useCallback)((()=>{l().o.reset(),(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"drop_off_github_connecting_modal",integration_type:"github",setup_session_id:l().o.state.sessionId,from:l().o.state.analyticsFrom}}})}),[e]);return(0,F.jsx)(k().A,{open:n,showCloseIcon:!0,onDismiss:d,render:()=>(0,F.jsxs)(M().wt,{style:t.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:j().F,title:(0,F.jsx)(_().sA,{id:"universalQnA.github.followInstructionsFromGithub",defaultMessage:"Follow instructions from GitHub in your browser"})}),(0,F.jsxs)(M().wt,{style:t.waitingForConnectionWrapper,children:[r().map(((e,n)=>(0,F.jsxs)(M().Ye,{gap:8,style:{marginTop:4,marginBottom:6,justifyContent:"center"},children:[(0,F.jsx)(A().A,{number:n+1}),(0,F.jsx)("div",{style:t.note,children:e})]},n))),(0,F.jsx)(M().Ye,{style:t.buttonContainer,children:(0,F.jsx)(C().A,{style:{marginTop:16,marginBottom:16,width:120,borderRadius:4},onClick:c,children:(0,F.jsxs)(M().Ye,{style:t.learnMoreButton,children:[(0,F.jsx)(_().sA,{id:"universalSearch.github.waitingForConnection.learnMore",defaultMessage:"Learn More"}),(0,S().X)({width:16,height:16})]})})})]})]})})}var L=()=>n(284030),K=()=>n(831098),H=()=>n(751109),R=()=>n(411737),Y=()=>n(246231);const q={viewBox:"0 0 20 20",svg:(0,F.jsx)("path",{d:"M10 4.563c-2.385-1.586-5.433-1.496-7.742.271a.63.63 0 0 0-.246.497v10.607a.625.625 0 0 0 1.005.496c1.986-1.52 4.617-1.52 6.603 0a.624.624 0 0 0 .76 0c1.986-1.52 4.617-1.52 6.603 0a.625.625 0 0 0 1.005-.497V5.332a.63.63 0 0 0-.246-.497c-2.31-1.767-5.357-1.857-7.742-.27M3.262 14.8V5.65c1.871-1.283 4.242-1.283 6.113 0v9.15a6.56 6.56 0 0 0-6.113 0m7.363 0V5.65c1.87-1.283 4.242-1.283 6.113 0v9.15a6.56 6.56 0 0 0-6.113 0"})},G=(0,B().wt)("book",q);var E=()=>n(864943),J=()=>n(204063),O=()=>n(125565);const Q=function(e){const{title:t,open:n,notes:o,titleWidth:i,integrationIcon:s,onDismiss:a,onConnect:r,onLearnMore:c,isLoading:l,overridePrimaryMessage:d,centerNotes:u,noteStyleOverrides:g,subtitle:p}=e,h=(0,_().tz)(),m=(0,y().IS)((e=>({wrapper:{width:400,paddingTop:8},title:{fontSize:17,width:i,fontWeight:w().Wy.medium,lineHeight:"22px",marginBottom:"2px"},dataSafetyWrapper:{width:"100%",justifyContent:"center",marginTop:8,padding:"0px 20px"},notes:{display:"flex",flexDirection:"column",marginTop:12,gap:12,font:w().Tf.sans,listStylePosition:"outside",paddingLeft:2,listStyleType:"none",...u&&{textAlign:"center",justifyContent:"center"}},note:{display:"flex",alignItems:"start",fontSize:w().J.UIRegular.desktop,lineHeight:w().K_.UIRegular.desktop,color:`${e.text.secondary}`,padding:2,gap:12,listStylePosition:"outside",marginBottom:4,...u&&{alignItems:"center",textAlign:"center",justifyContent:"center"},...g},noteIconWrapper:{display:"flex",alignItems:"center",justifyContent:"center"},noteTextWrapper:{display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center",gap:4},noteIcon:{width:20,height:20,color:e.accentColors.uiBlue[600]},noteTitle:{fontWeight:w().Wy.medium,textWrap:"pretty"},footer:{justifyContent:"center",alignItems:"center",width:"100%",padding:"12px 20px 20px 20px",gap:6},connectButton:{width:"100%"},learnMoreButton:{width:"100%"}})),[i,u,g]);return(0,F.jsx)(k().A,{ariaLabel:h.formatMessage({id:"universalSearch.integrations.introModalAriaLabel",defaultMessage:"AI connector introduction"}),showCloseIcon:!0,onDismiss:a,open:n,render:()=>(0,F.jsxs)("div",{style:m.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:s,title:t,subtext:p}),o&&(0,F.jsx)(M().Ye,{style:m.dataSafetyWrapper,children:(0,F.jsx)("ul",{style:m.notes,children:o.map(((e,t)=>(0,F.jsxs)("li",{style:m.note,children:[(0,F.jsx)("div",{style:m.noteIconWrapper,children:e.icon&&e.icon(m.noteIcon)}),(0,F.jsxs)("div",{style:m.noteTextWrapper,children:[(0,F.jsx)(O().A,{isMultiline:!0,style:m.noteTitle,children:e.title}),e.description&&(0,F.jsx)(O().A,{isMultiline:!0,isSecondaryColor:!0,children:e.description})]})]},`note-${t}`)))})}),(0,F.jsxs)(M().wt,{style:m.footer,children:[(0,F.jsx)(J().A,{size:"xl",isLoading:l,disabled:l,style:m.connectButton,onClick:r,children:d||(0,F.jsx)(_().sA,{id:"universalSearch.integration.startConnection",defaultMessage:"Start connection"})}),c&&(0,F.jsx)(E().A,{size:"lg",icon:G,style:m.learnMoreButton,onClick:c,children:(0,F.jsx)(_().sA,{id:"universalSearch.integrations.learnMore",defaultMessage:"Read our step-by-step guide"})})]})]})})};function $(){const e=(0,y().IS)((e=>({jiraIcon:{fill:e.blueColor,width:40,height:40}})),[]),{open:t,connector:n}=(0,s().K8)((()=>({open:Y().l.state.open&&"progress"===Y().l.state.modal,connector:Y().l.state.open&&"progress"===Y().l.state.modal?Y().l.state.connector:"slack"})),[]),o=()=>{Y().l.setState({open:!1})};return(0,F.jsx)(Q,{onConnect:o,onDismiss:o,title:(0,F.jsx)(_().sA,{id:"universalSearchProgressModal.generalizedTitle",defaultMessage:"{connector} is connecting to Notion AI",values:{connector:{slack:"Slack",jira:"Jira",google_drive:"Google Drive",github:"Github",sharepoint:"Sharepoint"}[n]}}),integrationIcon:{slack:H().z,jira:()=>(0,K().y)(e.jiraIcon),google_drive:L().u,github:j().F,sharepoint:()=>(0,R().D)()}[n],titleWidth:210,subtitle:(0,F.jsx)(_().sA,{id:"universalSearchProgressModal.subtitle",defaultMessage:"This can take up to 36hr.{br}You’ll be able to get answers soon.",values:{br:(0,F.jsx)("br",{})}}),overridePrimaryMessage:(0,F.jsx)(_().sA,{id:"universalSearchProgressModal.ctaMessage",defaultMessage:"Got it"}),centerNotes:!0,noteStyleOverrides:{fontSize:"14px"},open:t})}var V=()=>n(534177),X=()=>n(436572),Z=()=>n(176983),ee=()=>n(985395),te=()=>n(58293),ne=()=>n(568688),oe=()=>n(750548),ie=()=>n(495119),se=()=>n(246779),ae=()=>n(617819),re=()=>n(970023);const ce=(0,_().YK)({title:{defaultMessage:"Find anything across all of your apps with Notion AI",id:"NotionAIConnectorNonadminModal.title"},subtitleForAnnouncement:{defaultMessage:"Notify your workspace owner to use AI connectors.",id:"NotionAIConnectorNonadminModal.subtitleForAnnouncement"},learnMoreLink:{defaultMessage:"Learn more about",id:"NotionAIConnectorNonadminModal.learnMoreLink"},toast:{defaultMessage:"We will send a notification to your workspace owner",id:"NotionAIConnectorNonadminModal.toast"},alreadyRequestedToast:{defaultMessage:"We sent a notification to your workspace owner",id:"NotionAIConnectorNonadminModal.alreadyRequestedToast"}});function le(){const e=(0,s().K8)((()=>Y().l.state.open&&"nonadmin_request"===Y().l.state.modal?{open:!0,analyticsFrom:Y().l.state.analyticsFrom}:{open:!1}),[]),t=(0,o.useCallback)((()=>{Y().l.setState({open:!1})}),[]);return e.open?(0,F.jsx)(de,{connector:"generic",handleClose:t,open:!0,analyticsFrom:e.analyticsFrom,setupSessionId:"none",messages:{...ce,betaDisclaimer:{...re().gp.betaDisclaimer},ctaButtonLabelWithAddon:{...re().gp.ctaButtonLabelWithAddon},ctaButtonLabelWithoutAddon:{...re().gp.ctaButtonLabelWithoutAddon}}}):null}function de(e){const{open:t,handleClose:n,connector:a,analyticsFrom:r,setupSessionId:c,messages:l}=e,d=(0,_().tz)(),g=(0,i().v3)(),p=(0,Z().J)(),h=(0,ee().n)(),m=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),{isModalOpen:v,onClick:f,onDismiss:x}=(0,ie().I)({feature:"ai",entrypoint:"ai_request_modal"}),y=(0,te().r)(),S=null==y?void 0:y.id,{requests:j}=(0,ne().I)({spaceId:S}),[w,b]=(0,oe().k)({feature:"ai",requests:j,userId:m}),I=(0,o.useCallback)((e=>{let{source:t}=e;n(),"closeButton"!==t&&(r&&(0,T().u4)({environment:g,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"contact_workspace_owners",integration_type:a,setup_session_id:c,from:r}}}),"ctaHasAddon"===t?X().D6({label:(0,F.jsx)(_().sA,{...ce.toast})}):"ctaNoAddon"===t?"unrequested"===w?f():X().D6({label:(0,F.jsx)(_().sA,{...ce.alreadyRequestedToast})}):(0,V().HB)(t))}),[n,a,g,r,f,w,c]);return v?(0,F.jsx)(se().j,{feature:"ai",userId:m,onDismiss:x,setRequestState:b,entrypoint:"ai_connectors_request_modal"}):(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>I({source:"closeButton"}),open:t,ariaLabel:d.formatMessage(ce.title),render:()=>(0,F.jsx)(ae().Y,{hasAiAddOn:h,calloutKey:void 0,eventName:"ai_connector_nonadmin_request_modal_shown",messages:l,onDismiss:I,connector:a,isAdmin:p})})}var ue=()=>n(957416),ge=()=>n(331542);const pe={viewBox:"0 0 20 20",svg:(0,F.jsx)("path",{d:"M5.25 3.125A2.125 2.125 0 0 0 3.125 5.25v9.5c0 1.174.951 2.125 2.125 2.125h9.5a2.125 2.125 0 0 0 2.125-2.125v-9.5a2.125 2.125 0 0 0-2.125-2.125zM7.875 7c0-.345.28-.625.625-.625H13c.345 0 .625.28.625.625v4.5a.625.625 0 1 1-1.25 0V8.509l-5.12 5.12a.625.625 0 1 1-.884-.883l5.12-5.121H8.5A.625.625 0 0 1 7.875 7"})},he=(0,B().wt)("arrowUpRightSquareFill",pe),me=(0,B().wt)("keyLarge",{viewBox:"0 0 30 30",svg:(0,F.jsx)("g",{children:(0,F.jsx)("path",{d:"M15.005 2.979c.923 0 1.788.174 2.594.522.814.342 1.528.82 2.143 1.436a6.518 6.518 0 011.436 2.133c.349.806.523 1.671.523 2.594a6.229 6.229 0 01-1.24 3.774c-.821 1.12-2 2.006-3.538 2.655l2.543 2.553c.143.15.215.318.215.503a.641.641 0 01-.205.492l-2.615 2.605 1.877 1.856a.693.693 0 01.205.492.653.653 0 01-.206.502l-3.24 3.24a.593.593 0 01-.482.185.67.67 0 01-.44-.185L12.8 26.604a1.125 1.125 0 01-.247-.36 1.124 1.124 0 01-.071-.41v-9.946a6.754 6.754 0 01-2.225-1.456 6.704 6.704 0 01-1.959-4.768c0-.93.171-1.798.513-2.604a6.738 6.738 0 011.435-2.133A6.665 6.665 0 0112.38 3.49a6.707 6.707 0 012.625-.512zm0 6.06a1.65 1.65 0 001.21-.503 1.65 1.65 0 00.503-1.21c0-.478-.168-.882-.503-1.21a1.65 1.65 0 00-1.21-.502 1.64 1.64 0 00-1.22.502 1.645 1.645 0 00-.492 1.21c0 .472.164.875.492 1.21.335.335.742.503 1.22.503z"})})});var ve=()=>n(449552);const fe={slack:"Slack",github:"GitHub",googleDrive:"Google Drive",jira:"Jira",microsoftTeams:"Microsoft Teams"};function xe(e){return(0,F.jsx)(_().sA,{id:"universalQna.connector.introModalTitle",defaultMessage:"To start, install the Notion AI app in {connector}",values:{connector:fe[e]}})}function ye(e){const t=fe[e];return[{icon:he,title:(0,F.jsx)(_().sA,{id:"universalQna.connector.introModalNewTabNoteTitle",defaultMessage:"{connector} will open in a new tab",values:{connector:t}},"newTabNoteTitle"),description:(0,F.jsx)(_().sA,{id:"universalQna.connector.introModalNewTabNoteDescription",defaultMessage:"Click “Start connection” below, then authenticate and accept terms in the new tab"},"newTabNoteDescription")},{icon:me,title:(0,F.jsx)(_().sA,{id:"universalQna.connector.introModalPermissionNoteTitle",defaultMessage:"{connector} permissions are strictly respected",values:{connector:t}},"permissionNoteTitle"),description:(0,F.jsx)(_().sA,{id:"universalQna.connector.introModalPermissionNoteDescription",defaultMessage:"Members can only get AI answers about content they are authorized to see in {connector}.",values:{connector:t}},"permissionNoteDescription")},{icon:ve().g,title:(0,F.jsx)(_().sA,{id:"universalQna.connector.introModalWeDoNotTrainModelNoteTitle",defaultMessage:"Notion does not train models on {connector} data",values:{connector:t}},"weDoNotTrainModelNoteTitle")}]}function Se(e){const{logo:t,appName:n,open:o,onClosed:s,learnMoreUrl:a}=e,r=(0,y().IS)((e=>({wrapper:{width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center"},container:{gap:16,alignItems:"center"},learnMoreText:{gap:4,alignItems:"center",fontSize:14,color:e.text.secondary,justifyContent:"center"},actionsContainer:{gap:4,width:240,alignItems:"center"},learnMoreButton:{marginTop:16,borderRadius:6,width:"100%"},primaryButton:{width:"100%"},learnMoreWrapper:{width:"100%"}})),[]);return(0,i().v3)().device.isMobile?(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:s,open:o,render:()=>(0,F.jsx)(M().Ye,{style:r.wrapper,children:(0,F.jsxs)(M().wt,{style:r.container,children:[(0,F.jsx)(U,{integrationLogoIcon:t,title:(0,F.jsx)(_().sA,{id:"universalQna.notAvailableOnMobile.heading",defaultMessage:"Connecting {appName} and Notion is only available on desktop",values:{appName:n}})}),(0,F.jsxs)(M().wt,{style:r.actionsContainer,children:[(0,F.jsx)(J().A,{style:r.primaryButton,onClick:s,children:(0,F.jsx)(_().sA,{id:"universalQna.notAvailableOnMobile.close",defaultMessage:"Got it"})}),(0,F.jsx)(M().Ye,{style:r.learnMoreWrapper,children:(0,F.jsx)(C().A,{style:r.learnMoreButton,onClick:()=>{window.open(a,"_blank")},children:(0,F.jsxs)(M().Ye,{style:r.learnMoreText,children:[(0,F.jsx)(_().sA,{id:"universalSearch.slack.waitingForConnection.learnMore",defaultMessage:"Learn More"}),(0,S().X)({width:16,height:16})]})})})]})]})})}):(0,F.jsx)(F.Fragment,{})}var je=()=>n(577454);const _e=(0,_().YK)({primedTextInput:{id:"aiConnectors.github.primedTextInput",defaultMessage:"Find a GitHub PR/Issue/Code file about: "}});function we(e){const{open:t}=e,n=(0,i().v3)(),s=(0,_().tz)(),a=(0,y().IS)((e=>({body:{alignItems:"center",color:e.text.secondary,fontSize:12},container:{padding:12},tryItButton:{marginTop:16}})),[]),r=(0,o.useCallback)((()=>{l().o.setState({...l().o.state,currentScreen:"none"}),je().assistantMenuActions.openAssistantRightHandSideMenu({environment:n,from:"github_ai_connector_already_connected",primeTextInput:s.formatMessage(_e.primedTextInput)})}),[n,s]);return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>{l().o.reset()},open:t,render:()=>(0,F.jsxs)(M().wt,{style:a.container,children:[(0,F.jsx)(U,{integrationLogoIcon:j().F,title:(0,F.jsx)(_().sA,{id:"aiConnectors.github.alreadyConnected",defaultMessage:"GitHub is already connected to Notion AI"})}),(0,F.jsxs)(M().wt,{gap:2,style:a.body,children:[(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"aiConnectors.github.githubConnectedDescription",defaultMessage:"You're fully set up."})}),(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"aiConnectors.github.tryIt",defaultMessage:"Try asking AI about your GitHub repositories!"})})]}),(0,F.jsx)(E().A,{size:"lg",style:a.tryItButton,onClick:r,children:(0,F.jsx)(_().sA,{id:"aiConnectors.github.tryAskingAQuestion",defaultMessage:"Try asking a question"})})]})})}const be=(0,_().YK)({githubAIConnectorOauthPopupTitle:{defaultMessage:"Connect GitHub AI Connector",id:"githubAIConnector.oauthPopupTitle"}});function Ie(){const e=(0,o.useMemo)((()=>xe("github")),[]),t=(0,o.useMemo)((()=>ye("github")),[]),n=(0,i().v3)(),[c,d]=(0,o.useState)("CLOSED"),g=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),p=(0,s().O$)(l().o),h=(0,s().K8)((()=>l().o.state.sessionId),[]),m=(0,s().K8)((()=>l().o.state.analyticsFrom),[]),v=(0,y().IS)((()=>({loadingWrapper:{padding:20,fontSize:12,fontWeight:w().Wy.regular,justifyContent:"center",gap:8,alignItems:"center"}})),[]),f=(0,Z().J)(),x=(0,ee().n)(),S=(0,o.useCallback)((()=>{const e=(0,D().xS)("guides.aiConnectorGithub");(0,T().u4)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"learn_more_click_intro_modal",integration_type:"github",setup_session_id:l().o.state.sessionId,from:l().o.state.analyticsFrom}}}),n.device.isElectron?I().openExternalUrl(e):window.open(e,"_blank")}),[n]),C=(0,o.useCallback)((async()=>{if(!g)return;const e=await b().callApi({eventName:"getGithubOrgAuthUrl",environment:n,data:{spaceId:g,isDesktop:n.device.isElectron,sessionId:l().o.state.sessionId}});if("success"!==e.type)return;const t=e.data.url;n.device.isElectron?I().openExternalUrl(t):ue().P(n,{width:800,height:600,url:t,titleMessage:be.githubAIConnectorOauthPopupTitle}),l().o.setState({...l().o.state,authUrl:t,currentScreen:"connecting"})}),[g,n]),[A]=(0,a().Yb)((async()=>{if(!g||"introduction"!==p.currentScreen)return;if(p.githubOrg)return{isGithubConnected:!0};const e=await b().callApi({eventName:"getGithubAIConnectorStatus",environment:n,data:{spaceId:g}});return"success"===e.type?{isGithubConnected:e.data.isConnected}:void 0}),[n,p.currentScreen,p.githubOrg,g]);(0,o.useEffect)((()=>{"introduction"===p.currentScreen?"resolved"===A.status?d("OPEN"):d("LOADING"):d("CLOSED")}),[A.status,p.currentScreen]);const W=(0,o.useRef)(!1),B=(0,o.useCallback)((()=>{l().o.reset(),(0,T().u4)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"drop_off_github_intro_modal",integration_type:"github",setup_session_id:l().o.state.sessionId,from:l().o.state.analyticsFrom}}}),W.current=!1}),[n]),N=(0,o.useCallback)((async()=>{await C(),(0,T().u4)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"github_ai_connector_auth_url_open",integration_type:"github",setup_session_id:l().o.state.sessionId,from:l().o.state.analyticsFrom}}}),l().o.setState({...l().o.state,currentScreen:"connecting"})}),[n,C]);return(0,o.useEffect)((()=>{g&&f&&"resolved"===A.status&&"introduction"===p.currentScreen&&(W.current||((0,T().u4)({environment:n,event:{eventName:"universal_qna_onboarding_modal_open",eventProperties:{integration_type:"github",setup_session_id:p.sessionId,from:p.analyticsFrom,is_space_admin:f,is_ai_eligible:x}}}),W.current=!0))}),[g,n,A.status,p.sessionId,p.analyticsFrom,f,x,p.currentScreen]),g&&"CLOSED"!==c?n.device.isMobile?(0,F.jsx)(Se,{logo:j().F,appName:"GitHub",open:"introduction"===p.currentScreen,onClosed:()=>{l().o.reset()},learnMoreUrl:(0,D().xS)("guides.aiConnectorGithub")}):"LOADING"===c?(0,F.jsx)(k().A,{open:"LOADING"===c,render:()=>(0,F.jsxs)(M().Ye,{style:v.loadingWrapper,children:[(0,F.jsx)(_().sA,{id:"universalQna.github.isFetchingConnection",defaultMessage:"Getting connection status"}),(0,F.jsx)(ge().A,{})]})}):p.isConnected?(0,F.jsx)(we,{open:!0}):f?(0,F.jsx)(Q,{onConnect:N,onDismiss:B,onLearnMore:S,title:e,integrationIcon:j().F,notes:t,open:"OPEN"===c,titleWidth:210}):(0,F.jsx)(de,{connector:"github",analyticsFrom:m,setupSessionId:h,handleClose:()=>(0,r().resetAiConnectorStatus)("github"),open:"OPEN"===c,messages:re().Sn}):(0,F.jsx)(F.Fragment,{})}var Ce=()=>n(262462),Ae=()=>n(843189),ke=()=>n(972435);const Me=function(){const e=(0,s().O$)(l().o),[t,n]=(0,o.useState)(!1),a=(0,i().v3)(),r=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),c=(0,o.useCallback)((()=>{(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"close_settings",integration_type:"github",setup_session_id:l().o.state.sessionId,from:l().o.state.analyticsFrom}}}),l().o.reset()}),[a]),d=(0,o.useCallback)((()=>{n(!1)}),[]),g=(0,y().IS)((e=>({wrapper:{width:400},channelDetailsContainer:{width:352,fontSize:14,fontWeight:w().Wy.regular,color:e.text.secondary},channelDetailsSubtitle:{textAlign:"center",marginBottom:"16px"},channelDetailsWrapper:{justifyContent:"center",paddingTop:"12px",paddingBottom:"12px"},channelNamesContainer:{gap:2,color:e.text.primary},footer:{justifyContent:"center",alignItems:"center",width:"100%",padding:"20px 20px 20px 20px",gap:8},disconnectButton:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"},moreChannelsContainer:{paddingTop:8},learnMoreButton:{fontSize:14,fontWeight:w().Wy.semibold,borderRadius:"4px",width:"100%"},learnMoreText:{fontWeight:w().Wy.medium,fontSize:12,gap:5,justifyContent:"center",alignItems:"center",padding:"4px 8px 4px 8px",color:`${e.text.secondary}`},externalLinkIcon:{width:16,height:16},confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:w().Wy.semibold,color:e.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:14,fontWeight:w().Wy.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:14,fontWeight:w().Wy.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:14,fontWeight:w().Wy.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},spinner:{paddingTop:20,paddingBottom:40,justifyContent:"center",alignItems:"center"},editChannelsButton:{width:"100%"}})),[]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:d,open:t,render:()=>(0,F.jsx)("div",{style:g.confirmWrapper,children:(0,F.jsxs)("div",{style:g.confirmContainer,children:[(0,F.jsx)("div",{style:g.confirmModalTitle,children:(0,F.jsx)(_().sA,{id:"githubAIConnector.settings.confirmation.title",defaultMessage:"Are your sure?"})}),(0,F.jsx)("div",{style:g.confirmModalSubTitle,children:(0,F.jsx)(_().sA,{id:"githubAIConnector.settings.confirmation.subTitle",defaultMessage:"Your GitHub data will be permanently deleted from Notion."})}),(0,F.jsx)("div",{style:g.confirmModalDescription,children:(0,F.jsx)(_().sA,{id:"githubAIConnector.settings.confirmation.description",defaultMessage:"This process can take up to 3 hours, and you’ll only be able to reconnect after disconnecting is complete."})}),(0,F.jsxs)(M().wt,{style:g.confirmModalActionButtons,children:[(0,F.jsx)(J().A,{isRed:!0,style:g.confirmDisconnectButton,onClick:async()=>{r&&((0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"account_disconnect_confirmation",integration_type:"github",setup_session_id:l().o.state.sessionId,from:l().o.state.analyticsFrom}}}),await b().callApi({eventName:"disconnectGithub",environment:a,data:{spaceId:r}}),l().o.reset(),n(!1),X().D6({label:ke().A.getIntl().formatMessage({defaultMessage:"GitHub disconnected. This can take up to 3 hours.",id:"githubAIConnector.settings.confirmation.disconnected"}),position:"bottom"}))},children:(0,F.jsx)(_().sA,{id:"githubAIConnector.settings.confirmDisconnectModal.confirmDisconnect",defaultMessage:"Disconnect for everyone"})}),(0,F.jsx)(C().A,{style:g.goBackButton,onClick:d,children:(0,F.jsx)(_().sA,{id:"githubAIConnector.settings.confirmDisconnectModal.goBack",defaultMessage:"Go back"})})]})]})})}),(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:c,open:"settings"===e.currentScreen,render:()=>(0,F.jsxs)("div",{style:g.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:j().F,title:(0,F.jsx)(_().sA,{id:"githubAIConnector.settings.settingsModalTitle",defaultMessage:"GitHub is connected to Notion AI"}),subtext:(0,F.jsx)(_().sA,{id:"githubAIConnector.settings.canAnswerFrom",defaultMessage:"Notion AI can answer questions about your GitHub repositories."})}),(0,F.jsxs)(M().wt,{style:g.footer,children:[(0,F.jsx)(E().A,{size:"lg",style:g.editChannelsButton,onClick:()=>{var t,n;(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"open_github_for_edit_selection",integration_type:"github",setup_session_id:l().o.state.sessionId,from:l().o.state.analyticsFrom}}}),window.open(`https://github.com/organizations/${null===(t=e.githubOrg)||void 0===t?void 0:t.name}/settings/installations/${null===(n=e.githubOrg)||void 0===n?void 0:n.installationId}`,"_blank")},children:(0,F.jsx)(_().sA,{id:"githubAIConnector.settings.editRepos",defaultMessage:"Edit Selected Repositories"})}),(0,F.jsx)(Ae().E,{style:g.disconnectButton,onClick:()=>{(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"account_disconnect",integration_type:"github",setup_session_id:l().o.state.sessionId,from:"connection_settings"}}}),n(!0)},children:(0,F.jsx)(_().sA,{id:"githubAIConnector.settings.disconnectGithub",defaultMessage:"Disconnect"})}),(0,F.jsx)(C().A,{style:g.learnMoreButton,onClick:()=>{(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"learn_more_click_settings_modal",integration_type:"github",setup_session_id:l().o.state.sessionId,from:"connection_settings"}}});const e=(0,D().xS)("guides.aiConnectorGithub");window.open(e,"_blank")},children:(0,F.jsxs)(M().Ye,{style:g.learnMoreText,children:[(0,F.jsx)(_().sA,{id:"githubAIConnector.settings.learnMore",defaultMessage:"Learn more"}),(0,Ce().M)(g.externalLinkIcon)]})})]})]})})]})};var Te=()=>n(701545),De=()=>n(493823);const We=function(e){const{open:t,subText:a,integrationIcon:r,notes:c,onDismiss:l,onPrimaryButtonClick:d,onCopiedClick:g,title:p,copyTextMessage:h,primaryButtonText:m}=e,[v,f]=(0,o.useState)(!0),[x,S]=(0,o.useState)(!1),j=(0,i().v3)(),b=(0,_().tz)(),I=(0,y().IS)((e=>({wrapper:{width:400},subText:{display:"flex",width:"100%",color:e.text.secondary,fontWeight:w().Wy.regular,fontSize:w().J.UIRegular.desktop,justifyContent:"center",alignItems:"center"},notesContainer:{marginTop:24,font:w().Tf.sans,paddingLeft:20,paddingRight:20,textAlign:"left",justifyContent:"center"},copyTextContainer:{borderRadius:6,border:`1px solid ${e.stroke.secondary}`,margin:20},copyTextIcon:{margin:8},copyTextMessage:{fontSize:w().J.UISmall.desktop,fontWeight:w().Wy.regular,color:`${e.text.secondary}`,width:"fit-content",margin:8,marginLeft:4},buttonContainer:{justifyContent:"center",borderTop:`1px solid ${e.stroke.secondary}`,paddingTop:5,paddingBottom:5},copyButton:{borderRadius:17,opacity:.8,fontSize:15,fontWeight:w().Wy.medium,minWidth:68,height:34,padding:"0px 12px 0px 6px",justifyContent:"center",alignItems:"center",gap:2},clipboardText:{paddingRight:6,color:`${e.text.tertiary}`,height:34}})),[]),C=(0,s().K8)((()=>u().default.state.currentUserStore),[]);return(0,F.jsx)(k().A,{open:t,onDismiss:()=>{f(!0),l()},render:()=>(0,F.jsxs)("div",{style:I.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:r,title:p}),(0,F.jsx)(M().Ye,{style:I.subText,children:a}),(0,F.jsx)(M().wt,{style:I.notesContainer,className:"notes-Container",children:c.map(((e,t)=>e))}),(0,F.jsxs)(M().wt,{style:I.copyTextContainer,className:"CopyTextContainer",children:[(0,F.jsxs)(M().Ye,{children:[(0,F.jsx)(n(453697).A,{style:I.copyTextIcon,size:24,userStore:C,avatarShouldShowShadow:!1,hasTooltip:!1}),(0,F.jsx)("div",{style:I.copyTextMessage,children:b.formatMessage(h)})]}),(0,F.jsx)(M().Ye,{style:I.buttonContainer,children:v?(0,F.jsx)(De().p,{isBlue:!0,onClick:async()=>{f(!1);(await n(884107).R.clipboardActions.load()).copyString({environment:j,stringValue:b.formatMessage(h)}),g()},style:I.copyButton,icon:n(925907).n,children:(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.UniversalQna.connectionComplete.copyButton",defaultMessage:"Copy"})}):(0,F.jsx)(De().p,{style:I.clipboardText,icon:Te().p,children:(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.UniversalQna.connectionComplete.copyButtonSuccess",defaultMessage:"Copied to clipboard"})})})]}),d&&(0,F.jsx)(M().Ye,{style:{margin:20},children:(0,F.jsx)(J().A,{isLoading:x,style:{fontSize:14,fontWeight:w().Wy.semibold,width:"100%"},onClick:async()=>{S(!0),await d(),S(!1)},children:m})})]})})},Be=(0,_().YK)({copyTextMessage:{id:"githubAIConnector.connectionComplete.copyMessage",defaultMessage:"Our Notion AI is now connecting to GitHub. When you ask Notion AI a question, it'll be able to reference info across our Repositories, Issues, and Pull Requests. Click the button at the bottom right of your Notion app to give it a try!"}});const Fe=function(){const e=(0,i().v3)(),t=(0,s().O$)(l().o),n=(0,o.useCallback)((t=>{l().o.setState({...l().o.getInitialState(),isPersonalAuthComplete:!1,status:"in_progress",isConnected:!0}),(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:`github_ai_connector_got_it_${t}_click`,integration_type:"github",setup_session_id:l().o.state.sessionId,from:l().o.state.analyticsFrom}}}),X().D6({label:(0,F.jsx)(_().sA,{id:"aiConnectors.github.acknowledge",defaultMessage:"Started syncing from GitHub. This can take up to 72 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,F.jsx)(C().A,{onClick:X().N2,children:(0,F.jsx)(_().sA,{id:"aiConnectors.github.startedMessageDismiss",defaultMessage:"Close"})})})}),[e]),a=(0,y().IS)((e=>({headingText:{fontSize:w().J.UIRegular.desktop,letterSpacing:"-0.154px",color:`${e.text.primary}`,paddingBottom:8,fontWeight:w().Wy.medium},subNoteText:{fontSize:w().J.UIRegular.desktop,letterSpacing:"-0.154px",color:`${e.text.secondary}`,paddingBottom:8,fontWeight:w().Wy.regular},circle:{marginRight:8},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"-0.154px"}})),[]);return(0,F.jsx)(We,{open:"confirmation"===t.currentScreen,integrationIcon:j().F,notes:[(0,F.jsxs)(M().Ye,{children:[(0,F.jsx)(A().A,{number:1,style:a.circle}),(0,F.jsx)(M().wt,{children:(0,F.jsx)("div",{style:a.headingText,children:(0,F.jsx)(_().sA,{id:"githubAIConnector.connectionComplete.listpoint1",defaultMessage:"Connecting GitHub content may take up to 72h."},"note1")})})]},"item1"),(0,F.jsxs)(M().Ye,{style:a.headingText,children:[(0,F.jsx)(A().A,{number:2,style:a.circle}),(0,F.jsxs)(M().wt,{children:[(0,F.jsx)("div",{style:a.headingText,children:(0,F.jsx)(_().sA,{id:"githubAIConnector.connectionComplete.listpoint2",defaultMessage:"Each member of your workspace will be prompted to authenticate to GitHub."},"note2")}),(0,F.jsx)("div",{style:a.subNoteText,children:(0,F.jsx)(_().sA,{id:"githubAIConnector.connectionComplete.listsubpoint2",defaultMessage:"GitHub permissions are respected and members will only see content they have access to."},"subnote2")})]})]},"item2"),(0,F.jsxs)(M().Ye,{style:a.headingText,children:[(0,F.jsx)(A().A,{number:3,style:a.circle}),(0,F.jsx)(_().sA,{id:"githubAIConnector.connectionComplete.listpoint3",defaultMessage:"Copy the message below to let your team know!"})]},"item3")],onCopiedClick:()=>{(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"copy_button_clicked",integration_type:"github",setup_session_id:l().o.state.sessionId,from:l().o.state.analyticsFrom}}})},onDismiss:()=>n("dismiss"),title:(0,F.jsx)(_().sA,{id:"githubAIConnector.connectionComplete.title",defaultMessage:"You’re done!"}),subText:(0,F.jsx)(_().sA,{id:"githubAIConnector.connectionComplete.subText",defaultMessage:"What happens next:"}),copyTextMessage:Be.copyTextMessage})};var Ne=()=>n(405878);function ze(e){const{open:t,title:n,tryItOutHandler:o,onDismiss:i,integrationIcon:s,subText1:a,subText2:r}=e,c=(0,y().IS)((e=>({body:{alignItems:"center",color:e.text.secondary,fontSize:12},container:{padding:12},tryItButton:{marginTop:24}})),[]);return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:i,open:t,render:()=>(0,F.jsxs)(M().wt,{style:c.container,children:[(0,F.jsx)(U,{integrationLogoIcon:s,title:n}),(0,F.jsxs)(M().wt,{gap:2,style:c.body,children:[(0,F.jsx)("div",{children:a}),(0,F.jsx)("div",{children:r})]}),(0,F.jsx)(E().A,{size:"lg",style:c.tryItButton,onClick:o,children:(0,F.jsx)(_().sA,{id:"universalQna.universal.tryAskingAQuestion",defaultMessage:"Try asking a question"})})]})})}function Ue(){const e=(0,_().tz)(),t=(0,s().K8)((()=>h().d.state.screenToShow),[]),n=(0,i().v3)(),a=(0,o.useCallback)((()=>{h().d.setState({...h().d.state,screenToShow:"none"}),je().assistantMenuActions.openAssistantRightHandSideMenu({environment:n,from:"google_drive_already_connected",primeTextInput:e.formatMessage(Ne().D.primedTextInput)})}),[n,e]);return(0,F.jsx)(ze,{open:"already_connected"===t,tryItOutHandler:a,integrationIcon:L().u,onDismiss:()=>{h().d.reset()},title:(0,F.jsx)(_().sA,{id:"universalQna.googleDrive.alreadyConnected",defaultMessage:"Google Drive is already connected to Notion AI"}),subText1:(0,F.jsx)(_().sA,{id:"universalQna.googleDrive.ConnectedDescription",defaultMessage:"You're fully set up."}),subText2:(0,F.jsx)(_().sA,{id:"universalQna.GoogleDrive.tryIt",defaultMessage:"Try asking AI about Google Drive content!"})})}var Pe=()=>n(693954);const Le=function(e){const{notes:t,integrationIcon:n,openLearnMoreUrl:i,open:s,onDismiss:a,title:r,subText:c,onClickPrimaryButton:l,primaryButtonText:d,warningMessage:u}=e,[g,p]=(0,o.useState)(!1),h=(0,y().IS)((e=>({wrapper:{width:400},selectionContainer:{padding:20,width:400,paddingTop:12},waitingForConnectionWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},note:{fontWeight:w().Wy.regular,fontSize:14,lineHeight:"18px",width:330,marginLeft:8},buttonContainer:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",marginTop:"16px"},primaryButton:{fontSize:14,fontWeight:w().Wy.regular,width:"100%"},learnMoreButton:{gap:4,alignItems:"center",fontSize:12,color:e.text.secondary,justifyContent:"center"}})),[]);return(0,F.jsx)(k().A,{showCloseIcon:!0,open:s,onDismiss:a,render:()=>(0,F.jsxs)("div",{style:h.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:n,title:r,subtext:c}),(0,F.jsx)(M().Ye,{style:h.selectionContainer,children:(0,F.jsx)(M().wt,{children:(0,F.jsxs)(M().wt,{style:h.waitingForConnectionWrapper,children:[t.map(((e,t)=>(0,F.jsxs)(M().Ye,{gap:8,style:{marginTop:4,marginBottom:6},children:[(0,F.jsx)(A().A,{number:t+1}),(0,F.jsx)("div",{style:h.note,children:e})]},t))),(0,F.jsxs)(M().Ye,{style:h.buttonContainer,children:[u,l&&(0,F.jsx)(J().A,{isLoading:g,disabled:g,style:h.primaryButton,onClick:async()=>{p(!0),await l(),p(!1)},children:d}),(0,F.jsx)(C().A,{style:{marginTop:10,width:100,borderRadius:6},onClick:i,children:(0,F.jsxs)(M().Ye,{style:h.learnMoreButton,children:[(0,F.jsx)(_().sA,{id:"universalSearch.waitingForConnection.learnMore",defaultMessage:"Learn More"}),(0,S().X)({width:14,height:14})]})})]})]})})})]})})};function Ke(){const[e,t]=o.useState(!1),n=(0,y().IS)((e=>({noteHeading:{fontWeight:w().Wy.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"0.2px"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},icon:{width:18,height:17,color:"#D7813A",marginTop:2},warningText:{fontSize:14,lineHeight:"18px",color:"#D7813A",paddingLeft:14,fontweight:w().Wy.regular,letterSpacing:"-0.15px"},warningContainer:{marginLeft:5,marginRight:5,marginBottom:15}})),[]),a=(0,i().v3)(),c=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),l=(0,s().K8)((()=>h().d.state.sessionId),[]),d=(0,s().K8)((()=>h().d.state.screenToShow),[]),g=(0,s().K8)((()=>h().d.state.analyticsFrom),[]),m=(0,s().K8)((()=>p().default.getConfigKey("ingestion","googleDrive").googleAuthUrl),[]),v=(0,s().K8)((()=>p().default.getConfigKey("ingestion","googleDrive").troubleShootingUrl),[]),f=(0,s().K8)((()=>p().default.getConfigKey("ingestion","googleDrive").learnMoreUrl),[]),x=(0,o.useCallback)((async()=>{if(!c)return;var e;await(e=5e3,new Promise((t=>setTimeout(t,e))));const n=await b().callApi({eventName:"connectGoogleDriveForAIIngestion",environment:a,data:{spaceId:c}}),o=e=>{(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:e,integration_type:"google_drive",setup_session_id:l,from:g}}})};var i,s,d;"success"===n.type?n.data.connectionSuccess?(o("auth_screen_connected"),h().d.setState({...h().d.state,screenToShow:"connection_complete_screen",availableSyncControlOptions:n.data.syncControlOptions})):((e,n,i)=>{switch(e){case 401:o("auth_screen_not_connected_warning"),t(!0);break;case 403:o("info_screen_connect_not_admin_screen"),(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"not_admin_screen",analyticsFrom:g,sessionId:l});break;case 400:"GOOGLE_MAPPING_EXIST"===n&&i?(o("workspace_already_connected"),h().d.setState({...h().d.state,connectedSpaceId:i}),(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"connection_exist_screen",analyticsFrom:g,sessionId:l})):(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:g,sessionId:l});break;default:(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:g,sessionId:l})}})(null==n||null===(i=n.data)||void 0===i||null===(i=i.errorResponse)||void 0===i?void 0:i.status,null==n||null===(s=n.data)||void 0===s||null===(s=s.errorResponse)||void 0===s?void 0:s.errorCode,null==n||null===(d=n.data)||void 0===d||null===(d=d.errorResponse)||void 0===d||null===(d=d.data)||void 0===d?void 0:d.spaceId):(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:g,sessionId:l})}),[g,a,l,c]),S=(0,o.useCallback)((()=>[(0,F.jsxs)(M().wt,{style:{gap:4},children:[(0,F.jsx)("div",{style:n.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.waitingForConnectionNoteHeading1",defaultMessage:"Google should open automatically on a new browser tab."},"note1-1")}),(0,F.jsx)("div",{style:n.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.authWaiting",defaultMessage:"If it doesn't, {ClickHereToRetry}",values:{ClickHereToRetry:(0,F.jsx)("a",{style:n.link,href:m,target:"_blank",onClick:()=>{(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"auth_screen_open_auth_url",integration_type:"google_drive",setup_session_id:l,from:g}}})},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.confirmModalNote1Retry",defaultMessage:"click here to retry"})})}},"note1-2")})]},"note-1"),(0,F.jsxs)(M().wt,{style:{gap:4},children:[(0,F.jsx)("div",{style:n.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.workspaceAdminHeading",defaultMessage:"Follow Google’s setup instructions"},"note2-1")}),(0,F.jsx)("div",{style:n.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.workspaceAdminBody",defaultMessage:"For better AI answers, we recommend selecting the option “All users in my organization”. In the next steps, you’ll be able to exclude specific Drives and can always update your selection."},"note2-2")})]},"note-2"),(0,F.jsx)(M().wt,{style:{gap:4},children:(0,F.jsx)("div",{style:n.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.done",defaultMessage:"When you’re done, click the button below"},"note3-1")})},"note-3")]),[n,m,a,l,g]),j=e?(0,F.jsxs)(M().Ye,{style:n.warningContainer,children:[(0,Pe().Q)(n.icon),(0,F.jsx)("div",{style:n.warningText,children:(0,F.jsx)(_().sA,{id:"universalQnA.googleDrive.AuthScreen.warning",defaultMessage:"We couldn’t connect to Google. Please review the instructions and try again, or check our {TroubleshootingGuide}",values:{TroubleshootingGuide:(0,F.jsx)("a",{style:{...n.link,color:"#D7813A"},href:v,target:"_blank",onClick:()=>{(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"troubleshooting_guide_opened",integration_type:"google_drive",setup_session_id:l,from:g}}})},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.troubleShootingLink",defaultMessage:"troubleshooting guide."})})}})})]}):void 0;return(0,F.jsx)(Le,{title:(0,F.jsx)(_().sA,{id:"universalQnA.googleDrive.AuthScreen",defaultMessage:"Follow instructions from Google in your browser"}),open:"auth_screen"===d,onDismiss:()=>{t(!1),(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"auth_screen_dismiss",integration_type:"google_drive",setup_session_id:l,from:g}}}),(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:g,sessionId:l})},warningMessage:j,notes:S(),openLearnMoreUrl:()=>{window.open(f)},integrationIcon:L().u,primaryButtonText:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.Button.finishedSetup",defaultMessage:"Confirm connection"},"note3-1"),onClickPrimaryButton:x})}var He=()=>n(386164),Re=()=>n(36760),Ye=(n(944114),n(898992),n(354520),n(672577),n(803949),()=>n(972261)),qe=()=>n(625830),Ge=()=>n(802790),Ee=()=>n(297872);function Je(e){const{onPrimaryButtonClick:t,setShowConfirmModal:n}=e,a=(0,i().v3)(),r=(0,s().O$)(h().d),c=(0,s().K8)((()=>h().d.state.screenToShow),[]),[l,d]=(0,o.useState)(!1),u=(0,y().IS)((e=>({confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:w().Wy.semibold,color:e.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:14,fontWeight:w().Wy.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:14,fontWeight:w().Wy.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:14,fontWeight:w().Wy.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20}})),[]),g=e=>{h().d.setState({...r,screenToShow:e})};return(0,F.jsx)(k().A,{showCloseIcon:!0,open:"select_shared_drives_screen"===c,onDismiss:()=>{(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"edit_confirm_modal_close",integration_type:"google_drive",setup_session_id:r.sessionId,from:r.analyticsFrom}}}),g("none"),n(!1)},render:()=>(0,F.jsx)("div",{style:u.confirmWrapper,children:(0,F.jsxs)("div",{style:u.confirmContainer,children:[(0,F.jsx)("div",{style:u.confirmModalTitle,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.confirmModal.title",defaultMessage:"Are your sure?"})}),(0,F.jsx)("div",{style:u.confirmModalSubTitle,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.confirmModal.subTitle",defaultMessage:"Google Drive content will be disconnected and re-connected. This can take up to 36h and AI answers will be unavailable until it’s complete."})}),(0,F.jsxs)(M().wt,{style:u.confirmModalActionButtons,children:[(0,F.jsx)(J().A,{isLoading:l,style:u.confirmDisconnectButton,disabled:r.isDisconnecting,onClick:async()=>{(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"edit_modal_confirm_button",integration_type:"google_drive",setup_session_id:r.sessionId,from:r.analyticsFrom}}}),d(!0),await t(),d(!1),n(!1),g("none")},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.editModal.confirmDisconnect",defaultMessage:"Confirm"})}),(0,F.jsx)(C().A,{style:u.goBackButton,onClick:()=>{(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"edit_modal_cancel_button",integration_type:"google_drive",setup_session_id:r.sessionId,from:r.analyticsFrom}}}),n(!1)},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.editModal.cancel",defaultMessage:"Cancel"})})]})]})})})}function Oe(e){const{drive:t,styles:n,onToggle:o}=e;return(0,F.jsxs)(M().Ye,{gap:8,style:{alignItems:"center",padding:"10px 18px 6px 0px"},children:[(0,F.jsx)(qe().A,{checked:t.checked,checkSize:10,size:14,onClick:()=>o(t.id)}),(0,F.jsx)("div",{style:n.drivesRow,children:`${t.name}`},`${t.id}#3`)]})}function Qe(e){const{styles:t,onPrimaryButtonClick:n,setShowConfirmModal:a,isFutureItemsChecked:r,setDriveCheckboxItems:c,sharedDriveCheckboxItems:l,setFutureItemsChecked:d}=e,g=(0,s().O$)(h().d),p=(0,s().K8)((()=>h().d.state.sessionId),[]),m=(0,s().K8)((()=>h().d.state.initialSyncState),[]),v=(0,s().K8)((()=>h().d.state.analyticsFrom),[]),f=(0,s().K8)((()=>h().d.state.screenToShow),[]),x=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),[y,S]=(0,o.useState)(!1),j=(0,i().v3)();if((0,o.useEffect)((()=>{const e=g.availableSyncControlOptions.filter((e=>"shared_drive"===e.type));0===e.length&&"select_shared_drives_screen"===f&&(0,T().u4)({environment:j,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"no_shared_drives",integration_type:"google_drive",setup_session_id:p,from:v}}});const t=g.syncControlSelection;if(!t)return c(e.map((e=>({...e,checked:!0})))),void d(!0);c(e.map((e=>({...e,checked:!t.driveIds||t.driveIds.includes(e.id)})))),d(t.enableSyncingFutureUsersAndDrives)}),[v,j,g,f,c,d,p]),!x)return null;const w=l.find((e=>e.checked)),b=e=>{(0,T().u4)({environment:j,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"individual_drive_checkbox",integration_type:"google_drive",setup_session_id:g.sessionId,from:g.analyticsFrom}}}),c(l.map((t=>t.id===e?{...t,checked:!t.checked}:t)))},I=l.map((e=>(0,F.jsx)(Oe,{drive:e,styles:t,onToggle:b},e.id))).filter(V().O9);return(0,F.jsxs)(M().wt,{children:[(0,F.jsx)(M().Ye,{style:t.selectionWrapper,children:(0,F.jsxs)(M().wt,{style:t.scrollContainer,children:[(0,F.jsx)(Ge().A,{style:{paddingBottom:4},size:4}),(0,F.jsx)(M().Ye,{style:t.rowTitle,children:(0,F.jsxs)(M().Ye,{children:[(0,F.jsx)(M().wt,{children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.allItemsTitle",defaultMessage:"Content owned by users"})}),(0,F.jsx)(M().wt,{style:{paddingLeft:200},children:(0,Te().p)(t.checkMark)})]})}),(0,F.jsx)(M().Ye,{style:t.rowAdditionalText,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.allItemsSubtext",defaultMessage:"Includes all files owned by users selected in Google Workspace Settings"})}),(0,F.jsx)(Ge().A,{style:{paddingTop:10,paddingBottom:10},size:4}),(0,F.jsx)(M().Ye,{style:t.rowTitle,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.allSharedDrivesTitle",defaultMessage:"Content in Shared Drives"})}),(0,F.jsx)(M().Ye,{style:t.rowAdditionalText,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.allSharedDrivesSubtext",defaultMessage:"Includes files in Shared Drives as long as they are owned by users selected in the setting above."})}),(0,F.jsx)(M().Ye,{children:(0,F.jsx)(M().wt,{children:0===I.length?(0,F.jsx)(M().Ye,{style:{...t.rowAdditionalText,fontSize:14,paddingTop:10},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.noSharedDrivesSubtext",defaultMessage:"No Shared Drives found"})}):I})})]})}),(0,F.jsxs)(M().wt,{style:t.footer,children:[(0,F.jsxs)(M().Ye,{style:{gap:4,alignItems:"center",width:"inherit"},children:[(0,F.jsx)(qe().A,{checked:r,checkSize:10,size:14,onClick:()=>{(0,T().u4)({environment:j,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:`future_items_checkbox_${(!r).toString()}`,integration_type:"google_drive",setup_session_id:g.sessionId,from:g.analyticsFrom}}}),d(!r)}}),(0,F.jsx)("div",{style:{fontSize:12,lineHeight:"16px",paddingBottom:2},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.allSharedDrives",defaultMessage:"Include Drives created in the future"})})]}),(0,F.jsx)(J().A,{style:t.continueButton,isLoading:y,disabled:!w,onClick:async()=>{S(!0),"completed"!==m?(await n(),S(!1)):a(!0)},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.confirm",defaultMessage:"Confirm selection"})})]})]})}async function $e(e){const{environment:t,spaceId:n}=e,o=u().default.state.currentUserStore,{analyticsFrom:i,sessionId:s}=h().d.state;if("success"===(await b().callApi({eventName:"startGoogleDriveSyncForAIIngestion",environment:t,data:{spaceId:n,setupSessionId:s}})).type){var a;h().d.setState({...h().d.state,initialSyncState:"in_progress",ingestionProgress:1});const e=f().A.state.appsConnectionData.filter((e=>e.id!==Ye()._u));return f().A.setState({...f().A.state,appsConnectionData:[...e,{connectionStatus:"in_progress",connectionLastEditedTimestamp:Date.now(),connectionType:"google-drive",connectorEmail:(null==o?void 0:o.getEmail())||"",id:Ye()._u,connectorNotionId:null==o||null===(a=o.getModel())||void 0===a?void 0:a.id}]}),(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:i,sessionId:s}),!0}return(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:i,sessionId:s}),!1}const Ve=function(){const[e,t]=(0,o.useState)(!1),n=(0,s().K8)((()=>h().d.state.screenToShow),[]),a=(0,i().v3)(),c=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),l=(0,s().O$)(h().d),d=(0,y().IS)((e=>({wrapper:{width:400},scrollContainer:{overflow:"scroll",paddingRight:20,height:350},rowTitle:{fontSize:12,lineHeight:"16px",letterSpacing:"-0.15px",fontWeight:510,paddingBottom:4},rowAdditionalText:{fontSize:12,lineHeight:"16px",color:e.text.secondary},drivesRow:{fontSize:14,lineHeight:"18px",letterSpacing:"-0.15px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},footer:{justifyContent:"center",alignItems:"center",bottom:0,width:"100%",height:75,boxShadow:e.shadowMD,padding:"16px 20px 16px 20px",gap:6},continueButton:{fontSize:14,fontWeight:w().Wy.semibold,width:360},selectionWrapper:{marginTop:24,paddingLeft:20,justifyContent:"center",overflow:"auto"},selection:{width:360,height:263,marginBotton:12},checkMark:{width:14,color:e.text.secondary}})),[]),g=(0,s().K8)((()=>h().d.state.sessionId),[]),p=(0,s().K8)((()=>h().d.state.analyticsFrom),[]),[m,v]=(0,o.useState)(!0),[f,x]=(0,o.useState)([]),S=()=>{h().d.setState({...h().d.state,syncControlSelection:{driveIds:[],enableSyncingFutureUsersAndDrives:!1},availableSyncControlOptions:[]})},j=(0,o.useCallback)((async()=>{let e=!0;m&&(e=!1);const t=[];if(f.forEach((n=>{if(n.checked===e){const{checked:e,...o}=n;t.push({...o})}})),(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"drive_and_user_selector_primary_button",integration_type:"google_drive",setup_session_id:l.sessionId,from:l.analyticsFrom}}}),!c)return;const n=t,o=await b().callApi({eventName:"patchSyncControlsForGoogleDriveAIIngestion",environment:a,data:{spaceId:c,exclusionList:m?n:[],inclusionList:m?[]:n}}),i="in_progress"===h().d.state.initialSyncState||"completed"===h().d.state.initialSyncState;if("failed"===o.type)return void X().D6({label:(0,F.jsx)(_().sA,{id:"googleIngestionConfirmation.ingestion.failed",defaultMessage:"Cannot edit Google shared drives now. Please try again later."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,F.jsx)(C().A,{onClick:X().N2,children:(0,F.jsx)(_().sA,{id:"googleIngestionConfirmation.ingestion.failedMessageDismiss",defaultMessage:"Close"})})});const s="success"===o.type&&o.data.syncControlsUpdated||!i&&"success"===o.type&&!o.data.syncControlsUpdated,d=i&&"success"===o.type&&!o.data.syncControlsUpdated;if(s){const e=await $e({environment:a,spaceId:c});S(),e&&X().D6({label:(0,F.jsx)(_().sA,{id:"googleIngestionConfirmation.ingestion.acknowledge",defaultMessage:"Started syncing from Google drive. This can take up to 36 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,F.jsx)(C().A,{onClick:X().N2,children:(0,F.jsx)(_().sA,{id:"googleIngestionConfirmation.ingestion.startedMessageDismiss",defaultMessage:"Close"})})})}else d?(X().D6({label:(0,F.jsx)(_().sA,{id:"googleIngestionConfirmation.ingestion.skip",defaultMessage:"No change made to Google Drive Connection."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,F.jsx)(C().A,{onClick:X().N2,children:(0,F.jsx)(_().sA,{id:"googleIngestionConfirmation.ingestion.noConfigChangeDismiss",defaultMessage:"Close"})})}),S(),h().d.setState({...h().d.state,initialSyncState:"completed"}),(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:p,sessionId:g})):(S(),(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:p,sessionId:g}))}),[p,a,l,m,g,f,c]);return e?(0,F.jsx)(Je,{onPrimaryButtonClick:j,setShowConfirmModal:t}):(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>{(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",sessionId:g,analyticsFrom:p})},open:"select_shared_drives_screen"===n,render:()=>(0,F.jsxs)("div",{style:d.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:L().u,title:(0,F.jsx)(_().sA,{defaultMessage:"Select Drives to Connect",id:"googleAiConnector.universalQnaSharedDriveSelectorPopup.selectDrivesToConnect"})}),(0,F.jsx)(Ee().A,{capture:!0,allowEsc:!0,render:()=>(0,F.jsx)(Qe,{styles:d,onPrimaryButtonClick:j,setShowConfirmModal:t,isFutureItemsChecked:m,setFutureItemsChecked:v,sharedDriveCheckboxItems:f,setDriveCheckboxItems:x})})]})})},Xe=(0,_().YK)({copyTextMessage:{id:"universalSearch.googleDriveIngestion.googleDriveTitle.connectionComplete.copyMessage",defaultMessage:"Our Notion AI is now connecting to Google Drive. When you ask Notion AI a question, it'll be able to reference info across our Google Docs, Slides & Sheets. Click the button at the bottom right of your Notion app to give it a try!"}});function Ze(){const e=(0,y().IS)((e=>({headingText:{fontSize:w().J.UIRegular.desktop,letterSpacing:"-0.154px",color:`${e.text.primary}`,paddingBottom:8,fontWeight:w().Wy.medium},circle:{marginRight:8},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"-0.154px"}})),[]),t=(0,i().v3)(),n=(0,s().K8)((()=>h().d.state.sessionId),[]),a=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),c=(0,s().K8)((()=>h().d.state.initialSyncState),[]),l=(0,s().K8)((()=>h().d.state.screenToShow),[]),d=(0,s().K8)((()=>h().d.state.analyticsFrom),[]),g=(0,o.useCallback)((()=>{(0,T().u4)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"completion_screen_dismiss",integration_type:"google_drive",setup_session_id:n,from:d}}}),(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:d,sessionId:n})}),[d,t,n]);if("completed"===c||!a)return(0,F.jsx)(F.Fragment,{});const p="in_progress"===c;return(0,F.jsx)(We,{open:"connection_complete_screen"===l,integrationIcon:L().u,notes:[(0,F.jsxs)(M().Ye,{style:e.headingText,children:[(0,F.jsx)(A().A,{number:1,style:e.circle}),(0,F.jsxs)(M().wt,{children:[(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.googleDriveIngestion.connectionComplete.listpoint1",defaultMessage:"Connecting your Drives may take up to 36h."},"note1"),!p&&(0,F.jsx)("div",{style:e.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.waitingForConnectionNoteBody1",defaultMessage:"If you want to choose Drives, {clickHere}",values:{clickHere:(0,F.jsx)("a",{style:e.link,onClick:async()=>{(0,T().u4)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"shared_drive_settings",integration_type:"google_drive",setup_session_id:n,from:d}}});const e=await b().callApi({eventName:"getGoogleDriveSyncProgress",environment:t,data:{spaceId:a},headers:(0,He().WS)({spaceId:a})});if("success"===e.type){var o;const t=(0,Re().HB)(null===(o=e.data)||void 0===o?void 0:o.status);h().d.setState({...h().d.state,initialSyncState:t}),"in_progress"===t?(0,r().navigateToGoogleDriveUniversalScreen)({analyticsFrom:d,sessionId:n,screenToShow:"settings_screen"}):"not_started"===t?(0,r().navigateToGoogleDriveUniversalScreen)({analyticsFrom:d,sessionId:n,screenToShow:"select_shared_drives_screen"}):(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:d,sessionId:n})}else(0,r().navigateToGoogleDriveUniversalScreen)({analyticsFrom:d,sessionId:n,screenToShow:"error"})},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.settings",defaultMessage:"click here."})})}},"note1-1")})]})]},"item1"),(0,F.jsxs)(M().Ye,{style:e.headingText,children:[(0,F.jsx)(A().A,{number:2,style:e.circle}),(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.googleDriveIngestion.connectionComplete.listpoint2",defaultMessage:"Notion AI will be ready to answer questions across Notion and Google Drive knowledge."},"note2")]},"item2"),(0,F.jsxs)(M().Ye,{style:e.headingText,children:[(0,F.jsx)(A().A,{number:3,style:e.circle}),(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.googleDriveIngestion.connectionComplete.listpoint3",defaultMessage:"Copy the message below to let your team know!"})]},"item3")],onCopiedClick:()=>{(0,T().u4)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"copy_button_clicked",integration_type:"google_drive",setup_session_id:n,from:d}}})},primaryButtonText:(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.googleDrive.connectionComplete.confirmConnection",defaultMessage:"Done"}),onPrimaryButtonClick:async()=>{if((0,T().u4)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"completion_screen_done",integration_type:"google_drive",setup_session_id:n,from:d}}}),!a)return;if(p)return void(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:d,sessionId:n});await $e({environment:t,spaceId:a})&&X().D6({label:(0,F.jsx)(_().sA,{id:"googleIngestionConfirmation.ingestion.acknowledge",defaultMessage:"Started syncing from Google drive. This can take up to 36 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,F.jsx)(C().A,{onClick:X().N2,children:(0,F.jsx)(_().sA,{id:"googleIngestionConfirmation.ingestion.startedMessageDismiss",defaultMessage:"Close"})})})},onDismiss:g,title:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.connectionComplete.googleDriveTitle",defaultMessage:"You’re done!"}),subText:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.googleDriveTitle.connectionComplete.subText",defaultMessage:"Here’s what’s next:"}),copyTextMessage:Xe.copyTextMessage})}var et=()=>n(584262),tt=()=>n(426116);function nt(){const e=(0,s().K8)((()=>h().d.state.screenToShow),[]),t=(0,s().K8)((()=>h().d.state.sessionId),[]),n=(0,s().K8)((()=>h().d.state.analyticsFrom),[]),a=(0,s().K8)((()=>h().d.state.connectedSpaceId),[]),c=(0,i().v3)(),l=(0,y().IS)((e=>({icon:{width:16,display:"inline-block"},wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:w().Wy.semibold,width:"100%"},iconWrapper:{width:16,height:16},chevronRightIcon:{width:14,height:14,fill:e.lightIconColor}})),[]),d="connection_exist_screen"===e,g=(0,o.useCallback)((async()=>{const e=u().default.state.currentUserRootStore;if(!e)return;(0,T().u4)({environment:c,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"visit_other_workspace",integration_type:"google_drive",setup_session_id:t,from:n}}});const o=e.getSpaceViewStores().filter((e=>e.getSpaceId()===a))[0];await tt().tR({environment:c,navigationType:"switchingToOrLoadingSpace",pageVisitSource:et().y8.AIGoogleDriveQna,spaceViewStore:o,userRootStore:u().default.state.currentUserRootStore,userSettingsStore:u().default.state.currentUserSettingsStore}),h().d.reset(),h().d.setState({...h().d.state,screenToShow:"settings_screen",analyticsFrom:"google_other_workspace",sessionId:t})}),[n,a,c,t]);return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:n,sessionId:t}),open:d,render:()=>(0,F.jsxs)("div",{style:l.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:L().u,title:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.connectionExist.title",defaultMessage:"You’ve already connected Google Drive to another Notion workspace."}),subtext:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.connectionExist.description",defaultMessage:"Currently, only one workspace can be connected to Google Drive. To connect this workspace, please disconnect the existing connection."})}),(0,F.jsx)(M().wt,{style:l.footer,children:(0,F.jsx)(J().A,{style:l.connectButton,onClick:g,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.connectionExist.navigateButton",defaultMessage:"Visit the other workspace"})})})]})})}var ot=()=>n(498474);const it=function(e){const{onDismiss:t,onClickGotItBtn:n,open:o,title:i,descriptionMessage:s,integrationIcon:a,message:r}=e,c=(0,y().IS)((e=>({modal:{width:400,alignItems:"center"},contentWrapper:{padding:"0 20px 24px 20px",gap:8},messageWrapper:{gap:19},gotItButton:{width:"100%"}})),[]);return(0,F.jsx)(k().A,{showCloseIcon:!0,open:o,onDismiss:t,render:()=>(0,F.jsxs)("div",{style:c.modal,children:[(0,F.jsx)(U,{integrationLogoIcon:a,title:i,subtext:s}),(0,F.jsxs)("div",{style:c.contentWrapper,children:[(0,F.jsx)("div",{style:c.messageWrapper,children:r}),(0,F.jsx)("div",{children:(0,F.jsx)(E().A,{size:"lg",style:c.gotItButton,onClick:n,children:(0,F.jsx)(_().sA,{id:"aiConnectors.common.disconnectModal.confirmDisconnect",defaultMessage:"Got it"})})})]})]})})};function st(){const e=(0,s().O$)(h().d),t=(0,s().K8)((()=>h().d.state.screenToShow),[]),n=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),a=(0,s().K8)((()=>p().default.getConfigKey("ingestion","googleDrive").marketplaceAppConfigureUrl),[]),r=(0,s().K8)((()=>h().d.state.sessionId),[]),c=(0,s().K8)((()=>h().d.state.analyticsFrom),[]),l=(0,i().v3)(),d=async()=>{if(!n)return;const e=await async function(e){const{environment:t,spaceId:n}=e,o=await b().callApi({eventName:"disconnectGoogleDriveAIIngestion",environment:t,data:{spaceId:n,disconnectReason:"admin_disconnect"}}),i=u().default.state.currentUserStore;if("success"===o.type&&o.data.deletionInitiated){var s;h().d.setState({...h().d.state,screenToShow:"none",isDisconnecting:!0});const e=f().A.state.appsConnectionData.filter((e=>e.id!==Ye()._u));return f().A.setState({...f().A.state,appsConnectionData:[...e,{connectionStatus:"disconnecting",connectionLastEditedTimestamp:Date.now(),connectionType:"google-drive",connectorEmail:(null==i?void 0:i.getEmail())||"",id:Ye()._u,connectorNotionId:null==i||null===(s=i.getModel())||void 0===s?void 0:s.id}]}),!0}return h().d.setState({...h().d.state,screenToShow:"error",isDisconnecting:!1}),!1}({environment:l,spaceId:n});e?X().D6({label:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.disconnectModal.acknowledgeDisconnect",defaultMessage:"Started disconnecting Google Drive. This can take up to 3 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,F.jsx)(C().A,{onClick:X().N2,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.disconnectModal.dismissAcknowledgeDisconnect",defaultMessage:"Close"})})}):X().D6({label:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.disconnectModal.disconnectError",defaultMessage:"Failed to disconnect Google Drive. Please try again later."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,F.jsx)(C().A,{onClick:X().N2,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.disconnectModal.closeSnackbarError",defaultMessage:"Close"})})})},g=t=>{h().d.setState({...e,screenToShow:t})},m=(0,y().IS)((e=>({confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:w().Wy.semibold,color:e.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:14,fontWeight:w().Wy.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:14,fontWeight:w().Wy.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:14,fontWeight:w().Wy.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},notesSectionWrapper:{padding:"12px 12px 12px 12px",gap:13},noteBlockWrapper:{marginBottom:12,gap:8},note:{fontWeight:w().Wy.regular,fontSize:14,lineHeight:"18px"},noteHeading:{fontWeight:w().Wy.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"0.2px"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},icon:{rotate:"45deg",width:12,height:12,cursor:"pointer",display:"inline",padding:0,margin:0}})),[]),v=(0,o.useCallback)((()=>{const{noteBlockWrapper:e,noteHeading:t,noteBody:n,link:o}=m;return[(0,F.jsxs)(M().wt,{style:e,children:[(0,F.jsx)("div",{style:t,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.post_disconnect_screen.note_1.heading",defaultMessage:"Google Drive data will be permanently deleted from Notion"},"note1-1")}),(0,F.jsx)("div",{style:n,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.post_disconnect_screen.note_1.body",defaultMessage:"This process can take up to 3 hours. You'll only be able to reconnect after disconnecting is complete."},"note1-2")})]},"note-1"),(0,F.jsxs)(M().wt,{style:e,children:[(0,F.jsx)("div",{style:t,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.post_disconnect_screen.note_2.heading",defaultMessage:"Uninstall the Notion AI app from your Google Workspace (optional)"},"note2-1")}),(0,F.jsx)("div",{style:n,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.post_disconnect_screen.note_2.body",defaultMessage:"Go to your {NavigateToGoogleWorkspaceAppsSettings} and uninstall the Notion AI app.",values:{NavigateToGoogleWorkspaceAppsSettings:(0,F.jsx)("a",{style:o,href:a,target:"_blank",onClick:()=>{(0,T().u4)({environment:l,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_screen_marketplace_app_disconnect_btn",integration_type:"google_drive",setup_session_id:r,from:c}}})},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.post_disconnect_screen.disconnect_google_marketplace_app",defaultMessage:"Google Workspace {ArrowIcon}",values:{ArrowIcon:(0,ot().q)(m.icon)}})})}},"note2-2")})]},"note-2")]}),[m,a,l,r,c]);return"post_disconnect_screen"===t?(0,F.jsx)(it,{onClickGotItBtn:()=>{g("none")},onDismiss:()=>{g("none")},open:"post_disconnect_screen"===t,integrationIcon:L().u,title:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.post_disconnect_modal.title",defaultMessage:"Google Drive is Disconnecting from Notion"}),descriptionMessage:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.post_disconnect_modal.description",defaultMessage:"Here's what's next:"}),message:(0,F.jsx)("div",{style:m.notesSectionWrapper,children:v().map(((e,t)=>(0,F.jsxs)(M().Ye,{gap:8,style:{marginTop:4,marginBottom:6},children:[(0,F.jsx)(A().A,{number:t+1}),(0,F.jsx)("div",{style:m.note,children:e})]},t)))})}):(0,F.jsx)(k().A,{showCloseIcon:!0,open:"disconnect_screen"===t,onDismiss:()=>{(0,T().u4)({environment:l,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_modal_close",integration_type:"google_drive",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),g("none")},render:()=>(0,F.jsx)("div",{style:m.confirmWrapper,children:(0,F.jsxs)("div",{style:m.confirmContainer,children:[(0,F.jsx)("div",{style:m.confirmModalTitle,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.disconnectModal.title",defaultMessage:"Are your sure?"})}),(0,F.jsx)("div",{style:m.confirmModalSubTitle,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.disconnectModal.subTitle",defaultMessage:"Google Drive data will be permanently deleted from Notion."})}),(0,F.jsx)("div",{style:m.confirmModalDescription,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.disconnectModal.description",defaultMessage:"This process can take up to 3 hours, and you'll only be able to reconnect after disconnecting is complete."})}),(0,F.jsxs)(M().wt,{style:m.confirmModalActionButtons,children:[(0,F.jsx)(J().A,{isRed:!0,style:m.confirmDisconnectButton,disabled:e.isDisconnecting,onClick:async()=>{(0,T().u4)({environment:l,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_modal_confirm_disconnect_button",integration_type:"google_drive",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),await d(),g("post_disconnect_screen")},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.disconnectModal.confirmDisconnect",defaultMessage:"Disconnect for everyone"})}),(0,F.jsx)(C().A,{style:m.goBackButton,onClick:()=>{(0,T().u4)({environment:l,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_modal_back_button",integration_type:"google_drive",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),g("settings_screen")},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.disconnectModal.goBack",defaultMessage:"Go back"})})]})]})})})}function at(){const e=(0,s().K8)((()=>h().d.state.screenToShow),[]),t=(0,s().K8)((()=>h().d.state.sessionId),[]),n=(0,s().K8)((()=>h().d.state.analyticsFrom),[]),a=(0,i().v3)(),c=(0,y().IS)((e=>({icon:{width:16,display:"inline-block"},wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:w().Wy.semibold,width:"100%"},iconWrapper:{width:16,height:16},chevronRightIcon:{width:14,height:14,fill:e.lightIconColor}})),[]),l="error"===e;return(0,o.useEffect)((()=>{l&&(0,T().u4)({environment:a,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"info_screen_connect_error",integration_type:"google_drive",setup_session_id:t,from:n}}})}),[l,n,t,a]),(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:n,sessionId:t}),open:l,render:()=>(0,F.jsxs)("div",{style:c.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:L().u,title:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.error.title",defaultMessage:"Oops! Something went wrong"}),subtext:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.error.description",defaultMessage:"Something went wrong, please try again later."})}),(0,F.jsx)(M().wt,{style:c.footer,children:(0,F.jsx)(J().A,{style:c.connectButton,onClick:()=>{(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:n,sessionId:t})},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.error.Dismiss",defaultMessage:"Close"})})})]})})}var rt=()=>n(441738),ct=()=>n(749240);function lt(){const[e,t]=o.useState(!1),n=(0,i().v3)(),a=(0,o.useMemo)((()=>ye("googleDrive")),[]),c=(0,o.useMemo)((()=>xe("googleDrive")),[]),l=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),d=(0,s().K8)((()=>h().d.state.sessionId),[]),m=(0,s().K8)((()=>h().d.state.screenToShow),[]),v=(0,s().K8)((()=>h().d.state.analyticsFrom),[]),f=(0,s().K8)((()=>g().zD.canUseUniversalGoogleDriveSearchScope()),[]),x=(0,s().K8)((()=>p().default.getConfigKey("ingestion","googleDrive").learnMoreUrl),[]),y=(0,Z().J)(),S=(0,ee().n)(),j="info_screen"===m;return(0,o.useEffect)((()=>{j&&f&&(0,T().u4)({environment:n,event:{eventName:"universal_qna_onboarding_modal_open",eventProperties:{integration_type:"google_drive",setup_session_id:d,from:v,is_space_admin:y,is_ai_eligible:S}}})}),[v,n,S,j,y,d,f]),f?n.device.isMobile?(0,F.jsx)(Se,{logo:L().u,appName:"Google Drive",open:j,onClosed:()=>{h().d.reset()},learnMoreUrl:x}):y?(0,F.jsx)(Q,{integrationIcon:L().u,notes:a,onLearnMore:()=>{const e=p().default.getConfigKey("ingestion","googleDrive"),t=null==e?void 0:e.learnMoreUrl;window.open(t,"_blank")},onConnect:async()=>{l&&(t(!0),await async function(e,t,n,o){var i,s,a;(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"info_screen_connect",integration_type:"google_drive",setup_session_id:n,from:o}}});const c=(null===(i=ct().subscriptionDataStoreInstance.state)||void 0===i?void 0:i.addOns)??[];if(!(0,rt().GI)(c))return void(0,r().executeAiConnectorsUpsellAction)({connector:"google_drive",environment:e,analyticsFrom:"google_drive_connect_button"});const l=await b().callApi({eventName:"getGoogleDriveSyncProgress",environment:e,data:{spaceId:t},headers:(0,He().WS)({spaceId:t})});if("failed"===l.type)return void(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:o,sessionId:n});const d=null==l||null===(s=l.data)||void 0===s?void 0:s.status,u=(0,Re().HB)(d);if(h().d.setState({...h().d.state,initialSyncState:u,ingestionProgress:null==l||null===(a=l.data)||void 0===a?void 0:a.ingestionProgress}),"success"===l.type&&"in_progress"===u)return(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"connection_complete_screen",integration_type:"google_drive",setup_session_id:n,from:o}}}),void(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"settings_screen",analyticsFrom:o,sessionId:n});if("success"===l.type&&"completed"===u)return(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"already_connected_screen",integration_type:"google_drive",setup_session_id:n,from:o}}}),void(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"already_connected",analyticsFrom:o,sessionId:n});(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"auth_screen",integration_type:"google_drive",setup_session_id:n,from:o}}}),(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"auth_screen",analyticsFrom:o,sessionId:n});const g=p().default.getConfigKey("ingestion","googleDrive");window.open(g.googleAuthUrl,"_blank"),b().callApi({eventName:"initiateGoogleDriveDelayedIngestion",environment:e,data:{spaceId:t,setupSessionId:n}})}(n,l,d,v),t(!1))},onDismiss:()=>{(0,T().u4)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"info_screen_dismiss",integration_type:"google_drive",setup_session_id:d,from:v}}}),(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:v,sessionId:d})},title:c,isLoading:e,titleWidth:352,open:j}):(0,F.jsx)(de,{connector:"google_drive",handleClose:()=>(0,r().resetAiConnectorStatus)("google_drive"),open:j,analyticsFrom:v,setupSessionId:d,messages:re().Fn}):(0,F.jsx)(F.Fragment,{})}function dt(){const e=(0,s().K8)((()=>h().d.state.screenToShow),[]),t=(0,s().K8)((()=>h().d.state.sessionId),[]),n=(0,s().K8)((()=>h().d.state.analyticsFrom),[]),o=(0,y().IS)((e=>({icon:{width:16,display:"inline-block"},wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:w().Wy.semibold,width:"100%"},iconWrapper:{width:16,height:16},chevronRightIcon:{width:14,height:14,fill:e.lightIconColor}})),[]);return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",analyticsFrom:n,sessionId:t}),open:"not_admin_screen"===e,render:()=>(0,F.jsxs)("div",{style:o.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:L().u,title:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.notAdmin.title",defaultMessage:"Only Google Workspace Administrators can connect"}),subtext:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.notAdmin.description",defaultMessage:"We can't verify that this account is a Google Workspace Administrator. Please contact your admin to link Notion using their account."})}),(0,F.jsx)(M().wt,{style:o.footer,children:(0,F.jsxs)(J().A,{style:o.connectButton,onClick:()=>{const e=p().default.getConfigKey("ingestion","googleDrive"),t=null==e?void 0:e.learnMoreUrl;window.open(t,"_blank")},children:[(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.notAdmin.learnMore",defaultMessage:"Learn more"}),(0,F.jsx)("div",{style:o.iconWrapper,children:(0,S().X)()})]})})]})})}var ut=()=>n(124858),gt=()=>n(859428);function pt(e){const{styles:t,events:n,isEditButtonEnabled:o,navigateToScreen:a}=e,r=(0,i().v3)(),c=(0,s().O$)(h().d);return(0,F.jsx)(E().A,{...n,size:"lg",style:t,disabled:!o,onClick:()=>{(0,T().u4)({environment:r,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_edit_drives_button",integration_type:"google_drive",setup_session_id:c.sessionId,from:c.analyticsFrom}}}),a("select_shared_drives_screen")},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.settingsModal.editSyncControls",defaultMessage:"Edit Drives"})})}function ht(e){const{styles:t,events:n,isDisconnectButtonEnabled:o,navigateToScreen:a}=e,r=(0,i().v3)(),c=(0,s().O$)(h().d),l=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),d=(0,s().K8)((()=>h().d.state.initialSyncState),[]);return(0,F.jsx)(Ae().E,{...n,style:t,disabled:!o,onClick:async()=>{if(l)if((0,T().u4)({environment:r,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_disconnect_button",integration_type:"google_drive",setup_session_id:c.sessionId,from:c.analyticsFrom}}}),"completed"!==d){if("not_started"===d){if("success"===(await b().callApi({eventName:"disconnectGoogleDriveAIIngestion",environment:r,data:{spaceId:l,disconnectReason:"admin_disconnect"}})).type)return void a("none")}a("error")}else a("disconnect_screen")},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.settingsModal.disconnectGoogleDrive",defaultMessage:"Disconnect"})})}const mt=function(){const e=(0,s().O$)(h().d),t=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),n=(0,s().K8)((()=>h().d.state.analyticsFrom),[]),c=(0,s().K8)((()=>h().d.state.screenToShow),[]),l=(0,s().K8)((()=>h().d.state.initialSyncState),[]),d=(0,s().K8)((()=>h().d.state.sessionId),[]),[g,m]=(0,o.useState)(!0),[v,f]=(0,o.useState)(!1),[x,S]=(0,o.useState)(!1),[j,I]=(0,o.useState)([]),A=(0,i().v3)();(0,a().Yb)((async()=>{if(!t||!A||"settings_screen"!==c)return;m(!0);let e=l;if("none"===l){var o;const i=await b().callApi({eventName:"getGoogleDriveSyncProgress",environment:A,data:{spaceId:t},headers:(0,He().WS)({spaceId:t})});if("failed"===i.type)return void(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"error",analyticsFrom:n,sessionId:d});const s=null==i||null===(o=i.data)||void 0===o?void 0:o.status;e=(0,Re().HB)(s),h().d.setState({...h().d.state,initialSyncState:e})}}),[n,A,l,c,d,t]),(0,a().Yb)((async()=>{if(t&&A&&"settings_screen"===c&&"none"!==l)if("in_progress"===l)m(!1),f(!1),S(!1);else if("completed"===l||"not_started"===l){const e=await b().callApi({eventName:"getSyncControlsForGoogleDriveAIIngestion",environment:A,data:{spaceId:t}});if("success"===(null==e?void 0:e.type)){const t=e.data;m(!1),f(!0),"not_started"===l?h().d.setState({...h().d.state,availableSyncControlOptions:t.options}):(h().d.setState({...h().d.state,availableSyncControlOptions:t.options,syncControlSelection:t.selection}),I(t.options.filter((e=>t.selection.driveIds.includes(e.id))))),h().d.state.isEditing||"in_progress"===h().d.state.initialSyncState||S(!0)}else f(!1),S(!1),X().D6({label:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.settingsModal.userError",defaultMessage:"Cannot disconnect Google Drive. Please contact Notion workspace admin."}),position:"bottom",style:{width:"600px",display:"flex",justifyContent:"space-between"},right:(0,F.jsx)(C().A,{onClick:X().N2,children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.settingsModal.closeSnackbarError",defaultMessage:"Close"})})})}}),[t,A,c,l]);const D=t=>{(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:t,analyticsFrom:e.analyticsFrom,sessionId:e.sessionId})},W=function(e){return(0,y().IS)((t=>({wrapper:{width:400,padding:"0 24px",minHeight:e?478:void 0},settingsWrapper:{justifyContent:"center",gap:12},googleDriveDetailsContainer:{fontSize:14,fontWeight:w().Wy.regular,color:t.text.secondary,gap:12},driveNamesContainer:{gap:2,color:t.text.primary},footer:{justifyContent:"center",alignItems:"center",width:"100%",gap:8},disconnectButton:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"},moreDrivesContainer:{padding:"4px 0px 4px 0px"},learnMoreSection:{padding:"24px 0"},learnMoreButton:{fontSize:14,fontWeight:w().Wy.semibold,borderRadius:"4px",width:"100%"},learnMoreText:{fontWeight:w().Wy.medium,fontSize:12,gap:5,justifyContent:"center",alignItems:"center",padding:"4px 8px 4px 8px",color:`${t.text.secondary}`},externalLinkIcon:{width:16,height:16},confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:w().Wy.semibold,color:t.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:14,fontWeight:w().Wy.regular,color:t.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:14,fontWeight:w().Wy.regular,color:t.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:14,fontWeight:w().Wy.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},spinner:{paddingTop:20,justifyContent:"center",alignItems:"center"},driveItemWrapper:{width:"100%",padding:"4px 0px 4px 0px",alignItems:"center"},driveName:{fontSize:14},driveIcon:{width:20,color:t.text.secondary}})),[e])}(g);return(0,F.jsx)(k().A,{showCloseIcon:!0,open:"settings_screen"===c,onDismiss:()=>{(0,T().u4)({environment:A,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_close",integration_type:"google_drive",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),I([]),D("none")},render:()=>{var t,n,o;return(0,F.jsxs)("div",{style:W.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:L().u,title:"completed"===l?(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.settingsModalTitle",defaultMessage:"Google Drive is connected to Notion AI"}):(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.settingsModalTitle2",defaultMessage:"Google Drive is connecting to Notion AI"})}),g?(0,F.jsx)(M().Ye,{style:W.spinner,children:(0,F.jsx)(ge().A,{})}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(M().Ye,{style:W.settingsWrapper,children:(0,F.jsxs)(M().wt,{style:W.googleDriveDetailsContainer,children:[(0,F.jsx)(M().wt,{children:"completed"===l?(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.settingsModal.canAnswerFrom",defaultMessage:"Notion AI is connected and can answer questions with content from {driveCountMessage}{futureDrivesMessage}",values:{driveCountMessage:j.length?`${j.length} Google Drives`:"Google Drive",futureDrivesMessage:null!==(t=e.syncControlSelection)&&void 0!==t&&t.enableSyncingFutureUsersAndDrives?", including future drives and users.":"."}}):(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.settingsModal.canAnswerFrom2",defaultMessage:"This can take up to 36h. You can cancel or modify your settings when the connection is complete. "})}),(0,F.jsxs)(M().wt,{children:[(0,F.jsxs)(M().wt,{style:W.driveNamesContainer,children:[(null===(n=e.syncControlSelection)||void 0===n?void 0:n.enableSyncingFutureUsersAndDrives)&&(0,F.jsxs)(M().Ye,{style:W.driveItemWrapper,children:[(0,F.jsx)(M().wt,{style:W.driveIcon,children:(0,ut().E)({width:14,height:14})}),(0,F.jsx)(M().wt,{style:W.driveName,children:(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.settingsModal.includeCurrentAndFutureDrives",defaultMessage:"Includes current and future drives"})})})]}),null===(o=j.slice(0,4))||void 0===o?void 0:o.map((e=>(0,F.jsx)("div",{children:(0,F.jsxs)(M().Ye,{style:W.driveItemWrapper,children:[(0,F.jsx)(M().wt,{style:W.driveIcon,children:(0,ut().E)({width:14,height:14})}),(0,F.jsx)(M().wt,{style:W.driveName,children:`${e.name}`})]})},e.id)))]}),(0,F.jsx)(M().Ye,{style:W.moreDrivesContainer,children:j.length-4>0?(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.settingsModal.moreDrives",defaultMessage:"... and {moreDriveCount} more",values:{moreDriveCount:j.length-4}}):(0,F.jsx)(F.Fragment,{})})]})]})}),(0,F.jsxs)(M().wt,{style:W.footer,children:[x?(0,F.jsx)(pt,{styles:W.disconnectButton,isEditButtonEnabled:x,navigateToScreen:D}):(0,F.jsx)(gt().A,{allowHover:!0,textWrap:!0,renderTooltip:()=>(0,F.jsx)("div",{style:{width:240},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.editDrive.tooltip",defaultMessage:"You can cancel or modify your settings when the connection is complete. "})}),render:e=>(0,F.jsx)(pt,{events:e,styles:W.disconnectButton,isEditButtonEnabled:x,navigateToScreen:D})}),v?(0,F.jsx)(ht,{styles:W.disconnectButton,isDisconnectButtonEnabled:v,navigateToScreen:D}):(0,F.jsx)(gt().A,{allowHover:!0,textWrap:!0,renderTooltip:()=>(0,F.jsx)("div",{style:{width:240},children:(0,F.jsx)(_().sA,{id:"universalSearch.googleDriveIngestion.editDrive.tooltip",defaultMessage:"You can cancel or modify your settings when the connection is complete. "})}),render:e=>(0,F.jsx)(ht,{events:e,styles:W.disconnectButton,isDisconnectButtonEnabled:v,navigateToScreen:D})})]}),(0,F.jsx)(M().Ye,{style:W.learnMoreSection,children:(0,F.jsx)(C().A,{style:W.learnMoreButton,onClick:()=>{(0,T().u4)({environment:A,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_learn_more_url_click",integration_type:"google_drive",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),(()=>{const e=p().default.getConfigKey("ingestion","googleDrive"),t=null==e?void 0:e.learnMoreUrl;t&&window.open(t,"_blank")})()},children:(0,F.jsxs)(M().Ye,{style:W.learnMoreText,children:[(0,F.jsx)(_().sA,{id:"universalSearch.integration.learnMore",defaultMessage:"Learn more"}),(0,Ce().M)(W.externalLinkIcon)]})})})]})]})}})};function vt(){const e=(0,s().K8)((()=>h().d.state.screenToShow),[]),t=(0,s().K8)((()=>h().d.state.sessionId),[]),n=(0,s().K8)((()=>h().d.state.analyticsFrom),[]),o=(0,y().IS)((e=>({icon:{width:16,display:"inline-block"},wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:w().Wy.semibold,width:"100%"},iconWrapper:{width:16,height:16},chevronRightIcon:{width:14,height:14,fill:e.lightIconColor}})),[]);return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>(0,r().navigateToGoogleDriveUniversalScreen)({screenToShow:"none",sessionId:t,analyticsFrom:n}),open:"service_account_not_added"===e,render:()=>(0,F.jsxs)("div",{style:o.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:L().u,title:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.accountNotAdded.title",defaultMessage:"First, get your Google Workspace ready"}),subtext:(0,F.jsx)(_().sA,{id:"universalSearch.googleDrive.accountNotAdded.description",defaultMessage:"Before linking Google Drive with Notion, you'll need to modify a few settings in your Google Workspace."})}),(0,F.jsx)(M().wt,{style:o.footer,children:(0,F.jsxs)(J().A,{style:o.connectButton,onClick:()=>{const e=p().default.getConfigKey("ingestion","googleDrive"),t=null==e?void 0:e.learnMoreUrl;window.open(t,"_blank")},children:[(0,F.jsx)(_().sA,{id:"universalSearch.integration.seeInstruction",defaultMessage:"See instructions"}),(0,F.jsx)("div",{style:o.iconWrapper,children:(0,S().X)()})]})})]})})}const ft=(0,_().YK)({primedTextInput:{id:"assistant.universalQna.jiraConnectedNotificationTooltip.tryItPrimedInput",defaultMessage:"Find a Jira issue about: "}});function xt(){const e=(0,_().tz)(),t=(0,y().IS)((e=>({jiraIcon:{fill:e.blueColor,width:40,height:40}})),[]),n=(0,s().K8)((()=>m().y.state.screenToShow),[]),a=(0,s().K8)((()=>m().y.state.analyticsFrom),[]),r=(0,s().K8)((()=>m().y.state.sessionId),[]),c=(0,i().v3)(),l=(0,o.useCallback)((()=>{(0,T().u4)({environment:c,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"try_it_out_button_clicked",integration_type:"jira",setup_session_id:r,from:a}}}),m().y.setState({...m().y.state,screenToShow:"none"}),je().assistantMenuActions.openAssistantRightHandSideMenu({environment:c,from:"jira_already_connected",primeTextInput:e.formatMessage(ft.primedTextInput)})}),[c,e,a,r]);return(0,F.jsx)(ze,{open:"already_connected"===n,tryItOutHandler:l,integrationIcon:()=>(0,K().y)(t.jiraIcon),onDismiss:()=>{m().y.reset()},title:(0,F.jsx)(_().sA,{id:"universalQna.jira.alreadyConnected",defaultMessage:"Jira is already connected to Notion AI"}),subText1:(0,F.jsx)(_().sA,{id:"universalQna.jira.ConnectedDescription",defaultMessage:"You're fully set up."}),subText2:(0,F.jsx)(_().sA,{id:"universalQna.jira.tryIt",defaultMessage:"Try asking AI about Jira issues or projects!"})})}function yt(){const[e,t]=o.useState(!1),n=(0,i().v3)(),a=(0,y().IS)((e=>({noteHeading:{fontWeight:w().Wy.medium,fontSize:14,lineHeight:"18px"},jiraIcon:{fill:e.blueColor,width:40,height:40},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"0.2px"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},icon:{width:18,height:17,color:"#D7813A",marginTop:2},warningText:{fontSize:14,lineHeight:"18px",color:"#D7813A",paddingLeft:14,fontweight:w().Wy.regular,letterSpacing:"-0.15px"},warningContainer:{marginLeft:5,marginRight:5,marginBottom:15}})),[]),c=(0,s().K8)((()=>m().y.state.screenToShow),[]),l=(0,s().K8)((()=>m().y.state.analyticsFrom),[]),d=(0,s().K8)((()=>m().y.state.sessionId),[]),g=(0,s().K8)((()=>u().default.state.currentUserStore),[]),h=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),v=(0,o.useCallback)((async()=>{if(!h)return;var e;(0,T().u4)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"check_connection_button_clicked",integration_type:"jira",setup_session_id:d,from:l}}}),await(e=5e3,new Promise((t=>setTimeout(t,e))));const o=await b().callApi({eventName:"checkNotionToJiraConnection",environment:n,data:{spaceId:h}});"success"===o.type&&o.data.isConnected?(m().y.setState({...m().y.state,screenToShow:"connection_complete_screen",jiraSiteId:o.data.jiraSiteId}),(0,r().navigateToJiraUniversalScreen)({screenToShow:"connection_complete_screen",analyticsFrom:l,sessionId:d})):t(!0)}),[l,n,d,h]),f=(0,s().K8)((()=>p().default.getConfigKey("jira_ai_ingestion_config","jiraMarketPlaceAppUrl")),[]),x=(0,s().K8)((()=>p().default.getConfigKey("jira_ai_ingestion_config","learnMoreUrl")),[]);if(!g||!h)return null;const S=e?(0,F.jsxs)(M().Ye,{style:a.warningContainer,children:[(0,Pe().Q)(a.icon),(0,F.jsx)("div",{style:a.warningText,children:(0,F.jsx)(_().sA,{id:"universalQnA.jira.AuthScreen.warning",defaultMessage:"We couldn’t connect to Jira. Please review the instructions and try again, or check our {TroubleshootingGuide}",values:{TroubleshootingGuide:(0,F.jsx)("a",{style:{...a.link,color:"#D7813A"},href:x,target:"_blank",onClick:()=>{(0,T().u4)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"trouble_shooting_guide_clicked",integration_type:"jira",setup_session_id:d,from:l}}})},children:(0,F.jsx)(_().sA,{id:"universalSearch.jira.troubleShootingLink",defaultMessage:"troubleshooting guide."})})}})})]}):void 0;return(0,F.jsx)(Le,{title:(0,F.jsx)(_().sA,{id:"universalQnA.jira.AuthScreen",defaultMessage:"Follow instructions from Jira in your browser"}),open:"check_connection"===c,onDismiss:()=>{t(!1),(0,T().u4)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"auth_screen_dismiss",integration_type:"jira",setup_session_id:d,from:l}}}),(0,r().navigateToJiraUniversalScreen)({screenToShow:"none",analyticsFrom:l,sessionId:d})},warningMessage:S,notes:[(0,F.jsxs)(M().wt,{style:{gap:4},children:[(0,F.jsx)("div",{style:a.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.jira.waitingForConnectionNoteHeading1",defaultMessage:"Jira should open automatically on a new browser tab."},"note1-1")}),(0,F.jsx)("div",{style:a.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.jira.authWaiting2",defaultMessage:"If it doesn't, {ClickHereToRetry}",values:{ClickHereToRetry:(0,F.jsx)("a",{style:a.link,href:f,target:"_blank",onClick:()=>{(0,T().u4)({environment:n,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"auth_screen_open_auth_url",integration_type:"jira",setup_session_id:d,from:l}}})},children:(0,F.jsx)(_().sA,{id:"universalSearch.jira.confirmModalNote1Retry",defaultMessage:"click here to retry"})})}},"note1-2")})]},"note-1"),(0,F.jsxs)(M().wt,{style:{gap:4},children:[(0,F.jsx)("div",{style:a.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.jira.workspaceAdminHeading",defaultMessage:"Follow Jira’s instructions to connect"},"note2")}),(0,F.jsx)("div",{style:a.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.jira.authWaiting",defaultMessage:"Install the Notion connector in a Jira site of your choice and return to this window"},"note1-2")})]},"note-2"),(0,F.jsx)(M().wt,{style:{gap:4},children:(0,F.jsx)("div",{style:a.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.jira.workspaceAdminHeading2",defaultMessage:"When you’re done, click the button below"},"note3")})},"note-3")],openLearnMoreUrl:()=>{window.open(x,"_blank")},integrationIcon:()=>(0,K().y)(a.jiraIcon),primaryButtonText:(0,F.jsx)(_().sA,{id:"universalSearch.jira.Button.finishedSetup",defaultMessage:"Check connection"},"note3-1"),onClickPrimaryButton:v})}const St=(0,_().YK)({copyTextMessage:{id:"universalSearch.jira.connectionComplete.jiraTitle.copyMessage",defaultMessage:"Our Notion AI is now connecting to Jira. When you ask Notion AI a question, it'll be able to reference info across your Jira site. Click the button at the bottom right of your Notion app to give it a try!"}});function jt(){const e=(0,i().v3)(),t=(0,y().IS)((e=>({headingText:{fontSize:w().J.UIRegular.desktop,letterSpacing:"-0.154px",color:`${e.text.primary}`,paddingBottom:8,fontWeight:w().Wy.medium},circle:{marginRight:8},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer",paddingLeft:2},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:w().J.UIRegular.desktop,lineHeight:"18px",letterSpacing:"-0.154px",display:"flex"},jiraIcon:{fill:e.blueColor,width:40,height:40}})),[]),n=(0,s().K8)((()=>m().y.state.screenToShow),[]),a=(0,s().K8)((()=>m().y.state.sessionId),[]),c=(0,s().K8)((()=>m().y.state.analyticsFrom),[]),l=(0,s().K8)((()=>m().y.state.sessionId),[]),d=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);let g=(0,s().K8)((()=>m().y.state.jiraSiteId),[]);const p=(0,s().K8)((()=>m().y.state.jiraSyncState),[]),[h,v]=(0,o.useState)(!1),f="in_progress"===p;return(0,F.jsx)(We,{open:"connection_complete_screen"===n,onDismiss:()=>{(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"completion_screen_dismiss",integration_type:"jira",setup_session_id:a,from:c}}})},onCopiedClick:()=>{(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"copy_button_clicked",integration_type:"jira",setup_session_id:a,from:c}}})},title:(0,F.jsx)(_().sA,{id:"universalSearch.jira.connectionComplete.jiraTitle",defaultMessage:"You’re done!"}),integrationIcon:()=>(0,K().y)(t.jiraIcon),subText:(0,F.jsx)(_().sA,{id:"universalSearch.jira.connectionComplete.jiraTitle.subText",defaultMessage:"Here’s what’s next:"}),primaryButtonText:(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.jiraIngestion.connectionComplete.confirmConnection",defaultMessage:"Done"}),notes:[(0,F.jsxs)(M().Ye,{style:t.headingText,children:[(0,F.jsx)(A().A,{number:1,style:t.circle}),(0,F.jsxs)(M().wt,{children:[(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.jiraIngestion.connectionComplete.listpoint1",defaultMessage:"Connecting your Jira site may take up to 36h."},"note1"),!f&&(0,F.jsx)("div",{style:t.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.jira.selectJiraProjects",defaultMessage:"If you want to choose Jira projects, {clickHere}",values:{clickHere:h?(0,F.jsx)(ge().A,{}):(0,F.jsx)("a",{style:t.link,onClick:async()=>{if(!d)return;(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"jira_settings",integration_type:"jira",setup_session_id:a,from:c}}}),v(!0);const t=await(0,r().getJiraAIConnectionStatusAction)({environment:e,spaceId:d});if(t){var n;const e=null===(n=t.connectionState)||void 0===n?void 0:n.status;"in_progress"===e?(0,r().navigateToJiraUniversalScreen)({analyticsFrom:c,sessionId:a,screenToShow:"settings_screen"}):"not_started"===e||"pending_selection"===e?(0,r().navigateToJiraUniversalScreen)({analyticsFrom:c,sessionId:a,screenToShow:"select_projects"}):(0,r().navigateToJiraUniversalScreen)({analyticsFrom:c,sessionId:a,screenToShow:"error"})}else(0,r().navigateToJiraUniversalScreen)({analyticsFrom:c,sessionId:a,screenToShow:"error"});v(!1)},children:(0,F.jsx)(_().sA,{id:"universalSearch.jira.settings",defaultMessage:"click here."})})}},"note1-1")})]})]},"item1"),(0,F.jsxs)(M().Ye,{style:t.headingText,children:[(0,F.jsx)(A().A,{number:2,style:t.circle}),(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.jiraIngestion.connectionComplete.listpoint2",defaultMessage:"Notion AI will be ready to answer questions across Notion and Jira knowledge."},"note2")]},"item2"),(0,F.jsxs)(M().Ye,{style:t.headingText,children:[(0,F.jsx)(A().A,{number:3,style:t.circle}),(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.jiraIngestion.connectionComplete.listpoint3",defaultMessage:"Copy the message below to let your team know!"})]},"item3")],copyTextMessage:St.copyTextMessage,onPrimaryButtonClick:async()=>{var t,n;if(!d)return;if((0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"completion_screen_done",integration_type:"jira",setup_session_id:a,from:c}}}),f||"completed"===p)return void(0,r().navigateToJiraUniversalScreen)({analyticsFrom:c,sessionId:l,screenToShow:"none"});const o=await(0,r().getJiraAIConnectionStatusAction)({environment:e,spaceId:d});if(g=(null==o?void 0:o.jiraSiteId)??"",g){if("in_progress"===(null==o||null===(t=o.connectionState)||void 0===t?void 0:t.status)||"completed"===(null==o||null===(n=o.connectionState)||void 0===n?void 0:n.status))return X().D6({label:ke().A.getIntl().formatMessage({defaultMessage:"Jira sync started. This can take up to 36 hours.",id:"jira.sync.started.background.3"}),position:"bottom"}),void(0,r().navigateToJiraUniversalScreen)({analyticsFrom:c,sessionId:l,screenToShow:"none"});await(0,r().startJiraBulkIngestionAction)({environment:e,spaceId:d,jiraSiteId:g,sessionId:l}),(0,r().navigateToJiraUniversalScreen)({analyticsFrom:c,sessionId:l,screenToShow:"none"})}else(0,r().navigateToJiraUniversalScreen)({analyticsFrom:c,sessionId:l,screenToShow:"error"})}})}const _t=(0,_().YK)({note1Heading:{id:"universalSearch.jiraIngestion.post_disconnect_screen.note_1.heading",defaultMessage:"Jira data will be permanently deleted from Notion"},note1Body:{id:"universalSearch.jiraIngestion.post_disconnect_screen.note_1.body",defaultMessage:"This process can take up to 3 hours. You'll only be able to reconnect after disconnecting is complete."},note2Heading:{id:"universalSearch.jiraIngestion.post_disconnect_screen.note_2.heading",defaultMessage:"Uninstall the Notion AI app from your Jira Site (optional)"},postDisconnectTitle:{id:"universalSearch.jiraIngestion.post_disconnect_modal.title",defaultMessage:"Jira is disconnecting from Notion AI"},postDisconnectDescription:{id:"universalSearch.jiraIngestion.post_disconnect_modal.description",defaultMessage:"Here's what's next:"},disconnectTitle:{id:"universalSearch.jiraIngestion.disconnectModal.title",defaultMessage:"Are your sure?"},disconnectSubTitle:{id:"universalSearch.jiraIngestion.disconnectModal.subTitle",defaultMessage:"Jira data will be permanently deleted from Notion."},disconnectDescription:{id:"universalSearch.jiraIngestion.disconnectModal.description",defaultMessage:"This process can take up to 3 hours, and you'll only be able to reconnect after disconnecting is complete."},primaryButtonLabel:{id:"universalSearch.jiraIngestion.disconnectModal.confirmDisconnect",defaultMessage:"Disconnect for everyone"},goBackButtonLabel:{id:"universalSearch.jiraIngestion.disconnectModal.goBack",defaultMessage:"Go back"}});function wt(){const e=(0,y().IS)((e=>({confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:w().Wy.semibold,color:e.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.medium,color:e.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},notesSectionWrapper:{padding:"12px 12px 12px 12px",gap:13},noteBlockWrapper:{marginBottom:12,gap:8},note:{fontWeight:w().Wy.regular,fontSize:w().J.UIRegular.desktop,lineHeight:"18px"},noteHeading:{fontWeight:w().Wy.medium,fontSize:w().J.UIRegular.desktop,lineHeight:"18px"},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:w().J.UIRegular.desktop,lineHeight:"18px",letterSpacing:"0.2px"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},icon:{rotate:"45deg",width:12,height:12,cursor:"pointer",display:"inline",padding:0,margin:0},jiraIcon:{fill:e.blueColor,width:40,height:40}})),[]),[t,n]=(0,o.useState)(!1),a=(0,s().O$)(m().y),c=(0,s().K8)((()=>a.jiraSiteId),[a]),l=(0,s().K8)((()=>a.jiraSiteUrl),[a]),d=(0,s().K8)((()=>m().y.state.screenToShow),[]),g=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),p=(0,s().K8)((()=>m().y.state.analyticsFrom),[]),h=(0,s().K8)((()=>m().y.state.sessionId),[]),v=(0,i().v3)(),f=async()=>{if(!g)return;const e=await async function(e){const{environment:t,spaceId:n,jiraSiteId:o}=e,i=await b().callApi({eventName:"disconnectJiraConnector",environment:t,data:{spaceId:n,jiraSiteId:o}});if("success"===i.type)return X().D6({label:ke().A.getIntl().formatMessage({defaultMessage:"Started disconnecting Jira. This can take up to 3 hours.",id:"jira.disconnect.started"}),position:"bottom",style:{width:"400px",display:"flex",justifyContent:"space-between"}}),!0;return!1}({environment:v,spaceId:g,jiraSiteId:c});e&&m().y.setState({...a,jiraSyncState:"disconnecting",isDisconnecting:!0,screenToShow:"post_disconnect_screen"})},x=(0,o.useCallback)((()=>{const{noteBlockWrapper:t,noteHeading:n,noteBody:o,link:i}=e;return[(0,F.jsxs)(M().wt,{style:t,children:[(0,F.jsx)("div",{style:n,children:(0,F.jsx)(_().sA,{..._t.note1Heading})}),(0,F.jsx)("div",{style:o,children:(0,F.jsx)(_().sA,{..._t.note1Body})})]},"note-1"),(0,F.jsxs)(M().wt,{style:t,children:[(0,F.jsx)("div",{style:n,children:(0,F.jsx)(_().sA,{..._t.note2Heading})}),(0,F.jsx)("div",{style:o,children:(0,F.jsx)(_().sA,{id:"universalSearch.jiraIngestion.post_disconnect_screen.note_2.body",defaultMessage:"Go to your {NavigateToJiraSiteSettings} and uninstall the Notion AI app.",values:{NavigateToJiraSiteSettings:(0,F.jsx)("a",{style:i,href:`${l}/plugins/servlet/upm`,target:"_blank",onClick:()=>{(0,T().u4)({environment:v,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_screen_marketplace_app_disconnect_btn",integration_type:"jira",setup_session_id:h,from:p}}})},children:(0,F.jsx)(_().sA,{id:"universalSearch.jiraIngestion.post_disconnect_screen.disconnect_jira_marketplace_app",defaultMessage:"Jira Site {ArrowIcon}",values:{ArrowIcon:(0,ot().q)(e.icon)}})})}},"note2-2")})]},"note-2")]}),[e,l,v,h,p]);return"post_disconnect_screen"===d?(0,F.jsx)(it,{onClickGotItBtn:()=>{m().y.setState({...a,screenToShow:"none"})},onDismiss:()=>{m().y.setState({...a,screenToShow:"none"})},open:"post_disconnect_screen"===d,integrationIcon:()=>(0,K().y)(e.jiraIcon),title:(0,F.jsx)(_().sA,{..._t.postDisconnectTitle}),descriptionMessage:(0,F.jsx)(_().sA,{..._t.postDisconnectDescription}),message:(0,F.jsx)("div",{style:e.notesSectionWrapper,children:x().map(((t,n)=>(0,F.jsxs)(M().Ye,{gap:8,style:{marginTop:4,marginBottom:6},children:[(0,F.jsx)(A().A,{number:n+1}),(0,F.jsx)("div",{style:e.note,children:t})]},n)))})}):(0,F.jsx)(k().A,{showCloseIcon:!0,open:"disconnect_screen"===d,onDismiss:()=>{m().y.setState({...a,screenToShow:"none"})},render:()=>(0,F.jsx)("div",{style:e.confirmWrapper,children:(0,F.jsxs)("div",{style:e.confirmContainer,children:[(0,F.jsx)("div",{style:e.confirmModalTitle,children:(0,F.jsx)(_().sA,{..._t.disconnectTitle})}),(0,F.jsx)("div",{style:e.confirmModalSubTitle,children:(0,F.jsx)(_().sA,{..._t.disconnectSubTitle})}),(0,F.jsx)("div",{style:e.confirmModalDescription,children:(0,F.jsx)(_().sA,{..._t.disconnectDescription})}),(0,F.jsxs)(M().wt,{style:e.confirmModalActionButtons,children:[(0,F.jsx)(J().A,{isRed:!0,style:e.confirmDisconnectButton,isLoading:t,onClick:async()=>{(0,T().u4)({environment:v,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"disconnect_modal_confirm_disconnect_button",integration_type:"jira",setup_session_id:h,from:p}}}),n(!0),await f(),n(!1)},children:(0,F.jsx)(_().sA,{..._t.primaryButtonLabel})}),(0,F.jsx)(C().A,{style:e.goBackButton,onClick:()=>{(0,r().navigateToJiraUniversalScreen)({screenToShow:"settings_screen",analyticsFrom:a.analyticsFrom,sessionId:a.sessionId})},children:(0,F.jsx)(_().sA,{..._t.goBackButtonLabel})})]})]})})})}function bt(){const e=(0,s().K8)((()=>m().y.state.screenToShow),[]),t=(0,s().K8)((()=>m().y.state.sessionId),[]),n=(0,s().K8)((()=>m().y.state.analyticsFrom),[]),o=(0,y().IS)((e=>({jiraIcon:{fill:e.blueColor,width:40,height:40},wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:w().Wy.semibold,width:"100%"},iconWrapper:{width:16,height:16},chevronRightIcon:{width:14,height:14,fill:e.lightIconColor}})),[]),i="error"===e;return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>(0,r().navigateToJiraUniversalScreen)({screenToShow:"none",analyticsFrom:n,sessionId:t}),open:i,render:()=>(0,F.jsxs)("div",{style:o.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:()=>(0,K().y)(o.jiraIcon),title:(0,F.jsx)(_().sA,{id:"universalSearch.jira.error.title",defaultMessage:"Oops! Something went wrong"}),subtext:(0,F.jsx)(_().sA,{id:"universalSearch.jira.error.description",defaultMessage:"Something went wrong, please try again later."})}),(0,F.jsx)(M().wt,{style:o.footer,children:(0,F.jsx)(J().A,{style:o.connectButton,onClick:()=>{(0,r().navigateToJiraUniversalScreen)({screenToShow:"none",analyticsFrom:n,sessionId:t})},children:(0,F.jsx)(_().sA,{id:"universalSearch.jira.error.Dismiss",defaultMessage:"Close"})})})]})})}function It(){const[e,t]=o.useState(!1),n=(0,o.useMemo)((()=>ye("jira")),[]),a=(0,o.useMemo)((()=>xe("jira")),[]),c=(0,o.useRef)(!1),l=(0,y().IS)((e=>({jiraIcon:{fill:e.blueColor,width:40,height:40}})),[]),d=(0,i().v3)(),h=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),v=(0,s().K8)((()=>m().y.state.screenToShow),[]),f=(0,s().K8)((()=>m().y.state.analyticsFrom),[]),x=(0,s().K8)((()=>m().y.state.sessionId),[]),S=(0,s().K8)((()=>g().zD.isJiraQnaEnabled()),[]),j=(0,ee().n)(),_=(0,s().K8)((()=>u().default.state.currentUserStore),[]),w=(0,Z().J)(),I="info_screen"===v,C=(0,s().K8)((()=>p().default.getConfigKey("jira_ai_ingestion_config","learnMoreUrl")),[]);return(0,o.useEffect)((()=>{h&&w&&"info_screen"===v&&(c.current||((0,T().u4)({environment:d,event:{eventName:"universal_qna_onboarding_modal_open",eventProperties:{integration_type:"jira",setup_session_id:x,from:f,is_space_admin:w,is_ai_eligible:j}}}),c.current=!0))}),[h,d,v,x,f,w,j]),S?d.device.isMobile?(0,F.jsx)(Se,{logo:K().y,appName:"Jira",open:I,onClosed:()=>{m().y.reset()},learnMoreUrl:C}):w?(0,F.jsx)(Q,{integrationIcon:()=>(0,K().y)(l.jiraIcon),notes:n,onLearnMore:()=>{window.open(C,"_blank")},onConnect:async()=>{h&&_&&await async function(e,t,n,o,i,s){(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"info_screen_connect",integration_type:"jira",setup_session_id:o,from:i}}}),s(!0);const a=await(0,r().getJiraAIConnectionStatusAction)({environment:e,spaceId:n});if(a){const{connectionState:t}=a;if("not_started"===t.status){(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"check_connection_screen_open",integration_type:"jira",setup_session_id:o,from:i}}});if("success"===(await b().callApi({eventName:"addNotionInfoForJiraAIConnection",environment:e,data:{spaceId:n}})).type){(0,r().navigateToJiraUniversalScreen)({screenToShow:"check_connection",analyticsFrom:i,sessionId:o});const t=p().default.getConfigKey("jira_ai_ingestion_config","jiraMarketPlaceAppUrl");t&&((0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"app_install_url_opened",integration_type:"jira",setup_session_id:o,from:i}}}),window.open(t,"_blank"))}}else"pending_selection"===t.status?((0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"project_selection_screen_open",integration_type:"jira",setup_session_id:o,from:i}}}),(0,r().navigateToJiraUniversalScreen)({screenToShow:"connection_complete_screen",analyticsFrom:i,sessionId:o})):"in_progress"===t.status||"editing"===t.status?((0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_open",integration_type:"jira",setup_session_id:o,from:i}}}),(0,r().navigateToJiraUniversalScreen)({screenToShow:"settings_screen",analyticsFrom:i,sessionId:o})):"completed"===t.status?((0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"already_connected_screen_open",integration_type:"jira",setup_session_id:o,from:i}}}),(0,r().navigateToJiraUniversalScreen)({screenToShow:"already_connected",analyticsFrom:i,sessionId:o})):(0,r().navigateToJiraUniversalScreen)({screenToShow:"error",analyticsFrom:i,sessionId:o})}s(!1)}(d,0,h,x,f,t)},onDismiss:()=>{(0,T().u4)({environment:d,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"info_screen_dismiss",integration_type:"jira",setup_session_id:x,from:f}}}),(0,r().navigateToJiraUniversalScreen)({screenToShow:"none",analyticsFrom:f,sessionId:x}),c.current=!1},title:a,isLoading:e,titleWidth:352,open:I}):(0,F.jsx)(de,{connector:"jira",handleClose:()=>(0,r().resetAiConnectorStatus)("jira"),open:I,analyticsFrom:f,setupSessionId:x,messages:re().z$}):(0,F.jsx)(F.Fragment,{})}var Ct=()=>n(496603),At=()=>n(623580),kt=()=>n(962730);const Mt=(0,_().YK)({searchForAProject:{id:"universalQnA.jira.searchForAProject",defaultMessage:"Search for a Project"},disabledTooltip:{id:"universalSearch.jira.disabledTooltip",defaultMessage:"You can only interact after all projects are loaded"}});function Tt(){const[e,t]=o.useState(""),[n,c]=o.useState(!1),[l,d]=o.useState(!1),g=(0,s().K8)((()=>m().y.state.syncControl),[]),[p,h]=o.useState([]),[v,f]=o.useState(!0),[x,S]=o.useState(!0),[j,I]=o.useState(0),[C,A]=o.useState(!1),D=function(e){return(0,y().IS)((t=>({wrapper:{width:400,display:"flex",flexDirection:"column",minHeight:530},jiraIcon:{fill:t.blueColor,width:40,height:40},jiraSmallIcon:{fill:t.blueColor,width:18,height:18},logoSection:{padding:"20px 20px 9px 20px",gap:8,justifyContent:"center",alignItems:"center",height:84},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:t.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center"},title:{fontSize:17,fontWeight:w().Wy.medium,lineHeight:"22px",marginBottom:"9px"},subtext:{fontSize:12,lineHeight:"14.52px",color:t.text.secondary},footer:{position:"absolute",width:"100%",justifySelf:"flex-end",boxShadow:"0px 9px 24px 0px #0F0F0F33",padding:"16px 20px 16px 20px",gap:12,bottom:0},connectButton:{fontSize:14,fontWeight:w().Wy.semibold,width:360},searchBarWrapper:{justifyContent:"center"},searchBar:{width:360,padding:4},selectionContainer:{marginTop:18,marginBottom:0,width:"100%",height:"100%",justifyContent:"center",padding:"0px 20px 0px"},selection:{width:"100%"},waitingForConnection:{fontSize:12,lineHeight:"16px",color:t.text.secondary},waitingForConnectionWrapper:{gap:4},tryAgainWrapper:{marginTop:16,gap:4},tryAgainSection:{gap:4,alignItems:"center",marginBottom:16,color:t.text.secondary},tryAgainText:{fontSize:14},channelItem:{gap:4,alignItems:"center"},channelsText:{fontSize:12,lineHeight:"16px",display:"flex",flexDirection:"row",gap:4},divider:{marginTop:5,marginBottom:5},alertIcon:{width:16,height:16},tryAgainButton:{fontSize:12,width:80},futureChannelsCheckboxWrapper:{gap:4,visibility:"visible"},loadingChannelsWrapper:{alignItems:"center",gap:8,fontSize:12,color:t.text.secondary,marginTop:8},selectionWrapper:{overflowY:"scroll",maxHeight:e?170:124},loadMoreButtonWrapper:{fontSize:12,paddingTop:8,paddingBottom:4},loadMoreButtonhoveredStyle:{background:"none"},channelItemWrapper:{marginTop:12},workspaceAdministratorHeading:{fontSize:14,fontWeight:w().Wy.regular,color:t.text.primary},orderedList:{paddingLeft:18,fontSize:14,fontWeight:w().Wy.regular,color:t.text.secondary},waitingForConnectionNote:{paddingBottom:4},note:{fontWeight:w().Wy.regular,fontSize:14,lineHeight:"18px",width:330,marginLeft:8},noteHeading:{fontWeight:w().Wy.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:w().Wy.regular,color:t.text.secondary,fontSize:14,lineHeight:"18px"},learnMoreButton:{gap:4,alignItems:"center",fontSize:14,color:t.text.secondary,justifyContent:"center"},buttonContainer:{justifyContent:"center"},link:{color:t.text.secondary,textDecoration:"underline",cursor:"pointer"},loadingChannels:{color:t.text.secondary},loadingWrapper:{alignItems:"center",gap:4}})),[e])}(l),W=(0,s().K8)((()=>m().y.state.analyticsFrom),[]),B=(0,s().K8)((()=>m().y.state.sessionId),[]),N=(0,s().K8)((()=>m().y.state.jiraSiteId),[]),z=(0,s().K8)((()=>m().y.state.screenToShow),[]),P=(0,i().v3)(),L=(0,s().K8)((()=>{var e;return null===(e=u().default.getState().currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),H=(0,s().O$)(m().y),R="completed"===(0,s().K8)((()=>m().y.state.jiraSyncState),[]),Y=(0,o.useCallback)((async()=>{if(!L)return;(0,T().u4)({environment:P,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"project_selection_connect_button_clicked",integration_type:"jira",setup_session_id:B,from:W}}});let e,t=[],n=[];if(x?n=p.filter((e=>!e.checked)).map((e=>({id:e.id,name:e.name}))):t=p.filter((e=>e.checked)).map((e=>({id:e.id,name:e.name}))),c(!0),R)e=await(0,r().startJiraEditFlow)({environment:P,spaceId:L,jiraSiteId:N,inclusionList:t,exclusionList:n});else{var o,i;const s=await(0,r().getJiraAIConnectionStatusAction)({environment:P,spaceId:L});if("in_progress"===(null==s||null===(o=s.connectionState)||void 0===o?void 0:o.status)||"completed"===(null==s||null===(i=s.connectionState)||void 0===i?void 0:i.status))return X().D6({label:ke().A.getIntl().formatMessage({defaultMessage:"Jira is already syncing. This can take up to 36 hours.",id:"jira.sync.started.background.2"}),position:"bottom"}),void(0,r().navigateToJiraUniversalScreen)({analyticsFrom:W,sessionId:B,screenToShow:"none"});e=await(0,r().startJiraBulkIngestionAction)({environment:P,spaceId:L,jiraSiteId:N,sessionId:B,inclusionList:t,exclusionList:n})}e?(0,r().navigateToJiraUniversalScreen)({analyticsFrom:W,screenToShow:"none",sessionId:B}):(0,r().navigateToJiraUniversalScreen)({analyticsFrom:W,screenToShow:"error",sessionId:B}),c(!1)}),[L,x,P,N,p,W,B,R]),q=(0,o.useCallback)((()=>p.find((e=>e.checked))),[p]),G=(0,o.useCallback)((e=>{const t=p.map((t=>t.id===e?{...t,checked:!t.checked}:t));h(t);const n=t.find((e=>e.checked)),o=t.find((e=>!e.checked));let i=!1;n&&o?i="partial":n&&(i=!0),f(i)}),[p]);(0,o.useEffect)((()=>{"select_projects"===z&&(0===g.inclusionList.length&&0===g.exclusionList.length?f(!0):f("partial"),S(0===g.inclusionList.length))}),[z,g]);const E=(0,o.useCallback)((()=>{f(!v),h((e=>e.map((e=>({...e,checked:!v})))))}),[v]),O=(0,o.useCallback)((e=>{const t=p.find((t=>t.id===e));return!(null==t||!t.checked)}),[p]),Q=(0,o.useCallback)((async e=>{if(!L)return;A(!0);const t=await b().callApi({eventName:"getJiraProjects",environment:P,data:{spaceId:L,jiraSiteId:N,startAt:e}});if("success"===t.type){h((e=>{const n=t.data.projects.map((e=>{let t=!1;return 0===g.inclusionList.length&&0===g.exclusionList.length?t=!0:g.inclusionList.length>0?t=!!g.inclusionList.find((t=>t.id===e.id)):g.exclusionList.length>0&&(t=!g.exclusionList.find((t=>t.id===e.id))),{...e,checked:t}}));return(0,Ct().hS)([...e,...n],(e=>e.id))})),I(t.data.total);const n=e+t.data.projects.length;n>e?Q(n):d(!0)}}),[P,L,N,g]),$=(0,o.useCallback)((()=>(0,F.jsxs)(M().wt,{children:[(0,F.jsxs)(M().Ye,{style:D.channelItem,children:[(0,F.jsx)(gt().A,{render:e=>(0,F.jsx)("div",{...e,children:(0,F.jsx)(qe().A,{checked:v,checkSize:10,size:14,disabled:!l,onClick:()=>{(0,T().u4)({environment:P,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:v?"all_projects_deselected":"all_projects_selected",integration_type:"jira",setup_session_id:H.sessionId,from:H.analyticsFrom}}}),E()}})}),renderTooltip:()=>(0,F.jsx)("div",{style:{width:280},children:(0,F.jsx)(_().sA,{...Mt.disabledTooltip})}),disableTooltip:l}),(0,F.jsxs)("div",{style:D.channelsText,children:[(0,K().y)(D.jiraSmallIcon),(0,F.jsx)(_().sA,{id:"universalSearch.integration.jiraIngestion.allProjects",defaultMessage:"All projects"})]})]}),(0,F.jsx)(Ge().A,{style:D.divider,size:4}),(0,F.jsxs)(F.Fragment,{children:[l?(0,F.jsx)(F.Fragment,{}):(0,F.jsxs)(M().Ye,{style:D.loadingChannelsWrapper,children:[(0,F.jsx)(ge().A,{}),(0,F.jsxs)(M().wt,{children:[(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"universalSearch.integration.jiraIngestion.loadedXProjects",defaultMessage:"{projectsCount} of {totalProjects} projects loaded",values:{projectsCount:p.length,totalProjects:j}})}),(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"universalSearch.integration.jiraIngestion.loading1000PerMinute",defaultMessage:"This can take one minute per every 1,000 projects."})})]})]}),(0,F.jsx)(M().wt,{style:D.selectionWrapper,children:(e?p.filter((t=>t.name.toLowerCase().includes(e.toLowerCase()))):p).map((e=>(0,F.jsxs)(M().Ye,{gap:8,style:D.channelItemWrapper,children:[(0,F.jsx)(gt().A,{render:t=>(0,F.jsx)("div",{...t,children:(0,F.jsx)(qe().A,{checked:O(e.id),disabled:!l,onClick:()=>{(0,T().u4)({environment:P,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:O(e.id)?"specific_project_deselected":"specific_project_selected",integration_type:"jira",setup_session_id:H.sessionId,from:H.analyticsFrom}}}),G(e.id)},checkSize:10,size:14},`${e.id}-checkbox`)}),renderTooltip:()=>(0,F.jsx)("div",{style:{width:280},children:(0,F.jsx)(_().sA,{...Mt.disabledTooltip})}),disableTooltip:l}),(0,K().y)(D.jiraSmallIcon),(0,F.jsx)("div",{style:D.channelsText,children:` ${e.name}`},`${e.id}-label`)]},e.id)))})]})]})),[D,l,p,j,e,v,P,H.sessionId,H.analyticsFrom,E,O,G]);return(0,a().Yb)((async()=>{L&&N&&"select_projects"===z&&!l&&!C&&await Q(0)}),[L,Q,z,N,l,C]),(0,F.jsx)(k().A,{showCloseIcon:!0,open:"select_projects"===z,onDismiss:()=>{(0,T().u4)({environment:P,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_close",integration_type:"jira",setup_session_id:B,from:W}}}),(0,r().navigateToJiraUniversalScreen)({analyticsFrom:W,screenToShow:"none",sessionId:B})},render:()=>(0,F.jsxs)("div",{style:D.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:()=>(0,K().y)(D.jiraIcon),title:(0,F.jsx)(_().sA,{id:"universalQnA.jira.projectSelectionScreenTitle",defaultMessage:"Select projects to connect"}),subtext:(0,F.jsx)(_().sA,{id:"universalQnA.jira.projectSelectionScreenSubtext",defaultMessage:"Connecting more Jira projects will give you more relevant and useful Notion AI responses"})}),(0,F.jsx)(Ee().A,{capture:!0,allowEsc:!0,render:()=>(0,F.jsx)(gt().A,{textWrap:!0,placement:kt().W.Top,render:n=>(0,F.jsx)("div",{...n,children:(0,F.jsx)(M().Ye,{...n,style:D.searchBarWrapper,children:(0,F.jsx)(At().A,{id:"jiraUniversalQnASearchBar",style:D.searchBar,disabled:!l,placeholder:ke().A.formatMessage(Mt.searchForAProject),value:e,onChange:e=>{t(e.target.value),(0,T().u4)({environment:P,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"filter_jira_projects",integration_type:"jira",setup_session_id:B,from:W}}})}},"jiraUniversalQnASearchBar")})}),renderTooltip:()=>(0,F.jsx)("div",{style:{width:280},children:(0,F.jsx)(_().sA,{...Mt.disabledTooltip})}),disableTooltip:l})}),(0,F.jsx)(M().Ye,{style:D.selectionContainer,children:(0,F.jsx)(M().wt,{style:D.selection,children:$()})}),(0,F.jsxs)(M().wt,{style:D.footer,children:[(0,F.jsxs)(M().Ye,{style:D.futureChannelsCheckboxWrapper,children:[(0,F.jsx)(gt().A,{render:e=>(0,F.jsx)("div",{...e,children:(0,F.jsx)(qe().A,{checked:x,checkSize:10,disabled:!l,size:14,onClick:()=>{(0,T().u4)({environment:P,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:x?"dont_join_future_projects":"join_future_projects",integration_type:"jira",setup_session_id:H.sessionId,from:H.analyticsFrom}}}),S(!x)}})}),renderTooltip:()=>(0,F.jsx)("div",{style:{width:280},children:(0,F.jsx)(_().sA,{...Mt.disabledTooltip})}),disableTooltip:l}),(0,F.jsx)("div",{style:D.channelsText,children:(0,F.jsx)(_().sA,{id:"universalSearch.integration.jiraIngestion.allFutureProjects",defaultMessage:"Add projects created in future"})})]}),(0,F.jsx)(gt().A,{render:e=>(0,F.jsx)("div",{...e,children:(0,F.jsx)(J().A,{isLoading:n,style:D.connectButton,onClick:Y,disabled:!q()||!l,children:(0,F.jsx)(_().sA,{id:"universalSearch.integration.connect",defaultMessage:"Connect"})})}),renderTooltip:()=>(0,F.jsx)("div",{style:{width:280},children:(0,F.jsx)(_().sA,{...Mt.disabledTooltip})}),disableTooltip:l})]})]})})}const Dt=(0,_().YK)({settingsModalTitle:{id:"universalSearch.jiraIngestion.settingsModalTitle",defaultMessage:"Jira is connected to Notion AI"},settingsModalPendingTitle:{id:"universalSearch.jiraIngestion.settingsModalTitle2",defaultMessage:"Jira is connecting to Notion AI"},settingModalConnectionIsPending:{id:"universalSearch.jiraIngestion.settingsModal.connectionIsPending",defaultMessage:"This can take up to 36h. You can cancel or modify your settings when the connection is complete."},tooltipText:{id:"universalSearch.jiraIngestion.settingsModal.tooltipText",defaultMessage:"You can cancel or modify your settings when the connection is complete. "},learnMoreText:{id:"universalSearch.integration.learnMore",defaultMessage:"Learn more"},editProjectsButton:{id:"universalSearch.jiraIngestion.settingsModal.editSyncControls",defaultMessage:"Edit Projects"},disconnectJira:{id:"universalSearch.jiraIngestion.settingsModal.disconnectJira",defaultMessage:"Disconnect"}});function Wt(){const[e,t]=(0,o.useState)(!0),[n,c]=(0,o.useState)([]),[l,d]=(0,o.useState)(!1),[g,h]=(0,o.useState)(0),v=(0,s().O$)(m().y),f=(0,s().K8)((()=>m().y.state.jiraSiteId),[]),x=(0,i().v3)(),S=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),j=(0,s().K8)((()=>m().y.state.analyticsFrom),[]),b=(0,s().K8)((()=>m().y.state.screenToShow),[]),I=(0,s().K8)((()=>m().y.state.jiraSyncState),[]),A=(0,s().K8)((()=>p().default.getConfigKey("jira_ai_ingestion_config","learnMoreUrl")),[]),D="completed"===I;(0,a().Yb)((async()=>{if(!S||"settings_screen"!==b)return;if(!D)return void t(!1);t(!0);const[e,n]=await Promise.all([(0,r().getJiraAIConnectionStatusAction)({environment:x,spaceId:S}),(0,r().getJiraSyncControlAction)({environment:x,spaceId:S,jiraSiteId:f})]);e&&n&&(c(n.data.sampleProjects),h(n.data.totalConnectedProjects),d(n.data.isFutureProjectsSyncEnabled),t(!1))}),[S,x,b,f,D]);const W=e=>{(0,r().navigateToJiraUniversalScreen)({screenToShow:e,analyticsFrom:v.analyticsFrom,sessionId:v.sessionId})},B=function(e){return(0,y().IS)((t=>({wrapper:{width:400,padding:"0 24px",minHeight:e?428:void 0},settingsWrapper:{justifyContent:"center",gap:12},jiraDetailsContainer:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.regular,color:t.text.secondary,gap:12,paddingBottom:12},projectNameContainer:{gap:2,color:t.text.primary},footer:{justifyContent:"center",alignItems:"center",width:"100%",gap:8},disconnectButton:{width:"100%"},moreProjectsContainer:{padding:"4px 0px 4px 0px"},learnMoreSection:{padding:"24px 0"},learnMoreButton:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.semibold,borderRadius:"4px",width:"100%"},learnMoreText:{fontWeight:w().Wy.medium,fontSize:w().J.UISmall.desktop,gap:5,justifyContent:"center",alignItems:"center",padding:"4px 8px 4px 8px",color:`${t.text.secondary}`},externalLinkIcon:{width:16,height:16},confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:w().Wy.semibold,color:t.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.regular,color:t.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.regular,color:t.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},spinner:{paddingTop:20,justifyContent:"center",alignItems:"center"},projectItemWrapper:{width:"100%",padding:"2px 0px 2px 0px",alignItems:"center"},projectName:{fontSize:w().J.UIRegular.desktop},projectIcon:{width:20,color:t.text.secondary},jiraIcon:{fill:t.blueColor,width:40,height:40},jiraIconSmall:{fill:t.blueColor,width:14,height:14}})),[e])}(e);return(0,F.jsx)(k().A,{showCloseIcon:!0,open:"settings_screen"===b,onDismiss:()=>{(0,r().navigateToJiraUniversalScreen)({screenToShow:"none",analyticsFrom:j,sessionId:v.sessionId}),c([]),h(0),d(!1)},render:()=>(0,F.jsxs)("div",{style:B.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:()=>(0,K().y)(B.jiraIcon),title:D?(0,F.jsx)(_().sA,{...Dt.settingsModalTitle}):(0,F.jsx)(_().sA,{...Dt.settingsModalPendingTitle})}),e?(0,F.jsx)(M().Ye,{style:B.spinner,children:(0,F.jsx)(ge().A,{})}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(M().Ye,{style:B.settingsWrapper,children:(0,F.jsxs)(M().wt,{style:B.jiraDetailsContainer,children:[(0,F.jsx)(M().wt,{children:D?(0,F.jsx)(_().sA,{id:"universalSearch.jiraIngestion.settingsModal.canAnswerFrom",defaultMessage:"Notion AI is connected and can answer questions with content from {jiraCountMessage}{futureProjectsMessage}",values:{jiraCountMessage:g?`${g} Jira Projects`:"Jira Project",futureProjectsMessage:l?", including future projects.":"."}}):(0,F.jsx)(_().sA,{...Dt.settingModalConnectionIsPending})}),D?(0,F.jsx)(M().wt,{children:l&&(0,F.jsxs)(M().Ye,{style:B.projectItemWrapper,children:[(0,F.jsx)(M().wt,{style:B.projectIcon,children:(0,K().y)(B.jiraIconSmall)}),(0,F.jsx)(M().wt,{style:B.projectName,children:(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"universalSearch.jiraIngestion.settingsModal.includeCurrentAndFutureProjects",defaultMessage:"Includes current and future projects"})})})]})}):null,D&&n.map((e=>(0,F.jsx)("div",{children:(0,F.jsxs)(M().Ye,{style:B.projectItemWrapper,children:[(0,F.jsx)(M().wt,{style:B.projectIcon,children:(0,K().y)(B.jiraIconSmall)}),(0,F.jsx)(M().wt,{style:B.projectName,children:e.name})]})},e.id))),D&&(0,F.jsx)(M().Ye,{style:B.moreProjectsContainer,children:g-3>0?(0,F.jsx)(_().sA,{id:"universalSearch.jiraIngestion.settingsModal.moreProjects",defaultMessage:"... and {moreProjectCount} more",values:{moreProjectCount:g-3}}):(0,F.jsx)(F.Fragment,{})})]})}),(0,F.jsxs)(M().wt,{style:B.footer,children:[D?(0,F.jsx)(Bt,{styles:B.disconnectButton,isEditButtonEnabled:D,navigateToScreen:W}):(0,F.jsx)(gt().A,{allowHover:!0,textWrap:!0,renderTooltip:()=>(0,F.jsx)("div",{style:{width:240},children:(0,F.jsx)(_().sA,{...Dt.tooltipText})}),render:e=>(0,F.jsx)(Bt,{events:e,styles:B.disconnectButton,isEditButtonEnabled:D,navigateToScreen:()=>{}})}),D?(0,F.jsx)(Ft,{styles:B.disconnectButton,isDisconnectButtonEnabled:D,navigateToScreen:W}):(0,F.jsx)(gt().A,{allowHover:!0,textWrap:!0,renderTooltip:()=>(0,F.jsx)("div",{style:{width:240},children:(0,F.jsx)(_().sA,{...Dt.tooltipText})}),render:e=>(0,F.jsx)(Ft,{events:e,styles:B.disconnectButton,isDisconnectButtonEnabled:D,navigateToScreen:W})})]}),(0,F.jsx)(M().Ye,{style:B.learnMoreSection,children:(0,F.jsx)(C().A,{style:B.learnMoreButton,onClick:()=>{(0,T().u4)({environment:x,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_learn_more_url_click",integration_type:"jira",setup_session_id:v.sessionId,from:v.analyticsFrom}}}),window.open(A,"_blank")},children:(0,F.jsxs)(M().Ye,{style:B.learnMoreText,children:[(0,F.jsx)(_().sA,{...Dt.learnMoreText}),(0,Ce().M)(B.externalLinkIcon)]})})})]})]})})}function Bt(e){const{styles:t,events:n,isEditButtonEnabled:o,navigateToScreen:a}=e,r=(0,i().v3)(),c=(0,s().O$)(m().y);return(0,F.jsx)(E().A,{...n,size:"lg",style:t,disabled:!o,onClick:()=>{(0,T().u4)({environment:r,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_edit_projects_button",integration_type:"jira",setup_session_id:c.sessionId,from:c.analyticsFrom}}}),a("select_projects")},children:(0,F.jsx)(_().sA,{...Dt.editProjectsButton})})}function Ft(e){const{styles:t,events:n,isDisconnectButtonEnabled:o,navigateToScreen:a}=e,r=(0,i().v3)(),c=(0,s().O$)(m().y),l=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,s().K8)((()=>m().y.state.jiraSyncState),[]);return(0,F.jsx)(Ae().E,{...n,style:t,disabled:!o,onClick:()=>{l&&((0,T().u4)({environment:r,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"settings_modal_disconnect_button",integration_type:"jira",setup_session_id:c.sessionId,from:c.analyticsFrom}}}),a("disconnect_screen"))},children:(0,F.jsx)(_().sA,{...Dt.disconnectJira})})}var Nt=()=>n(888364);const zt=(0,_().YK)({primedTextInput:{id:"aiConnectors.microsoftTeams.primedTextInput",defaultMessage:"Search for messages in Microsoft Teams"}});function Ut(){const e=(0,i().v3)(),t=(0,_().tz)(),n=(0,s().K8)((()=>d().F.state.currentScreen),[]),a=(0,y().IS)((e=>({body:{alignItems:"center",color:e.text.secondary,fontSize:12},container:{padding:12},tryItButton:{marginTop:16}})),[]),r=(0,o.useCallback)((()=>{d().F.setState({...d().F.state,currentScreen:"none"}),je().assistantMenuActions.openAssistantRightHandSideMenu({environment:e,from:"microsoft_teams_ai_connector_already_connected",primeTextInput:t.formatMessage(zt.primedTextInput)})}),[e,t]);return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>{d().F.reset()},open:"already_connected_screen"===n,render:()=>(0,F.jsxs)(M().wt,{style:a.container,children:[(0,F.jsx)(U,{integrationLogoIcon:Nt().Y,title:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.alreadyConnected.title",defaultMessage:"Microsoft Teams is already connected to Notion AI"})}),(0,F.jsxs)(M().wt,{gap:2,style:a.body,children:[(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.alreadyConnected.description",defaultMessage:"You’re fully set up."})}),(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.alreadyConnected.tryIt",defaultMessage:"Try asking AI about your Microsoft Teams messages!"})})]}),(0,F.jsx)(E().A,{style:a.tryItButton,onClick:r,children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.alreadyConnected.tryAskingAQuestion",defaultMessage:"Try asking a question"})})]}),ariaLabel:t.formatMessage(zt.primedTextInput)})}function Pt(e){const[t,n]=o.useState(!1),[c,l]=o.useState(void 0),g=(0,i().v3)(),p=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,a().Yb)((async()=>{if(!p)return;const e=await b().callApi({eventName:"getAIConnectorAuthorizationUrl",environment:g,data:{connector:"microsoftTeams",authorizationType:"workspace",spaceId:p,sessionId:d().F.state.sessionId,client:g.device.isElectron?"desktop":"web"}});if("success"!==e.type)return;const t=e.data.authorizationUrl;l(t)}),[g,p]);const h=(0,y().IS)((e=>({noteHeading:{fontWeight:w().Wy.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"0.2px"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},icon:{width:18,height:17,color:"#D7813A",marginTop:2},warningText:{fontSize:14,lineHeight:"18px",color:"#D7813A",paddingLeft:14,fontweight:w().Wy.regular,letterSpacing:"-0.15px"},warningContainer:{marginLeft:5,marginRight:5,marginBottom:15}})),[]),m=(0,s().K8)((()=>d().F.state.currentScreen),[]),v=(0,s().K8)((()=>d().F.state.analyticsFrom),[]),f=(0,s().K8)((()=>d().F.state.sessionId),[]),x=(0,s().K8)((()=>u().default.state.currentUserStore),[]);(0,W().n)((async()=>{if(!p)return;if("check_connection_screen"!==d().F.state.currentScreen)return;const e=await(0,r().getMicrosoftTeamsAIConnectorStatusAction)({environment:g,spaceId:p});"not_started"!==(null==e?void 0:e.connectionStatus)&&(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"connection_complete_screen",analyticsFrom:v,sessionId:f})}),1e3,!0);const S=(0,o.useCallback)((async()=>{if(!p)return;const e=await(0,r().getMicrosoftTeamsAIConnectorStatusAction)({environment:g,spaceId:p});"not_started"!==(null==e?void 0:e.connectionStatus)?(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"connection_complete_screen",analyticsFrom:v,sessionId:f}):n(!0)}),[v,g,f,p]),j=(0,o.useCallback)((()=>{n(!1),(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:v,sessionId:f})}),[v,f]);if(!x||!p)return null;const I=t?(0,F.jsxs)(M().Ye,{style:h.warningContainer,children:[(0,Pe().Q)(h.icon),(0,F.jsx)("div",{style:h.warningText,children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.checkConnection.warning",defaultMessage:"We couldn’t connect to Microsoft Teams. Please review the instructions and try again, or check our {TroubleshootingGuide}",values:{TroubleshootingGuide:(0,F.jsx)("a",{style:{...h.link,color:"#D7813A"},href:(0,D().xS)("guides.aiConnectorMicrosoftTeams"),target:"_blank",onClick:()=>{},children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.checkConnection.troubleShootingLink",defaultMessage:"troubleshooting guide."})})}})})]}):void 0;return(0,F.jsx)(Le,{title:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.checkConnection.title",defaultMessage:"Follow instructions from Microsoft Teams in your browser"}),open:"check_connection_screen"===m,onDismiss:j,warningMessage:I,notes:[(0,F.jsxs)(M().wt,{style:{gap:4},children:[(0,F.jsx)("div",{style:h.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.checkConnection.openAuthorizationUrlInNewTabTitle",defaultMessage:"Teams should open automatically on a new browser tab."},"note1-1")}),(0,F.jsx)("div",{style:h.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.checkConnection.authWaiting2",defaultMessage:"If it doesn’t, {ClickHereToRetry}",values:{ClickHereToRetry:(0,F.jsx)("a",{style:h.link,href:c,target:"_blank",onClick:()=>{},children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.checkConnection.confirmModalNote1Retry",defaultMessage:"click here to retry"})})}},"note1-2")})]},"note-1"),(0,F.jsxs)(M().wt,{style:{gap:4},children:[(0,F.jsx)("div",{style:h.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.checkConnection.followInstructions",defaultMessage:"Follow Team’s instructions to connect"},"note2")}),(0,F.jsx)("div",{style:h.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.checkConnection.followInstructionsDescription",defaultMessage:"Install the Notion connector in a Microsoft Teams workspace and return to this window"},"note1-2")})]},"note-2"),(0,F.jsx)(M().wt,{style:{gap:4},children:(0,F.jsx)("div",{style:h.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.checkConnection.returnToNotion",defaultMessage:"Return to this window, and the process will continue automatically."},"note3")})},"note-3")],openLearnMoreUrl:()=>{window.open((0,D().xS)("guides.aiConnectorMicrosoftTeams"),"_blank")},integrationIcon:Nt().Y,primaryButtonText:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.checkConnection.checkConnectionButton",defaultMessage:"Check Connection"},"note3-1"),onClickPrimaryButton:S})}const Lt=(0,_().YK)({copyTextMessage:{id:"universalSearch.microsoftTeams.connectionComplete.microsoftTeamsTitle.copyMessage",defaultMessage:"Our Notion AI is now connecting to Microsoft Teams. When you ask Notion AI a question, it’ll be able to reference info across your Microsoft Teams. Click the button at the bottom right of your Notion app to give it a try!"}});function Kt(){const e=(0,_().tz)(),t=(0,i().v3)(),n=(0,y().IS)((e=>({headingText:{fontSize:w().J.UIRegular.desktop,letterSpacing:"-0.154px",color:`${e.text.primary}`,paddingBottom:8,fontWeight:w().Wy.medium},circle:{marginRight:8},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer",paddingLeft:2,border:"none",background:"none"},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:w().J.UIRegular.desktop,lineHeight:"18px",letterSpacing:"-0.154px",display:"flex"},teamsIcon:{fill:e.blueColor,width:40,height:40}})),[]),a=(0,s().K8)((()=>d().F.state.currentScreen),[]),c=(0,s().K8)((()=>d().F.state.sessionId),[]),l=(0,s().K8)((()=>d().F.state.analyticsFrom),[]),g=(0,s().K8)((()=>d().F.state.sessionId),[]),p=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),h=(0,s().K8)((()=>d().F.state.connectionStatus),[]),[m,v]=(0,o.useState)(!1),f="in_progress"===h,x=(0,o.useCallback)((()=>{}),[]),S=(0,o.useCallback)((()=>{(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:l,sessionId:g})}),[l,g]),j=(0,o.useCallback)((async()=>{if(!p)return;const n=await(0,r().getMicrosoftTeamsAIConnectorStatusAction)({environment:t,spaceId:p});if(!n||!n.microsoftTenantId)return X().D6({label:e.formatMessage({defaultMessage:"Action failed. Please try again.",id:"universalSearch.microsoftTeams.connectionComplete.retryActionRequest"}),position:"bottom"}),void(0,r().navigateToMicrosoftTeamsUniversalScreen)({analyticsFrom:l,sessionId:g,currentScreen:"none"});if(["disconnecting","editing"].includes(null==n?void 0:n.connectionStatus))return X().D6({label:e.formatMessage({defaultMessage:"Failed to update the connection. Please try again later.",id:"universalSearch.microsoftTeams.connectionComplete.failedToStartSync"}),position:"bottom"}),void(0,r().navigateToMicrosoftTeamsUniversalScreen)({analyticsFrom:l,sessionId:g,currentScreen:"none"});if(["in_progress","completed"].includes(null==n?void 0:n.connectionStatus))return void(0,r().navigateToMicrosoftTeamsUniversalScreen)({analyticsFrom:l,sessionId:g,currentScreen:"none"});await(0,r().getMicrosoftTeamsSyncControlsAction)({environment:t,spaceId:p,withSyncControlOptions:!1})||await(0,r().setMicrosoftTeamsSyncControlsAction)({environment:t,spaceId:p,syncControls:{syncFutureTeams:!0,teamsToExcludeFromSync:[],syncPrivateConversations:!0}});await(0,r().startMicrosoftTeamsBulkIngestionAction)({environment:t,spaceId:p})?(0,r().navigateToMicrosoftTeamsUniversalScreen)({analyticsFrom:l,sessionId:g,currentScreen:"none"}):X().D6({label:e.formatMessage({defaultMessage:"Failed to start ingestion. Please try again later.",id:"universalSearch.microsoftTeams.connectionComplete.failedToStartIngestion"}),position:"bottom"})}),[p,t,l,g,e]),b=(0,o.useCallback)((async()=>{if(!p)return;v(!0);const e=await(0,r().getMicrosoftTeamsAIConnectorStatusAction)({environment:t,spaceId:p});if(v(!1),!e||"not_started"===e.connectionStatus)return void(0,r().navigateToMicrosoftTeamsUniversalScreen)({analyticsFrom:l,sessionId:c,currentScreen:"error_screen"});const n=e.connectionStatus;"in_progress"!==n&&"editing"!==n?"pending_selection"!==n&&"completed"!==n?(0,r().navigateToMicrosoftTeamsUniversalScreen)({analyticsFrom:l,sessionId:c,currentScreen:"error_screen"}):(0,r().navigateToMicrosoftTeamsUniversalScreen)({analyticsFrom:l,sessionId:c,currentScreen:"settings_screen"}):(0,r().navigateToMicrosoftTeamsUniversalScreen)({analyticsFrom:l,sessionId:c,currentScreen:"edit_blocked_screen"})}),[l,t,c,p]);return(0,F.jsx)(We,{open:"connection_complete_screen"===a,onDismiss:S,onCopiedClick:x,title:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.connectionComplete.title",defaultMessage:"Connection is in progress"}),integrationIcon:()=>(0,Nt().Y)(n.teamsIcon),subText:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.connectionComplete.subText",defaultMessage:"You’re done! Here’s what’s next:"}),primaryButtonText:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.connectionComplete.doneButton",defaultMessage:"Done"}),notes:[(0,F.jsxs)(M().Ye,{style:n.headingText,children:[(0,F.jsx)(A().A,{number:1,style:n.circle}),(0,F.jsxs)(M().wt,{children:[(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.connectionComplete.listpoint1",defaultMessage:"Connecting Teams may take up to 36h."},"note1"),!f&&(0,F.jsx)("div",{style:n.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.connectionComplete.selectMicrosoftTeamsProjects",defaultMessage:"If you want to choose teams, {clickHere}",values:{clickHere:m?(0,F.jsx)(ge().A,{}):(0,F.jsx)("button",{style:n.link,onClick:b,children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.connectionComplete.settings",defaultMessage:"click here."})})}},"note1-1")})]})]},"item1"),(0,F.jsxs)(M().Ye,{style:n.headingText,children:[(0,F.jsx)(A().A,{number:2,style:n.circle}),(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.connectionComplete.listpoint2",defaultMessage:"Notion AI will be ready to answer questions across Notion and MicrosoftTeams knowledge."},"note2")]},"item2"),(0,F.jsxs)(M().Ye,{style:n.headingText,children:[(0,F.jsx)(A().A,{number:3,style:n.circle}),(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.connectionComplete.listpoint3",defaultMessage:"Copy the message below to let your team know!"})]},"item3")],copyTextMessage:Lt.copyTextMessage,onPrimaryButtonClick:j})}function Ht(){const e=(0,_().tz)(),t=(0,y().IS)((e=>({confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:w().Wy.semibold,color:e.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.medium,color:e.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:w().J.UIRegular.desktop,fontWeight:w().Wy.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},notesSectionWrapper:{padding:"12px 12px 12px 12px",gap:13},noteBlockWrapper:{marginBottom:12,gap:8},note:{fontWeight:w().Wy.regular,fontSize:w().J.UIRegular.desktop,lineHeight:"18px"},noteHeading:{fontWeight:w().Wy.medium,fontSize:w().J.UIRegular.desktop,lineHeight:"18px"},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:w().J.UIRegular.desktop,lineHeight:"18px",letterSpacing:"0.2px"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},icon:{rotate:"45deg",width:12,height:12,cursor:"pointer",display:"inline",padding:0,margin:0}})),[]),[n,a]=(0,o.useState)(!1),c=(0,s().K8)((()=>d().F.state.currentScreen),[]),l=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),g=(0,s().K8)((()=>d().F.state.microsoftTenantId),[]),p=(0,s().K8)((()=>d().F.state.analyticsFrom),[]),h=(0,s().K8)((()=>d().F.state.sessionId),[]),m=(0,i().v3)(),v=(0,o.useCallback)((()=>{(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:p,sessionId:h})}),[p,h]),f=(0,o.useCallback)((()=>{(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:p,sessionId:h})}),[p,h]),x=(0,o.useCallback)((async()=>{if(a(!0),!l||!g)return void a(!1);const e=await async function(e){const{environment:t,spaceId:n,microsoftTenantId:o}=e,i=await b().callApi({eventName:"disconnectMicrosoftTeams",environment:t,data:{spaceId:n,microsoftTenantId:o}});if("success"===i.type)return X().D6({label:ke().A.getIntl().formatMessage({defaultMessage:"Started disconnecting Microsoft Teams. This can take up to 3 hours.",id:"microsoftTeams.disconnect.started"}),position:"bottom",style:{width:"400px",display:"flex",justifyContent:"space-between"}}),!0;return!1}({environment:m,spaceId:l,microsoftTenantId:g});e&&d().F.setState({...d().F.state,connectionStatus:"disconnecting",currentScreen:"post_disconnect_screen"}),a(!1)}),[m,g,l]),S=(0,o.useCallback)((()=>{(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"settings_screen",analyticsFrom:p,sessionId:h})}),[p,h]),j=(0,o.useCallback)((()=>{const{noteBlockWrapper:e,noteHeading:n,noteBody:o}=t;return[(0,F.jsxs)(M().wt,{style:e,children:[(0,F.jsx)("div",{style:n,children:(0,F.jsx)(_().sA,{...Rt.note1Heading})}),(0,F.jsx)("div",{style:o,children:(0,F.jsx)(_().sA,{...Rt.note1Body})})]},"note-1")]}),[t]);return"post_disconnect_screen"===c?(0,F.jsx)(it,{onClickGotItBtn:f,onDismiss:v,open:"post_disconnect_screen"===c,integrationIcon:Nt().Y,title:(0,F.jsx)(_().sA,{...Rt.postDisconnectTitle}),descriptionMessage:(0,F.jsx)(_().sA,{...Rt.postDisconnectDescription}),message:(0,F.jsx)("div",{style:t.notesSectionWrapper,children:j().map(((e,n)=>(0,F.jsx)(M().Ye,{gap:8,style:{marginTop:4,marginBottom:6},children:(0,F.jsx)("div",{style:t.note,children:e})},n)))})}):(0,F.jsx)(k().A,{showCloseIcon:!0,open:"disconnect_screen"===c,onDismiss:v,render:()=>(0,F.jsx)("div",{style:t.confirmWrapper,children:(0,F.jsxs)("div",{style:t.confirmContainer,children:[(0,F.jsx)("div",{style:t.confirmModalTitle,children:(0,F.jsx)(_().sA,{...Rt.disconnectTitle})}),(0,F.jsx)("div",{style:t.confirmModalSubTitle,children:(0,F.jsx)(_().sA,{...Rt.disconnectSubTitle})}),(0,F.jsx)("div",{style:t.confirmModalDescription,children:(0,F.jsx)(_().sA,{...Rt.disconnectDescription})}),(0,F.jsxs)(M().wt,{style:t.confirmModalActionButtons,children:[(0,F.jsx)(J().A,{isRed:!0,style:t.confirmDisconnectButton,isLoading:n,onClick:x,children:(0,F.jsx)(_().sA,{...Rt.primaryButtonLabel})}),(0,F.jsx)(C().A,{style:t.goBackButton,onClick:S,children:(0,F.jsx)(_().sA,{...Rt.goBackButtonLabel})})]})]})}),ariaLabel:e.formatMessage(Rt.disconnectModalAriaLabel)})}const Rt=(0,_().YK)({note1Heading:{id:"universalSearch.microsoftTeams.postDisconnect.note_1.heading",defaultMessage:"Teams data will be permanently deleted from Notion"},note1Body:{id:"universalSearch.microsoftTeams.postDisconnect.note_1.body",defaultMessage:"This process can take up to 3 hours. You’ll only be able to reconnect after disconnecting is complete."},postDisconnectTitle:{id:"universalSearch.microsoftTeams.postDisconnect.title",defaultMessage:"Teams is disconnecting from Notion AI"},postDisconnectDescription:{id:"universalSearch.microsoftTeams.postDisconnect.description",defaultMessage:"Here’s what you should know:"},disconnectTitle:{id:"universalSearch.microsoftTeams.disconnectModal.title",defaultMessage:"Are you sure?"},disconnectSubTitle:{id:"universalSearch.microsoftTeams.disconnectModal.subTitle",defaultMessage:"Teams data will be permanently deleted from Notion."},disconnectDescription:{id:"universalSearch.microsoftTeams.disconnectModal.description",defaultMessage:"This process can take up to 3 hours, and you’ll only be able to reconnect after disconnecting is complete."},primaryButtonLabel:{id:"universalSearch.microsoftTeams.disconnectModal.confirmDisconnect",defaultMessage:"Disconnect for everyone"},goBackButtonLabel:{id:"universalSearch.microsoftTeams.disconnectModal.goBack",defaultMessage:"Go back"},disconnectModalAriaLabel:{id:"universalSearch.microsoftTeams.disconnectModal.label",defaultMessage:"Disconnect Microsoft Teams Modal"}}),Yt=(0,_().YK)({primedTextInput:{id:"aiConnectors.microsoftTeams.primedTextInput",defaultMessage:"Search for messages in Microsoft Teams"}});function qt(){const e=(0,_().tz)(),t=(0,s().K8)((()=>d().F.state.currentScreen),[]),n=(0,y().IS)((e=>({wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:w().Wy.semibold,width:"100%"}})),[]),i=(0,o.useCallback)((()=>{(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none"})}),[]),a=(0,o.useCallback)((()=>{(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none"})}),[]);return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:a,open:"edit_blocked_screen"===t,render:()=>(0,F.jsxs)("div",{style:n.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:Nt().Y,title:(0,F.jsx)(_().sA,{id:"aiConnectors.microsoftTeams.editBlocked.title",defaultMessage:"Connection is in Progress"}),subtext:(0,F.jsx)(_().sA,{id:"aiConnectors.microsoftTeams.editBlocked.description",defaultMessage:"Editing settings is unavailable until the process is complete. This can take up to 36h"})}),(0,F.jsx)(M().wt,{style:n.footer,children:(0,F.jsx)(J().A,{style:n.connectButton,onClick:i,children:(0,F.jsx)(_().sA,{id:"aiConnectors.microsoftTeams.editBlocked.gotItButton",defaultMessage:"Got it"})})})]}),ariaLabel:e.formatMessage(Yt.primedTextInput)})}function Gt(){const e=(0,_().tz)(),t=(0,s().K8)((()=>d().F.state.currentScreen),[]),n=(0,s().K8)((()=>d().F.state.sessionId),[]),o=(0,s().K8)((()=>d().F.state.analyticsFrom),[]),i=(0,y().IS)((e=>({wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:w().Wy.semibold,width:"100%"}})),[]);return(0,F.jsx)(k().A,{open:"error_screen"===t,showCloseIcon:!0,onDismiss:()=>(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:o,sessionId:n}),render:()=>(0,F.jsxs)("div",{style:i.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:Nt().Y,title:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.error.title",defaultMessage:"Oops! Something went wrong"}),subtext:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.error.description",defaultMessage:"Something went wrong, please try again later."})}),(0,F.jsx)(M().wt,{style:i.footer,children:(0,F.jsx)(J().A,{style:i.connectButton,onClick:()=>{(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:o,sessionId:n})},children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.Dismiss",defaultMessage:"Close"})})})]}),ariaLabel:e.formatMessage({id:"universalSearch.microsoftTeams.error.ariaLabel",defaultMessage:"Microsoft Teams error modal"})})}const Et=(0,_().YK)({microsoftTeamsAIConnectorOauthPopupTitle:{defaultMessage:"Connect Microsoft Teams AI Connector",id:"microsoftTeamsAIConnector.oauthPopupTitle"}});function Jt(){const e=(0,i().v3)(),t=(0,y().IS)((e=>({icon:{fill:e.blueColor,width:40,height:40},loadingWrapper:{padding:20,fontSize:12,fontWeight:w().Wy.regular,justifyContent:"center",gap:8,alignItems:"center"}})),[]),n=(0,Z().J)(),a=(0,ee().n)(),c=(0,o.useMemo)((()=>ye("microsoftTeams")),[]),l=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),p=(0,s().K8)((()=>d().F.state.currentScreen),[]),h=(0,s().K8)((()=>d().F.state.connectionStatus),[]),m=(0,s().K8)((()=>d().F.state.sessionId),[]),v=(0,s().K8)((()=>d().F.state.analyticsFrom),[]),f=(0,s().K8)((()=>g().zD.isMicrosoftTeamsQnaEnabled()),[]);(0,o.useEffect)((()=>{}),[l,e,p,m,v,n,a]);const x=(0,o.useCallback)((async()=>{if(!l)return;const t=await b().callApi({eventName:"getAIConnectorAuthorizationUrl",environment:e,data:{connector:"microsoftTeams",authorizationType:"workspace",spaceId:l,sessionId:m,client:e.device.isElectron?"desktop":"web"}});if("success"!==t.type)return;const n=t.data.authorizationUrl;e.device.isElectron?I().openExternalUrl(n):ue().P(e,{width:800,height:600,url:n,titleMessage:Et.microsoftTeamsAIConnectorOauthPopupTitle}),(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"check_connection_screen",analyticsFrom:v,sessionId:m})}),[l,e,v,m]),S=(0,o.useCallback)((async()=>{await x()}),[x]),j=(0,o.useCallback)((()=>{(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:v,sessionId:m})}),[v,m]);return(0,o.useCallback)((()=>{"completed"===h&&(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"already_connected_screen",analyticsFrom:v,sessionId:m}),"in_progress"!==h&&"editing"!==h||(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"already_connected_screen",analyticsFrom:v,sessionId:m})}),[h,v,m]),f&&l&&"info_screen"===p?e.device.isMobile?(0,F.jsx)(Se,{logo:Nt().Y,appName:"Microsoft Teams",open:"info_screen"===p,onClosed:()=>{d().F.reset()},learnMoreUrl:(0,D().xS)("guides.aiConnectorMicrosoftTeams")}):n?(0,F.jsx)(Q,{integrationIcon:()=>(0,Nt().Y)(t.icon),notes:c,onLearnMore:()=>{window.open((0,D().xS)("guides.aiConnectorMicrosoftTeams"),"_blank")},onConnect:S,onDismiss:j,title:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.intro.microsoftTeamsTitle",defaultMessage:"To start, install the Notion AI app in Microsoft Teams"}),titleWidth:352,open:"info_screen"===p}):(0,F.jsx)(de,{connector:"microsoft_teams",handleClose:()=>d().F.reset(),open:"info_screen"===p,analyticsFrom:v,setupSessionId:m,messages:re().j9}):null}const Ot=(0,_().YK)({primedTextInput:{id:"aiConnectors.microsoftTeams.postEdit.primedTextInput",defaultMessage:"Search for messages in Microsoft Teams"}});function Qt(){const e=(0,_().tz)(),t=(0,s().K8)((()=>d().F.state.currentScreen),[]),n=(0,y().IS)((e=>({wrapper:{width:400},footer:{justifyContent:"center",alignItems:"center",width:"100%",height:60,boxShadow:e.shadowMD,padding:"20px 20px 20px 20px",gap:6},circle:{marginRight:8},section:{marginTop:4,marginBottom:6},note:{fontWeight:w().Wy.regular,fontSize:14,lineHeight:"18px",width:330,marginLeft:8},noteHeading:{fontWeight:w().Wy.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:"0.2px"},sectionContainer:{padding:20,width:400,paddingTop:12},bottomSectionContainer:{padding:20,width:400,paddingTop:0}})),[]),i=(0,o.useCallback)((()=>{(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none"})}),[]),a=(0,o.useCallback)((()=>{(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none"})}),[]),c=[(0,F.jsx)(M().wt,{children:(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.MicrosoftTeamsIngestion.postEdit.listpoint1",defaultMessage:"Teams content will be disconnected and reconnected"},"note-1-message")},"note-1"),(0,F.jsx)(M().wt,{children:(0,F.jsx)(_().sA,{id:"assistantOverflowMenu.MicrosoftTeamsIngestion.postEdit.listpoint2",defaultMessage:"This can take upto 48h and AI answers will be unavailable until it’s complete"},"note-2-message")},"note-2")];return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:a,open:"post_edit_screen"===t,render:()=>(0,F.jsxs)("div",{style:n.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:Nt().Y,title:(0,F.jsx)(_().sA,{id:"aiConnectors.microsoftTeams.postEdit.title",defaultMessage:"Update in Progress"}),subtext:(0,F.jsx)(_().sA,{id:"aiConnectors.microsoftTeams.postEdit.description",defaultMessage:"Here’s what you should know:"})}),(0,F.jsx)(M().wt,{style:n.sectionContainer,children:c.map(((e,t)=>(0,F.jsxs)(M().Ye,{gap:8,style:n.section,children:[(0,F.jsx)(A().A,{number:t+1}),(0,F.jsx)("div",{style:n.note,children:e})]},t)))}),(0,F.jsx)(M().wt,{style:n.bottomSectionContainer,children:(0,F.jsx)(J().A,{onClick:i,children:(0,F.jsx)(_().sA,{id:"aiConnectors.microsoftTeams.postEdit.primaryButton",defaultMessage:"Done"})})})]}),ariaLabel:e.formatMessage(Ot.primedTextInput)})}n(737550);var $t=()=>n(471095);function Vt(){const[e,t]=(0,o.useState)(!0),[n,c]=o.useState(!0),[l,g]=(0,o.useState)(""),[p,h]=(0,o.useState)([]),[m,v]=(0,o.useState)(!1),f=(0,y().IS)((e=>({wrapper:{width:400,display:"flex",flexDirection:"column",minHeight:530},logoSection:{padding:"20px 20px 9px 20px",gap:8,justifyContent:"center",alignItems:"center",height:84},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:e.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center"},title:{fontSize:17,fontWeight:w().Wy.medium,lineHeight:"22px",marginBottom:"9px"},subtext:{fontSize:12,lineHeight:"14.52px",color:e.text.secondary},footer:{width:"100%",justifySelf:"flex-end",boxShadow:"0px 9px 24px 0px #0F0F0F33",padding:"16px 20px 16px 20px",gap:12,bottom:0},connectButton:{fontSize:14,fontWeight:w().Wy.semibold,width:360},searchBarWrapper:{justifyContent:"center"},searchBar:{width:360,padding:4},selectionContainer:{marginTop:18,marginBottom:0,width:"100%",height:"100%",justifyContent:"center",padding:"0px 20px 0px",flexGrow:1},selection:{width:"100%"},waitingForConnection:{fontSize:12,lineHeight:"16px",color:e.text.secondary},waitingForConnectionWrapper:{gap:4},tryAgainWrapper:{marginTop:16,gap:4},tryAgainSection:{gap:4,alignItems:"center",marginBottom:16,color:e.text.secondary},tryAgainText:{fontSize:14},channelItem:{gap:4,alignItems:"center"},channelsText:{fontSize:12,lineHeight:"16px",display:"flex",flexDirection:"row",gap:4},divider:{marginTop:5,marginBottom:5},alertIcon:{width:16,height:16},tryAgainButton:{fontSize:12,width:80},futureChannelsCheckboxWrapper:{gap:4,visibility:"visible"},loadingChannelsWrapper:{alignItems:"center",gap:8,fontSize:12,color:e.text.secondary,marginTop:8},selectionWrapper:{overflowY:"scroll",maxHeight:170},loadMoreButtonWrapper:{fontSize:12,paddingTop:8,paddingBottom:4},loadMoreButtonhoveredStyle:{background:"none"},channelItemWrapper:{marginTop:12},workspaceAdministratorHeading:{fontSize:14,fontWeight:w().Wy.regular,color:e.text.primary},orderedList:{paddingLeft:18,fontSize:14,fontWeight:w().Wy.regular,color:e.text.secondary},waitingForConnectionNote:{paddingBottom:4},note:{fontWeight:w().Wy.regular,fontSize:14,lineHeight:"18px",width:330,marginLeft:8},noteHeading:{fontWeight:w().Wy.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:w().Wy.regular,color:e.text.secondary,fontSize:14,lineHeight:"18px"},learnMoreButton:{gap:4,alignItems:"center",fontSize:14,color:e.text.secondary,justifyContent:"center"},buttonContainer:{justifyContent:"center"},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"},loadingChannels:{color:e.text.secondary},loadingWrapper:{alignItems:"center",gap:4},privateConversationIcon:{width:16,height:16}})),[]),x=(0,i().v3)(),S=(0,_().tz)(),j=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),b=(0,s().K8)((()=>d().F.state.currentScreen),[]),I=(0,s().K8)((()=>d().F.state.sessionId),[]),C=(0,s().K8)((()=>d().F.state.analyticsFrom),[]),A=(0,s().K8)((()=>d().F.state.connectionStatus),[]);(0,a().Yb)((async()=>{if(!j||"settings_screen"!==b)return;if(!A)return t(!1),void(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:C,sessionId:I});if(["in_progress","disconnecting","editing"].includes(A))return t(!1),void(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:C,sessionId:I});t(!0);const[e,n]=await Promise.all([(0,r().getMicrosoftTeamsAIConnectorStatusAction)({environment:x,spaceId:j}),(0,r().getMicrosoftTeamsSyncControlsAction)({environment:x,spaceId:j,withSyncControlOptions:!0})]);if(!e||null==n||!n.teams)return;const o=n.configuredSyncControls.syncFutureTeams;v(o);const i=[];for(const t of n.teams){const{id:e,name:s}=t;o?i.push({id:e,name:s,checked:!n.configuredSyncControls.teamsToExcludeFromSync.includes(e)}):i.push({id:e,name:s,checked:n.configuredSyncControls.teamsToSync.includes(e)})}h(i),t(!1)}),[j,b,A,x,C,I]);const T=(0,o.useCallback)((e=>{const t=p.find((t=>t.id===e));return Boolean(null==t?void 0:t.checked)}),[p]),D=(0,o.useCallback)((e=>{const t=p.map((t=>t.id===e?{...t,checked:!t.checked}:t));h(t);const n=t.find((e=>e.checked)),o=t.find((e=>!e.checked));let i=!1;n&&o?i="partial":n&&(i=!0),c(i)}),[p]),W=(0,o.useCallback)((()=>{const e=!n;c(e),h((t=>t.map((t=>({...t,checked:e})))))}),[n]),B=(0,o.useCallback)((()=>p.some((e=>e.checked))),[p]),N=(0,o.useCallback)((()=>{(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:C,sessionId:I})}),[C,I]),z=(0,o.useCallback)((async()=>{if(!j)return;const e=await(0,r().getMicrosoftTeamsAIConnectorStatusAction)({environment:x,spaceId:j});if(!e)return void X().D6({label:S.formatMessage(Xt.retryActionRequest),position:"bottom"});let t;if("completed"!==e.connectionStatus&&"pending_selection"!==e.connectionStatus&&(X().D6({label:S.formatMessage(Xt.alreadySyncing),position:"bottom"}),(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:C,sessionId:I})),m){const e={syncFutureTeams:!0,syncPrivateConversations:!0,teamsToExcludeFromSync:p.filter((e=>!e.checked)).map((e=>e.id))};t=await(0,r().setMicrosoftTeamsSyncControlsAction)({environment:x,spaceId:j,syncControls:e})}else{const e={syncFutureTeams:!1,syncPrivateConversations:!0,teamsToSync:p.filter((e=>e.checked)).map((e=>e.id))};t=await(0,r().setMicrosoftTeamsSyncControlsAction)({environment:x,spaceId:j,syncControls:e})}t?t.syncControlsUpdated?((0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"post_edit_screen",analyticsFrom:C,sessionId:I}),X().D6({label:S.formatMessage(Xt.syncingWithNewSyncControl),position:"bottom"})):X().D6({label:S.formatMessage(Xt.syncControlNotUpdated),position:"bottom"}):X().D6({label:S.formatMessage(Xt.retryActionRequest),position:"bottom"})}),[j,x,m,C,I,S,p]),P=(0,o.useCallback)((()=>{j&&"not_started"!==A?"in_progress"===A?(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"error_screen",analyticsFrom:C,sessionId:I}):(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"disconnect_screen",analyticsFrom:C,sessionId:I}):(0,r().navigateToMicrosoftTeamsUniversalScreen)({currentScreen:"none",analyticsFrom:C,sessionId:I})}),[j,A,C,I]),L=(0,o.useCallback)((()=>(0,F.jsxs)(M().wt,{children:[(0,F.jsxs)(M().Ye,{style:f.channelItem,children:[(0,F.jsx)("div",{children:(0,F.jsx)(qe().A,{checked:n,checkSize:10,size:14,onClick:()=>{W()}})}),(0,F.jsx)("div",{style:f.channelsText,children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.settings.allTeamsToggle",defaultMessage:"All teams"})})]}),(0,F.jsx)(Ge().A,{style:f.divider,size:4}),(0,F.jsx)(F.Fragment,{children:e?(0,F.jsxs)(M().Ye,{style:f.futureChannelsCheckboxWrapper,children:[(0,F.jsx)("div",{children:(0,F.jsx)(ge().A,{})}),(0,F.jsx)("div",{style:f.channelsText,children:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.settings.loadingTeams",defaultMessage:"Fetching teams..."})})]}):(0,F.jsx)(M().wt,{style:f.selectionWrapper,children:(l?p.filter((e=>e.name.toLowerCase().includes(l.toLowerCase()))):p).map((e=>(0,F.jsxs)(M().Ye,{gap:8,style:f.channelItemWrapper,children:[(0,F.jsx)("div",{children:(0,F.jsx)(qe().A,{checked:T(e.id),onClick:()=>{D(e.id)},checkSize:10,size:14},`${e.id}-checkbox`)}),(0,F.jsx)("div",{style:f.channelsText,children:` ${e.name}`},`${e.id}-label`)]},e.id)))})})]})),[f,n,l,p,W,T,D,e]);return(0,F.jsx)(k().A,{open:"settings_screen"===b,showCloseIcon:!0,onDismiss:N,render:()=>(0,F.jsxs)("div",{style:f.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:Nt().Y,title:(0,F.jsx)(_().sA,{id:"universalSearch.microsoftTeams.settings.title",defaultMessage:"Connection Settings"})}),(0,F.jsx)(Ee().A,{capture:!0,allowEsc:!0,render:()=>(0,F.jsx)("div",{children:(0,F.jsx)(M().Ye,{style:f.searchBarWrapper,children:(0,F.jsx)(At().A,{id:"microsoftTeamsUniversalQnASearchBar",style:f.searchBar,placeholder:S.formatMessage(Xt.searchBoxPlaceholder),value:l,onChange:e=>{g(e.target.value)},disabled:e},"microsoftTeamsUniversalQnASearchBar")})})}),(0,F.jsx)(M().Ye,{style:f.selectionContainer,children:(0,F.jsx)(M().wt,{style:f.selection,children:L()})}),(0,F.jsxs)(M().wt,{style:f.footer,children:[(0,F.jsxs)(M().Ye,{style:f.futureChannelsCheckboxWrapper,children:[(0,F.jsx)("div",{children:(0,F.jsx)(qe().A,{checked:m,checkSize:10,size:14,onClick:()=>{v(!m)}})}),(0,F.jsx)("div",{style:f.channelsText,children:(0,F.jsx)(_().sA,{...Xt.syncFutureTeamsCheckboxLabel})})]}),(0,F.jsxs)(M().Ye,{style:f.futureChannelsCheckboxWrapper,children:[(0,F.jsx)("div",{children:(0,$t().i)(f.privateConversationIcon)}),(0,F.jsx)("div",{style:f.channelsText,children:(0,F.jsx)(_().sA,{...Xt.syncPrivateConversationLabel})})]}),(0,F.jsx)(J().A,{style:f.connectButton,onClick:z,disabled:e||!B()&&!m,children:(0,F.jsx)(_().sA,{...Xt.saveButton})}),(0,F.jsx)(E().A,{color:"uiRed",style:f.connectButton,disabled:e||"in_progress"===A,onClick:P,children:(0,F.jsx)(_().sA,{...Xt.disconnectButton})})]})]}),ariaLabel:S.formatMessage(Xt.modalAriaLabel)})}const Xt=(0,_().YK)({settingsModalTitle:{id:"universalSearch.microsoftTeams.settings.modalTitle",defaultMessage:"Microsoft Teams is connected to Notion AI"},disabledTooltip:{id:"universalSearch.microsoftTeams.settings.disabledTooltip",defaultMessage:"You can only interact after all teams are loaded"},saveButton:{id:"universalSearch.microsoftTeams.settings.settingsModal.saveChangesButtonText",defaultMessage:"Save Changes"},disconnectButton:{id:"universalSearch.microsoftTeams.settings.settingsModal.disconnectButtonText",defaultMessage:"Disconnect"},modalAriaLabel:{id:"universalSearch.microsoftTeams.settings.modalAriaLabel",defaultMessage:"Microsoft Teams error modal"},searchBoxPlaceholder:{id:"universalSearch.microsoftTeams.settings.searchBoxPlaceholder",defaultMessage:"Search for a Team"},alreadySyncing:{defaultMessage:"Microsoft Teams is already syncing. This can take up to 36 hours.",id:"universalSearch.microsoftTeams.settings.alreadySyncing"},retryActionRequest:{defaultMessage:"Action failed. Please try again.",id:"universalSearch.microsoftTeams.settings.retryActionRequest"},syncFutureTeamsCheckboxLabel:{id:"universalSearch.microsoftTeams.settings.syncFutureTeamsCheckboxLabel",defaultMessage:"Include teams created in the future"},syncPrivateConversationLabel:{id:"universalSearch.microsoftTeams.settings.syncPrivateConversationLabel",defaultMessage:"Content in private conversations will only be shown to members who have access to them. Permissions are strictly respected."},syncControlNotUpdated:{id:"universalSearch.microsoftTeams.settings.syncControlNotUpdated",defaultMessage:"No change made to Microsoft Teams Connection."},syncingWithNewSyncControl:{id:"universalSearch.microsoftTeams.settings.syncingWithNewSyncControl",defaultMessage:"Started syncing from Microsoft Teams. This can take up to 36 hours."}});var Zt=()=>n(252105),en=()=>n(656633),tn=()=>n(404141),nn=()=>n(991249);function on(){const e=(0,i().v3)(),t=(0,Z().J)(),n=(0,s().K8)((()=>{var e;const t=(null===(e=ct().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return(0,rt().GI)(t)}),[]),a=(0,_().tz)(),c=(0,s().K8)((()=>Y().l.state.open&&"onboarding"===Y().l.state.modal),[]),l=(0,o.useCallback)((t=>{let{source:n}=t;const o=u().default.state.currentSpaceViewStore,i=u().default.state.currentSpaceStore;if(!o||!i)return;const s=(0,en().vp)(e,i.id);switch(Y().l.setState({...Y().l.state,open:!1}),n){case"ctaHasAddon":(0,r().navigateToSlackUniversalQnAOnboarding)({analyticsFrom:"slack_universal_qna_announcement_modal"});break;case"ctaNoAddon":s?(tn().A.setState({...tn().A.state,open:!0,openedFrom:"slack_universal_qna_announcement_modal",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}),Zt().QP(e,{from:"slack_universal_qna_announcement_modal"})):nn().K(e,{from:"slack_universal_qna_announcement_modal",upsell:{type:"product",product:"ai",limit:{type:"none"}}})}}),[e]);return(0,F.jsx)(k().A,{ariaLabel:a.formatMessage(re().vK.title),open:c,render:()=>(0,F.jsx)(ae().Y,{messages:re().vK,hasAiAddOn:n,onDismiss:l,calloutKey:"ai_slack_ai_connector_announcement",eventName:"ai_slack_universal_qna_announcement_modal_shown",learnMoreHref:(0,D().xS)("guides.aiConnectorSlack"),connector:"slack",isAdmin:t})})}var sn=()=>n(901389);const an=(0,_().YK)({searchForAChannel:{id:"universalQnA.slack.searchForAChannel",defaultMessage:"Search for a Channel"}});function rn(){const[e,t]=o.useState(""),[n,a]=o.useState(!1),[r,c]=o.useState(!0),[l,d]=o.useState([]),g=(0,o.useRef)(!1),h=(0,i().v3)(),m=(0,s().K8)((()=>{var e;return null===(e=u().default.getState().currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),v=(0,s().O$)(x().R),j=(0,o.useCallback)((()=>{const e=p().default.getConfigKey("ingestion","slack");window.open(null==e?void 0:e.learnMoreUrl,"_blank")}),[]),I=(0,s().K8)((()=>u().default.getState().currentUserStore),[]),D=(0,o.useCallback)((()=>{g.current=!1,a(!1),t(""),c(!0),d([])}),[]),B=(0,o.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;try{const o=await b().callApi({eventName:"getSlackPublicChannels",environment:h,data:{spaceId:e,cursor:n}});if("success"===o.type){d((e=>(0,Ct().hS)([...e,...o.data.channels],(e=>e.id))));const t=o.data.cursor;x().R.state.isEditing&&(c(!1),x().R.setState({...x().R.state,isEditing:!1})),t?B(e,0,t):a(!0)}else{if(t>=10)return;setTimeout((()=>{B(e,t+1,n)}),3e4)}}catch{if(t>=10)return;setTimeout((()=>{B(e,t+1,n)}),3e4)}}),[h]),N=(0,o.useCallback)((async()=>{var e;if(x().R.setState({...v,currentScreen:"confirmation"}),D(),!m)return;await b().callApi({eventName:"ingestSlackPublicData",environment:h,data:{spaceId:m,selection:v.selection,setupSessionId:v.sessionId}});const t=f().A.state.appsConnectionData.filter((e=>e.id!==Ye().e5));f().A.setState({...f().A.state,appsConnectionData:[...t,{connectionStatus:"in_progress",connectionLastEditedTimestamp:Date.now(),connectionType:"slack",connectorEmail:(null==I?void 0:I.getEmail())||"",id:Ye().e5,connectorNotionId:null==I||null===(e=I.getModel())||void 0===e?void 0:e.id}]}),(0,T().u4)({environment:h,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"confirm_slack_public_data_ingestion",integration_type:"slack",setup_session_id:v.sessionId,from:v.analyticsFrom}}})}),[I,h,D,v,m]);(0,W().n)((async()=>{if(!m)return;if(!m||g.current||"data-selection"!==v.currentScreen)return;if(v.isEditing)return g.current=!0,void B(m);const e=await b().callApi({eventName:"getConnectedAppsForUniversalQna",environment:h,data:{spaceId:m,sessionId:v.sessionId},headers:(0,He().WS)({spaceId:m})});if("success"===e.type&&e.data.isError)x().R.setState({...v,currentScreen:"alreadyConnected"});else if("success"===e.type&&e.data.connectedApps.includes("slack-admin")){if(v.isSlackGridAiConnectorEnabled){const e=await b().callApi({eventName:"getUrlForGridSetup",environment:h,data:{spaceId:m}});return void("success"===e.type&&x().R.setState({...v,currentScreen:"confirmation",gridSetupUrl:e.data.url}))}c(!1),g.current=!0,B(m)}}),1e3,"data-selection"===v.currentScreen);const z=function(e,t){return(0,y().IS)((n=>({wrapper:{width:400,display:"flex",flexDirection:"column",minHeight:e?void 0:530},logoSection:{padding:"20px 20px 9px 20px",gap:8,justifyContent:"center",alignItems:"center",height:84},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:n.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center"},title:{fontSize:17,fontWeight:w().Wy.medium,lineHeight:"22px",marginBottom:"9px"},subtext:{fontSize:12,lineHeight:"14.52px",color:n.text.secondary},footer:{position:"absolute",width:"100%",justifySelf:"flex-end",boxShadow:"0px 9px 24px 0px #0F0F0F33",padding:"16px 20px 16px 20px",gap:12,bottom:0},connectButton:{fontSize:14,fontWeight:w().Wy.semibold,width:360},searchBarWrapper:{justifyContent:"center"},searchBar:{width:360,padding:4},selectionContainer:{marginTop:18,marginBottom:e?24:0,width:"100%",height:"100%",justifyContent:"center",padding:"0px 20px 0px"},selection:{width:"100%"},waitingForConnection:{fontSize:12,lineHeight:"16px",color:n.text.secondary},waitingForConnectionWrapper:{gap:4},tryAgainWrapper:{marginTop:16,gap:4},tryAgainSection:{gap:4,alignItems:"center",marginBottom:16,color:n.text.secondary},tryAgainText:{fontSize:14},channelItem:{gap:4,alignItems:"center"},channelsText:{fontSize:12,lineHeight:"16px"},divider:{marginTop:5,marginBottom:5},alertIcon:{width:16,height:16},tryAgainButton:{fontSize:12,width:80},futureChannelsCheckboxWrapper:{gap:4,visibility:e?"hidden":"visible"},loadingChannelsWrapper:{alignItems:"center",gap:8,fontSize:12,color:n.text.secondary,marginTop:8},selectionWrapper:{overflowY:"scroll",maxHeight:t?170:124},loadMoreButtonWrapper:{fontSize:12,paddingTop:8,paddingBottom:4},loadMoreButtonhoveredStyle:{background:"none"},channelItemWrapper:{marginTop:12},workspaceAdministratorHeading:{fontSize:14,fontWeight:w().Wy.regular,color:n.text.primary},orderedList:{paddingLeft:18,fontSize:14,fontWeight:w().Wy.regular,color:n.text.secondary},waitingForConnectionNote:{paddingBottom:4},note:{fontWeight:w().Wy.regular,fontSize:14,lineHeight:"18px",width:330,marginLeft:8},noteHeading:{fontWeight:w().Wy.medium,fontSize:14,lineHeight:"18px"},noteBody:{fontWeight:w().Wy.regular,color:n.text.secondary,fontSize:14,lineHeight:"18px"},learnMoreButton:{gap:4,alignItems:"center",fontSize:14,color:n.text.secondary,justifyContent:"center"},buttonContainer:{justifyContent:"center"},link:{color:n.text.secondary,textDecoration:"underline",cursor:"pointer"},loadingChannels:{color:n.text.secondary},loadingWrapper:{alignItems:"center",gap:4}})),[e,t])}(r,n),P=(0,o.useCallback)((e=>{const{selection:t}=v;return t.allSelected?!t.excludedChannels.includes(e):!!t.selectedChannels.includes(e)}),[v]),L=(0,o.useCallback)((()=>{const{selection:e}=v;return e.allSelected?!(e.excludedChannels.length>0)||"partial":e.selectedChannels.length>0&&"partial"}),[v]),K=(0,o.useCallback)((()=>{const{selection:e}=v;return!!e.allSelected||(!!e.joinFutureChannels||e.selectedChannels.length>0)}),[v]),R=(0,o.useCallback)((()=>[(0,F.jsxs)(M().wt,{style:{gap:4},children:[(0,F.jsx)("div",{style:z.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.slack.waitingForConnectionNoteHeading1",defaultMessage:"Slack should open automatically on a new tab."},"note1-1")}),(0,F.jsx)("div",{style:z.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.slack.waitingForConnectionNoteBody1",defaultMessage:"If it doesn't, {ClickHereToRetry}",values:{ClickHereToRetry:(0,F.jsx)("a",{style:z.link,href:v.authUrl,target:"_blank",children:(0,F.jsx)(_().sA,{id:"universalSearch.slack.confirmModalNote1Retry",defaultMessage:"click here to retry"})})}},"note1-2")})]},"note-1"),(0,F.jsxs)(M().wt,{style:{gap:4},children:[(0,F.jsx)("div",{style:z.noteHeading,children:v.isSlackGridAiConnectorEnabled?(0,F.jsx)(_().sA,{id:"universalSearch.slack.grid.workspaceOrAdminHeading",defaultMessage:"If you are a Slack organization owner or administrator:"},"gridNote2-2"):(0,F.jsx)(_().sA,{id:"universalSearch.slack.workspaceAdminHeading",defaultMessage:"If you are a Slack workspace administrator:"},"note2-2")}),(0,F.jsx)("div",{style:z.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.slack.workspaceAdminBody",defaultMessage:"Follow Slack’s instructions to connect. Return to this window, and the process will continue automatically."},"note2-3")}),(0,F.jsxs)(M().wt,{style:{marginTop:16,gap:4},children:[(0,F.jsx)("div",{style:z.noteHeading,children:(0,F.jsx)(_().sA,{id:"universalSearch.slack.notWorkspaceAdminHeading",defaultMessage:"If you are not authorized to install external apps:"},"note2-4")}),(0,F.jsx)("div",{style:z.noteBody,children:(0,F.jsx)(_().sA,{id:"universalSearch.slack.notWorkspaceAdminBody",defaultMessage:"Follow the instructions to request access to the connection. Then, revisit the connect menu to continue setup."},"note2-5")})]})]},"note-2")]),[v,z]),Y=(0,o.useCallback)((()=>v.isEditing?(0,F.jsxs)(M().Ye,{style:z.loadingWrapper,children:[(0,F.jsx)(ge().A,{}),(0,F.jsx)("div",{style:z.loadingChannels,children:(0,F.jsx)(_().sA,{defaultMessage:"Loading channels",id:"slackChannelSelection.isLoadingChannels"})})]}):r?(0,F.jsxs)(M().wt,{style:z.waitingForConnectionWrapper,children:[R().map(((e,t)=>(0,F.jsxs)(M().Ye,{gap:8,style:{marginTop:4,marginBottom:6},children:[(0,F.jsx)(A().A,{number:t+1}),(0,F.jsx)("div",{style:z.note,children:e})]},t))),(0,F.jsx)(M().Ye,{style:z.buttonContainer,children:(0,F.jsx)(C().A,{style:{marginTop:16,width:120,borderRadius:6},onClick:j,children:(0,F.jsxs)(M().Ye,{style:z.learnMoreButton,children:[(0,F.jsx)(_().sA,{id:"universalSearch.slack.waitingForConnection.learnMore",defaultMessage:"Learn More"}),(0,S().X)({width:16,height:16})]})})})]}):(0,F.jsxs)(M().wt,{children:[(0,F.jsxs)(M().Ye,{style:z.channelItem,children:[(0,F.jsx)(qe().A,{checked:L(),checkSize:10,size:14,onClick:()=>{(0,T().u4)({environment:h,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:v.selection.allSelected?"all_channels_deselected":"all_channels_selected",integration_type:"slack",setup_session_id:v.sessionId,from:v.analyticsFrom}}}),x().R.setState({...v,selection:{...v.selection,allSelected:!v.selection.allSelected,selectedChannels:[],excludedChannels:[]}})}}),(0,F.jsx)("div",{style:z.channelsText,children:(0,F.jsx)(_().sA,{id:"universalSearch.integration.slackIngestion.allPublicChannels",defaultMessage:"All public channels"})})]}),(0,F.jsx)(Ge().A,{style:z.divider,size:4}),(0,F.jsxs)(F.Fragment,{children:[n?(0,F.jsx)(F.Fragment,{}):(0,F.jsxs)(M().Ye,{style:z.loadingChannelsWrapper,children:[(0,F.jsx)(ge().A,{}),(0,F.jsxs)(M().wt,{children:[(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"universalSearch.integration.slackIngestion.loadedXChannels",defaultMessage:"{channelsCount} channels loaded...",values:{channelsCount:l.length}})}),(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"universalSearch.integration.slackIngestion.loading1000PerMinute",defaultMessage:"This can take one minute per every 1,000 public channels."})})]})]}),(0,F.jsx)(M().wt,{style:z.selectionWrapper,children:(e?l.filter((t=>t.name.includes(e))):l).map((e=>(0,F.jsxs)(M().Ye,{gap:8,style:z.channelItemWrapper,children:[(0,F.jsx)(qe().A,{checked:P(e.id),onClick:()=>{const{selection:t}=v;(0,T().u4)({environment:h,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:P(e.id)?"specific_channel_deselected":"specific_channel_selected",integration_type:"slack",setup_session_id:v.sessionId,from:v.analyticsFrom}}}),t.allSelected?t.excludedChannels.includes(e.id)?x().R.setState({...v,selection:{...t,excludedChannels:t.excludedChannels.filter((t=>t!==e.id))}}):x().R.setState({...v,selection:{...t,excludedChannels:t.excludedChannels.concat(e.id)}}):x().R.setState({...v,selection:{...t,allSelected:!1,selectedChannels:t.selectedChannels.includes(e.id)?t.selectedChannels.filter((t=>t!==e.id)):t.selectedChannels.concat(e.id),excludedChannels:[]}})},checkSize:10,size:14},`${e.id}-checkbox`),(0,F.jsx)("div",{style:z.channelsText,children:`# ${e.name}`},`${e.id}-label`)]},e.id)))})]})]})),[v,r,z,L,e,l,n,R,j,h,P]);return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:async()=>{const{accept:e}=await sn().Gh({message:(0,F.jsx)(_().sA,{id:"universalQna.slackChannelSelection.closeConfirm",defaultMessage:"Are you sure you want to dismiss? You will lose all the progress you made."}),acceptLabel:(0,F.jsx)(_().sA,{id:"universalQna.slackChannelSelection.dismiss",defaultMessage:"Dismiss"})});e&&(x().R.reset(),D(),(0,T().u4)({environment:h,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"drop_off_slack_data_selection",integration_type:"slack",setup_session_id:v.sessionId,from:v.analyticsFrom}}}))},open:"data-selection"===v.currentScreen,render:()=>(0,F.jsxs)("div",{style:z.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:H().z,title:!r||v.isEditing?(0,F.jsx)(_().sA,{id:"universalQnA.slack.channelSelectionScreenTitle",defaultMessage:"Select channels to connect"}):(0,F.jsx)(_().sA,{id:"universalQnA.slack.channelSelectionWaitingScreenTitle",defaultMessage:"Follow instructions from Slack in your browser"}),subtext:!r||v.isEditing?(0,F.jsx)(_().sA,{id:"universalQnA.slack.channelSelectionScreenSubtext",defaultMessage:"Connecting more Slack channels will give you more relevant and useful Notion AI responses"}):(0,F.jsx)(F.Fragment,{})}),r?(0,F.jsx)(F.Fragment,{}):(0,F.jsx)(Ee().A,{capture:!0,allowEsc:!0,render:()=>(0,F.jsx)(gt().A,{textWrap:!0,placement:kt().W.Top,render:n=>(0,F.jsx)("div",{...n,children:(0,F.jsx)(M().Ye,{...n,style:z.searchBarWrapper,children:(0,F.jsx)(At().A,{id:"slackUniversalQnASearchBar",style:z.searchBar,placeholder:ke().A.formatMessage(an.searchForAChannel),value:e,onChange:e=>{t(e.target.value),(0,T().u4)({environment:h,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"filter_slack_channels",integration_type:"slack",setup_session_id:v.sessionId,from:v.analyticsFrom}}})}},"slackUniversalQnASearchBar")})}),renderTooltip:()=>(0,F.jsx)("div",{style:{width:250},children:(0,F.jsx)(_().sA,{id:"universalSearch.slack.searchBarTooltip",defaultMessage:"All channels may not have been searched. Full search will be available once all channels are loaded."})}),disableTooltip:n})}),(0,F.jsx)(M().Ye,{style:z.selectionContainer,children:(0,F.jsx)(M().wt,{style:z.selection,children:Y()})}),!r&&(0,F.jsxs)(M().wt,{style:z.footer,children:[(0,F.jsxs)(M().Ye,{style:z.futureChannelsCheckboxWrapper,children:[(0,F.jsx)(qe().A,{checked:v.selection.joinFutureChannels,checkSize:10,size:14,onClick:()=>{(0,T().u4)({environment:h,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:v.selection.joinFutureChannels?"dont_join_future_channels":"join_future_channels",integration_type:"slack",setup_session_id:v.sessionId,from:v.analyticsFrom}}}),x().R.setState({...v,selection:{...v.selection,joinFutureChannels:!v.selection.joinFutureChannels}})}}),(0,F.jsx)("div",{style:z.channelsText,children:(0,F.jsx)(_().sA,{id:"universalSearch.integration.slackIngestion.allFuturePublicChannels",defaultMessage:"Add public channels created in future"})})]}),(0,F.jsx)(J().A,{style:z.connectButton,onClick:N,disabled:!K(),children:(0,F.jsx)(_().sA,{id:"universalSearch.integration.connect",defaultMessage:"Connect"})})]})]})})}const cn=function(){const e=(0,i().v3)(),t=(0,s().O$)(x().R),n=(0,y().IS)((e=>({wrapper:{width:400},logoSection:{paddingTop:"40px",paddingBottom:"16px",gap:8,justifyContent:"center",alignItems:"center"},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:e.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",textAlign:"center"},title:{fontSize:17,fontWeight:w().Wy.medium,lineHeight:"22px",marginBottom:"24px"},nextStepsWrapper:{width:"100%",justifyContent:"center"},nextStepsContainer:{padding:"16px 24px",width:"100%",font:w().Tf.sans},nextStepsHeading:{fontWeight:w().Wy.semibold,fontSize:14,lineHeight:"18px",marginBottom:"14px"},note:{fontWeight:w().Wy.regular,fontSize:14,lineHeight:"18px",marginLeft:"8px"},notes:{marginLeft:"8px",marginTop:"6px",alignItems:"center",gap:10,font:w().Tf.sans,listStylePosition:"outside",paddingLeft:"16px"},footer:{justifyContent:"center",alignItems:"center",bottom:0,width:"100%",padding:"20px 20px 20px 20px",gap:6},connectButton:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"},goBackButton:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"},learnMoreText:{fontWeight:w().Wy.medium,fontSize:12,gap:5,justifyContent:"center",alignItems:"center",padding:"4px 8px 4px 8px",color:`${e.text.secondary}`},externalLinkIcon:{width:16,height:16},link:{color:e.text.secondary,textDecoration:"underline",cursor:"pointer"}})),[]),a=(0,o.useCallback)((()=>{if(t.isSlackGridAiConnectorEnabled)return[(0,F.jsx)(_().sA,{id:"universalSearch.slack.grid.confirmModalNote1",defaultMessage:"Select your workspaces on your Slack Admin Dashboard"},"gridNote1"),(0,F.jsx)(_().sA,{id:"universalSearch.slack.grid.confirmModalNote2",defaultMessage:"Notion AI will connect to your channels. This can take up to 36 hours."},"gridNote2"),(0,F.jsx)(_().sA,{id:"universalSearch.slack.grid.confirmModalNote3",defaultMessage:" Notion AI will be ready to answer questions across Notion and Slack Grid."},"gridNote3")];return[(0,F.jsx)(_().sA,{id:"universalSearch.slack.confirmModalNote1",defaultMessage:"Notion AI will join all public channels in Slack"},"note1"),(0,F.jsx)(_().sA,{id:"universalSearch.slack.confirmModalNote2",defaultMessage:"Connecting your channels may take up to 36 hours."},"note2"),(0,F.jsx)(_().sA,{id:"universalSearch.slack.confirmModalNote3",defaultMessage:"Notion AI will be ready to answer questions across Notion and Slack knowledge."},"note3")]}),[t.isSlackGridAiConnectorEnabled]),r=(0,o.useCallback)((()=>{x().R.setState({...t,isPublicSync:!0,inProgress:!0,currentScreen:"none",ingestionProgress:1}),X().D6({label:(0,F.jsx)(_().sA,{id:"slackIngestionConfirmModal.ingestion.acknowledge",defaultMessage:"Started syncing from Slack. This can take up to 36 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,F.jsx)(C().A,{onClick:X().N2,children:(0,F.jsx)(_().sA,{id:"slackIngestionConfirmModal.ingestion.startedMessageDismiss",defaultMessage:"Close"})})})}),[t]),c=(0,o.useCallback)((()=>{const n=t.gridSetupUrl;n&&((0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"slack_grid_select_workspaces_clicked",integration_type:"slack",setup_session_id:t.sessionId,from:t.analyticsFrom}}}),e.device.isElectron?I().openExternalUrl(n):window.open(n,"_blank"))}),[e,t.analyticsFrom,t.gridSetupUrl,t.sessionId]);return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>{x().R.reset(),(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"slack_got_it_modal_dismissed",integration_type:"slack",setup_session_id:t.sessionId,from:t.analyticsFrom}}})},open:"confirmation"===t.currentScreen,render:()=>(0,F.jsxs)("div",{style:n.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:H().z,title:t.isSlackGridAiConnectorEnabled?(0,F.jsx)(_().sA,{id:"universalSearch.slack.heresWhatToDoNext",defaultMessage:"Here's what to do next"}):(0,F.jsx)(_().sA,{id:"universalSearch.slack.confirmModalTitle",defaultMessage:"We're getting you set up"})}),(0,F.jsx)(M().Ye,{style:n.nextStepsWrapper,children:(0,F.jsxs)("div",{style:n.nextStepsContainer,children:[(0,F.jsx)(M().Ye,{style:{alignItems:"center"},children:(0,F.jsx)("div",{style:n.nextStepsHeading,children:t.isSlackGridAiConnectorEnabled?(0,F.jsx)(F.Fragment,{}):(0,F.jsx)(_().sA,{id:"universalSearch.confirm.whatHappensNext",defaultMessage:"What happens next"})})}),(0,F.jsx)(M().wt,{gap:8,children:a().map(((e,t)=>(0,F.jsxs)(M().Ye,{gap:8,style:{marginBottom:6},children:[(0,F.jsx)(A().A,{number:t+1}),(0,F.jsx)("div",{style:n.note,children:e})]},t)))})]})}),(0,F.jsx)(M().wt,{style:n.footer,children:t.isSlackGridAiConnectorEnabled?(0,F.jsx)(J().A,{style:n.connectButton,onClick:c,children:(0,F.jsx)(_().sA,{id:"universalSearch.integration.girdConfirmIngestion",defaultMessage:"Select Slack workspaces"})}):(0,F.jsx)(J().A,{style:n.connectButton,onClick:r,children:(0,F.jsx)(_().sA,{id:"universalSearch.integration.confirmIngestion",defaultMessage:"Got it"})})})]})})};const ln=function(){const e=(0,s().O$)(x().R),[t,n]=(0,o.useState)(!1),r=(0,i().v3)(),c=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),[l,d]=(0,o.useState)(!1),[g,h]=(0,o.useState)(!0),[m,v]=(0,o.useState)([]),[S,j]=(0,o.useState)(!1);(0,a().Yb)((async()=>{if(!c||"settings"!==e.currentScreen)return;h(!0);const t=await b().callApi({eventName:"getIngestedSlackChannels",environment:r,data:{spaceId:c}});"success"===t.type&&(h(!1),v(t.data.channels))}),[r,e.currentScreen,c]);const A=(0,o.useCallback)((()=>{const e=p().default.getConfigKey("ingestion","slack"),t=null==e?void 0:e.learnMoreUrl;t&&window.open(t,"_blank")}),[]),D=(0,o.useCallback)((()=>{x().R.reset()}),[]),W=(0,o.useCallback)((()=>{n(!1)}),[]),B=(0,o.useCallback)((async()=>{if(!c)return;d(!0);if("success"===(await b().callApi({eventName:"disconnectSlackIngestion",environment:r,data:{spaceId:c,disconnectForWorkspace:!0,disconnectReason:"admin_disconnect"}})).type){var e;x().R.setState({...x().R.state,isDisconnecting:!0});const t=f().A.state.appsConnectionData.filter((e=>e.id!==Ye().e5)),o=u().default.state.currentUserStore;f().A.setState({...f().A.state,appsConnectionData:[...t,{connectionStatus:"disconnecting",connectionLastEditedTimestamp:Date.now(),connectionType:"slack",connectorEmail:(null==o?void 0:o.getEmail())||"",id:Ye().e5,connectorNotionId:null==o||null===(e=o.getModel())||void 0===e?void 0:e.id}]}),X().D6({label:(0,F.jsx)(_().sA,{id:"slackIngestionConfirmModal.ingestion.acknowledgeDisconnect",defaultMessage:"Started disconnecting Slack. This can take up to 3 hours."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,F.jsx)(C().A,{onClick:X().N2,children:(0,F.jsx)(_().sA,{id:"slackIngestionConfirmModal.ingestion.dismissAcknowledgeDisconnect",defaultMessage:"Close"})})}),n(!1),x().R.reset()}else d(!1),X().D6({label:(0,F.jsx)(_().sA,{id:"slackIngestionConfirmModal.ingestion.disconnectError",defaultMessage:"Failed to disconnect Slack. Please try again later."}),position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"},right:(0,F.jsx)(C().A,{onClick:X().N2,children:(0,F.jsx)(_().sA,{id:"slackIngestionConfirmModal.ingestion.closeSnackbarError",defaultMessage:"Close"})})})}),[r,c]),N=(0,y().IS)((e=>({wrapper:{width:400},channelDetailsContainer:{width:352,fontSize:14,fontWeight:w().Wy.regular,color:e.text.secondary},channelDetailsSubtitle:{textAlign:"center",marginBottom:"16px"},channelDetailsWrapper:{justifyContent:"center",paddingTop:"12px",paddingBottom:"12px"},channelNamesContainer:{gap:2,color:e.text.primary},footer:{justifyContent:"center",alignItems:"center",width:"100%",padding:"20px 20px 20px 20px",gap:8},disconnectButton:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"},moreChannelsContainer:{paddingTop:8},learnMoreButton:{fontSize:14,fontWeight:w().Wy.semibold,borderRadius:"4px",width:"100%"},learnMoreText:{fontWeight:w().Wy.medium,fontSize:12,gap:5,justifyContent:"center",alignItems:"center",padding:"4px 8px 4px 8px",color:`${e.text.secondary}`},externalLinkIcon:{width:16,height:16},confirmWrapper:{width:300,alignItems:"center"},confirmContainer:{padding:20},confirmModalTitle:{fontSize:17,fontWeight:w().Wy.semibold,color:e.text.primary,textAlign:"center"},confirmModalSubTitle:{fontSize:14,fontWeight:w().Wy.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},confirmModalDescription:{fontSize:14,fontWeight:w().Wy.regular,color:e.text.secondary,paddingTop:8,textAlign:"center"},goBackButton:{fontSize:14,fontWeight:w().Wy.regular,width:"100%",textAlign:"center",padding:"4px 0px 4px 0px"},confirmDisconnectButton:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"},confirmModalActionButtons:{gap:8,paddingTop:20},spinner:{paddingTop:20,paddingBottom:40,justifyContent:"center",alignItems:"center"},editChannelsButton:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"}})),[]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:W,open:t,render:()=>(0,F.jsx)("div",{style:N.confirmWrapper,children:(0,F.jsxs)("div",{style:N.confirmContainer,children:[(0,F.jsx)("div",{style:N.confirmModalTitle,children:(0,F.jsx)(_().sA,{id:"slackIngestionSettings.confirmation.title",defaultMessage:"Are your sure?"})}),(0,F.jsx)("div",{style:N.confirmModalSubTitle,children:(0,F.jsx)(_().sA,{id:"slackIngestionSettings.confirmation.subTitle",defaultMessage:"Your Slack data will be permanently deleted from Notion."})}),(0,F.jsx)("div",{style:N.confirmModalDescription,children:(0,F.jsx)(_().sA,{id:"slackIngestionSettings.confirmation.description",defaultMessage:"This process can take up to 3 hours, and you’ll only be able to reconnect after disconnecting is complete."})}),(0,F.jsxs)(M().wt,{style:N.confirmModalActionButtons,children:[(0,F.jsx)(J().A,{isRed:!0,style:N.confirmDisconnectButton,disabled:l,onClick:B,children:(0,F.jsx)(_().sA,{id:"slackIngestion.confirmDisconnectModal.confirmDisconnect",defaultMessage:"Disconnect for everyone"})}),(0,F.jsx)(C().A,{style:N.goBackButton,onClick:W,children:(0,F.jsx)(_().sA,{id:"slackIngestion.confirmDisconnectModal.goBack",defaultMessage:"Go back"})})]})]})})}),(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:D,open:"settings"===e.currentScreen,render:()=>(0,F.jsxs)("div",{style:N.wrapper,children:[(0,F.jsx)(U,{integrationLogoIcon:H().z,title:(0,F.jsx)(_().sA,{id:"universalSearch.slack.settingsModalTitle",defaultMessage:"Slack is connected to Notion AI"}),subtext:g||e.isSlackGridAiConnectorEnabled?void 0:(0,F.jsx)(_().sA,{id:"universalSearch.slackIngestion.settingsModal.canAnswerFrom",defaultMessage:"Notion AI can answer questions about {channelsCount} public channels in Slack.",values:{channelsCount:m.length}})}),g?(0,F.jsx)(M().Ye,{style:N.spinner,children:(0,F.jsx)(ge().A,{})}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(M().Ye,{style:N.channelDetailsWrapper,children:e.isSlackGridAiConnectorEnabled?(0,F.jsx)(M().wt,{style:N.channelDetailsContainer,children:(0,F.jsx)(_().sA,{id:"slackSettings.grid.note",defaultMessage:"This Notion workspace is connected to Slack Enterprise Grid. Settings can be only configured in the Slack Admin Dashboard."})}):(0,F.jsxs)(M().wt,{style:N.channelDetailsContainer,children:[(0,F.jsx)(M().wt,{style:N.channelNamesContainer,children:m.slice(0,4).map((e=>(0,F.jsx)("div",{children:`# ${e}`},e)))}),m.length-4>0?(0,F.jsx)(M().Ye,{style:N.moreChannelsContainer,children:(0,F.jsx)(_().sA,{id:"universalSearch.slackIngestion.settingsModal.moreChannels",defaultMessage:"{moreChannelsCount} more",values:{moreChannelsCount:m.length-4}})}):(0,F.jsx)(F.Fragment,{})]})}),(0,F.jsxs)(M().wt,{style:N.footer,children:[(0,F.jsx)(E().A,{size:"lg",disabled:S,style:N.editChannelsButton,onClick:async()=>{if(!c)return;if(e.isSlackGridAiConnectorEnabled){j(!0);const e=await b().callApi({eventName:"getUrlForGridSetup",environment:r,data:{spaceId:c}});return"success"===e.type&&(r.device.isElectron?I().openExternalUrl(e.data.url):window.open(e.data.url,"_blank")),void j(!1)}j(!0);const t=await b().callApi({eventName:"getIngestionOptions",environment:r,data:{spaceId:c}});"success"===t.type&&((0,T().u4)({environment:r,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"edit_channels",integration_type:"slack",setup_session_id:e.sessionId,from:e.analyticsFrom}}}),x().R.setState({...e,currentScreen:"data-selection",selection:{allSelected:t.data.selection.allSelected,selectedChannels:t.data.selection.selectedChannels,excludedChannels:t.data.selection.excludedChannels,joinFutureChannels:t.data.selection.joinFutureChannels},isEditing:!0})),j(!1)},children:S?(0,F.jsxs)(M().Ye,{style:{alignItems:"center",gap:4,fontWeight:w().Wy.regular},children:[(0,F.jsx)(ge().A,{}),(0,F.jsx)(_().sA,{id:"slackUniversalSearch.integration.loadingPreviousSelection",defaultMessage:"Loading previous selection"})]}):e.isSlackGridAiConnectorEnabled?(0,F.jsx)(_().sA,{id:"slackUniversalSearch.integration.editTeams",defaultMessage:"Edit settings"}):(0,F.jsx)(_().sA,{id:"slackUniversalSearch.integration.editChannels",defaultMessage:"Edit channels"})}),(0,F.jsx)(Ae().E,{style:N.disconnectButton,onClick:()=>{n(!0)},children:(0,F.jsx)(_().sA,{id:"slackUniversalSearch.integration.disconnectSlack",defaultMessage:"Disconnect"})}),(0,F.jsx)(C().A,{style:N.learnMoreButton,onClick:A,children:(0,F.jsxs)(M().Ye,{style:N.learnMoreText,children:[(0,F.jsx)(_().sA,{id:"universalSearch.integration.learnMore",defaultMessage:"Learn more"}),(0,Ce().M)(N.externalLinkIcon)]})})]})]})]})})]})};var dn=()=>n(209660),un=()=>n(437622);function gn(e){const{open:t}=e,n=(0,y().IS)((()=>({loadingWrapper:{padding:20,fontSize:w().J.UISmall.desktop,fontWeight:w().Wy.regular,justifyContent:"center",gap:8,alignItems:"center"}})),[]);return(0,F.jsx)(k().A,{showCloseIcon:!0,open:t,render:()=>(0,F.jsxs)(M().Ye,{style:n.loadingWrapper,children:[(0,F.jsx)(_().sA,{id:"aiConnectors.common.isFetchingConnection",defaultMessage:"Getting connection status"}),(0,F.jsx)(ge().A,{})]})})}var pn=()=>n(627637);const hn=(0,_().YK)({title:{id:"universalQna.slack.alreadyConnected",defaultMessage:"Slack is already connected to Notion AI"}});function mn(e){const{open:t}=e,n=(0,i().v3)(),s=(0,_().tz)(),a=(0,y().IS)((e=>({body:{alignItems:"center",color:e.text.secondary,fontSize:12},container:{padding:12},tryItButton:{marginTop:16}})),[]),r=(0,o.useCallback)((()=>{x().R.setState({...x().R.state,currentScreen:"none"}),je().assistantMenuActions.openAssistantRightHandSideMenu({environment:n,from:"slack_already_connected",primeTextInput:s.formatMessage(pn().Ax.primedTextInput)})}),[n,s]);return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>{x().R.reset()},open:t,ariaLabel:s.formatMessage(hn.title),render:()=>(0,F.jsxs)(M().wt,{style:a.container,children:[(0,F.jsx)(U,{integrationLogoIcon:H().z,title:(0,F.jsx)(_().sA,{...hn.title})}),(0,F.jsxs)(M().wt,{gap:2,style:a.body,children:[(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"universalQna.slack.slackConnectedDescription",defaultMessage:"You’re fully set up."})}),(0,F.jsx)("div",{children:(0,F.jsx)(_().sA,{id:"universalQna.slack.tryIt",defaultMessage:"Try asking AI about public Slack conversations!"})})]}),(0,F.jsx)(E().A,{size:"lg",style:a.tryItButton,onClick:r,children:(0,F.jsx)(_().sA,{id:"universalQna.slack.tryAskingAQuestion",defaultMessage:"Try asking a question"})})]})})}const vn=(0,_().YK)({slackUniversalSearchOauthPopupTitle:{id:"universalSearch.slack.slackOauthPopupTitle",defaultMessage:"Authenticate Slack"}});function fn(){var e;const t=(0,o.useMemo)((()=>xe("slack")),[]),n=(0,o.useMemo)((()=>ye("slack")),[]),c=(0,i().v3)(),l=(0,ee().n)(),d=(0,s().K8)((()=>g().zD.state.isAiEnabled()),[]),h=(0,s().K8)((()=>u().default.state.currentSpaceStore),[]),m=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),v=(0,s().O$)(x().R),f=(0,s().K8)((()=>p().default.getConfigKey("ingestion","slack").learnMoreUrl),[]),[y]=(0,a().Yb)((async()=>{if(!m||"introduction"!==v.currentScreen)return;const e=await b().callApi({eventName:"getConnectedAppsForUniversalQna",environment:c,data:{spaceId:m},headers:(0,He().WS)({spaceId:m})});return"success"===e.type?{isPublicConnected:e.data.connectedApps.includes("slack-admin")}:void 0}),[c,v.currentScreen,m]),S=(0,s().K8)((()=>h&&(0,un().oT)(h)),[h]),j=(0,Z().J)(),_=!h||!m||(null===(e=y.value)||void 0===e?void 0:e.isPublicConnected)||!d||!S,w="resolved"===y.status&&"introduction"===v.currentScreen,C=j?"proceed_to_slack_data_selection":"contact_workspace_owners";(0,o.useEffect)((()=>{!_&&w&&(j?(0,T().u4)({environment:c,event:{eventName:"universal_qna_onboarding_modal_open",eventProperties:{integration_type:"slack",setup_session_id:v.sessionId,from:v.analyticsFrom,is_space_admin:j,is_ai_eligible:l}}}):(0,T().u4)({environment:c,event:{eventName:"universal_qna_request_modal_open",eventProperties:{integration_type:"slack",from:v.analyticsFrom,is_ai_eligible:l}}}))}),[c,_,v.sessionId,v.analyticsFrom,w,j,l]);const A=(0,o.useCallback)((()=>{x().R.reset(),(0,T().u4)({environment:c,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"drop_off_slack_intro_modal",integration_type:"slack",setup_session_id:v.sessionId,from:v.analyticsFrom}}})}),[c,v]);if(!m)return(0,F.jsx)(F.Fragment,{});if(!c.device.isMobile&&_){var k;const e=Boolean(null===(k=y.value)||void 0===k?void 0:k.isPublicConnected);return e?(0,F.jsx)(mn,{open:w&&e}):(0,F.jsx)(F.Fragment,{})}return c.device.isMobile?(0,F.jsx)(Se,{logo:H().z,appName:"Slack",open:"introduction"===v.currentScreen,onClosed:()=>{x().R.reset()},learnMoreUrl:f}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(gn,{open:"introduction"===v.currentScreen&&"resolved"!==y.status}),j?(0,F.jsx)(Q,{onConnect:async()=>{if(!l)return(0,T().u4)({environment:c,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"show_purchase_ai",integration_type:"slack",setup_session_id:v.sessionId,from:v.analyticsFrom}}}),dn().Ow({openedFrom:"slack_qna_intro_modal",currentTab:"plans"}),void x().R.reset();x().R.setState({...x().R.state,currentScreen:"data-selection"});const e=await b().callApi({eventName:"getSlackIngestionAuthorizeUrl",environment:c,data:{spaceId:m,isAdminAuth:!0,isDesktopApp:c.device.isElectron,sessionId:v.sessionId}});"success"===e.type&&(x().R.setState({...x().R.state,authUrl:e.data.url}),c.device.isElectron?I().openExternalUrl(e.data.url):await ue().P(c,{width:800,height:600,url:e.data.url,titleMessage:vn.slackUniversalSearchOauthPopupTitle}),(0,T().u4)({environment:c,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:C,integration_type:"slack",setup_session_id:v.sessionId,from:v.analyticsFrom}}}))},onDismiss:A,onLearnMore:()=>{window.open(f,"_blank")},title:t,integrationIcon:H().z,titleWidth:210,notes:n,open:w}):(0,F.jsx)(de,{connector:"slack",handleClose:()=>(0,r().resetAiConnectorStatus)("slack"),open:w,analyticsFrom:v.analyticsFrom,setupSessionId:v.sessionId,messages:re().vK})]})}const xn=function(){const e=(0,i().v3)(),t=(0,s().O$)(x().R),n=(0,y().IS)((e=>({wrapper:{width:400,padding:24},logoSection:{paddingTop:"40px",paddingBottom:"16px",gap:8,justifyContent:"center",alignItems:"center"},logos:{width:40,height:40},arrowLogo:{width:20,height:20,color:e.icon.secondary},titleWrapper:{width:"100%",justifyContent:"center",textAlign:"center"},title:{fontSize:17,fontWeight:w().Wy.medium,lineHeight:"22px",marginBottom:"24px",textWrap:"balance"},nextStepsWrapper:{width:"100%",justifyContent:"center",color:e.text.secondary},footer:{justifyContent:"center",alignItems:"center",bottom:0,width:"100%",gap:12,marginTop:12},gotIt:{fontSize:14,fontWeight:w().Wy.medium,width:"100%"},pickAnother:{fontSize:14,fontWeight:w().Wy.medium,width:"100%",textAlign:"center"}})),[]),a=(0,o.useCallback)((()=>{x().R.reset()}),[]),r=(0,o.useCallback)((()=>{x().R.setState({...x().R.getInitialState(),currentScreen:"introduction"})}),[]);return(0,F.jsx)(k().A,{showCloseIcon:!0,onDismiss:()=>{x().R.reset(),(0,T().u4)({environment:e,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"slack_workspace_already_connected_modal_close",integration_type:"slack",setup_session_id:t.sessionId,from:t.analyticsFrom}}})},open:"alreadyConnected"===t.currentScreen,render:()=>(0,F.jsxs)("div",{style:n.wrapper,children:[(0,F.jsx)(M().Ye,{style:n.logoSection,children:(0,Pe().Q)({width:24,height:24})}),(0,F.jsx)(M().Ye,{style:n.titleWrapper,children:(0,F.jsx)(M().Ye,{style:n.title,children:(0,F.jsx)(_().sA,{id:"universalSearch.slack.workspaceAlreadyConnected",defaultMessage:"Slack is already connected to another Notion workspace"})})}),(0,F.jsx)(M().Ye,{style:n.nextStepsWrapper,children:(0,F.jsx)(_().sA,{id:"universalSearch.slack.onlyOneWorkspaceCanBeConnected",defaultMessage:"Currently, Slack can be only connected to one workspace at a time"})}),(0,F.jsxs)(M().wt,{style:n.footer,children:[(0,F.jsx)(E().A,{size:"lg",style:n.gotIt,onClick:a,children:(0,F.jsx)(_().sA,{id:"universalSearch.slack.gotItOneWorkspaceConnected",defaultMessage:"Got it"})}),(0,F.jsx)(C().A,{style:n.pickAnother,onClick:r,children:(0,F.jsx)(_().sA,{id:"universalSearch.slack.pickDifferentWorkspace",defaultMessage:"Pick a different Slack workspace"})})]})]})})};function yn(){const e=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),t=(0,s().K8)((()=>{var e;return null===(e=u().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),n=(0,i().v3)(),y=(0,s().O$)(f().A),S=(0,v().P9)({name:"ai_connectors",spaceId:e,userId:t}),j=(0,s().K8)((()=>g().zD.canUseUniversalGithubSearchScope()),[]),_=(0,s().K8)((()=>g().zD.isJiraQnaEnabled()),[]),w=(0,s().K8)((()=>g().zD.canUseUniversalMicrosoftTeamsSearchScope()),[]);return(0,o.useEffect)((()=>{"introduction"!==l().o.state.currentScreen&&l().o.reset()}),[]),(0,c().ts)(),(0,a().Yb)((async()=>{e&&w&&("info_screen"!==d().F.state.currentScreen&&d().F.reset(),await(0,r().getMicrosoftTeamsAIConnectorStatusAction)({environment:n,spaceId:e}))}),[e,w,n]),(0,o.useEffect)((()=>{const{connectorTriggeringUpsell:e,upsellTriggeredAt:t}=y,n=p().default.getConfigKey("ingestion","upsellMaxDurationInSeconds")||36e5;if(S&&e&&t){if(Date.now()-t>n)return void f().A.reset();switch(e){case"slack":x().R.setState({...x().R.state,currentScreen:"introduction"});break;case"google_drive":h().d.setState({...h().d.state,screenToShow:"info_screen"});break;case"jira":m().y.setState({...m().y.state,screenToShow:"info_screen"});break;case"github":l().o.setState({...l().o.state,currentScreen:"introduction"})}f().A.reset()}}),[y,S]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(le,{}),(0,F.jsx)(on,{}),(0,F.jsx)(fn,{}),(0,F.jsx)(rn,{}),(0,F.jsx)(cn,{}),(0,F.jsx)(ln,{}),(0,F.jsx)(xn,{}),(0,F.jsx)($,{}),(0,F.jsx)(vt,{}),(0,F.jsx)(at,{}),(0,F.jsx)(lt,{}),(0,F.jsx)(dt,{}),(0,F.jsx)(mt,{}),(0,F.jsx)(st,{}),(0,F.jsx)(Ze,{}),(0,F.jsx)(Ue,{}),(0,F.jsx)(Ke,{}),(0,F.jsx)(Ve,{}),(0,F.jsx)(nt,{}),j&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Ie,{}),(0,F.jsx)(P,{}),(0,F.jsx)(Fe,{}),(0,F.jsx)(Me,{})]}),_&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(It,{}),(0,F.jsx)(yt,{}),(0,F.jsx)(jt,{}),(0,F.jsx)(wt,{}),(0,F.jsx)(Wt,{}),(0,F.jsx)(xt,{}),(0,F.jsx)(Tt,{}),(0,F.jsx)(bt,{})]}),w&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Jt,{}),(0,F.jsx)(Pt,{}),(0,F.jsx)(Kt,{}),(0,F.jsx)(qt,{}),(0,F.jsx)(Qt,{}),(0,F.jsx)(Gt,{}),(0,F.jsx)(Ut,{}),(0,F.jsx)(Vt,{}),(0,F.jsx)(Ht,{})]})]})}},471095:(e,t,n)=>{n.d(t,{i:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},i=(0,n(340498).wt)("lockFill",o)},495119:(e,t,n)=>{n.d(t,{I:()=>a});var o=n(296540),i=()=>n(484714),s=()=>n(2220);function a(e){let{feature:t,entrypoint:n}=e;const a=(0,i().v3)(),[r,c]=(0,o.useState)(!1);return{isModalOpen:r,onClick:()=>{(0,s().u)({environment:a,event:{eventName:"upgrade_request_button_clicked",eventProperties:{feature:t,entrypoint:n}}}),c(!0)},onDismiss:()=>c(!1)}}},568688:(e,t,n)=>{n.d(t,{I:()=>r});var o=()=>n(484714),i=()=>n(187174),s=()=>n(534177),a=()=>n(449506);function r(e){let{spaceId:t}=e;const n=(0,o().v3)(),[{status:r,value:c}]=(0,i().Yb)((async()=>{if(!t)return{requests:{}};const e=await a().callApi({eventName:"getAllUpgradeRequestsForSpace",environment:n,data:{spaceId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,s().HB)(e)}),[n,t],{debounce:300});return{isLoading:"pending"===r,requests:(null==c?void 0:c.requests)??{}}}},701545:(e,t,n)=>{n.d(t,{p:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("checkMarkLine",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M6.79297 13.2871C6.48047 13.2871 6.21484 13.1523 5.99609 12.8828L2.96094 9.14453C2.875 9.04297 2.8125 8.94336 2.77344 8.8457C2.73828 8.74805 2.7207 8.64648 2.7207 8.54102C2.7207 8.30664 2.79883 8.11328 2.95508 7.96094C3.11133 7.80859 3.30859 7.73242 3.54688 7.73242C3.81641 7.73242 4.04297 7.84766 4.22656 8.07812L6.76953 11.3008L11.7324 3.4375C11.834 3.28125 11.9395 3.17188 12.0488 3.10938C12.1582 3.04297 12.2949 3.00977 12.459 3.00977C12.6973 3.00977 12.8926 3.08398 13.0449 3.23242C13.1973 3.38086 13.2734 3.57031 13.2734 3.80078C13.2734 3.89453 13.2578 3.98828 13.2266 4.08203C13.1953 4.17578 13.1465 4.27344 13.0801 4.375L7.5957 12.8594C7.4082 13.1445 7.14062 13.2871 6.79297 13.2871Z"})})},750548:(e,t,n)=>{n.d(t,{k:()=>i});var o=n(296540);n(898992),n(672577);function i(e){let{requests:t,feature:n,userId:i}=e;const[s,a]=(0,o.useState)("loading");return(0,o.useEffect)((()=>{const e=function(e,t,n){var o;if(!t||!n)return"unrequested";const i=null===(o=t[e])||void 0===o?void 0:o.find((e=>e.created_by_id===n));return i&&i.request_status||"unrequested"}(n,t,i);a(e)}),[t,n,i]),[s,a]}},898615:(e,t,n)=>{n.d(t,{F:()=>s});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M9.533 6.308a.625.625 0 0 1 .884 0l2.5 2.5a.625.625 0 1 1-.884.884l-1.408-1.408v3.966a.625.625 0 1 1-1.25 0V8.234L7.917 9.692a.625.625 0 0 1-.884-.884z"}),(0,o.jsx)("path",{d:"M15.5 3.625c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-4.935l-3.871 2.978a.625.625 0 0 1-1.006-.496v-2.482H4.5a2.125 2.125 0 0 1-2.125-2.125v-7.5c0-1.174.951-2.125 2.125-2.125zm.875 2.125a.875.875 0 0 0-.875-.875h-11a.875.875 0 0 0-.875.875v7.5c0 .483.392.875.875.875h1.813c.345 0 .625.28.625.625v1.838l3.033-2.333a.63.63 0 0 1 .381-.13H15.5a.875.875 0 0 0 .875-.875z"})]})},s=(0,n(340498).wt)("commentArrowUp",i)}}]);