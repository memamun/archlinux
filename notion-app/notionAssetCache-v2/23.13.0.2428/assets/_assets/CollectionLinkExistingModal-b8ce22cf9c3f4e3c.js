"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5287,34208,35599,71204],{346:(e,t,o)=>{o.d(t,{MG:()=>m,T1:()=>f,a1:()=>h,dt:()=>b,kg:()=>I,lC:()=>g,n_:()=>v});var r=o(296540),a=()=>o(484714),n=()=>o(56366),i=()=>o(187174),c=()=>o(645873),d=()=>o(941463),s=()=>o(441199),l=()=>o(749687),u=()=>o(737230),p=()=>o(756114);const f=new(c().O2)("PerformanceToolbar",(()=>Promise.all([o.e(23806),o.e(16471),o.e(47123),o.e(17989),o.e(56985),o.e(48680),o.e(45624)]).then(o.bind(o,140401)))),m=(0,c()._h)(f,(e=>e.PerformanceToolbar)),b=(0,c()._h)(f,(e=>e.PerformanceToolbarSettings));function I(){const e=(0,a().v3)();return(0,n().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function v(){const e=(0,a().v3)(),t=S("PerformanceToolbarStore"),o=S("isPerformanceToolbarVisible");return(0,n().K8)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function g(){const e=S("PerformanceToolbarStore");return(0,n().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function h(){const e=(0,a().v3)(),t=S("createPerformanceToolbarMouseListeners"),o=S("PerformanceToolbarStore"),{sidebarExpanded:i,sidebarWidth:c,secondarySidebarExpanded:p,secondarySidebarWidth:f,updateSidebarExpanded:m,updateSidebarWidth:b}=(0,n().K8)((()=>({sidebarExpanded:l().sidebarExpandedStore.state,sidebarWidth:l().sidebarWidthStore.state,secondarySidebarExpanded:s().default.isOpen(),secondarySidebarWidth:d().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,r.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),i,c,p,f,m,b)}),[t,e,o,i,c,p,f,m,b])}function S(e){const t=I(),[{value:o}]=(0,i().Yb)((()=>t?f.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},42120:(e,t,o)=>{o.d(t,{Dl:()=>ee,U2:()=>H,Zk:()=>te,_R:()=>V,bE:()=>oe,c:()=>Y,cJ:()=>X,eN:()=>G,e_:()=>K,g4:()=>J,qy:()=>$});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949),o(581454),o(737550);var r=()=>o(244641),a=()=>o(584262),n=()=>o(66689),i=()=>o(890409),c=()=>o(970013),d=()=>o(597777),s=()=>o(604995),l=()=>o(206267),u=()=>o(433847),p=()=>o(912720),f=()=>o(199378),m=()=>o(179034),b=()=>o(519831),I=()=>o(96689),v=()=>o(854150),g=()=>o(950914),h=()=>o(864779),S=()=>o(919709),y=()=>o(374562),w=()=>o(313892),R=()=>o(813297),C=()=>o(465364),_=()=>o(654062),k=()=>o(601734),M=()=>o(989423),A=()=>o(594794),T=()=>o(972435),x=()=>o(351360),E=()=>o(630116),L=()=>o(908447),P=()=>o(966759),Q=()=>o(449506),D=()=>o(235191),B=()=>o(686526),N=()=>o(896628),U=()=>o(246826),O=()=>o(867201),z=()=>o(317909),W=()=>o(345913),j=()=>o(755199);const F="week";function V(e){var t;const{environment:o,transaction:r,tasksBlockStore:a,sprintsBlockStore:n}=e,i=null===(t=n.getFormat())||void 0===t?void 0:t.collection_pointer,c=a.getFormat().collection_pointer;if(!i||!c)return;const d=E().md.createChildStore(n,i),s=d.getRole()??"none";if(!(0,u().q_)(s,"editor"))return;d.getAutomationStores().some((e=>e.isCompleteSprintAutomation()))||q({environment:o,transaction:r,sprintCollectionStore:d,taskCollectionStore:E().md.createChildStore(a,c),sprintSettingsConfig:g().AL})}function q(e){const{environment:t,sprintSettingsConfig:o,transaction:r,sprintCollectionStore:a,taskCollectionStore:n}=e,i=a.getSpaceId(),c=(0,A().Z1)({environment:t,table:p().yB,spaceId:i}),d=(0,A().Z1)({environment:t,table:f().SC,spaceId:i});U().eC({environment:t,table:p().yB,inMemoryRecordCache:a.inMemoryRecordCache,value:{id:c,parent_id:a.id,parent_table:a.table,alive:!0,space_id:i,status:o.autoCompleteSprints?"active":"disabled",trigger:{id:l().JW(),type:"recurrence",recurrence:ae(o)},action_ids:[d]},transaction:r}),N().zA({stores:[a],update:{automation_ids:[...a.getFormat().automation_ids??[],c]},transaction:r}),U().eC({environment:t,table:f().SC,inMemoryRecordCache:a.inMemoryRecordCache,transaction:r,value:{id:d,parent_id:c,parent_table:p().yB,type:"complete_sprint",alive:!0,space_id:i,config:{sprint_collection:a.getSpaceShardedPointer(),task_collection:n.getSpaceShardedPointer(),complete_sprint_action:o.actionConfig.complete_sprint_action}}})}function K(e){const{environment:t,automationStore:o,transaction:r,newDuration:a,currentSprintBlockStore:n}=e;U().zv({store:o.getTriggerStore().getKeyStore("recurrence"),data:{interval:a},transaction:r}),Z({environment:t,transaction:r,automationStore:o,currentSprintBlockStore:n})}function J(e){const{environment:t,automationStore:o,transaction:r,newWeekday:a,currentSprintBlockStore:n}=e;U().zv({store:o.getTriggerStore().getKeyStore("recurrence"),data:{weekdays:[a]},transaction:r}),Z({environment:t,transaction:r,automationStore:o,currentSprintBlockStore:n})}function H(e){const{environment:t,actionStore:o,automationStore:r,transaction:a,newAutocompleteStatus:n,currentSprintBlockStore:c}=e;U().zv({store:r,data:{status:n?"active":"disabled"},transaction:a}),Z({environment:t,transaction:a,automationStore:r,currentSprintBlockStore:c});const d=r.getParentPointer();if(!d||d.table!==b().Vl)return;const s=(0,M().ik)(t),l={automation_id:r.id,automation_actions:[{automation_action_id:o.id,type:"complete_sprint"}],automation_triggers:[{type:"recurrence"}],collection_id:d.id};n?(0,i().Ah)(s,l):(0,i().vN)(s,l)}function Z(e){const{automationStore:t,currentSprintBlockStore:o,transaction:a,environment:i}=e;if(!t.isActive())return;const c=t.getRecurrence();if(!c)return;const s=(0,h().Vv)(c);if(!s)return;const l=o.getPropertyValue(n().Hx.Dates);if(!l)return;const u=(0,S().Cok)(l)[0];if(!u||"daterange"!==u.type)return;const p=u.start_date,{start_date:f,end_date:m}=(0,h().Me)({currentSprintStartDate:p,sprintSchedule:s});U().zv({store:t.getTriggerStore().getKeyStore("recurrence"),data:{start_date:(0,d().Rz)(r().c9.fromISO(f).plus({minutes:1}).toJSDate())},transaction:a}),C().D5({store:o,propertyId:n().Hx.Dates,transaction:a,environment:i,type:"dateValue",dateValue:{type:"daterange",start_date:p,end_date:m}})}function $(e){const{transaction:t,newRemainingTasksBehavior:o,actionStore:r}=e;U().zv({store:r.getConfigStore(),data:{complete_sprint_action:o},transaction:t})}async function Y(e){var t;const{appTemplatesSetupActions:o,appTemplatesSprintBoardActions:r,appConfigs:i}=await k().Aw.load(),{environment:c,collectionContextStore:d,from:s}=e,{currentSpaceViewStore:l}=x().default.state,u=d.collectionStore(),p=null==u?void 0:u.getParentBlockStore(),f=null==p?void 0:p.getParentStore(),b=null==u||null===(t=u.getFormat())||void 0===t?void 0:t.app_config_uri,g=b&&(0,w().lS)(i(),b);if(!u||!p||!f||!l||f.table!==I().NX&&f.table!==m().ev&&f.table!==v().yK||!g)return;const h=p.getFormat().app_id,S=h?await Q().callApi({eventName:"getCollectionViewBlocksByAppId",environment:c,data:{spaceId:p.getSpaceId(),appId:h}}):void 0,R="success"===(null==S?void 0:S.type)&&S.data.result.length?S.data.result.map((e=>E().Bv.createChildStore(f,{table:m().ev,id:e.blockId,spaceId:p.getSpaceId()}))):[p];await re({environment:c,taskCollectionStore:u,executeFn:()=>{const e=z().createAndCommit({userAction:"sprintSettingsActions.handleTurnOnSprints",environment:c,canUndo:!0,perform:e=>{const t=(0,y().We)(),a=o.applyTypedFeatures({environment:c,spaceViewStore:l,appParentStore:f,appUri:g.uri,features:[{type:"simple",featureUri:t.uri}],transaction:e,createOrModify:"modify",appCollectionViewBlockStores:R}),i=r.createSprintPage({environment:c,spaceViewStore:l,appParentStore:f,transaction:e,blockStores:a,creationEntryPoint:{type:"sprint_settings"}});if(B().os({collectionSettingsStore:d.settingsStore}),!i)return;const u=s?{feature:{id:n().yx.TaskToSprintRelation,from:s,type:"notion://projects/tasks_with_sprints_feature"}}:{};return(0,L().Z)({environment:c,collectionContextStore:d,from:"view_settings",property:n().yx.TaskToSprintRelation,property_type:"relation",is_suggested_property:!0,...u}),i}});e.serverCommitResult.then((()=>{const t=e.performResult;t&&O().Y({environment:c,store:t,pageVisitSource:a().y8.Create})}))}})}async function G(e){const{environment:t,collectionContextStore:o,sprintSettingsContext:r,sprintBoardViewBlockIds:i}=e,{sprintCollectionStore:c,automationContext:d,currentCollectionViewBlockStore:s,sprintCollectionViewBlockStore:l,taskCollectionStore:u,taskCollectionViewBlockStore:p}=r;if(!c||!l||!d)return;const f=p.getSpaceId(),b=[l,...i.map((e=>new(E().Bv)(t,{id:e,table:m().ev,spaceId:f})))];s.id===p.id?B().os({collectionSettingsStore:o.settingsStore}):O().Y({environment:t,store:p,pageVisitSource:a().y8.LeaveOrRemove});const{automationActions:I}=await R().QV.automations.load(),{automationStore:v}=d;await re({environment:t,taskCollectionStore:u,executeFn:()=>{z().createAndCommit({userAction:"sprintSettingsActions.handleTurnOffSprints",environment:t,canUndo:!0,perform:e=>{!function(e){const{transaction:t,blocksToDelete:o,environment:r,taskCollectionStore:a,sprintCollectionStore:i}=e;U().zv({store:i,transaction:t,data:{alive:!1}}),D().BJ({environment:r,collectionStore:a,schema:a.getSchema(),property:n().yx.TaskToSprintRelation,transaction:t,permanentlyDelete:!0}),W().oD({environment:r,blocks:o,transaction:t,permanentlyDelete:!0})}({environment:t,transaction:e,blocksToDelete:b,sprintCollectionStore:c,taskCollectionStore:u}),I.disableAutomation({automationStore:v,environment:t,transaction:e}),I.deleteAutomation({automationStore:v,environment:t,transaction:e})}}),(0,P().i)({environment:t,collectionContextStore:o,property_type:"relation",from:"view_settings",property:n().yx.TaskToSprintRelation})}})}function X(e){const{environment:t,userSettingsStore:o}=e;z().createAndCommit({userAction:"sprintSettingsActions.handleSeenSprintsEngagementBanner",environment:t,canUndo:!0,perform:e=>{j().mJ({userSettingsStore:o,data:{seen_sprint_settings_engagement_banner:!0},transaction:e})}})}function ee(e){e.settingsStore.setState({open:!0,stack:[{type:"main"},{type:"sprintSettings"}]})}function te(e){const{environment:t,collectionContextStore:o,currentViewBlockStore:r,taskCollectionViewBlockStore:a}=e,i=o.collectionViewStore();if(!i)return;const c=i.getFormat(),d=i.getRawQuery();z().createAndCommit({userAction:"sprintSettingsActions.handleManageSprintFromThisView",environment:t,canUndo:!0,perform:e=>{if((0,_().F)({collectionViewStore:i,transaction:e,update:{name:T().A.formatMessage(y().DZ.tasksCurrentSprintV2ViewName),query2:{...d,filter:void 0},format:{...c,collection_view_icon:"/icons/playback-play-button_gray.svg",property_filters:y().Wo,app_config_uri:n().Lu,hide_linked_collection_name:!0}}}),r.id===a.id){var t;const o=(null===(t=r.getFormat())||void 0===t?void 0:t.app_uri_map)??{},d=c.app_config_uri;d&&delete o[d],N().zA({stores:[a],update:{app_uri_map:{...o,[n().Lu]:i.id}},transaction:e})}}})}function oe(e){const{environment:t,sprintSettingsContext:o}=e;if(!o)return;const r=o.sprintCollectionStore,a=(null==r?void 0:r.getRole())??"none";r&&(0,u().q_)(a,"editor")&&o.automationContextLoaded&&!o.automationContext&&z().createAndCommit({userAction:"sprintSettingsActions.ensureCompleteSprintAutomation",environment:t,canUndo:!0,perform:e=>{q({environment:t,transaction:e,sprintCollectionStore:r,taskCollectionStore:o.taskCollectionStore,sprintSettingsConfig:g().AL})}})}async function re(e){const{executeFn:t,environment:o,taskCollectionStore:r}=e;await async function(e){var t;const{environment:o,taskCollectionStore:r}=e,a=r.getFormat().app_uri_map,i=n().yx.TaskToSprintRelation,d=r.getSchema(),s=(null==a?void 0:a[i])??i,l=d[s];if(!l||!(0,c().nC)(l))return;const u=null===(t=(0,c().Nv)(l))||void 0===t?void 0:t.id;if(!u)return;const p=new Set([s]);Object.entries(d).forEach((e=>{var t;let[o,r]=e;r&&(0,c().nC)(r)&&(null===(t=(0,c().Nv)(r))||void 0===t?void 0:t.id)===u&&p.add(o)}));const{serverCommitResult:f}=z().createAndCommit({userAction:"sprintSettingsActions.clearSprintRelationDataFromTaskCollection",environment:o,canUndo:!0,perform:e=>{for(const t of p)D().BJ({environment:o,transaction:e,permanentlyDelete:!0,collectionStore:r,schema:d,property:t});null==a||delete a[i],a&&N().zA({stores:[r],transaction:e,update:{app_uri_map:a}})}});await f}({environment:o,taskCollectionStore:r}),t()}function ae(e){return{frequency:F,interval:e.recurrenceConfig.interval,weekdays:e.recurrenceConfig.weekdays,start_date:(0,d().Rz)(r().c9.local().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate()),timezone:(0,s().dB)(),hour:0,minute:0}}},51194:(e,t,o)=>{o.d(t,{a:()=>n});var r=o(296540),a=()=>o(525128);function n(){const e=(0,r.useRef)(!1);return(0,a().E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},63467:(e,t,o)=>{o.d(t,{y:()=>l});var r=()=>o(637997),a=()=>o(267419);const n={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222))};let i=!1,c=!1;async function d(e){for(const[o,a]of Object.entries(e.emojiLocaleKeywords)){var t;r().fB[o]={...r().fB[o],keywords:[...a,...(null===(t=r().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await a().A.waitUntilLoaded(),a().A.update((t=>{let{emojiByName:o,...r}=t;return{...r,emojiByName:{...o,...e.emojiByName}}}))}async function s(){if(i)return;const[e]=o(662303).locale.split("-");e in n&&(await d(await n[e]()),i=!0)}const l=(0,o(279900).A)((async()=>{await async function(){c||(await d(await o.e(51872).then(o.bind(o,443716))),c=!0)}(),await s()}))},132456:(e,t,o)=>{o.d(t,{J4:()=>R,kw:()=>w,lf:()=>C});o(16280),o(816573),o(878100),o(177936),o(748140),o(821903),o(491134),o(128845),o(237467),o(444732),o(979577),o(581454);var r=o.n(o(883503)),a=()=>o(496603),n=()=>o(720665),i=()=>o(416845),c=()=>o(628536),d=()=>o(96689);const s={version:8,notion_version:0,variant:2},l={version:8,notion_version:1,variant:2},u=0,p=1,f=6,m=8,b=10,I=Date.UTC(2024,0,1);function v(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const o=Math.floor(((new Date).getTime()-I)/n().nD);if(o>=4096||o<0)throw new Error("Invalid offsetInDays.");return t[u]=o>>4,t[u+1]=o<<4&240|15&t[u+1],t}function g(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[p]=240&t[p]|e/2**32&15;for(let o=0;o<4;o++)t[p+1+o]=e/2**(24-8*o)&255;return t}function h(e,t){const o=e?1:0;return t[f]=s.version<<4&240|s.notion_version<<1&14|1&o,t[m]=s.variant<<6&192|63&t[m],t}function S(e,t){if("block"===e)return t[b]=(0,c().vi)(e)|63&t[b],t;const o=(0,c().vi)(e);return t[b]=o>>8&127,t[b+1]=255&o,t}function y(e,t){const o=(0,c().TG)(e);return t[b]=127&o|128&t[b],t}function w(e,t,o,r){const a=new Uint8Array(16),n=globalThis.crypto.getRandomValues(a);return o!==d().NX&&v(e,n),g(t,n),h(r,n),S(o,n),M(n)}function R(e,t,o,r){return w(e,t,o,r)}function C(e,t,o){return _(e,t,o)}function _(e,t,o){const n=r()(o),d=a().iv(n,2).map((e=>parseInt(e.join(""),16)));if((0,c().ep)(t)){if(void 0===e)throw new(i().Um)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(i().Um)(`Deterministic ID for '${t}' should not provide a space short id`);const s=new Uint8Array(d);return e&&g(e,s),y(t,s),function(e){e[f]=240&l.version<<4|14&l.notion_version<<1|1&e[f],e[m]=192&l.variant<<6|63&e[m]}(s),M(s)}const k=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function M(e){let t=0;return k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]}},135599:(e,t,o)=>{o.d(t,{W:()=>F});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454),o(737550);var r=o(296540),a=()=>o(395361),n=()=>o(484714),i=()=>o(56366),c=()=>o(721908),d=()=>o(474424),s=()=>o(591779),l=()=>o(206267),u=()=>o(207289),p=()=>o(519831),f=()=>o(245241),m=()=>o(959013),b=()=>o(496603),I=()=>o(973647),v=()=>o(534177),g=()=>o(720665),h=()=>o(449506),S=()=>o(518362),y=()=>o(989423),w=()=>o(148777),R=()=>o(825972),C=()=>o(71304),_=()=>o(780865),k=()=>o(470928),M=()=>o(722038),A=()=>o(406792),T=()=>o(106628),x=()=>o(361330),E=()=>o(109054),L=()=>o(351360),P=()=>o(227440),Q=()=>o(508496),D=()=>o(968172),B=()=>o(20199),N=()=>o(558407),U=()=>o(630116),O=()=>o(645873),z=()=>o(963589),W=()=>o(531770);function j(){return{query:void 0,localResults:[],numTotalLocalResults:0,serverResults:[],numTotalServerResults:0,searchSessionId:(0,l().JW)(),isResultsLoading:!1}}function F(e){var t;const{searchQuery:o,limit:l,source:F,type:K,ancestorId:J,disable:H,overrideSpaceStore:Z,overrideSearchSessionId:$,usePrefetch_EXPERIMENTAL:Y,isTitleOnly:G=!0}=e,X=(0,n().v3)(),ee=(0,m().tz)(),te=(0,s().ZC)(o),oe=(0,s().ZC)(e.filters),re=(0,r.useRef)({number:0,query:""}),ae=(0,r.useCallback)((e=>{const t=re.current.query.trim(),o=e.trim();""!==o&&t!==o&&(re.current.number+=1,re.current.query=o)}),[]),ne=(0,a().Y)(ae,x().ab),ie=(0,r.useRef)(!0),ce=(0,i().K8)((()=>P().A.state.online),[]),de=(0,i().K8)((()=>e.isLocalOnlyMode||!ce),[ce,e.isLocalOnlyMode]),se=(0,M().y)(),[le,ue]=(0,r.useState)(j()),pe=(0,i().K8)((()=>$&&$!==le.searchSessionId?(ue((e=>({...e,searchSessionId:$}))),$):le.searchSessionId),[le,$]),fe=(0,z().X)("unified_find_cache_query_gen"),me=(0,z().X)("quick_find_highlights_enabled"),{searchLocalResults:be,searchServerResults:Ie,isResultsLoading:ve,numTotalLocalResults:ge,numTotalServerResults:he}=(0,i().K8)((()=>({searchLocalResults:le.localResults,searchServerResults:le.serverResults,isResultsLoading:le.isResultsLoading,numTotalLocalResults:le.numTotalLocalResults,numTotalServerResults:le.numTotalServerResults})),[le]),Se=(0,i().K8)((()=>{if(de||ve&&ie.current)return be;let e=function(e){const{localResults:t,serverResults:o}=e,r=t.map((e=>e.store.id)),a=new Set(r),n=o.filter((e=>!a.has(e.store.id)));return[...t,...n]}({localResults:be,serverResults:Ie});return K===f().Vz.CollectionsInSpace&&(e=q(e)),e}),[de,ve,be,Ie,K]),ye=(0,i().K8)((()=>Z||L().default.state.currentSpaceStore),[Z]),we=(0,i().K8)((()=>"on"===Q().default.getEligibleGroup({experimentId:"search-use-local-reranker-layered",parameter:"shouldUseLocalReranker",defaultGroup:"control"})),[]),Re=(0,i().K8)((()=>de&&ce&&Boolean(Y)),[de,ce,Y]),Ce=(0,i().K8)((()=>(0,_().Er)(X).hasPublicAccessPermission),[X]),_e=(0,r.useMemo)((()=>{const t={navigableBlockContentOnly:G,...e.filters};return(0,f().N2)(t)}),[e.filters,G]),ke=(0,r.useMemo)((()=>{var t;return function(e){const{blockTypes:t,queryType:o}=e;switch(o){case f().Vz.CollectionsInSpace:return["collection_view","collection_view_page"];case f().Vz.BlocksInCollection:return["page","collection_view_page"];case f().Vz.BlocksInSpace:default:return[...t??[]]}}({blockTypes:null===(t=e.filters)||void 0===t?void 0:t.blockTypes,queryType:K})}),[null===(t=e.filters)||void 0===t?void 0:t.blockTypes,K]),Me=(0,r.useCallback)(((e,t)=>{const{isSuccess:o,totalResultsCount:r,localCacheMetadata:a,query:n}=t;A().default.measure(e,{environment:X,data:{start_time:e.startTime,success:o,surface:F,num_results:r,search_session_id:pe,local_cache_metadata:a,local_cache_readiness_timings:(0,w().Yp)(),query_length:n.length}})}),[X,F,pe]),Ae=(0,r.useCallback)(((e,t)=>{const{isSuccess:o,totalResultsCount:r,query:a}=t;A().default.measure(e,{environment:X,data:{start_time:e.startTime,success:o,surface:F,num_results:r,search_session_id:pe,search_session_flow_number:re.current.number,query_length:a.length}})}),[X,F,pe]),Te=(0,i().K8)((()=>B().A.state.localSearchableBlocksCache),[]),xe=(0,O().fJ)(T().T.searchActions),Ee=(0,r.useCallback)((e=>{const t=A().default.mark("rum.local_quick_search_query"),{query:o,spaceStore:r}=e,a=se&&!ce&&(0,v().Xk)(f().Iy,F);if("resolved"!==xe.status)return;const n=K===f().Vz.CollectionsInSpace;let i=[];0===o.length&&n&&(i=function(e){const{spaceStore:t,environment:o}=e,r=(0,S().F)({currentUserId:o.currentUser.id,spaceId:t.id}).map((e=>{const o=U().md.createChildStore(t,{table:p().Vl,id:e}).getParentBlockStore();if(null==o?void 0:o.pathIsAccessibleAndAlive())return o}));return(0,b().oE)(r)}({environment:X,spaceStore:r}).map(((e,t)=>({store:e,originalPosition:t,id:e.id,score:0,spaceId:e.getSpaceId(),sources:[f().Ni.Local],featureGroups:[],serverEventProperties:void 0}))));const c=(0,w().PE)({environment:X,overrideCurrentUserId:X.currentUser.id,overrideSpaceId:r.id,overrideLocalSearchableBlocksCache:Te}),d=(0,W().S6)({environment:X,parentStore:r,isOnline:ce,requestInput:{query:{text:o,filters:{..._e,blockTypes:ke,isOfflineOnly:a},sort:{field:"relevance"}},limit:de?l:Math.min(l,5)},localSearchCache:Te,shouldUseNewRerankerDebugOverrideEnabled:we,shouldLimitLocalResultsWhenOnline:!de,hasPublicAccessPermission:Ce}),s=Re?V({query:o,serverResults:qe.current}):[],u=d&&I().Q.unwrapOr(d,void 0),m=(null==u?void 0:u.results)??[],g=(null==u?void 0:u.total)??0;let h=b().hS([...i,...m,...s],(e=>e.id));h=n?q(h):h,ue((e=>e.query!==o?e:(Je.current=h.map((e=>e.id)),Me(t,{query:o,isSuccess:Boolean(u),totalResultsCount:g,localCacheMetadata:c}),ne(o),{...e,localResults:h,isResultsLoading:!de&&e.isResultsLoading,numTotalLocalResults:g})))}),[se,ce,F,xe.status,K,X,_e,ke,de,l,we,Ce,Re,Me,ne,Te]),Le="mini_quick_find"===F?40:x().GR,Pe=(0,a().Y)(Ee,Le),Qe=(0,r.useCallback)((e=>{h().callApi({eventName:"warmSearchQueryCache",environment:X,data:{spaceId:(null==ye?void 0:ye.id)??"",query:e.query,searchSessionId:pe}})}),[X,ye,pe]),De=(0,a().Y)(Qe,200),Be=(0,r.useCallback)((e=>{const{result:t,isMetaClick:r,context:a}=e,n=(0,C().Qe)(t.store,ee,X,!1),i=(0,E().u)({query:o,resultText:n??"",isLastQueryTermPartialMatchOK:!0}),c=L().default.state.currentSpaceStore,d=Boolean(null==c?void 0:c.getSettings().enable_ai_training);(0,y().u4)({environment:X,event:{eventName:"select_search_item",eventProperties:{sources:t.sources,localSources:Array.from(t.localSource||new Set),searchSessionId:pe,aiSessionId:void 0,searchSessionFlowNumber:re.current.number,context:a,queryStringLength:o.length,isTitleMatch:i,queryIfLeap:d?o:void 0,totalSearchResultCount:ge+he,numLocalResults:be.length,numTotalLocalResults:ge,isMobile:X.device.isMobile,isMetaClick:r,hasFilters:Boolean(_e),originalPosition:t.originalPosition,selectedItemIndex:t.originalPosition,selectedSearchResultMetadata:{blockId:t.id,blockType:t.store.getModel().type},searchSource:F,verificationState:(0,k().i1)(t.store)}}})}),[X,ge,he,be,o,pe,re,_e,F,ee]),Ne=te===o,Ue=b().n4(oe,e.filters),Oe=Boolean(te&&!o),ze=Ue&&Ne,We=!H&&ye&&!ze,je=Oe||!Ue,Fe=(0,r.useRef)(!1),Ve=(0,r.useRef)([]),qe=(0,r.useRef)([]),Ke=(0,r.useRef)([]),Je=(0,r.useRef)([]),He=(0,i().K8)((()=>{if("mention_menu"!==F)return;return N().A.getMentionedIds(X.currentUser.id)}),[X.currentUser.id,F]),Ze=(0,r.useCallback)((async e=>{const t=A().default.mark("rum.server_quick_search_query"),{query:o,spaceStore:r,size:a}=e,n=r.id;if(de&&!Re)return;const i=!ie.current&&Ue?Ve.current:[],c=Re?V({query:o,serverResults:qe.current}):[];if(Re&&(o.length<=1||c.length>=5||Ke.current.some((e=>e===o))))return;Ke.current.push(o);const s=await h().callApi({eventName:"search",environment:X,data:{...K===f().Vz.BlocksInAncestor?{type:K,ancestorId:J??"",spaceId:n}:{type:K,collectionId:(null==_e?void 0:_e.parentId)??"",spaceId:n},query:o,spaceId:n,limit:"mini_quick_find"===F?10:a+1,filters:_e,sort:{field:"relevance"},source:F,searchSessionId:pe,searchSessionFlowNumber:re.current.number,recentlyMentionedPageIds:He,recentPagesForBoosting:(0,R().cs)(D().A.getWithoutSubscribing(n)),excludedBlockIds:b().sb([...i.map((e=>e.id)),...Je.current||[],...qe.current.map((e=>e.id))]),ignoresHighlight:!me||"mini_quick_find"!==F}});if(!s||"failed"===s.type)return;const l=s.data.total,p=(0,g().MU)((0,v().WP)(s.data.trackEventProperties).map((e=>{let[t,o]=e;return[`server-${t}`,o]}))),m=s.data.results.slice(0,a).map(((e,t)=>{const o=U().Bv.createChildStore(r,{id:e.id,spaceId:e.spaceId,table:"block"}),a=Re?function(e){const{result:t,store:o,environment:r}=e;if(t.terms)return t.terms;const a=o.getModel();if(!a)return[];const n=r.defaultRecordCache.inMemoryRecordCache.makeGetRecordValueFn(r.currentUser.id),i=(0,u().KM)((0,d().g)({blockValue:a,getRecordValue:n}).text);if(!i)return[];return(0,E().N)(i)}({environment:X,store:o,result:e}):e.terms;return{store:o,originalPosition:t,...e,serverEventProperties:p,terms:a}}));Fe.current=!(l<=a);const I=[...i,...m];Ve.current=I,qe.current=b().hS([...Re?m:[],...qe.current],(e=>e.id)),Re||(ue((e=>e.query!==o?e:(Ae(t,{query:o,isSuccess:"success"===s.type,totalResultsCount:l}),{...e,serverResults:I,isResultsLoading:!1,numTotalServerResults:l}))),ne(o))}),[de,Re,Ue,X,K,J,_e,F,pe,He,Je,ne,Ae,me]),$e=(0,r.useCallback)((e=>{!H&&ye&&Fe.current&&!ve&&ce&&(ue((e=>({...e,isResultsLoading:!0}))),Fe.current=!1,ie.current=!1,Ze({query:o,spaceStore:ye,size:e??20}))}),[ye,H,Ze,ce,ve,o]),Ye="mini_quick_find"===F?100:x().ab,Ge=(0,c().d)($e,Ye),Xe=(0,a().Y)(Ze,Re?0:x().ab);return(0,r.useEffect)((()=>{je&&(ue((e=>({...j(),searchSessionId:e.searchSessionId}))),qe.current=[],Ke.current=[]),We&&(ie.current=!0,ue((e=>({...e,isResultsLoading:!0,query:o}))),Pe({query:o,spaceStore:ye}),Xe({query:o,spaceStore:ye,size:l}),"mini_quick_find"===F&&fe&&De({query:o}))}),[ye,Pe,Xe,De,l,o,We,je,F,fe]),{results:Se,isResultsLoading:ve,searchSessionId:pe,fetchAdditionalServerResultsOnChange:!H&&!de&&Fe.current&&ze?Ge:void 0,searchSessionFlowNumber:re.current.number,hasMoreResults:Fe.current,searchAnalytics:{trackSelectSearchItem:Be}}}function V(e){const{query:t,serverResults:o}=e;return t?o.filter((e=>(0,E().u)({query:t,resultText:(e.terms??[]).join(" "),isLastQueryTermPartialMatchOK:!0}))):[]}function q(e){const t=new Set;return e.filter((e=>{const o=e.store.getCollectionViewSourceCollectionStore();return!(!o||t.has(o.id))&&(t.add(o.id),!0)}))}},158359:(e,t,o)=>{o.d(t,{P:()=>a});o(296540);var r=o(474848);const a=(0,o(340498).wt)("arrowDown",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},174723:(e,t,o)=>{o.d(t,{$Y:()=>m,AF:()=>l,Px:()=>f,Up:()=>u,dY:()=>p});o(898992),o(354520);var r=()=>o(662303),a=()=>o(427704),n=()=>o(534177),i=()=>o(939768),c=()=>o(780054),d=()=>o(22102),s=()=>o(630116);async function l(e,t){const o=await d().k.load();return e.filter((e=>{const r=e.getCopiedFromPointer();return Boolean(r&&o.isTemplate(r)&&Boolean(t&&t(r.id)))}))}function u(e){const t=window.location.href;return i().O$(t,{tg:e.templateGalleryItem})}function p(e){let t;return e instanceof s().$x?t=e.getBlockId():"type"in e?"preset"===e.type?t=void 0:"pageTemplate"===e.type?t=e.template.rootId:(0,n().HB)(e):t=e.rootId,t}function f(e){const t=r().locale&&"en-us"!==r().locale.toLocaleLowerCase()?`/${r().locale.toLowerCase()}`:"",o=void 0!==e?`${t}${a().JZ.templates}/${encodeURIComponent(e)}`:`${t}${a().JZ.templates}`;return`${c().A.domainBaseUrl}${o}`}function m(e){if(!e)return"";try{const o=JSON.parse(e);if("text"===o.content[0].content[0].nodeType){var t;const e=(null==o||null===(t=o.content)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.content)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value)||"";return e.replace(/^(#{2,6})\s+/gm,"# ")}}catch(o){return""}}},175213:(e,t,o)=>{o.d(t,{G:()=>n});var r=()=>o(989423),a=()=>o(508496);function n(e,t){r().vd(e,"delete_property",t),a().default.logEvent("delete_property")}},198048:(e,t,o)=>{o.d(t,{C:()=>i});var r=o(296540),a=()=>o(51194),n=()=>o(610104);function i(){const e=(0,a().a)(),[t,o]=(0,r.useState)(0),i=(0,r.useCallback)((()=>{e.current&&o(t+1)}),[t]);return[(0,r.useCallback)((()=>n().Gt.postRender(i)),[i]),t]}},203066:(e,t,o)=>{o.d(t,{N:()=>s});var r=o(296540);class a extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function n({children:e,isPresent:t}){const o=(0,r.useId)(),n=(0,r.useRef)(null),i=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)((()=>{const{width:e,height:r,top:a,left:c}=i.current;if(t||!n.current||!e||!r)return;n.current.dataset.motionPopId=o;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`\n          [data-motion-pop-id="${o}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${r}px !important;\n            top: ${a}px !important;\n            left: ${c}px !important;\n          }\n        `),()=>{document.head.removeChild(d)}}),[t]),r.createElement(a,{isPresent:t,childRef:n,sizeRef:i},r.cloneElement(e,{ref:n}))}const i=({children:e,initial:t,isPresent:a,onExitComplete:i,custom:d,presenceAffectsLayout:s,mode:l})=>{const u=(0,o(328601).M)(c),p=(0,r.useId)(),f=(0,r.useMemo)((()=>({id:p,initial:t,isPresent:a,custom:d,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;i&&i()},register:e=>(u.set(e,!1),()=>u.delete(e))})),s?void 0:[a]);return(0,r.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[a]),r.useEffect((()=>{!a&&!u.size&&i&&i()}),[a]),"popLayout"===l&&(e=r.createElement(n,{isPresent:a},e)),r.createElement(o(786719).t.Provider,{value:f},e)};function c(){return new Map}const d=e=>e.key||"";const s=({children:e,custom:t,initial:a=!0,onExitComplete:n,exitBeforeEnter:c,presenceAffectsLayout:s=!0,mode:l="sync"})=>{(0,o(285238).V)(!c,"Replace exitBeforeEnter with mode='wait'");const u=(0,r.useContext)(o(29473).L).forceRender||(0,o(198048).C)()[0],p=(0,o(51194).a)(),f=function(e){const t=[];return r.Children.forEach(e,(e=>{(0,r.isValidElement)(e)&&t.push(e)})),t}(e);let m=f;const b=(0,r.useRef)(new Map).current,I=(0,r.useRef)(m),v=(0,r.useRef)(new Map).current,g=(0,r.useRef)(!0);if((0,o(525128).E)((()=>{g.current=!1,function(e,t){e.forEach((e=>{const o=d(e);t.set(o,e)}))}(f,v),I.current=m})),(0,o(757491).l)((()=>{g.current=!0,v.clear(),b.clear()})),g.current)return r.createElement(r.Fragment,null,m.map((e=>r.createElement(i,{key:d(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:s,mode:l},e))));m=[...m];const h=I.current.map(d),S=f.map(d),y=h.length;for(let o=0;o<y;o++){const e=h[o];-1!==S.indexOf(e)||b.has(e)||b.set(e,void 0)}return"wait"===l&&b.size&&(m=[]),b.forEach(((e,o)=>{if(-1!==S.indexOf(o))return;const a=v.get(o);if(!a)return;const c=h.indexOf(o);let g=e;if(!g){const e=()=>{b.delete(o);const e=Array.from(v.keys()).filter((e=>!S.includes(e)));if(e.forEach((e=>v.delete(e))),I.current=f.filter((t=>{const r=d(t);return r===o||e.includes(r)})),!b.size){if(!1===p.current)return;u(),n&&n()}};g=r.createElement(i,{key:d(a),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:s,mode:l},a),b.set(o,g)}m.splice(c,0,g)})),m=m.map((e=>{const t=e.key;return b.has(t)?e:r.createElement(i,{key:d(e),isPresent:!0,presenceAffectsLayout:s,mode:l},e)})),r.createElement(r.Fragment,null,b.size?m:m.map((e=>(0,r.cloneElement)(e))))}},279900:(e,t,o)=>{function r(e){let t,o,r;return async function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t?(r=n,o||(o=t.then((()=>(o=void 0,t=e(...r),t))),o)):(t=e(...n),t)}}o.d(t,{A:()=>r})},299177:(e,t,o)=>{o.d(t,{A:()=>n});class r extends(()=>o(757695))().default{getInitialState(){return{}}}const a=new r;o(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",a);const n=a},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>E,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>R,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>w,MAX_RECURRENCE_INTERVAL:()=>v,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>g,RRULE_WEEKDAYS_MAP:()=>I,adjustedStartDateIfPossible:()=>_,areRecurrenceSchedulesEqual:()=>B,convertFromUnpersistedRecurrenceConfig:()=>D,convertToUnpersistedRecurrenceConfig:()=>L,getFormattedEndCondition:()=>x,getFormattedNextRecurrenceTime:()=>T,getNewEndTimestamp:()=>P,getNextDateUtc:()=>A,getRecurrenceAfter:()=>k,isRunningBetweenMidnightAnd3AM:()=>M,isValidRecurrenceInterval:()=>h,isValidRecurrenceNumberOfRuns:()=>S,rruleFromRecurrence:()=>y,templateAncestorsViolateRecurrenceNesting:()=>C});o(898992),o(354520),o(581454);var r=()=>o(244641);o(944114);function a(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];if(0===o.length)return e.map((e=>[e]));const n=[];for(const i of e)n.push(...a(o[0],...o.slice(1)).map((e=>[i,...e])));return n}var n=()=>o(496603),i=()=>o(534177),c=()=>o(720665),d=()=>o(597777),s=()=>o(869190),l=()=>o(416504),u=()=>o(402390);class p extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var f=()=>o(912720);const m=(0,o(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),b={day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},I={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},v=99,g=999;function h(e){return(0,c().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function S(e){return(0,c().Et)(e)&&Number.isInteger(e)&&e>0&&e<=g}function y(e){const{start_date:t,frequency:o,interval:r,weekdays:n,timezone:c,hour:s,minute:l}=e,u="week"===o&&n?n.map((e=>I[e])):void 0,f={};return(0,i().O9)(e.end_condition)&&("date"===e.end_condition.type?f.until=(0,d().eU)(e.end_condition.end_at):"number"===e.end_condition.type?f.count=e.end_condition.number_of_occurrences:(0,i().HB)(e.end_condition)),"month"===e.frequency&&(0,i().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?f.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?f.byweekday=a(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return I[t].nth(o)})):(0,i().HB)(e.monthly_restriction)),new p({freq:b[o],dtstart:(0,d().eU)(t),interval:r,byweekday:u,tzid:c,byhour:s??0,byminute:l??0,bysecond:0,...f})}const w=1,R=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),r=e.length,a=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,n=r>w,i=o.length>=R;return{violatesConstraint:n||i,templateNestingExceedsMaxDepth:n,ancestorHasDailyTemplate:i,nestedDepthOfAutomationAncestors:r,immediateAncestorRecurrenceType:a}}function _(e){var t;const{recurrence:o,afterDate:a}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=a)return o;let n=r().c9.fromMillis(o.start_date,{zone:"utc"});const i=r().c9.fromMillis(a,{zone:"utc"});switch(o.frequency){case"year":{const e=Math.floor(i.diff(n,"years").years/o.interval);n=n.plus({years:e*o.interval});break}case"month":{const e=Math.floor(i.diff(n,"months").months/o.interval);n=n.plus({months:e*o.interval});break}case"week":{const e=Math.floor(i.diff(n,"weeks").weeks/o.interval);n=n.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(i.diff(n,"days").days/o.interval);n=n.plus({days:e*o.interval});break}}return{...o,start_date:(0,d().DH)(n.toMillis())}}function k(e){const{recurrence:t,afterDate:o}=e;if((0,f().wt)(t)){const e=(0,d().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=y(_({recurrence:t,afterDate:o})).after((0,d().eU)(o));if(!e)return;return(0,d().h1)(e)}}function M(e){return 0===e.hour||1===e.hour||2===e.hour}function A(e){return y(e).after((0,d().eU)((0,d().Rz)()))||void 0}function T(e){const{recurrence:t,intl:o}=e,a=A(D(t));if(!a)return;const n=M(t),i=r().c9.fromJSDate(a).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(o)).setZone(t.timezone),c=(0,s().Yq)({date:i,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(n)return o.formatMessage(m.dateBetweenMidnightAnd3AM,{date:c});{let e=i.toLocaleString(r().c9.TIME_SIMPLE);return t.timezone!==(0,l().P)()&&(e+=` ${i.toFormat("ZZZZ")}`),o.formatMessage(m.dateAtTime,{date:c,time:e})}}function x(e,t){return(0,i().O9)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,s().Yq)({date:r().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,i().HB)(e):t.formatMessage(m.noEndCondition)}const E=100;function L(e){return{...e,start_date:(0,d().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,d().l1)(e.end_condition.end_at)}:(0,i().HB)(e.end_condition):void 0}}function P(e,t,o){return e.plus(o-t)}function Q(e,t){const o=r().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,d().Rz)(o.toJSDate())}}function D(e){return{...e,start_date:(0,d().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?Q(e,e.end_condition):(0,i().HB)(e.end_condition):void 0}}function B(e,t){const o=n().fN(e,(e=>void 0!==e)),r=n().fN(t,(e=>void 0!==e));return n().n4(o,r)}},412532:(e,t,o)=>{o.d(t,{l:()=>a});o(296540);const r={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M13.165 12.75a.8.8 0 0 0 .69-1.203L8.692 2.693a.8.8 0 0 0-1.382 0l-5.165 8.854a.8.8 0 0 0 .691 1.203z"})},a=(0,o(340498).wt)("arrowCaretUpFillSmall",r)},413677:(e,t,o)=>{o.r(t),o.d(t,{accept:()=>U,close:()=>N,createTemplateInstance:()=>z,loadAndDuplicatePageTemplate:()=>O,openWithItem:()=>D,previewItem:()=>B,setTemplateVisited:()=>W});o(16280);var r=()=>o(584262),a=()=>o(857639),n=()=>o(763884),i=()=>o(388821),c=()=>o(179034),d=()=>o(665344),s=()=>o(94830),l=()=>o(973647),u=()=>o(449506),p=()=>o(857783),f=()=>o(71584),m=()=>o(34542),b=()=>o(989423),I=()=>o(972435),v=()=>o(108944),g=()=>o(174723),h=()=>o(869562),S=()=>o(351360),y=()=>o(508496),w=()=>o(75368),R=()=>o(714818),C=()=>o(630116),_=()=>o(160568),k=()=>o(624550),M=()=>o(246826),A=()=>o(666144),T=()=>o(778417),x=()=>o(185544),E=()=>o(317909),L=()=>o(345913);const P="LastViewedTemplateId",Q=(0,o(959013).YK)({clientCopyError:{defaultMessage:"Client copy could not be created.",id:"spaceActions.createGettingStartedPage.copyNotCreated.error"}});function D(e){const{environment:t,item:o,createNewPage:r,isPrivate:a,disablePointerEvents:i,isCheckout:c=!1}=e;T().IU({environment:t}),R().A.setState({open:!0,item:o,createNewPage:r,isPrivate:a,isLoading:!1,disablePointerEvents:i,isCheckout:c}),n().A.set({userId:t.currentUser.id,key:P,value:o.rootId}),_().oO(t,{template_id:(0,g().dY)(o),from:r?"sidebar":"newPage"})}function B(e){let{templateItem:t,currentUserId:o}=e;const r=R().A.state.item;R().A.setState({...R().A.state,item:t}),r!==t&&n().A.set({userId:o,key:P,value:t.rootId})}function N(e){R().A.setState({item:R().A.state.item,open:!1}),T().IU({environment:e})}async function U(e){const{acceptFrom:t,item:o,environment:a,spaceStore:n,initializeStore:i,...c}=e;R().A.state.open&&R().A.setState({...R().A.state,isLoading:!0}),y().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&w().A.state.open&&w().A.setState({open:!1});const d=i?{...{...c,item:o,environment:a,spaceStore:n},initializeStore:i,type:"inExistingStore",useMinimalTemplates:!1}:{...{...c,item:o,environment:a,spaceStore:n},type:"inSpace",useMinimalTemplates:!1,isOnboarding:!1};let s=!1;const l=Date.now();let u;try{var f;u=await z(d),s=!0;const e=null===(f=S().default.state.mainEditorCurrentBlockStore)||void 0===f?void 0:f.id;!u||e&&e===u.id||p().uK({environment:a,store:u,pageVisitSource:r().y8.Create,showMoveTo:!0}),N(a),a.device.isMobile&&(h().close(),w().A.setState({open:!1}))}finally{var m;const r=Date.now()-l,i=e.initializeStore?v().Uo(e.initializeStore):void 0,c=e.initializeStore?!i:e.isPrivate;_().BX(a,{destination:c?"private":"team",template_block_id:o.rootId,template_duplication_duration_ms:r,team_id:null==i?void 0:i.id,created_page_id:null===(m=u)||void 0===m?void 0:m.id}),_().hB(a,{from:"mobileApp",success:s,context:t,template_block_id:o.rootId,target_space_id:n.id,template_duplication_duration_ms:r,public_template_name:o.name,template_id:o.id})}}async function O(e){const{environment:t,initializeStore:o,item:r,isPrivate:a,useMinimalTemplates:n,spaceStore:c,spaceViewStore:d}=e,s=n?r.rootId:r.previewRootId,l=await u().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:s,spaceId:r.spaceId},shallow:!1}});let p;"success"===l.type&&(p=i().RecordMapWithRole.create(l.data.subtreeRecordMap));const m="pageTemplateModalActions.loadAndDuplicatePageTemplate",{performResult:v}=E().createAndCommit({userAction:m,environment:t,canUndo:!0,perform:e=>{const r=o||x().IT({environment:t,spaceStore:c,spaceViewStore:d,isPrivate:a,loading:!0,transaction:e});A()._O({environment:t,inMemoryRecordCache:r.inMemoryRecordCache,recordMap:p,debugSource:m});const n=f().loadLocalSubtree(t,{blockId:s,inMemoryRecordCache:r.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0}).recordMap;if(!n)throw new Error(I().A.getIntl().formatMessage(Q.clientCopyError));return f().localDuplicate({environment:t,sourceBlockId:s,targetBlockPointer:r.pointer,sourceBlockSubtree:n,targetInMemoryRecordCache:r.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0}),r}}),g=v.getCollectionPointer();return(0,b().u4)({environment:t,event:{eventName:"create_app_templates",eventProperties:{target_page_ids:[v.id],template_label:r.name,collection_ids:g?[g.id]:[]}}}),v}async function z(e){var t;const{environment:o,item:r,useRecordCache:n,useMinimalTemplates:i,spaceStore:u,isOnboarding:p,from:f,type:b,initializeStore:I,teamStore:v,onSuccess:g,onError:h}=e,S=n&&!i?r.previewRootId:r.rootId,w={id:S,table:c().ev,spaceId:r.spaceId},R=p?"onboarding":null!==(t=r.marketplaceTemplateMetadata)&&void 0!==t&&t.isMobileMarketplaceTemplate?"mobile_app":"homepage_team"===f?"team_home":void 0,_=await(0,m().oC)(o,S),M=R?{context:"",source:R,isListedTemplate:!!_,isFirstPartyPaidTemplate:void 0!==_&&(0,s().Z1)(_)}:void 0;let A=!1,T=u;const x=new(C().Bv)(o,{table:c().ev,id:w.id,spaceId:w.spaceId});if("inExistingStore"===b&&I){if(T=I,I.isEmptyPage()){const e=I.getParentStore();e&&e.canEdit()&&("block"===e.table||"space"===e.table||"team"===e.table)&&(A=!0,T=e)}}else"inTeam"===b&&v&&(T=v);M||a().log({level:"warning",from:"pageTemplateModalActions.createTemplateInstance",type:"templateInstallationMetadataNotSet",data:{miscDataToConvertToString:{template_id:r.id,template_block_id:r.rootId,target_space_id:u.id,public_template_name:r.name,isOnboarding:p,from:f,type:b}}});const P=y().default.checkGate({gateName:"enable_local_duplication_for_non_marketplace_templates"}),Q=await k().Jx({environment:o,store:x,newParentStore:T,addCopyName:!1,duplicateOnlyCollectionSchema:!1,unlockPage:!0,templateInstallationMetadata:M,shouldAttemptServerBackedLocalDuplication:!(0,d().Fe)(null==M?void 0:M.source)&&P});if(Q){if(l().Q.isSuccess(Q)&&Q.value.length>0){const e=Q.value[0];if(A&&I){const t=I;try{await t.waitUntil((()=>t.isDefined()));const{serverCommitResult:r}=E().createAndCommit({userAction:"pageTemplateModalActions.initializePageTemplateInPlace",environment:o,canUndo:!0,perform:e=>{L().oD({environment:o,blocks:[t],transaction:e,permanentlyDelete:!0})}});return await r,e}catch(D){a().log({level:"error",from:"pageTemplateModalActions.initializePageTemplateInPlace",type:"transactionError",data:{miscDataToConvertToString:{error:D}}})}}return null==g||g(e),e}return null==h||h(),void a().log({level:"error",from:"pageTemplateModalActions.initializePageTemplate",type:"duplicateTemplateError",data:{miscDataToConvertToString:{error:Q.error,template_id:r.id,template_block_id:r.rootId,target_space_id:u.id,public_template_name:r.name}}})}}function W(e){const{item:t,transaction:o,spaceViewStore:r}=e;if(r){const e=r.getVisitedTemplateIds();if(e.indexOf(t.rootId)<0){const a=e.concat([t.rootId]);M().zv({store:r,data:{visited_templates:a},transaction:o})}}}},442277:(e,t,o)=>{o.d(t,{B:()=>a});o(296540);var r=o(474848);const a=(0,o(340498).wt)("arrowRightSmaller",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M15.383 8.352a.877.877 0 01-.274.64l-5.156 5.14a.864.864 0 01-.617.266.831.831 0 01-.602-.234.795.795 0 01-.234-.586c0-.12.02-.232.063-.336a.912.912 0 01.187-.273l1.75-1.766 2.914-2.656.274.5-2.711.156H1.484c-.26 0-.471-.078-.632-.234a.851.851 0 01-.235-.617c0-.256.078-.461.235-.618a.856.856 0 01.632-.242h9.493l2.71.164-.273.508L10.5 5.5 8.75 3.727a.946.946 0 01-.188-.266.917.917 0 01-.062-.344c0-.234.078-.43.234-.586a.831.831 0 01.602-.234.79.79 0 01.328.07c.104.047.203.117.297.211l5.148 5.133a.877.877 0 01.274.64z"})})},464699:(e,t,o)=>{o.d(t,{b:()=>a});o(296540);var r=o(474848);const a=(0,o(340498).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},529316:(e,t,o)=>{o.d(t,{dy:()=>I,wA:()=>v,yG:()=>b});o(898992),o(430670),o(581454);var r=()=>o(679927),a=()=>o(544008);const n={sources:{"en-US":{previewRootId:"e950a58c-0d6f-42c3-8225-9e7adc5d4182",rootId:"e950a58c-0d6f-42c3-8225-9e7adc5d4182",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPage},i={sources:{"en-US":{previewRootId:"89ba9061-3275-4d76-966f-11691fdfd72f",rootId:"89ba9061-3275-4d76-966f-11691fdfd72f",spaceId:r().rQ},"ko-KR":{previewRootId:"0eb824c6-f768-47bc-9204-d94dbb912c6e",rootId:"0eb824c6-f768-47bc-9204-d94dbb912c6e",spaceId:r().rQ},"ja-JP":{previewRootId:"09f3541c-8edb-4603-9bc3-02bd22cd7836",rootId:"09f3541c-8edb-4603-9bc3-02bd22cd7836",spaceId:r().rQ},"fr-FR":{previewRootId:"b13cc3bd-a0a3-4b61-b482-63051d7804b5",rootId:"b13cc3bd-a0a3-4b61-b482-63051d7804b5",spaceId:r().rQ},"de-DE":{previewRootId:"b2b10be2-1b2f-4a48-a453-532657bd8e92",rootId:"b2b10be2-1b2f-4a48-a453-532657bd8e92",spaceId:r().rQ},"es-ES":{previewRootId:"a00ebb82-58f2-4b40-89ee-a65be3befabf",rootId:"a00ebb82-58f2-4b40-89ee-a65be3befabf",spaceId:r().rQ},"es-LA":{previewRootId:"6d1f21ba-36cf-4c90-9ecb-d5e377942f3a",rootId:"6d1f21ba-36cf-4c90-9ecb-d5e377942f3a",spaceId:r().rQ},"pt-BR":{previewRootId:"50a76940-a26e-443a-b752-1412855e6ad7",rootId:"50a76940-a26e-443a-b752-1412855e6ad7",spaceId:r().rQ},"nb-NO":{previewRootId:"4c0f8e8c-3967-43ab-a0a8-a3a8ae837714",rootId:"4c0f8e8c-3967-43ab-a0a8-a3a8ae837714",spaceId:r().rQ},"fi-FI":{previewRootId:"555c9896-0c2d-4af7-a951-1d81f051de2e",rootId:"555c9896-0c2d-4af7-a951-1d81f051de2e",spaceId:r().rQ},"sv-SE":{previewRootId:"751d20c2-e2be-4e61-921a-adb553651c8c",rootId:"751d20c2-e2be-4e61-921a-adb553651c8c",spaceId:r().rQ},"da-DK":{previewRootId:"8e0ffb71-86cb-46bf-abf2-720dcb4378f9",rootId:"8e0ffb71-86cb-46bf-abf2-720dcb4378f9",spaceId:r().rQ},"nl-NL":{previewRootId:"53da1632-5152-4b4f-b440-19b82802360b",rootId:"53da1632-5152-4b4f-b440-19b82802360b",spaceId:r().rQ},"zh-CN":{previewRootId:"a2ca886e-3537-47e1-823b-57633cb94702",rootId:"a2ca886e-3537-47e1-823b-57633cb94702",spaceId:r().rQ},"zh-TW":{previewRootId:"ed24d770-243d-4ef4-b469-0187beadf16e",rootId:"ed24d770-243d-4ef4-b469-0187beadf16e",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPage},c={sources:{"en-US":{previewRootId:"30fa18a6-609e-4f5b-af3d-31906c46fe23",rootId:"30fa18a6-609e-4f5b-af3d-31906c46fe23",spaceId:r().rQ},"ko-KR":{previewRootId:"3afd60d5-3ce7-431a-b812-2c836b7596a3",rootId:"3afd60d5-3ce7-431a-b812-2c836b7596a3",spaceId:r().rQ},"ja-JP":{previewRootId:"dd2f1d05-d4ef-48a0-899c-10fe0346a447",rootId:"dd2f1d05-d4ef-48a0-899c-10fe0346a447",spaceId:r().rQ},"fr-FR":{previewRootId:"ac411712-ee48-4589-828d-b4e5827efc17",rootId:"ac411712-ee48-4589-828d-b4e5827efc17",spaceId:r().rQ},"de-DE":{previewRootId:"0c5be7d7-cfcf-417b-824a-1a280254a58e",rootId:"0c5be7d7-cfcf-417b-824a-1a280254a58e",spaceId:r().rQ},"es-ES":{previewRootId:"35c18cd6-99a8-47f3-91ee-40dbfec922fa",rootId:"35c18cd6-99a8-47f3-91ee-40dbfec922fa",spaceId:r().rQ},"es-LA":{previewRootId:"017372b2-9d34-4118-ad13-9b8e15c30ebd",rootId:"017372b2-9d34-4118-ad13-9b8e15c30ebd",spaceId:r().rQ},"pt-BR":{previewRootId:"035cfcde-4292-4905-82b2-6517e58a28b9",rootId:"035cfcde-4292-4905-82b2-6517e58a28b9",spaceId:r().rQ},"nb-NO":{previewRootId:"42a8570d-5be6-4be4-9ca3-0569f54863bf",rootId:"42a8570d-5be6-4be4-9ca3-0569f54863bf",spaceId:r().rQ},"fi-FI":{previewRootId:"5f103e1f-2659-4c6a-bb30-705d2dae0774",rootId:"5f103e1f-2659-4c6a-bb30-705d2dae0774",spaceId:r().rQ},"sv-SE":{previewRootId:"811aca42-41c0-4f83-9e08-e795d7a5f803",rootId:"811aca42-41c0-4f83-9e08-e795d7a5f803",spaceId:r().rQ},"da-DK":{previewRootId:"7643a79b-68c8-46af-ae10-f089cb1ae62b",rootId:"7643a79b-68c8-46af-ae10-f089cb1ae62b",spaceId:r().rQ},"nl-NL":{previewRootId:"6e5d9018-2dc0-4dc7-802c-be95d99f1660",rootId:"6e5d9018-2dc0-4dc7-802c-be95d99f1660",spaceId:r().rQ},"zh-CN":{previewRootId:"289fe37a-a3fc-4cec-b690-a6f99dec65a8",rootId:"289fe37a-a3fc-4cec-b690-a6f99dec65a8",spaceId:r().rQ},"zh-TW":{previewRootId:"a9fef1fc-6a95-45fc-9a7f-137790c06105",rootId:"a9fef1fc-6a95-45fc-9a7f-137790c06105",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPage},d={sources:{"en-US":{previewRootId:"bd0b93b9-a0e9-4582-a164-98acdc7a5b45",rootId:"bd0b93b9-a0e9-4582-a164-98acdc7a5b45",spaceId:r().rQ},"ko-KR":{previewRootId:"ecdfe65a-28ee-46d2-a82b-99573e3dd63d",rootId:"ecdfe65a-28ee-46d2-a82b-99573e3dd63d",spaceId:r().rQ},"ja-JP":{previewRootId:"56dd4a06-5073-46d2-8aca-8e37d90e5610",rootId:"56dd4a06-5073-46d2-8aca-8e37d90e5610",spaceId:r().rQ},"fr-FR":{previewRootId:"1f8febec-2e84-4be2-a67d-7b5165845a4b",rootId:"1f8febec-2e84-4be2-a67d-7b5165845a4b",spaceId:r().rQ},"de-DE":{previewRootId:"ee67a0e4-8343-4dd6-9636-9504cae6c573",rootId:"ee67a0e4-8343-4dd6-9636-9504cae6c573",spaceId:r().rQ},"es-ES":{previewRootId:"eabf4d1f-9a77-441f-88fb-de9e9e0dc26e",rootId:"eabf4d1f-9a77-441f-88fb-de9e9e0dc26e",spaceId:r().rQ},"es-LA":{previewRootId:"56ba9c1f-2a28-4d05-910c-e89fb051327d",rootId:"56ba9c1f-2a28-4d05-910c-e89fb051327d",spaceId:r().rQ},"pt-BR":{previewRootId:"07ffa801-adfb-41f3-809b-87f69ae9e9cd",rootId:"07ffa801-adfb-41f3-809b-87f69ae9e9cd",spaceId:r().rQ},"nb-NO":{previewRootId:"62f63581-5683-49a3-8812-32e2de74a6a6",rootId:"62f63581-5683-49a3-8812-32e2de74a6a6",spaceId:r().rQ},"fi-FI":{previewRootId:"f01bdcc5-d573-4790-b605-988df0f3a5ea",rootId:"f01bdcc5-d573-4790-b605-988df0f3a5ea",spaceId:r().rQ},"sv-SE":{previewRootId:"e404919f-5dda-4fc3-a28f-6550e70cee12",rootId:"e404919f-5dda-4fc3-a28f-6550e70cee12",spaceId:r().rQ},"da-DK":{previewRootId:"cee1de64-79f4-45b4-85d5-1ffae9624a8e",rootId:"cee1de64-79f4-45b4-85d5-1ffae9624a8e",spaceId:r().rQ},"nl-NL":{previewRootId:"86ecfb21-c0ed-42cb-864c-83890d49cb51",rootId:"86ecfb21-c0ed-42cb-864c-83890d49cb51",spaceId:r().rQ},"zh-CN":{previewRootId:"244bca5a-9931-40fb-91cd-bbcd97f1e8be",rootId:"244bca5a-9931-40fb-91cd-bbcd97f1e8be",spaceId:r().rQ},"zh-TW":{previewRootId:"802eb5a0-67f1-4f31-a058-938206b68f1c",rootId:"802eb5a0-67f1-4f31-a058-938206b68f1c",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPage},s={sources:{"en-US":{previewRootId:"19717954-d9c2-8038-9ac1-fdb4dd0783f1",rootId:"19717954-d9c2-8038-9ac1-fdb4dd0783f1",spaceId:r().rQ},"nb-NO":{previewRootId:"19717954-d9c2-8116-9ff5-ea5bdbaeb0fd",rootId:"19717954-d9c2-8116-9ff5-ea5bdbaeb0fd",spaceId:r().rQ},"fi-FI":{previewRootId:"19717954-d9c2-817d-8676-cee61d880bca",rootId:"19717954-d9c2-817d-8676-cee61d880bca",spaceId:r().rQ},"sv-SE":{previewRootId:"19717954-d9c2-810f-8a80-d3ace368f1e2",rootId:"19717954-d9c2-810f-8a80-d3ace368f1e2",spaceId:r().rQ},"da-DK":{previewRootId:"19717954-d9c2-816c-9cc0-debe4fc4026a",rootId:"19717954-d9c2-816c-9cc0-debe4fc4026a",spaceId:r().rQ},"nl-NL":{previewRootId:"19717954-d9c2-8144-9909-f762a951b76b",rootId:"19717954-d9c2-8144-9909-f762a951b76b",spaceId:r().rQ},"pt-BR":{previewRootId:"19717954-d9c2-81a0-a6aa-e46e9ca55fb3",rootId:"19717954-d9c2-81a0-a6aa-e46e9ca55fb3",spaceId:r().rQ},"es-LA":{previewRootId:"19717954-d9c2-812c-9e10-e853d888029a",rootId:"19717954-d9c2-812c-9e10-e853d888029a",spaceId:r().rQ},"es-ES":{previewRootId:"19717954-d9c2-81bf-82c3-c9d40480251b",rootId:"19717954-d9c2-81bf-82c3-c9d40480251b",spaceId:r().rQ},"fr-FR":{previewRootId:"19717954-d9c2-818a-84c2-e56eb27fbd5d",rootId:"19717954-d9c2-818a-84c2-e56eb27fbd5d",spaceId:r().rQ},"de-DE":{previewRootId:"19717954-d9c2-8111-807c-e0e495589978",rootId:"19717954-d9c2-8111-807c-e0e495589978",spaceId:r().rQ},"ja-JP":{previewRootId:"19717954-d9c2-81c0-b213-f4e883d06519",rootId:"19717954-d9c2-81c0-b213-f4e883d06519",spaceId:r().rQ},"ko-KR":{previewRootId:"19717954-d9c2-812e-b804-f95a30ccf4fe",rootId:"19717954-d9c2-812e-b804-f95a30ccf4fe",spaceId:r().rQ},"zh-CN":{previewRootId:"19717954-d9c2-81d2-9d4c-f806f8829dec",rootId:"19717954-d9c2-81d2-9d4c-f806f8829dec",spaceId:r().rQ},"zh-TW":{previewRootId:"19717954-d9c2-81e6-9d71-c9806241a2d1",rootId:"19717954-d9c2-81e6-9d71-c9806241a2d1",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPage},l={sources:{"en-US":{previewRootId:"19717954-d9c2-8086-8914-f7f64fefc788",rootId:"19717954-d9c2-8086-8914-f7f64fefc788",spaceId:r().rQ},"nb-NO":{previewRootId:"19717954-d9c2-8147-bdcb-e2c1bb859201",rootId:"19717954-d9c2-8147-bdcb-e2c1bb859201",spaceId:r().rQ},"fi-FI":{previewRootId:"19717954-d9c2-8191-a224-f1609f6e2443",rootId:"19717954-d9c2-8191-a224-f1609f6e2443",spaceId:r().rQ},"sv-SE":{previewRootId:"19717954-d9c2-81ff-b208-ddb7484c6dfa",rootId:"19717954-d9c2-81ff-b208-ddb7484c6dfa",spaceId:r().rQ},"da-DK":{previewRootId:"19717954-d9c2-819f-8fdd-e28c0dcca9e5",rootId:"19717954-d9c2-819f-8fdd-e28c0dcca9e5",spaceId:r().rQ},"nl-NL":{previewRootId:"19717954-d9c2-8127-a9a3-fdbfb56c9743",rootId:"19717954-d9c2-8127-a9a3-fdbfb56c9743",spaceId:r().rQ},"pt-BR":{previewRootId:"19717954-d9c2-8180-a3be-cd1d5581612c",rootId:"19717954-d9c2-8180-a3be-cd1d5581612c",spaceId:r().rQ},"es-LA":{previewRootId:"19717954-d9c2-81c0-8552-e95036eca313",rootId:"19717954-d9c2-81c0-8552-e95036eca313",spaceId:r().rQ},"es-ES":{previewRootId:"19717954-d9c2-817b-8d2b-c3d0b40c5519",rootId:"19717954-d9c2-817b-8d2b-c3d0b40c5519",spaceId:r().rQ},"fr-FR":{previewRootId:"19717954-d9c2-81ae-86df-dd5798d53d1e",rootId:"19717954-d9c2-81ae-86df-dd5798d53d1e",spaceId:r().rQ},"de-DE":{previewRootId:"19717954-d9c2-8100-a2ed-f088a5e87ac5",rootId:"19717954-d9c2-8100-a2ed-f088a5e87ac5",spaceId:r().rQ},"ja-JP":{previewRootId:"19717954-d9c2-8192-8dbc-c9633c2eb406",rootId:"19717954-d9c2-8192-8dbc-c9633c2eb406",spaceId:r().rQ},"ko-KR":{previewRootId:"19717954-d9c2-81a1-bec4-fcde3b7e141a",rootId:"19717954-d9c2-81a1-bec4-fcde3b7e141a",spaceId:r().rQ},"zh-CN":{previewRootId:"d5972e6b-0a4c-402d-b5a5-283f0debceff",rootId:"d5972e6b-0a4c-402d-b5a5-283f0debceff",spaceId:r().rQ},"zh-TW":{previewRootId:"19717954-d9c2-81e1-8b80-fcfc79719dd7",rootId:"19717954-d9c2-81e1-8b80-fcfc79719dd7",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPage},u={sources:{"en-US":{previewRootId:"fff17954-d9c2-805b-9d0a-eb8a6aab4228",rootId:"fff17954-d9c2-805b-9d0a-eb8a6aab4228",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPage},p={sources:{"en-US":{previewRootId:"fff17954-d9c2-8029-a07e-c769f10e8ac6",rootId:"fff17954-d9c2-8029-a07e-c769f10e8ac6",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPage},f={sources:{"en-US":{previewRootId:"cfc33008-28e6-4dbb-b383-6ffb498bcedd",rootId:"cfc33008-28e6-4dbb-b383-6ffb498bcedd",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPage},m={sources:{"en-US":{previewRootId:"416e0fd3-2f94-477d-9058-0a06bcb55cf3",rootId:"416e0fd3-2f94-477d-9058-0a06bcb55cf3",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPage},b={desktopPersonal:i,desktopTeamCreate:c,desktopTeamJoin:d,desktopTeamCreateWithComment:u,desktopTeamJoinWithComment:p,desktopTeamJoinWithMention:m,desktopTeamCreateWithMention:f,mobile:{sources:{"en-US":{previewRootId:"27fa9add-6ec7-433a-88c9-58279f5055c3",rootId:"27fa9add-6ec7-433a-88c9-58279f5055c3",spaceId:r().rQ},"ko-KR":{previewRootId:"24c31e38-d546-423f-b3cb-a0533e711d02",rootId:"24c31e38-d546-423f-b3cb-a0533e711d02",spaceId:r().rQ},"ja-JP":{previewRootId:"6e87073b-2877-44d1-9df7-2dd266bb35e3",rootId:"6e87073b-2877-44d1-9df7-2dd266bb35e3",spaceId:r().rQ},"fr-FR":{previewRootId:"d6367cec-2e43-4558-882d-fb9a00545fef",rootId:"d6367cec-2e43-4558-882d-fb9a00545fef",spaceId:r().rQ},"de-DE":{previewRootId:"172fd543-704b-489a-8d2e-7d1255f51bef",rootId:"172fd543-704b-489a-8d2e-7d1255f51bef",spaceId:r().rQ},"es-ES":{previewRootId:"8f27f9ff-57f2-4c07-ad65-55c7f7f7501f",rootId:"8f27f9ff-57f2-4c07-ad65-55c7f7f7501f",spaceId:r().rQ},"es-LA":{previewRootId:"24f220ca-372b-4003-8e74-13291220c778",rootId:"24f220ca-372b-4003-8e74-13291220c778",spaceId:r().rQ},"pt-BR":{previewRootId:"e16c2241-0f08-4946-908e-c5e6612b0a8c",rootId:"e16c2241-0f08-4946-908e-c5e6612b0a8c",spaceId:r().rQ},"nb-NO":{previewRootId:"2021f38b-f367-4f6c-8232-73387a4dcfb6",rootId:"2021f38b-f367-4f6c-8232-73387a4dcfb6",spaceId:r().rQ},"fi-FI":{previewRootId:"b40e41dc-6c0f-4d74-b3ad-3df012f49b01",rootId:"b40e41dc-6c0f-4d74-b3ad-3df012f49b01",spaceId:r().rQ},"sv-SE":{previewRootId:"5759d5ff-246c-4daf-85f3-7fc9884a4bf7",rootId:"5759d5ff-246c-4daf-85f3-7fc9884a4bf7",spaceId:r().rQ},"da-DK":{previewRootId:"b89fffe8-2e2d-4574-84e1-f81b26df5c1e",rootId:"b89fffe8-2e2d-4574-84e1-f81b26df5c1e",spaceId:r().rQ},"nl-NL":{previewRootId:"2bfc9604-0e06-4ff2-90cf-c382d6bf341b",rootId:"2bfc9604-0e06-4ff2-90cf-c382d6bf341b",spaceId:r().rQ},"zh-CN":{previewRootId:"686c7f32-593a-460d-921c-cd2d646c35ba",rootId:"686c7f32-593a-460d-921c-cd2d646c35ba",spaceId:r().rQ},"zh-TW":{previewRootId:"5ce840a9-8e51-4699-af63-64d49b1eba14",rootId:"5ce840a9-8e51-4699-af63-64d49b1eba14",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPageMobile},evernote:{sources:{"en-US":{previewRootId:"2e568628-70b1-4f35-934e-81ea4263d0e8",rootId:"2e568628-70b1-4f35-934e-81ea4263d0e8",spaceId:r().rQ},"ko-KR":{previewRootId:"3d8c8d33-f904-41f7-a3ff-b6272c633079",rootId:"3d8c8d33-f904-41f7-a3ff-b6272c633079",spaceId:r().rQ},"ja-JP":{previewRootId:"9aefc3b4-f172-4917-b1c7-495c26ec37f9",rootId:"9aefc3b4-f172-4917-b1c7-495c26ec37f9",spaceId:r().rQ},"fr-FR":{previewRootId:"4453c56e-831c-4203-83fc-9736e276b7dc",rootId:"4453c56e-831c-4203-83fc-9736e276b7dc",spaceId:r().rQ},"de-DE":{previewRootId:"6239e7bb-e6a6-4cb4-b4fa-236035bad7f7",rootId:"6239e7bb-e6a6-4cb4-b4fa-236035bad7f7",spaceId:r().rQ},"es-ES":{previewRootId:"95dafcd5-6243-4838-bea1-8e19b0596f6f",rootId:"95dafcd5-6243-4838-bea1-8e19b0596f6f",spaceId:r().rQ},"es-LA":{previewRootId:"34d8ae09-8161-49ec-ae2d-c188c477bb90",rootId:"34d8ae09-8161-49ec-ae2d-c188c477bb90",spaceId:r().rQ},"pt-BR":{previewRootId:"cb2a5d30-074f-4c07-97b5-61147e0ea504",rootId:"cb2a5d30-074f-4c07-97b5-61147e0ea504",spaceId:r().rQ},"zh-CN":{previewRootId:"72e66598-65f8-47ec-ba84-000d7321b482",rootId:"72e66598-65f8-47ec-ba84-000d7321b482",spaceId:r().rQ},"zh-TW":{previewRootId:"ec8b7591-22e8-41e6-9342-b44c1190b855",rootId:"ec8b7591-22e8-41e6-9342-b44c1190b855",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPageEvernote},desktopPersonalNoSlashMenu:s,desktopTeamCreateNoSlashMenu:c,desktopTeamJoinNoSlashMenu:l,web:n,mobileVariant1:{sources:{"en-US":{previewRootId:"16017954-d9c2-806e-8eba-d994c71414b9",rootId:"16017954-d9c2-806e-8eba-d994c71414b9",spaceId:r().rQ},"ko-KR":{previewRootId:"1a817954-d9c2-80ee-a7cc-f06b312607c6",rootId:"1a817954-d9c2-80ee-a7cc-f06b312607c6",spaceId:r().rQ},"ja-JP":{previewRootId:"1a817954-d9c2-80ab-b876-ce0540bcbc50",rootId:"1a817954-d9c2-80ab-b876-ce0540bcbc50",spaceId:r().rQ},"de-DE":{previewRootId:"1a817954-d9c2-809c-be16-eada2bec6449",rootId:"1a817954-d9c2-809c-be16-eada2bec6449",spaceId:r().rQ},"fr-FR":{previewRootId:"1a817954-d9c2-80e4-a2f7-cbc04084b700",rootId:"1a817954-d9c2-80e4-a2f7-cbc04084b700",spaceId:r().rQ},"es-ES":{previewRootId:"1a817954-d9c2-80ba-a1d2-f116653c87e7",rootId:"1a817954-d9c2-80ba-a1d2-f116653c87e7",spaceId:r().rQ},"es-LA":{previewRootId:"1a817954-d9c2-8009-ace4-c7a8be973d30",rootId:"1a817954-d9c2-8009-ace4-c7a8be973d30",spaceId:r().rQ},"pt-BR":{previewRootId:"1a817954-d9c2-8013-97f7-c8514ce9ca72",rootId:"1a817954-d9c2-8013-97f7-c8514ce9ca72",spaceId:r().rQ},"nb-NO":{previewRootId:"1b417954-d9c2-802c-8aad-ead5bdae042e",rootId:"1b417954-d9c2-802c-8aad-ead5bdae042e",spaceId:r().rQ},"nl-NL":{previewRootId:"1b417954-d9c2-8040-99cd-f6f24a7b664e",rootId:"1b417954-d9c2-8040-99cd-f6f24a7b664e",spaceId:r().rQ},"da-DK":{previewRootId:"1b417954-d9c2-8000-bc82-e5b055b64bfd",rootId:"1b417954-d9c2-8000-bc82-e5b055b64bfd",spaceId:r().rQ},"sv-SE":{previewRootId:"1b417954-d9c2-8083-934b-e38126f120e2",rootId:"1b417954-d9c2-8083-934b-e38126f120e2",spaceId:r().rQ},"fi-FI":{previewRootId:"1b417954-d9c2-8011-b27a-e0ad995bd435",rootId:"1b417954-d9c2-8011-b27a-e0ad995bd435",spaceId:r().rQ},"zh-CN":{previewRootId:"1b417954-d9c2-8014-bc84-cf44da811cf8",rootId:"1b417954-d9c2-8014-bc84-cf44da811cf8",spaceId:r().rQ},"zh-TW":{previewRootId:"1a817954-d9c2-80a9-bb6f-f39ba79e7dcc",rootId:"1a817954-d9c2-80a9-bb6f-f39ba79e7dcc",spaceId:r().rQ}},nameMessage:a().DZ.getStartedPageMobile}},I=["desktopTeamCreateWithComment","desktopTeamJoinWithComment","desktopTeamCreateWithMention","desktopTeamJoinWithMention"],v=([u,p,f,m].flatMap((e=>Object.values(e.sources))).map((e=>e.rootId)),{teamsHomepage:{emoji:"ðŸ ",nameMessage:a().DZ.teamsHomepage,sources:{"en-US":{previewRootId:"4cd0eced-e273-46c2-84f5-a7efd7fbdd2f",rootId:"4cd0eced-e273-46c2-84f5-a7efd7fbdd2f",spaceId:r().rQ},"ko-KR":{previewRootId:"82be252e-5184-44cd-a91b-a7d6ffdefac6",rootId:"82be252e-5184-44cd-a91b-a7d6ffdefac6",spaceId:r().rQ},"ja-JP":{previewRootId:"bea8efd0-61d7-495b-a255-5c1f40753cf7",rootId:"bea8efd0-61d7-495b-a255-5c1f40753cf7",spaceId:r().rQ},"fr-FR":{previewRootId:"12a6eaa5-30f7-419b-aee7-1be2dbc7278c",rootId:"12a6eaa5-30f7-419b-aee7-1be2dbc7278c",spaceId:r().rQ},"de-DE":{previewRootId:"75db54d0-46ad-43b1-8ef0-7556ce0e9069",rootId:"75db54d0-46ad-43b1-8ef0-7556ce0e9069",spaceId:r().rQ},"es-ES":{previewRootId:"9ac64262-cad7-44f3-bfae-96dabec9e770",rootId:"9ac64262-cad7-44f3-bfae-96dabec9e770",spaceId:r().rQ},"es-LA":{previewRootId:"5b51de44-604b-4a96-b421-9f3e3cf470d2",rootId:"5b51de44-604b-4a96-b421-9f3e3cf470d2",spaceId:r().rQ},"pt-BR":{previewRootId:"b9626438-4451-441c-9608-35ab50e3b182",rootId:"b9626438-4451-441c-9608-35ab50e3b182",spaceId:r().rQ}}}})},555267:(e,t,o)=>{o.d(t,{A:()=>d});var r=o(296540),a=()=>o(401497),n=()=>o(62856),i=()=>o(331542),c=o(474848);function d(e){let{loadingMessage:t}=e;const o=(0,a().DP)(),d=(0,n().A)(!0,400);return(0,c.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:d&&(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)(i().A,{}),t&&(0,c.jsx)("div",{style:{marginLeft:8,color:o.text.secondary},children:t})]})})}},555555:(e,t,o)=>{o.d(t,{n:()=>a});o(296540);var r=o(474848);const a=(0,o(340498).wt)("import",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},566910:(e,t,o)=>{o.d(t,{e:()=>n});o(296540);var r=o(474848);const a={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"m4.897 3.086-.122-.143a.625.625 0 0 0-.95.814l1.347 1.57c-1.762.91-3.195 2.304-4.083 3.997a1.47 1.47 0 0 0 0 1.362c1.61 3.07 5.011 5.155 8.911 5.155 1.282 0 2.51-.225 3.637-.637l1.588 1.853a.625.625 0 0 0 1.042-.67L4.989 3.229a.6.6 0 0 1-.093-.143M2.194 9.905c.807-1.538 2.15-2.807 3.816-3.599L7.4 7.928a3.326 3.326 0 0 0 4.252 4.961l1.107 1.292a9.4 9.4 0 0 1-2.76.41c-3.459 0-6.42-1.848-7.805-4.486a.22.22 0 0 1 0-.2m6.696.097q0-.151.039-.29l1.194 1.393q-.06.007-.124.007a1.11 1.11 0 0 1-1.109-1.11m7.012 4.038a9.4 9.4 0 0 0 3.01-3.354 1.47 1.47 0 0 0 0-1.362C17.302 6.254 13.9 4.169 10 4.169c-.805 0-1.588.089-2.339.257l.94 1.096a9.5 9.5 0 0 1 1.4-.103c3.458 0 6.42 1.848 7.804 4.486a.22.22 0 0 1 0 .2 8.14 8.14 0 0 1-2.722 2.98z"}),(0,r.jsx)("path",{d:"M13.205 10.893a3.33 3.33 0 0 0-3.596-4.194z"})]})},n=(0,o(340498).wt)("eyeSlash",a)},578194:(e,t,o)=>{o.d(t,{r:()=>r});const r=(0,o(583835).Dv)("importEvernote")},736767:(e,t,o)=>{o.d(t,{A:()=>i});var r=o(296540),a=o(474848);function n(e,t){return(0,a.jsx)(o(678553).A,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const i=(0,r.forwardRef)(n)},748539:(e,t,o)=>{o.d(t,{f:()=>r});const r=new(o(645873).O2)("pageCovers",(async()=>o.e(40198).then(o.bind(o,193645))))},756114:(e,t,o)=>{o.d(t,{D:()=>r});function r(e,t){t.route.name;return!1}},757491:(e,t,o)=>{o.d(t,{l:()=>a});var r=o(296540);function a(e){return(0,r.useEffect)((()=>()=>e()),[])}},864779:(e,t,o)=>{o.d(t,{Me:()=>c,Vv:()=>a,Z3:()=>n,wI:()=>i});var r=()=>o(244641);function a(e){if("week"===e.frequency&&e.weekdays&&1===e.weekdays.length)return{weekday:e.weekdays[0],duration:e.interval}}function n(e){const{currentSprintEndDate:t,sprintSchedule:o}=e;return d({startDate:l({dateToAdjust:r().c9.fromISO(t),weekday:o.weekday,wrapForEqualDays:!0}),duration:o.duration})}function i(e){const{userTimeZone:t,sprintSchedule:o}=e;return d({startDate:r().c9.local({zone:t}),duration:o.duration})}function c(e){const{currentSprintStartDate:t,sprintSchedule:o}=e,a=l({dateToAdjust:r().c9.fromISO(t),weekday:o.weekday,wrapForEqualDays:!1}),{end_date:n}=d({startDate:a,duration:o.duration});let i=r().c9.fromISO(n);const c=r().c9.now().startOf("day");for(;i.diff(c,"days").days<0;)i=i.plus({weeks:1});return{type:"daterange",start_date:i.plus({days:1}).minus({weeks:o.duration}).toISODate(),end_date:i.toISODate()}}function d(e){const{startDate:t,duration:o}=e,r=t.plus({weeks:o}).minus({days:1});return{type:"daterange",start_date:t.toISODate(),end_date:r.toISODate()}}const s={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6};function l(e){const{dateToAdjust:t,weekday:o,wrapForEqualDays:r}=e,a=u({currentWeekday:t.weekday%7,nextWeekday:s[o],wrapForEqualDays:r});return t.plus({days:a})}function u(e){const{currentWeekday:t,nextWeekday:o,wrapForEqualDays:r}=e,a="number"==typeof t?t:s[t],n="number"==typeof o?o:s[o];if(a===n)return r?7:0;let i=a,c=0;for(;i!==n;)i===s.SA?i=0:i+=1,c+=1;return c}},888325:(e,t,o)=>{function r(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>r})},893627:(e,t,o)=>{o.d(t,{K:()=>i});var r=o.n(o(440537)),a=()=>o(132456),n=()=>o(206267);class i{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=o(851941).Yf[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:r}=this.getSettings();return r&&e!==o(867178).wI?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,a().J4)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:o,enableIdSchema:n}=this.getSettings();if(!n||"space"===t)return this.legacyId(t,"disabled");const i=this.mapSpaceIdToShortId(e),c=r().types.isPromise(i)?await i:i;return c?(this.idCreatorLogger(e,t,o?"id_schema_test":"id_schema"),(0,a().kw)(o,c,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:o,enableIdSchema:r}=this.getSettings();return r&&"space"!==t?(this.idCreatorLogger(void 0,t,o?"id_schema_test":"id_schema"),(0,a().kw)(o,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),n().JW()}async deterministicIdWithSpaceId(e,t,o){const{enableTestDateOffset:i,enableIdSchema:c}=this.getSettings();if(!c)return this.idCreatorLogger(e,t,"disabled"),n().gB(o);const d=this.mapSpaceIdToShortId(e),s=r().types.isPromise(d)?await d:d;return s?(this.idCreatorLogger(e,t,i?"id_schema_test":"id_schema"),(0,a().lf)(s,t,o)):(this.idCreatorLogger(e,t,"missing_short_id"),n().gB(o))}deterministicIdWithSpaceShortId(e,t,o){const{enableTestDateOffset:r,enableIdSchema:i}=this.getSettings();return i?(this.idCreatorLogger(void 0,t,r?"id_schema_test":"id_schema"),(0,a().lf)(e,t,o)):(this.idCreatorLogger(void 0,t,"disabled"),n().gB(o))}async getSpaceIdCreator(e){if(!e)return new c(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new c(e,this.idCreatorLogger);const o=this.mapSpaceIdToShortId(e),a=r().types.isPromise(o)?await o:o;return this.getSpaceShortIdCreator(e,a)}getSpaceIdCreatorSync(e){if(!e)return new c(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new c(e,this.idCreatorLogger);const o=this.mapSpaceIdToShortId(e),a=r().types.isPromise(o)?void 0:o;return this.getSpaceShortIdCreator(e,a)}getSpaceShortIdCreator(e,t){const{enableIdSchema:o}=this.getSettings();return o&&t?new d(e,this,t):new c(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class c{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),n().JW()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),n().JW()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),n().gB(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class d{constructor(e,t,o){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=o}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},901226:(e,t,o)=>{o.r(t),o.d(t,{CollectionLinkExistingModal:()=>O});o(898992),o(354520),o(581454);var r=o(296540),a=()=>o(484714),n=()=>o(56366),i=()=>o(401497),c=()=>o(670913),d=()=>o(592269),s=()=>o(289915),l=()=>o(416504),u=()=>o(689094),p=()=>o(798880),f=()=>o(245241),m=()=>o(959013),b=()=>o(284371),I=()=>o(612008),v=()=>o(317909),g=()=>o(704152),h=()=>o(760217),S=()=>o(364280),y=()=>o(285790),w=()=>o(297872),R=()=>o(623580),C=()=>o(710149),_=()=>o(928600),k=()=>o(939740),M=()=>o(614505),A=()=>o(16006),T=()=>o(89924),x=()=>o(586481),E=()=>o(862292),L=()=>o(186445),P=()=>o(873050),Q=()=>o(722872),D=()=>o(135599),B=()=>o(645873),N=()=>o(508496),U=o(474848);function O(e){let{collectionContextStore:t,groupFormat:o,onClose:d,onAddOrLink:u}=e;const b=(0,m().tz)(),I=(0,a().v3)(),v=(0,n().K8)((()=>t.collectionStore()),[t]),[g,h]=r.useState(""),S=(0,r.useMemo)((()=>o?[o]:[]),[o]),y=(0,n().K8)((()=>{var e;const o=(0,P().Ay)(t,!1);if(!o)return;const r=t.collectionStore();if(!r)return;const a=I.currentUser.id;return(0,s().oR)({context:{schema:r.getSchema(),userId:a,userTimeZone:(0,l().P)(),userStartOfWeek:L().XX.state,relativeVariableResult:t.relativeVariableStore.state,currentPageInRelatedCollection:null===(e=t.viewsModuleContextStore.currentPageStore())||void 0===e?void 0:e.id,intl:b,collectionFeatureGates:(0,c().v)({experimentService:N().default,actor:a?{table:p().oo,id:a}:void 0,spaceId:r.getSpaceId()})},propertyMapping:r.getPropertyMapping(),filter:o})}),[t,I.currentUser.id,b]),{results:R,isResultsLoading:C}=(0,D().W)({searchQuery:g,limit:50,disable:!1,source:"link_existing_menu",type:f().Vz.BlocksInCollection,filters:{requireEditPermissions:!0,excludeTemplates:!0,navigableBlockContentOnly:!0,parentId:null==v?void 0:v.id}}),{value:k}=(0,B().fJ)(E().T.formulas),M=(0,n().K8)((()=>{const e=new Map,t=new Map;return R.filter((o=>{let{store:r}=o;const a=r.getModel();return!y||!a||!y({block:a,getRecordModel:r.getRecordModel,propertyMapping:null==v?void 0:v.getPropertyMapping(),resultCache:e,regExpCache:t,experimentService:N().default,formulasModule:k})})).slice(0,10)}),[v,y,R,k]),A=(0,i().IS)((()=>({menuContent:I.device.isMobile?{maxHeight:180,width:400}:{}})),[I.device]);return(0,U.jsx)(w().A,{capture:!0,allowMenuList:!0,allowEsc:!0,allowUndo:!0,allowTabUntab:!0,render:()=>(0,U.jsx)(_().A,{menuType:Q().gu.Popup,header:(0,U.jsx)(j,{searchQuery:g,onSearchQueryChange:h}),footer:g&&(0,U.jsx)(F,{searchQuery:g,collectionContextStore:t,groupsPointer:S,onClose:d,onAddOrLink:u}),children:(0,U.jsx)("div",{style:A.menuContent,children:C?(0,U.jsx)(V,{}):(0,U.jsx)(z,{searchResults:M,collectionContextStore:t,groupsPointer:S,onClose:d,onAddOrLink:u})})})})}function z(e){let{searchResults:t,collectionContextStore:o,groupsPointer:r,onClose:c,onAddOrLink:s}=e;const u=(0,a().v3)(),p=(0,m().tz)(),{collectionStore:f,icon:b}=(0,n().K8)((()=>{const e=o.collectionStore();return{collectionStore:e,icon:null==e?void 0:e.getIcon()}}),[o]),I=(0,i().IS)((e=>({sectionTitleWrapper:{display:"flex",alignItems:"center",gap:4},collectionTitleWrapper:{display:"flex",alignItems:"center",color:e.text.primary,gap:2}})),[]),g=(0,U.jsx)("div",{style:I.sectionTitleWrapper,children:(0,U.jsx)(m().sA,{id:"CollectionLinkExistingModal.resultsSection",defaultMessage:"Link a page from {relationName}",values:{relationName:(0,U.jsxs)("div",{style:I.collectionTitleWrapper,children:[(0,U.jsx)(M().A,{icon:b,disabled:!0,isEmptyPage:!0,size:12}),f&&(0,U.jsx)(A().A,{store:f})]})}})});return(0,U.jsx)(k().Ay,{type:k().Oh.Vertical,initialFocus:0,sections:[{key:"results",showNoResultMessage:!0,items:t.map((e=>{let{store:t}=e;return function(e){let{blockStore:t,collectionContextStore:o,groupsPointer:r,onClose:a,onAddOrLink:n,environment:i,intl:c}=e;return{key:t.id,action:()=>{const e=o.collectionStore();if(!e)return;const a=t.getModel();a&&v().createAndCommit({userAction:"CollectionLinkExistingModal.onLinkExisting",environment:i,canUndo:!0,perform:s=>{var u;const{update:p}=d().H3({block:a,schema:e.getSchema(),propertyMapping:e.getPropertyMapping(),userFilterContext:{userId:i.currentUser.id,userTimeZone:(0,l().P)(),userStartOfWeek:L().XX.state},filter:(0,P().Ay)(o,!1),groupBy:o.getGroupByAndGroupFormats().groupBy,groupsPointer:r,relativeVariableResult:o.relativeVariableStore.state,currentPageInRelatedCollection:null===(u=o.viewsModuleContextStore.currentPageStore())||void 0===u?void 0:u.id,getRecordModel:e.getRecordModel,intl:c,resultCache:new Map,regExpCache:new Map,experimentService:N().default});x().L({environment:i,store:t,properties:p,transaction:s}),n&&n(s,t,p)}}).performResult},render:e=>{let{ref:o,...r}=e;return(0,U.jsx)(W,{blockStore:t,...r})}}}({blockStore:t,collectionContextStore:o,groupsPointer:r,onClose:c,onAddOrLink:s,environment:u,intl:p})})),render:e=>(0,U.jsx)(T().A,{title:g,children:e.children})}]})}function W(e){let{blockStore:t,...o}=e;const{focused:r,onClick:a}=o,c=(0,m().tz)(),d=(0,n().K8)((()=>t.getIcon()),[t]),s=(0,i().IS)((e=>({item:{height:32},itemRight:{marginRight:4},pageTitleWrapper:{display:"flex",alignItems:"center"},icon:{marginRight:4},title:{...b().RC,maxWidth:"100%",fontWeight:500},iconButton:{right:6,background:e.popoverBackground,boxShadow:e.shadowSM,padding:2},iconButtonHover:{borderRadius:4}})),[]);return(0,U.jsx)(h().A,{...o,textWrapperStyle:{marginLeft:6},title:(0,U.jsxs)("div",{style:s.pageTitleWrapper,children:[(0,U.jsx)(M().A,{icon:d,style:s.icon,disabled:!0,isEmptyPage:!0,size:20}),(0,U.jsx)(A().A,{underline:!0,enableHover:!0,store:t,style:s.title})]}),right:r?(0,U.jsx)(y().A,{hasBackground:!1,ariaLabel:c.formatMessage({id:"CollectionLinkExistingModal.linkButton.ariaLabel",defaultMessage:"Link page"}),icon:u().W,onClick:a,hoveredStyle:s.iconButtonHover,style:s.iconButton}):void 0,style:s.item,rightStyle:s.itemRight})}function j(e){let{searchQuery:t,onSearchQueryChange:o}=e;const{device:r}=(0,a().v3)(),n=(0,m().tz)(),c=(0,i().IS)((e=>({headerWrap:{display:"flex",width:"100%",position:"relative",padding:"6px 10px",fontSize:r.isMobile?b().J.UIRegular.mobile:b().J.UIRegular.desktop,boxShadow:`\n\t\t\t\t\t0 1px 0 ${e.darkDividerColor}\n\t\t\t\t`},input:{flexGrow:1}})),[r]);return(0,U.jsx)("div",{style:c.headerWrap,children:(0,U.jsx)(R().A,{style:c.input,value:t,placeholder:n.formatMessage({id:"CollectionLinkExistingModal.searchPlaceholder",defaultMessage:"Link a pageâ€¦"}),forceShowClearButton:Boolean(t),focus:!0,onChange:e=>o(e.target.value),onClearButtonClick:()=>{o("")},format:R().C.Transparent})})}function F(e){let{searchQuery:t,collectionContextStore:o,groupsPointer:n,onClose:c,onAddOrLink:d}=e;const s=(0,a().v3)(),l=(0,i().IS)((e=>({button:{display:"flex",alignItems:"center",gap:6,width:"100%",paddingInline:12,paddingBlock:8,fontSize:s.device.isMobile?b().J.UIRegular.mobile:b().J.UIRegular.desktop,boxShadow:`\n\t\t\t\t\t0 -1px 0 ${e.darkDividerColor}\n\t\t\t\t`,color:e.text.secondary},pageTitle:{color:e.text.primary}})),[s.device]),p=(0,r.useCallback)((()=>{v().createAndCommit({userAction:"CollectionLinkExistingModal.onLinkExisting",environment:s,canUndo:!0,perform:e=>{const{newStore:r}=(0,I().Q)({environment:s,collectionContextStore:o,groupsPointer:n,shouldCoerce:!0,from:{createBlock:"relation_link_existing"},transaction:e,inMemoryRecordCache:s.defaultRecordCache.inMemoryRecordCache,title:t});d&&d(e,r)}}).performResult,c()}),[o,s,n,d,c,t]);return(0,U.jsxs)(g().A,{style:l.button,onClick:p,children:[(0,u().W)({width:14}),(0,U.jsx)("div",{children:(0,U.jsx)(m().sA,{id:"CollectionLinkExistingModal.addPageButton",defaultMessage:"Create {pageTitle}",values:{pageTitle:(0,U.jsx)("span",{style:l.pageTitle,children:t})}})})]})}const V=(0,r.memo)((function(){const e=(0,i().IS)((e=>({wrapper:{display:"flex",flexDirection:"column",gap:8,paddingBottom:12},resultsWrapper:{marginRight:8,marginLeft:12},icon:{height:16,width:16,borderRadius:4},pageName:{height:15,borderRadius:4,marginLeft:-1},sectionName:{height:12,borderRadius:4,width:"20%",marginTop:15,marginLeft:13,marginBottom:6}})),[]);return(0,U.jsxs)("div",{style:e.wrapper,children:[(0,U.jsx)(C().A,{style:e.sectionName}),(0,U.jsx)("div",{style:e.resultsWrapper,children:(0,U.jsx)(S().VP,{gap:12,children:Array.from({length:3},((t,r)=>(0,U.jsx)("div",{children:(0,U.jsxs)(S().fI,{gap:8,alignItems:"center",children:[(0,U.jsx)(C().A,{style:e.icon}),(0,U.jsx)(C().A,{style:{...e.pageName,width:o(496603).XM(["30%","40%","43%","45%","48%","50%","54%","55%","60%"])}})]})},`relation-result-shimmer-${r}`)))})})]})}))},950914:(e,t,o)=>{o.d(t,{AL:()=>n,Q6:()=>c,vt:()=>i});o(898992),o(672577);var r=()=>o(66689),a=()=>o(254947);const n={autoCompleteSprints:!1,actionConfig:{complete_sprint_action:"complete_sprint_and_move_incomplete_tasks_to_next_sprint"},recurrenceConfig:{interval:2,weekdays:["MO"]}};function i(e){const{eventTracker:t,properties:o}=e;t.DO_NOT_USE_commonTrackEvent({eventName:"complete_sprint_action",properties:o})}function c(e,t){var o;return null===(o=t.groups)||void 0===o||null===(o=o.find((t=>t.id===r().nl||(null==t?void 0:t.name)===a().P0||(null==t?void 0:t.name)===e.formatMessage(a().oz.statusGroupNameComplete))))||void 0===o?void 0:o.name}},966759:(e,t,o)=>{o.d(t,{i:()=>n});var r=()=>o(476492),a=()=>o(175213);function n(e){const{environment:t,collectionContextStore:o,property_type:n,from:i,property:c,...d}=e,s=(0,r().sl)(o)||{};(0,a().G)(t,{property:c,property_type:n,from:i,...d,...s})}}}]);