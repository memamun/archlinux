"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[69689],{9768:(e,t,o)=>{o.d(t,{Br:()=>w,Jh:()=>k,Lb:()=>S,YE:()=>f,cu:()=>x});o(16280),o(898992),o(672577);var i=o.n(o(32485)),n=o(296540),s=()=>o(484714),r=()=>o(56366),a=()=>o(778781),l=()=>o(534177),c=()=>o(623186),d=()=>o(299772),u=()=>o(548821),p=()=>o(517223),m=()=>o(823082),g=()=>o(241181),h=()=>o(817942),v=o(474848);const S=12,f=12,y=10,b=10,C=8;function _(e){let{collectionSchema:t,module:o}=e;return!(!t||"normalizedTitleWithIcon"!==o.type)&&(0,p().LD)({collectionSchema:t,module:o}).length>0}function k(e){let{layoutModule:t,area:o,context:p,collectionSchema:k,collectionStore:w,showDetailsPanelToggleButtonBelowTitle:x,modules:P,postContext:M}=e;const{isMobile:I}=(0,s().Y0)(),A=P.findIndex((e=>e.id===t.id)),T=null!=P&&P.length&&-1!==A?P[A+1]:void 0,B=(0,g().p)({collectionStore:w,layoutModule:T}),j=(0,c().aN)(w),V=(0,r().K8)((()=>Boolean(null==w?void 0:w.isPageTreeCollection())),[w]),[L,D]=(0,n.useMemo)((()=>{const e=_({collectionSchema:k,module:t});let i=!1;const n={};if("page_details"===o)n.marginBottom=y,n.paddingBottom=b;else if("page_main"===o)n.marginBottom=f,n.paddingBottom=S;else if("views_main_tab_modules"===o)n.marginBottom=f,n.paddingBottom=S;else{if("form_layout_schema"===o||"form_conditional_modules"===o)throw new Error("Not implemented for forms");(0,l().HB)(o)}const s="editor"===(null==T?void 0:T.type);(0,d().Mi)(M)?"editor"===t.type&&M!==u().Rr.DraftPostInFullPageComposer?i=!0:"normalizedTitleWithIcon"===t.type&&(n.marginBottom=void 0,n.paddingBottom=C):s&&(i=!0,"normalizedTitleWithIcon"!==t.type||e||(i=!1,n.marginBottom=void 0,n.paddingBottom=void 0),"views_main_tab_modules"===o&&(i=!1,n.marginBottom=void 0,n.paddingBottom=void 0)),B&&n.marginBottom&&(n.marginBottom=Math.max(n.marginBottom-4,0)),"page_main"!==o&&"page_details"!==o&&"views_main_tab_modules"!==o||("discussions"===t.type?n.marginLeft=0:"normalizedTitleWithIcon"===t.type?n.marginLeft=-4:(0,a().gx)(t)||"properties"===t.type||"relationsGroup"===t.type?n.marginLeft=-6:"editor"===t.type&&(n.marginLeft=-2));const r="views"===(null==T?void 0:T.type)||"editor"===(null==T?void 0:T.type);return"page_main"!==o&&"page_details"!==o||!n.paddingBottom||r||("property_text"===t.type||"property_relation"===t.type&&j?n.paddingBottom=Math.max(n.paddingBottom-4,0):"properties"===t.type&&(V&&!I||(n.paddingBottom=Math.max(n.paddingBottom-4,0))),"viewsMain"===(null==T?void 0:T.type)&&(n.paddingBottom=Math.max(n.paddingBottom-12,0))),"normalizedTitleWithIcon"===t.type&&(e?I&&"properties"===(null==T?void 0:T.type)&&!B&&(n.paddingBottom=void 0,n.marginBottom=4):(x?"discussions"===(null==T?void 0:T.type)&&(n.marginBottom=void 0):"properties"===(null==T?void 0:T.type)?(n.paddingBottom=void 0,n.marginBottom=8):"discussions"===(null==T?void 0:T.type)&&(n.paddingBottom=S),I&&"discussions"===(null==T?void 0:T.type)&&(n.marginBottom=void 0))),"bottomControls"===t.type&&(n.paddingBottom=void 0,n.marginBottom=void 0),"discussions"===t.type&&s&&(n.paddingBottom=void 0),"inlinePageSections"!==(null==T?void 0:T.type)&&"expandedBacklinks"!==(null==T?void 0:T.type)&&"bottomControls"!==(null==T?void 0:T.type)||(n.marginBottom=8),"editor"!==t.type||(0,d().Mi)(M)||p===u().Rr.Presentation||(n.marginTop=8),("views"===t.type||"editor"===t.type&&!(0,d().Mi)(M))&&(n.paddingBottom=void 0,n.marginBottom=void 0),"viewsMain"===t.type&&(n.paddingBottom=void 0),p===u().Rr.DraftPostInInlineComposer&&(n.marginBottom=4,n.paddingBottom=0),[i,n]}),[k,t,o,null==T?void 0:T.type,B,V,p,j,I,x,M]);return(0,n.useMemo)((()=>function(e){return(0,v.jsx)(h().vV,{className:i()({"layout-content-with-divider":L}),style:D,testId:(0,m().H)(t),children:e})}),[t,L,D])}function w(e){let{layoutModule:t,area:o,collectionSchema:i,collectionStore:n,showDetailsPanelToggleButtonBelowTitle:a,pageMainModules:l}=e;const{isMobile:c}=(0,s().Y0)(),d=(0,r().K8)((()=>{if(!n)return!1;return!!l.find((e=>"normalizedTitleWithIcon"===e.type))&&a}),[n,l,a]);if(!n)return!1;if("properties"!==t.type&&"discussions"!==t.type&&"relationsGroup"!==t.type)return!1;if("page_main"!==o)return!0;const u=l.findIndex((e=>e.id===t.id));if(0===u||l.length<=1)return!1;const p=l[u-1];if("normalizedTitleWithIcon"!==(null==p?void 0:p.type))return!0;if("relationsGroup"===t.type&&d)return!0;if("properties"===t.type&&d&&!c)return!0;const m=_({collectionSchema:i,module:p});return("properties"!==t.type||!c||!m)&&m}function x(e){let{collectionStore:t,modulesByArea:o}=e;return!((t.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0})||[]).length>0)&&0===(0,p().Ul)({collectionStore:t,modulesByArea:o}).length}},25680:(e,t,o)=>{o.d(t,{S:()=>c});var i=o(296540),n=()=>o(56366),s=()=>o(466721),r=()=>o(548821),a=()=>o(547726),l=()=>o(650031);function c(e){let{store:t,environment:o,postContext:c}=e;const{pageVisitStore:d,presenceStore:u}=(0,n().K8)((()=>({pageVisitStore:new(a().A),presenceStore:new(l().A)})),[]);return(0,i.useEffect)((()=>{!c||c!==r().Rr.PostInFullPageOrPeek&&c!==r().Rr.PostInFeed||(t.id!==d.state.pageId&&d.setState({...d.getInitialState(),pageId:t.id}),s().Ds(o,{blockStore:t,pageVisitStore:d,incremental:!1,includeTotalCount:!0}))}),[t,d,o,u,c]),{pageVisitStore:d,presenceStore:u}}},33301:(e,t,o)=>{o.d(t,{T:()=>m,n:()=>p});var i=()=>o(908006),n=()=>o(508496),s=()=>o(75368),r=()=>o(970330),a=()=>o(896628),l=()=>o(722101),c=()=>o(246826),d=()=>o(778417),u=()=>o(725614);function p(e){const{environment:t,store:o,transaction:a,preventTextSelection:p,onTextSelection:m}=e;n().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&s().A.state.open&&s().A.setState({open:!1});const g=(()=>{const e=o.getContentStores();if(1===e.length&&e[0].isEmptyTextBlock())return e[0];const i=c().Wv({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:a,spaceId:o.pointer.spaceId}),n=l().BC({parentStore:o.getContentStore(),appendStore:i,transaction:a}).childStore;return r().v(t,{from:"template_picker",type:"text",creating_block_id:i.id,parent_collection_id:i.getParentCollectionIdUpToTwoLevels()}),n})();return p||i().default.afterNextFlush((()=>{d().hc({environment:t,store:g}),u().setSelectionAtStart({store:g.getBlockTitleStore()}),null==m||m()})),g}function m(e){const{environment:t,store:o,transaction:i}=e;a().vc({store:o,transaction:i}),p({environment:t,store:o,transaction:i})}},78942:(e,t,o)=>{o.d(t,{A:()=>p});var i=o(296540),n=()=>o(484714),s=()=>o(683521),r=()=>o(959013),a=()=>o(222299),l=()=>o(317909),c=()=>o(748539),d=()=>o(493823),u=o(474848);function p(e){const{store:t,style:o,label:p}=e,m=(0,n().v3)(),[g,h]=(0,i.useState)(!1),v=(0,n().Y0)(),S=(0,i.useCallback)((async()=>{const e=t.getCoverStore();if(!e)return;if(e.getValue())return;h(!0);const o=(await c().f.load()).default;l().createAndCommit({userAction:"PageViewBlock.handleAddRandomCoverClick",environment:m,canUndo:!0,perform:i=>{a().Oj({transaction:i,store:t,coverStore:e,pageCovers:o})}}),h(!1)}),[m,t]);return!0===g?(0,u.jsx)(d().p,{style:o,isLightGray:!0,disabled:!0,icon:s().N,children:v.isSmallPhone?(0,u.jsx)(r().sA,{id:"pageAddCoverButton.add.pageCoverMobileLoading",defaultMessage:"Loading"}):(0,u.jsx)(r().sA,{id:"pageAddCoverButton.add.pageCoverLoading",defaultMessage:"Loading cover"})},"add-cover-loading"):(0,u.jsx)(d().p,{style:o,isLightGray:!0,onClick:S,icon:s().N,children:p},"add-cover")}},155129:(e,t,o)=>{o.d(t,{X:()=>i});const i=(0,o(296540).createContext)(0);i.displayName="PageViewHorizontalOffsetContext"},165121:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().default{constructor(){super()}getInitialState(){}}const n=new i},257502:(e,t,o)=>{o.d(t,{d:()=>O});o(898992),o(581454),o(737550);var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(401497),a=()=>o(350124),l=()=>o(959013),c=()=>o(517288),d=()=>o(848565),u=()=>o(11048),p=()=>o(155004),m=()=>o(285790),g=()=>o(21140),h=()=>o(126126),v=()=>o(828634),S=()=>o(862292),f=()=>o(38337),y=()=>o(645873),b=()=>o(729380),C=()=>o(551619),_=()=>o(720501),k=()=>o(161479),w=()=>o(774733),x=()=>o(404783),P=o(474848);function M(e){const{store:t,discussionStore:o,isFirst:s,isOnly:r,discussionLocation:a,collapsed:l}=e,c=(0,n().v3)(),d=(0,i.useMemo)((()=>new(x().A)(c,(0,k().e)(t.pointer.spaceId))),[c,t.pointer.spaceId]),{value:u}=(0,y().fJ)(w().commentsDependency);return u?(0,P.jsx)(w().PW,{store:o,format:u.discussionHelpers.DiscussionFormat.Page,isFirst:s,isOnly:r,collapsed:l,showResolveButtonByDefaultIfPossible:!1,blockStore:t,discussionInputStore:d,..."post_top_level_discussion"===a?{discussionLocation:"post_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:"page_discussion"}},o.id):null}o(672577);var I=()=>o(908006),A=()=>o(790748),T=()=>o(197959),B=()=>o(725614),j=()=>o(317909),V=()=>o(583824),L=()=>o(963589),D=()=>o(143857),R=()=>o(77126),H=()=>o(548821),E=()=>o(630116);function K(e){const{store:t,from:o}=e,r=(0,n().v3)(),a=(0,i.useMemo)((()=>new(x().A)(r,(0,k().e)(t.pointer.spaceId))),[r,t.pointer.spaceId]),l=(0,i.useRef)(null),c=(0,i.useCallback)((()=>{B().clear({environment:r})}),[r]),d=function(e){const{environment:t,discussionInputStore:o,store:n,from:r}=e,a=(0,s().uB)(void 0,H().Ay),l=(0,i.useCallback)((e=>{var o;const i=n.id;null===(o=t.PageDetailsStore)||void 0===o||o.setToggleState({environment:t,type:"discussion",id:i},e)}),[t,n.id]),c=(0,L().X)("deterministic_first_page_comment_id");return(0,i.useCallback)((async()=>{const e=o.state.textStore.getValue(),i=o.state.files;if((!e||0===e.length)&&0===i.length)return;const s=await S().T.formulas.load(),d=(0,k().e)(n.pointer.spaceId),u=t.idCreator.getSpaceIdCreatorSync(d),p=c?u.deterministicIdInSavedSpace(T().$Y,`${n.id}-discussion-0`):void 0,m=p?E().sk.createChildStore(n,{table:T().$Y,id:p,spaceId:d}):void 0;await(null==m?void 0:m.load());const g=Boolean(!(null!=m&&m.getResolved())),{performResult:h}=j().createAndCommit({userAction:"PageDiscussion.useSubmitNewDiscussion",environment:t,canUndo:!0,perform:o=>(0,V().i)({discussionId:g?p:void 0,environment:t,type:"default",blockStore:n,commentTextValue:e||[],transaction:o,files:i,formulasModule:s,fromOverride:r}),skipUpdatingEditedMetadata:!0});if(o.reset(),a.setState({...a.state,forceDiscussionOpen:!1}),l(!0),h&&!t.device.isMobile){await I().default.afterNextFlush();const e=D().A.find((e=>e.getStore().id===h.id));e&&B().setSelectionAtEnd({store:e.getInputStore().state.textStore})}}),[o,t,a,l,n,c,r])}({environment:r,discussionInputStore:a,store:t,from:o});(0,A().b)(R().j,(()=>({getNode:()=>l.current,getBlockStore:()=>t,getInputStore:()=>a})),[a]);const{value:u}=(0,y().fJ)(w().commentsDependency);return u?(0,P.jsx)("div",{ref:l,children:(0,P.jsx)(w().bd,{showAvatar:!0,parentStore:t,onSubmit:d,onCancel:c,discussionInputStore:a,discussionFormat:u.discussionHelpers.DiscussionFormat.Page,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,canDrop:!0,blockStore:t})}):null}function F(e){const{store:t,showDiscussionInput:o,unresolvedDiscussionStores:i,discussionLocation:u,collapsed:p}=e,g=(0,n().v3)(),v=(0,l().tz)(),{value:b}=(0,y().fJ)(S().T.formulas),_=(0,r().IS)((e=>{const t={paddingTop:i.length>0?12:-1*d().Ql/2,paddingBottom:12,paddingRight:4};return{pageViewDiscussion:{width:"100%",margin:"0 auto"},newPageDiscussionWrapper:{..."post_top_level_discussion"===u?{padding:0}:t},emptyPostDiscussion:{display:"flex",justifyContent:"space-between",paddingBottom:12},reactionButton:{height:26,width:40,paddingLeft:10,paddingRight:10,borderRadius:13,borderWidth:1,borderColor:e.stroke.secondary,borderStyle:"solid"},reactionIcon:{width:22,height:22,fill:e.icon.secondary,marginTop:-.5,marginRight:1}}}),[i.length,u]),k=(0,s().K8)((()=>i.some((e=>e.getReactions().length))),[i]);return(0,P.jsxs)("div",{style:_.pageViewDiscussion,onMouseDown:C().NV,onClick:C().sx,className:f().Jv,children:["post_top_level_discussion"===u&&!k&&(0,P.jsxs)("div",{style:_.emptyPostDiscussion,children:[(0,P.jsx)(m().A,{ariaLabel:v.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),hasBackground:!1,showShadow:!1,style:_.reactionButton,icon:()=>(0,a().s)(_.reactionIcon),onClick:e=>{(0,c().O)({environment:g,blockStore:t,rect:e.currentTarget.getBoundingClientRect(),skipOpeningDiscussionOnSubmit:!0,formulasModule:b})}}),e.pageVisitStore&&e.presenceStore&&(0,P.jsx)(h().hJ,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,maxUsers:5,isShowingInPostFeed:!0})]}),i.map(((o,i,n)=>(0,P.jsx)(M,{store:t,discussionStore:o,isFirst:0===i,isOnly:1===n.length,collapsed:p,..."post_top_level_discussion"===u?{discussionLocation:"post_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:u}},o.id))),o&&(0,P.jsx)("div",{style:_.newPageDiscussionWrapper,children:(0,P.jsx)(K,{from:u,store:t})})]})}function O(e){const{store:t,wrapper:o,discussionLocation:n,collapsed:s,showDefaultTitle:r,pageDiscussionsRenderState:a}=e,c=(0,i.useRef)(null);return(0,v().tK)(c,(e=>{b().u.setDiscussionsHeight(e.height)})),(0,P.jsx)(u().A,{name:"PageDiscussionsWrapper",children:"hidden"!==a.type&&o((0,P.jsxs)(g().wt,{gap:2,ref:c,children:[r&&(0,P.jsx)(_().j,{store:t,children:(0,P.jsx)(l().sA,{id:"pageLayout.discussionsModule.title",defaultMessage:"Comments"})}),(0,P.jsx)(p().s,{allowSelectionWithin:!0,children:(0,P.jsx)(F,{...a,withLegacyInputPadding:!0,store:t,collapsed:s,..."post_top_level_discussion"===n?{discussionLocation:"post_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:"page_discussion"}})})]}))})}},259140:(e,t,o)=>{o.d(t,{A:()=>oe});o(944114),o(898992),o(354520),o(672577),o(581454);var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(713998),a=o(474848);const l=(0,o(340498).wt)("addPageDiscussion",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M4.095 15.465c.287 0 .499-.137.84-.444l2.523-2.277 4.47.007c2.058 0 3.214-1.19 3.214-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.213h.273v1.983c0 .45.24.738.657.738zM3.958 5.156a.454.454 0 01-.444-.45c0-.24.198-.438.444-.438h7.157c.246 0 .445.198.445.437a.45.45 0 01-.445.451H3.958zm0 2.256a.454.454 0 01-.444-.451c0-.24.198-.444.444-.444h7.157a.448.448 0 010 .895H3.958zm0 2.256a.448.448 0 010-.896h4.669c.246 0 .437.206.437.452a.438.438 0 01-.437.444H3.958z"})});var c=()=>o(413267),d=()=>o(778781),u=()=>o(959013),p=()=>o(284371),m=()=>o(222299),g=()=>o(725614),h=()=>o(774733),v=()=>o(155004),S=()=>o(493823),f=()=>o(406699),y=()=>o(710149),b=()=>o(645873);const C=new(b().O2)("floatingTableOfContents",(async()=>await o.e(52614).then(o.bind(o,666892)))),_=(0,b()._h)(C,(e=>e.FloatingTableOfContents));var k=()=>o(38337),w=()=>o(449195),x=()=>o(722872),P=()=>o(478726);o(16280);var M=()=>o(299545),I=()=>o(25680),A=()=>o(644914),T=()=>o(508496),B=()=>o(548821),j=()=>o(712505),V=()=>o(557198),L=()=>o(431385),D=()=>o(918487),R=()=>o(661344),H=()=>o(601726),E=()=>o(257502),K=()=>o(729923),F=()=>o(781141),O=()=>o(483832),W=()=>o(660197),N=()=>o(180762),z=()=>o(938090),G=()=>o(630116),Z=()=>o(186445),U=()=>o(747100),Y=()=>o(661179),X=()=>o(154807);function q(e){let{pageStore:t,disabled:o,viewsModule:r,wrapper:l,templatePickerMenuListStore:c,editorContentContainerRef:d}=e;const u=(0,n().v3)(),[p,m]=(0,i.useState)(void 0),{collectionViewBlockStore:g,viewsModuleContext:h,isViewsMainModule:v}=(0,s().K8)((()=>{if(!r)return{collectionViewBlockStore:void 0,collectionViewId:void 0,viewsModuleContext:void 0,isViewsMainModule:!1};const e=G().Bv.createChildStore(t,r.collection_view_block_pointer);return{collectionViewBlockStore:e,viewsModuleContext:{location:"page",viewsModule:r,currentPageStore:t,collectionViewBlockStore:e},isViewsMainModule:"viewsMain"===r.type}}),[t,r]);!function(e){let{isViewsMainModule:t,collectionViewBlockStore:o,environment:n,collectionContextStore:r}=e;const a=(0,s().K8)((()=>{if(!t||!o)return;const e=n.RouterStore.state.route;if("page"===e.name&&e.scrollToBlockId){const e=o.getCollectionViewStores().find((e=>"page"===e.getType()));return null==e?void 0:e.id}}),[n,o,t]);(0,i.useEffect)((()=>{r&&a&&(0,N().t)({environment:n,collectionContextStore:r,collectionViewId:a,isFullScreen:r.isFullScreenStore.state,isRootChild:r.isRootChildStore.state,isInPeekRenderer:r.isInPeekRendererStore.state})}),[n,a,o,t,r])}({isViewsMainModule:v,collectionViewBlockStore:g,environment:u,collectionContextStore:p});const S=function(e){const t=(0,n().v3)();return(0,s().K8)((()=>{if(!e)return 0;const{device:o}=t,i=t.WindowSizeStore.state.width,n=Boolean(e&&(0,U().cq)(e));if(n){const e=(0,X().eO)({environment:t,isInPeek:!0});return j().default.getPeekModeWidth(i)-Y().A.state-e}const s=(0,A().zo)(t,n)-(0,A().Ql)(t);let r=i-Y().A.state-s;if(!(0,A().tv)(t))return r;const{shouldShowSidebar:a}=(0,Z().X4)(t);return o.isMobile&&!o.isTablet||!a||(r-=(0,A().kf)(t)),r}),[t,e])}(g),f=function(e){let{isViewsMainModule:t,collectionViewBlockStore:o,collectionContextStore:i}=e;return(0,s().K8)((()=>{if(!t||!i)return!1;const e=null==i?void 0:i.collectionViewStore();return 1===(null==o?void 0:o.getCollectionViewStores().length)&&"page"===(null==e?void 0:e.getType())&&!(null!=e&&e.getFormat().page_pointer)}),[t,i,o])}({isViewsMainModule:v,collectionViewBlockStore:g,collectionContextStore:p});return g&&h?l((0,a.jsx)("div",{style:v?{minHeight:"60vh"}:void 0,children:(0,a.jsx)(z().dN,{store:g,isFullScreen:!1,hideViewTabBar:f,headerActionsBehavior:f?"hidden":"always_show",headerAllowedActions:$,disabled:o,disableHoverMenu:!0,fullWidth:S,showOnlyCurrentView:!v,isUnlistedView:!1,viewsModuleContext:h,setCollectionContextStore:m,templatePickerMenuListStore:c,editorContentContainerRef:d})})):null}const $=["filter","sort","search","addItem","noDate"];var Q=()=>o(996262),J=()=>o(9768);const ee=new(b().O2)("PageLayoutModuleErrorFallback",(()=>o.e(98396).then(o.bind(o,100826)))),te=(0,b()._h)(ee,(e=>e.PageLayoutModuleErrorFallback));const oe=function(e){const{store:t,context:d,postContext:m,disabled:y,templatePickerMenuListStore:C,styleOverrides:I,onHeaderMouseEnter:j,onHeaderMouseLeave:D,pageCoverHeight:R,isEditable:H,getControlHoverStyle:E,pageViewBlockStores:K,pageViewBlockAccessor:F,onDetailMouseEnter:O,onDetailMouseLeave:W,modules:N,editorContentContainerRef:z,layoutRef:G}=e,Z=(0,n().v3)(),U=(0,s().K8)((()=>t.getAssociatedCollectionStore()),[t],{debugName:"PageLayoutModules(collectionStore).useComputedStore"}),Y=(0,s().K8)((()=>t.getSchema()),[t],{debugName:"PageLayoutModules(schema).useComputedStore"}),X=(0,s().K8)((()=>(0,o(577814).A)({environment:Z,store:t,pageViewBlockStore:K.pageViewBlockStore})),[Z,t,K.pageViewBlockStore]),q=(0,s().K8)((()=>{const e=(0,P().gV)(t);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const o=Y[e.section];if(!o||"relation"!==o.type)return;const i=t.getPropertyValue(e.section),n=(0,r().bG)({relationValue:(0,r().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeDeleted:T().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:T().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:T().default.checkGate({gateName:"relations_show_no_access"})}).length;return"inline"===e.visibility&&Y[e.section]&&0!==n})).map((e=>e.section))}),[Y,t],{debugName:"PageLayoutModules(inlinePropertyIDs).useComputedStore"}),$=(0,o(401497).IS)((e=>({bottomControls:{display:"flex",alignItems:"baseline",justifyContent:"flex-start",flexWrap:"wrap",color:e.lightTextColor,fontFamily:p().vc(o(662303).locale).sans},detailsButton:{fontWeight:p().Wy.medium,color:e.mediumTextColor}})),[]),Q=(0,s().K8)((()=>(null==I?void 0:I.paddingX)??(0,P().OU)(d,Z)),[d,Z,null==I?void 0:I.paddingX],{debugName:"PageLayoutModules(horizontalPadding).useComputedStore"}),J=(0,i.useCallback)((()=>(0,M().oC)(t,{recursivelyLoadAllDiscussions:!1})),[t]),ee=(0,i.useCallback)((()=>J()>0),[J]),oe=(0,s().K8)((()=>{const e=(0,P().gV)(t);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const o=Y[e.section];if(!o||"relation"!==o.type)return;const i=t.getPropertyValue(e.section),n=(0,r().bG)({relationValue:(0,r().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeDeleted:T().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:T().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:T().default.checkGate({gateName:"relations_show_no_access"})}).length;return"minimal"===e.visibility&&Y[e.section]||"inline"===e.visibility&&Y[e.section]&&0===n})).map((e=>e.section))}),[Y,t],{debugName:"PageLayoutModules(minimalPropertyIDs).useComputedStore"}),{value:ne}=(0,b().fJ)(h().commentsDependency),{value:se}=(0,b().fJ)(o(650829).assistantDependency),re=(0,s().K8)((()=>{var e;if(!se)return!1;const i=se.clientSkillHelpers.createClientGlobalSkill("fill_title");return 1===se.assistantSurfaceValidators.filterAssistantSurfaceActionsForContext(se.assistantSurfaceValidators.clientSkillToAssistantSurfaceAction([i]),{type:"entrypoint",entrypoint:"pageStart",pageStore:t,isMobile:Z.device.isMobile,userSettings:null===(e=o(351360).default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings()}).length}),[se,Z.device.isMobile,t]),ae=(0,s().K8)((()=>(0,o(900967).J)(t,Z).backlinksCount),[Z,t],{debugName:"PageLayoutModules.useComputedStore:numberOfBacklinks"}),le=(0,V().Lx)({pageStore:t,numBacklinks:ae}),ce=(0,V().RR)({pageStore:t,numBacklinks:ae}),de=(0,P().L5)(d),ue=(0,s().K8)((()=>{if(e.context===B().Rr.DraftPostInInlineComposer)return{bottomControls:[]};const n=async()=>{K.pageViewBlockStore.setState({...K.pageViewBlockStore.state,forceDiscussionOpen:!0}),o(878523).o2(Z,{from:"page_comments"}),await o(908006).default.afterNextFlush();const e=o(77126).j.find((e=>e.getBlockStore().id===t.id)),i=null==e?void 0:e.getInputStore();i&&g().setSelectionAtEnd({store:i.state.textStore})},s=async()=>{const{assistantDependency:e}=await Promise.resolve().then(o.bind(o,650829)),i=t.getTitleStore();if(!i)return;const n=await e.load();g().setSelectionAtEnd({store:i}),n.executeAssistantSkillAction({environment:Z,clientSkillWithParameterValues:n.clientSkillHelpers.dangerouslyCreateClientSkillWithParameterValues(n.clientSkillHelpers.createClientGlobalSkill("fill_title")),from:"block_action_menu",assistantSurfaceType:Z.device.isMobile?"mobileWriter":"writer"})};try{let d=[];const p=[...e.topControls],m=()=>{if("section_hide"!==(0,w().Rn)()&&ee()){const e=J();return(0,a.jsx)(S().p,{isGray:!0,onClick:()=>{"PageDetailsStore"in Z&&Z.PageDetailsStore.setToggleState({environment:Z,type:"discussion",id:t.id},!0)},icon:l,style:$.detailsButton,children:(0,a.jsx)(u().sA,{id:"pageViewBlock.show.pageComments",defaultMessage:"{numberOfComments, plural, one {{numberOfComments} comment} other {{numberOfComments} comments}}",values:{numberOfComments:e}})},"showcomments")}},g=()=>{if(!U)return;const e=(0,P().gV)(t),i=t.isNonEditableState();if(!e)return;const n=oe;return n&&n.length?(0,a.jsx)(o(764891).A,{propertyIds:n,store:t,collectionStore:U,disabled:y,locked:i,blockPropertyValueOverlayStore:de?o(77238).A:o(205682).A,format:e,type:"minimal"}):void 0},v=()=>{const e=(0,M().hq)(t,{recursivelyLoadAllDiscussions:!1});if(0===e.length)return;const i=(0,a.jsx)(u().sA,{id:"pageViewBlock.showResolvedComments.button",defaultMessage:"{numberOfResolvedComments, plural, one {{numberOfResolvedComments} resolved comment} other {{numberOfResolvedComments} resolved comments}}",values:{numberOfResolvedComments:e.length}});return(0,A().Nk)(Z)?(0,a.jsx)(S().p,{icon:c().b,isGray:!0,style:$.detailsButton,onClick:()=>{o(112873).B4({environment:Z,blockStore:t,analyticsFrom:"page_comments",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,discussionIds:e.map((e=>e.id))})},children:i}):(0,a.jsx)(f().Ay,{buttonPopupStore:K.resolvedDiscussionButtonPopupStore,popupType:Z.device.isMobile?f().z7.SlideUp:f().z7.Popup,renderOrigin:e=>(0,a.jsx)(S().p,{icon:c().b,isGray:!0,style:$.detailsButton,...e,children:i}),render:i=>{let n;return n=Z.device.isMobile?{menuType:x().gu.Modal,title:(0,a.jsx)(u().sA,{defaultMessage:"Resolved comments",id:"pageViewBlock.resolvedComments.menuTabTitle"}),right:(0,a.jsx)(o(45552).DoneMenuText,{}),onClickRight:i.close,whiteBackground:!0}:{menuType:x().gu.Popup,width:500},(0,a.jsx)(o(928600).A,{...n,children:e.map(((e,n,s)=>(0,a.jsx)(o(13679).A,{store:e,droppable:!0,render:()=>ne?(0,a.jsx)(h().PW,{store:e,format:ne.discussionHelpers.DiscussionFormat.Menu,isFirst:0===n,isOnly:1===s.length,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!0,blockStore:t,onDismiss:i.close},e.id):null},e.id)))})}},"resolve-discussions")},b=e=>{const o=[];le&&o.push((0,a.jsx)(i.Fragment,{children:(0,a.jsx)(L().y,{pageStore:t,backlinksButtonPopupStore:K.backlinksButtonPopupStore,numBacklinks:ae,customization:{buttonStyles:$.detailsButton,buttonIsGray:!0}})},"backlinks"));const n="hidden"===e.type,s=n&&m();s&&o.push((0,a.jsx)(i.Fragment,{children:s},"discussions"));const r=v();r&&!n&&o.unshift((0,a.jsx)(i.Fragment,{children:r},"resolveddiscussions"));const l=g();return l&&o.push((0,a.jsx)(i.Fragment,{children:l},"minimalpagesections")),o};if(d=b(X),"always"===ce||"onHover"===ce){const e={isBottomControl:!1,..."always"===ce?{forceVisible:!0}:{}};p.unshift((0,a.jsx)(i.Fragment,{children:(0,a.jsx)(L().y,{pageStore:t,backlinksButtonPopupStore:K.backlinksButtonPopupStore,numBacklinks:ae,customization:{buttonStyles:E(e),buttonIsLightGray:!0}})},"backlinks"))}"section_hide"===(0,w().Rn)()||t.isCollectionView()||t.isInsideCollection()||ee()||!t.canComment()||!Z.currentUser.isLoggedIn()||K.pageViewBlockStore.state.forceDiscussionOpen||t.pathIsDead()||t.isPost()||y||p.push((r={isBottomControl:!1},(0,a.jsx)(S().p,{style:E({isBottomControl:r.isBottomControl}),isLightGray:!0,onClick:n,icon:l,children:Z.device.isSmallPhone?(0,a.jsx)(u().sA,{id:"pageViewBlock.add.pageCommentMobile",defaultMessage:"Comment"}):(0,a.jsx)(u().sA,{id:"pageViewBlock.add.pageComment",defaultMessage:"Add comment"})},"addcomment"))),re&&p.push((0,a.jsx)(S().p,{style:E({isBottomControl:!1}),isBlue:!0,onClick:s,icon:o(263931).D,children:(0,a.jsx)(u().sA,{id:"pageViewBlock.add.fillTitle",defaultMessage:"Fill page title"})},"fill-title"));return{headerControls:(0,a.jsx)("div",{className:de?k().S6D:void 0,children:(0,a.jsx)(o(774524).A,{store:t,context:e.context,children:p})}),bottomControls:d}}catch(d){return{bottomControls:[]}}var r}),[e.context,e.topControls,K.pageViewBlockStore,K.resolvedDiscussionButtonPopupStore,K.backlinksButtonPopupStore,Z,t,E,ee,y,X,ce,re,de,J,$.detailsButton,U,oe,ne,le,ae],{debugName:"PageLayoutModules(headerAndBottomControlsStore).useComputedStore"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v().s,{style:{display:"contents"},allowSelectionWithin:!1,children:(0,a.jsx)(_,{store:t})}),N.map((i=>(0,a.jsx)(o(306631).S,{from:`PageLayout.${i.type}`,fallback:e=>{let{errorId:t}=e;return(0,a.jsx)(te,{errorId:t,type:i.type})},getParentEl:()=>G.current,children:(0,a.jsx)(ie,{editorContentContainerRef:z,module:i,context:d,postContext:m,pageViewBlockStore:K.pageViewBlockStore,disabled:y,environment:Z,bottomControls:ue.bottomControls,headerControls:ue.headerControls,horizontalPadding:Q,inlinePropertyIDs:q,isEditable:H,isInPeek:de,onDetailMouseEnter:O,onDetailMouseLeave:W,onHeaderMouseEnter:j,onHeaderMouseLeave:D,pageCoverHeight:R,pageViewBlockAccessor:F,headerFocusStore:K.headerFocusStore,store:t,collectionStore:U,collectionSchema:Y,bottomControlsStyle:$.bottomControls,templatePickerMenuListStore:C,pageTitleWithIconProps:e,modules:N,pageDiscussionsRenderState:X})},i.id)))]})};function ie(e){const{module:t,modules:o,context:i,postContext:r,disabled:l,environment:c,bottomControls:u,headerControls:p,horizontalPadding:g,inlinePropertyIDs:h,isEditable:S,isInPeek:f,onDetailMouseEnter:b,onDetailMouseLeave:C,onHeaderMouseEnter:_,onHeaderMouseLeave:w,pageCoverHeight:x,pageViewBlockAccessor:P,headerFocusStore:M,store:A,collectionStore:V,collectionSchema:L,bottomControlsStyle:N,templatePickerMenuListStore:z,pageTitleWithIconProps:G,pageDiscussionsRenderState:Z,editorContentContainerRef:U}=e,{isMobile:Y}=(0,n().Y0)(),{pageVisitStore:X,presenceStore:$}=(0,I().S)({store:A,environment:c,postContext:r}),ee=(0,s().K8)((()=>!!V&&(0,D().v)({collectionStore:V,module:t,isMobile:Y})),[V,Y,t]),te="page_main",oe=(0,J().Jh)({layoutModule:t,area:te,collectionSchema:L,collectionStore:V,showDetailsPanelToggleButtonBelowTitle:ee,modules:o,context:i,postContext:r}),ie=(0,J().Br)({layoutModule:t,area:te,collectionSchema:L,collectionStore:V,pageMainModules:o,showDetailsPanelToggleButtonBelowTitle:ee});if((0,s().K8)((()=>T().default.checkGate({gateName:"side_peek_transition_improvements"})&&i===B().Rr.PeekView&&j().default.state.open&&"side_peek"===j().default.state.mode&&(j().default.state.isOpening||j().default.state.isClosing)&&("editor"===t.type||"views"===t.type||"viewsMain"===t.type)),[i,t.type]))return(0,a.jsx)("div",{className:k().GSK,children:(0,a.jsx)(y().A,{style:{width:"100%",height:"30px",display:"block",marginTop:32,borderRadius:8}})});if((0,d().gx)(t))return(0,a.jsx)(O().v,{context:i,disabled:l,propertyId:t.propertyId,store:A,pageModule:t,wrapper:oe,stackPropertyLabelAndValue:!0});switch(t.type){case"cover":return(0,a.jsx)(H().f,{store:A,isEditable:S,paddingX:g,pageCoverHeight:x,onMouseEnter:_,onMouseLeave:w,isInPeek:f});case"normalizedTitleWithIcon":return oe((0,a.jsx)(W().H,{handleHeaderMouseEnter:_,handleHeaderMouseLeave:w,headerControls:p,headerFocusStore:M,layoutModule:t,...G}));case"properties":return(0,a.jsx)(F().h,{context:i,disabled:l,store:A,layoutModule:t,customization:{neverShowPropertiesElsewhereInLayout:!0,disableContainerPadding:!0},wrapper:oe,showDefaultTitle:ie});case"inlinePageSections":return(0,a.jsx)(R().LG,{context:i,disabled:l,inlinePropertyIDs:h,store:A,wrapper:oe});case"expandedBacklinks":case"transcript":case"formTitle":case"formQuestion":case"formSubmit":case"placeholder":case"deleted_property":return null;case"discussions":return r===B().Rr.DraftPostInInlineComposer||r===B().Rr.DraftPostInFullPageComposer?null:r===B().Rr.PostInFullPageOrPeek?(0,a.jsx)(E().d,{store:A,wrapper:oe,showDefaultTitle:!1,discussionLocation:"post_top_level_discussion",pageDiscussionsRenderState:Z,presenceStore:$,pageVisitStore:X}):(0,a.jsx)(E().d,{store:A,wrapper:oe,showDefaultTitle:ie,discussionLocation:"page_discussion",pageDiscussionsRenderState:Z});case"bottomControls":return 0===u.length?null:oe((0,a.jsx)(v().s,{allowSelectionWithin:!0,children:(0,a.jsx)("div",{style:N,className:"notion-page-details-controls",onMouseEnter:b,onMouseLeave:C,children:u})}));case"editor":return(0,a.jsx)(K().p,{context:i,disabled:l,handlePlaceholderWrapClick:e=>m().YB(e,A,c),pageBlockStore:A,pathToBlockId:t.pathToBlockId,templatePickerMenuListStore:z,pageViewBlockAccessor:P,ref:U,editorWrapper:i===B().Rr.DraftPostInInlineComposer?void 0:oe});case"viewsMain":case"views":return(0,a.jsx)(q,{pageStore:A,disabled:l,viewsModule:t,wrapper:oe,templatePickerMenuListStore:z,editorContentContainerRef:U});case"relationsGroup":return(0,a.jsx)(Q().z,{pageStore:A,wrapper:oe,disabled:l,context:i,showDefaultTitle:ie})}}},291144:(e,t,o)=>{o.d(t,{E:()=>l});o(296540);var i=()=>o(401497),n=o(474848);const s=(0,o(340498).wt)("layoutFilled",{viewBox:"0 0 14 14",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.00056 1.59766H2.40058C1.95875 1.59766 1.60059 1.95583 1.60059 2.39765V11.5976C1.60059 12.0394 1.95875 12.3976 2.40058 12.3976H5.00056C5.44238 12.3976 5.80055 12.0394 5.80055 11.5976V2.39765C5.80055 1.95583 5.44238 1.59766 5.00056 1.59766ZM11.6006 8.19981H9.00059C8.55877 8.19981 8.2006 8.55798 8.2006 8.99981V11.5998C8.2006 12.0417 8.55877 12.3998 9.00059 12.3998H11.6006C12.0424 12.3998 12.4006 12.0417 12.4006 11.5998V8.99981C12.4006 8.55798 12.0424 8.19981 11.6006 8.19981ZM9.00054 1.59766H11.6006C12.0423 1.59766 12.4005 1.95583 12.4005 2.39765V4.99763C12.4005 5.43946 12.0423 5.79762 11.6006 5.79762H9.00054C8.55871 5.79762 8.20054 5.43946 8.20054 4.99763V2.39765C8.20054 1.95583 8.55871 1.59766 9.00054 1.59766Z"}),(0,n.jsx)("path",{d:"M2.39999 2.2H4.99998V1H2.39999V2.2ZM2.19999 2.39999C2.19999 2.28953 2.28954 2.2 2.39999 2.2V1C1.6268 1 1 1.62679 1 2.39999H2.19999ZM2.19999 11.5999V2.39999H1V11.5999H2.19999ZM2.39999 11.7999C2.28954 11.7999 2.19999 11.7104 2.19999 11.5999H1C1 12.3732 1.6268 12.9999 2.39999 12.9999V11.7999ZM4.99998 11.7999H2.39999V12.9999H4.99998V11.7999ZM5.19997 11.5999C5.19997 11.7104 5.11043 11.7999 4.99998 11.7999V12.9999C5.77317 12.9999 6.39997 12.3732 6.39997 11.5999H5.19997ZM5.19997 2.39999V11.5999H6.39997V2.39999H5.19997ZM4.99998 2.2C5.11043 2.2 5.19997 2.28953 5.19997 2.39999H6.39997C6.39997 1.62679 5.77317 1 4.99998 1V2.2ZM9.00001 8.80215H11.6V7.60216H9.00001V8.80215ZM8.80001 9.00215C8.80001 8.89169 8.88955 8.80215 9.00001 8.80215V7.60216C8.22681 7.60216 7.60001 8.22896 7.60001 9.00215H8.80001ZM8.80001 11.6021V9.00215H7.60001V11.6021H8.80001ZM9.00001 11.8022C8.88955 11.8022 8.80001 11.7126 8.80001 11.6021H7.60001C7.60001 12.3753 8.22681 13.0022 9.00001 13.0022V11.8022ZM11.6 11.8022H9.00001V13.0022H11.6V11.8022ZM11.8 11.6021C11.8 11.7126 11.7105 11.8022 11.6 11.8022V13.0022C12.3731 13.0022 13 12.3753 13 11.6021H11.8ZM11.8 9.00215V11.6021H13V9.00215H11.8ZM11.6 8.80215C11.7105 8.80215 11.8 8.89169 11.8 9.00215H13C13 8.22896 12.3731 7.60216 11.6 7.60216V8.80215ZM11.6 1H8.99995V2.2H11.6V1ZM12.9999 2.39999C12.9999 1.62679 12.3731 1 11.6 1V2.2C11.7104 2.2 11.7999 2.28953 11.7999 2.39999H12.9999ZM12.9999 4.99997V2.39999H11.7999V4.99997H12.9999ZM11.6 6.39996C12.3731 6.39996 12.9999 5.77317 12.9999 4.99997H11.7999C11.7999 5.11043 11.7104 5.19997 11.6 5.19997V6.39996ZM8.99995 6.39996H11.6V5.19997H8.99995V6.39996ZM7.59996 4.99997C7.59996 5.77317 8.22675 6.39996 8.99995 6.39996V5.19997C8.8895 5.19997 8.79996 5.11043 8.79996 4.99997H7.59996ZM7.59996 2.39999V4.99997H8.79996V2.39999H7.59996ZM8.99995 1C8.22675 1 7.59996 1.62679 7.59996 2.39999H8.79996C8.79996 2.28953 8.8895 2.2 8.99995 2.2V1Z"})]})});var r=()=>o(959013),a=()=>o(493823);function l(e){const{style:t,onClick:o}=e,l=(0,i().IS)((e=>({buttonIcon:{width:15,height:15,fill:"dark"===e.mode?"#5A5A5A":"#B9B9B7",color:"dark"===e.mode?"#5A5A5A":"#B9B9B7"}})),[]);return(0,n.jsx)(a().p,{style:t,iconStyle:l.buttonIcon,isLightGray:!0,onClick:o,icon:s,children:(0,n.jsx)(r().sA,{id:"pageViewBlock.customizeLayout",defaultMessage:"Customize layout"})},"customize-layout")}},350124:(e,t,o)=>{o.d(t,{s:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("reactionAdd",{viewBox:"0 0 20 20",svg:(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{d:"M12 14.3516C12 14.1875 12.0573 14.0482 12.1719 13.9336C12.2891 13.8164 12.4297 13.7578 12.5938 13.7578H14.7617V11.5938C14.7617 11.4297 14.819 11.2904 14.9336 11.1758C15.0482 11.0586 15.1875 11 15.3516 11C15.5156 11 15.6549 11.0586 15.7695 11.1758C15.8867 11.2904 15.9453 11.4297 15.9453 11.5938V13.7578H18.1133C18.2747 13.7578 18.4128 13.8164 18.5273 13.9336C18.6445 14.0482 18.7031 14.1875 18.7031 14.3516C18.7031 14.5156 18.6445 14.6562 18.5273 14.7734C18.4128 14.888 18.2747 14.9453 18.1133 14.9453H15.9453V17.1133C15.9453 17.2747 15.8867 17.4128 15.7695 17.5273C15.6549 17.6445 15.5156 17.7031 15.3516 17.7031C15.1875 17.7031 15.0482 17.6445 14.9336 17.5273C14.819 17.4128 14.7617 17.2747 14.7617 17.1133V14.9453H12.5938C12.4297 14.9453 12.2891 14.888 12.1719 14.7734C12.0573 14.6562 12 14.5156 12 14.3516Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0615 17.123C9.09538 17.123 8.1862 16.9385 7.33398 16.5693C6.48177 16.2048 5.72982 15.6966 5.07812 15.0449C4.43099 14.3932 3.92285 13.6413 3.55371 12.7891C3.18457 11.9368 3 11.0277 3 10.0615C3 9.09538 3.18457 8.1862 3.55371 7.33398C3.92285 6.48177 4.43099 5.7321 5.07812 5.08496C5.72982 4.43327 6.47949 3.92285 7.32715 3.55371C8.17936 3.18457 9.08854 3 10.0547 3C11.0254 3 11.9368 3.18457 12.7891 3.55371C13.6413 3.92285 14.3932 4.43327 15.0449 5.08496C15.6966 5.7321 16.207 6.48177 16.5762 7.33398C16.9453 8.1862 17.1299 9.09538 17.1299 10.0615C17.1299 10.6193 17.0684 11.1581 16.9453 11.678V11.5938C16.9453 11.1646 16.7813 10.7706 16.4767 10.4687C16.2657 10.2558 16.0099 10.1116 15.7285 10.0441C15.7263 9.26677 15.5805 8.53887 15.291 7.86035C14.9993 7.1722 14.5938 6.56836 14.0742 6.04883C13.5547 5.5293 12.9508 5.1237 12.2627 4.83203C11.5791 4.54036 10.8431 4.39453 10.0547 4.39453C9.27083 4.39453 8.53483 4.54036 7.84668 4.83203C7.16309 5.1237 6.5638 5.5293 6.04883 6.04883C5.53385 6.56836 5.13053 7.1722 4.83887 7.86035C4.5472 8.54395 4.40137 9.27767 4.40137 10.0615C4.40137 10.8499 4.5472 11.5859 4.83887 12.2695C5.13053 12.9531 5.53385 13.5547 6.04883 14.0742C6.56836 14.5938 7.16992 14.9993 7.85352 15.291C8.54167 15.5827 9.27767 15.7285 10.0615 15.7285C10.5739 15.7285 11.0641 15.6669 11.5321 15.5438C11.8272 15.8056 12.1958 15.9453 12.5938 15.9453H13.7617V16.0641C13.4535 16.2554 13.1293 16.4238 12.7891 16.5693C11.9368 16.9385 11.0277 17.123 10.0615 17.123ZM10.0547 13.4248C9.58073 13.4248 9.16146 13.3405 8.79688 13.1719C8.43685 12.9987 8.15658 12.8005 7.95605 12.5771C7.76009 12.3538 7.66211 12.167 7.66211 12.0166C7.66211 11.9346 7.69401 11.8776 7.75781 11.8457C7.82617 11.8092 7.89909 11.8092 7.97656 11.8457C8.22721 11.9779 8.51204 12.1055 8.83105 12.2285C9.15006 12.3516 9.55794 12.4131 10.0547 12.4131C10.5514 12.4131 10.9593 12.3516 11.2783 12.2285C11.6019 12.1055 11.8867 11.9779 12.1328 11.8457C12.2103 11.8092 12.2832 11.8092 12.3516 11.8457C12.4199 11.8776 12.4541 11.9346 12.4541 12.0166C12.4541 12.167 12.3538 12.3538 12.1533 12.5771C11.9528 12.8005 11.6725 12.9987 11.3125 13.1719C10.9525 13.3405 10.5332 13.4248 10.0547 13.4248ZM8.03809 9.44629C7.82389 9.44629 7.63704 9.3597 7.47754 9.18652C7.32259 9.01335 7.24512 8.79004 7.24512 8.5166C7.24512 8.24772 7.32259 8.02669 7.47754 7.85352C7.63704 7.67578 7.82389 7.58691 8.03809 7.58691C8.25228 7.58691 8.44141 7.67578 8.60547 7.85352C8.76953 8.02669 8.85156 8.24772 8.85156 8.5166C8.85156 8.79004 8.76953 9.01335 8.60547 9.18652C8.44141 9.3597 8.25228 9.44629 8.03809 9.44629ZM12.0713 9.44629C11.8571 9.44629 11.6702 9.3597 11.5107 9.18652C11.3558 9.01335 11.2783 8.79004 11.2783 8.5166C11.2783 8.24772 11.3558 8.02669 11.5107 7.85352C11.6702 7.67578 11.8571 7.58691 12.0713 7.58691C12.2855 7.58691 12.4746 7.67578 12.6387 7.85352C12.8027 8.02669 12.8848 8.24772 12.8848 8.5166C12.8848 8.79004 12.8027 9.01335 12.6387 9.18652C12.4746 9.3597 12.2855 9.44629 12.0713 9.44629Z"})]})})},388139:(e,t,o)=>{o.d(t,{F:()=>a});o(296540);var i=()=>o(401497),n=()=>o(959013),s=()=>o(331542),r=o(474848);function a(){const e=(0,i().IS)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,marginTop:"12vh"},message:{fontSize:14,marginTop:8,color:e.mediumTextColor}})),[]);return(0,r.jsxs)("div",{style:e.wrapper,children:[(0,r.jsx)(s().A,{}),(0,r.jsx)("div",{style:e.message,children:(0,r.jsx)(n().sA,{defaultMessage:"Importing…",id:"frame.importingMessage"})})]})}},431385:(e,t,o)=>{o.d(t,{y:()=>f});o(296540);var i=()=>o(484714),n=()=>o(56366),s=()=>o(401497),r=()=>o(576250),a=()=>o(959013),l=()=>o(493823),c=()=>o(406699),d=()=>o(928600),u=()=>o(900967),p=()=>o(722872),m=()=>o(449476),g=()=>o(137586),h=()=>o(551619),v=o(474848);function S(e){let{store:t}=e;return(0,v.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:h().NV,onClick:h().sx,children:(0,v.jsx)(g().A,{type:"page",store:t,headerText:(0,v.jsx)(a().sA,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}function f(e){const{pageStore:t,backlinksButtonPopupStore:o,numBacklinks:g,customization:h={}}=e,{buttonStyles:f,buttonIsGray:y,buttonIsLightGray:b}=h,C=(0,i().v3)(),_=(0,n().K8)((()=>void 0!==g?g:(0,u().J)(t,C).backlinksCount),[C,t,g],{debugName:"BacklinksControlButton.useComputedStore"}),k=(0,n().K8)((()=>m().A.getState().isOpen),[]),w=(0,s().IS)((e=>{const t=0===_&&k,o=e.text.quaternary;return{button:t?{color:o}:{},icon:t?{fill:o}:{}}}),[k,_]);return(0,v.jsx)(c().Ay,{buttonPopupStore:o,popupType:c().z7.Popup,renderOrigin:e=>(e=>{let{buttonPopupEvents:t={}}=e;return(0,v.jsx)(l().p,{icon:e=>(0,r().y)({...e,transform:"rotate(180deg)",...w.icon}),style:{...f,...w.button},isGray:y,isLightGray:b,...t,children:(0,v.jsx)(a().sA,{id:"pageViewBlock.show.backlinks",defaultMessage:"{numberOfBacklinks, plural, =0 {No backlinks} one {{numberOfBacklinks} backlink} other {{numberOfBacklinks} backlinks}}",values:{numberOfBacklinks:_}})})})({buttonPopupEvents:e}),render:()=>{const e={menuType:p().gu.Popup,width:500};return(0,v.jsx)(d().A,{...e,children:_>0?(0,v.jsx)(S,{store:t}):null})}},"backlinkspopup")}},483832:(e,t,o)=>{o.d(t,{v:()=>P});var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(778781),a=()=>o(519839),l=()=>o(774733),c=()=>o(187533),d=()=>o(41459),u=()=>o(155004),p=()=>o(21140),m=()=>o(68350),g=()=>o(199896),h=()=>o(891078),v=()=>o(402838),S=()=>o(205682),f=()=>o(171018),y=()=>o(548821),b=()=>o(77238),C=()=>o(795963),_=()=>o(255824),k=()=>o(671891),w=()=>o(517223),x=o(474848);function P(e){const{store:t,context:o,propertyId:P,disabled:M,wrapper:I,pageModule:A,stackPropertyLabelAndValue:T}=e,B=(0,h().bx)(t,M),j=(0,s().K8)((()=>t.getAssociatedCollectionStore()),[t]),V=(0,s().K8)((()=>null==j?void 0:j.getParentStore()),[j]),L=(0,s().K8)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();return e?{type:"visible",store:t,collectionStore:e,propertyId:P}:{type:"hidden"}}),[P,t]),D=(0,s().K8)((()=>null==j?void 0:j.getSchema()),[j]),R=(0,s().K8)((()=>null==j?void 0:j.getFormat()),[j]),H=(0,s().K8)((()=>{var e;return null===(e=L.collectionStore)||void 0===e?void 0:e.getSchema()[P]}),[L.collectionStore,P]),E=(0,s().K8)((()=>t.isNonEditableState()),[t]),K=(0,i.useMemo)((()=>new(f().YB)),[]),F=i.useRef(null),O=(0,s().K8)((()=>!(!j||!V||"block"!==V.table)&&(0,a().vo)({collectionStore:j,collectionViewBlockStore:V,checkNavigableAncestorLocked:!1})),[j,V]),W=o===y().Rr.PeekView,N=(0,r().gx)(A)?A:void 0,{isPropertyInPageDetails:z}=(0,w()._1)({store:t,propertyId:P}),{isMobile:G}=(0,n().v3)().device,Z=(0,v().s)(F,50),U=(0,k().l)(t),Y=(0,s().K8)((()=>{var e;return"hide"===(null==U||null===(e=U.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[U]),X=(0,_().g)();if(!H)return null;if("hidden"===L.type)return null;if(!j||!D||!R)return null;const q=!X&&"relation"!==H.type,$=!X,Q=(0,C().Ge)({isMobile:G,stackPropertyLabelAndValue:T,isPropertyInPageDetails:z}),J=(0,x.jsx)(l().L_,{store:t,propertyId:P,style:z||G?{flexShrink:0}:{position:"absolute",left:null!=Z&&Z.width?Z.width+4:void 0,top:0}}),ee=(0,x.jsxs)(x.Fragment,{children:[q&&(0,x.jsxs)(p().Ye,{alignItems:"center",justifyContent:z?void 0:"space-between",style:Q?{width:Q,flexShrink:0}:void 0,children:[(0,x.jsx)(m().I,{schema:D,format:R,hideIcon:Y,hideDragHandle:!0,property:P,blockStore:t,collectionStore:j,pagePropertiesStore:K,disabled:M,locked:E,canConfigureCollection:O,isInPeekRenderer:W,styleVariants:{width:(0,C().aG)({stackPropertyLabelAndValue:T}),height:T?{variant:"small"}:{variant:"medium"},size:"small",fontWeight:"medium"},layoutModule:N,hideDuplicatePropertyOption:!0}),$?J:null]}),(0,x.jsx)(g().A,{store:t,analyticsName:"page_property",children:(0,x.jsx)(c().m,{store:t,property:P,disabled:!B,locked:E,format:d().j.PropertyModule,tableWrap:!0,blockPropertyValueOverlayStore:W?b().A:S().A,collectionStore:L.collectionStore,isInPeekRenderer:W,propertyModule:N},P)})]});return I((0,x.jsx)(u().s,{allowSelectionWithin:!0,style:{position:"relative",width:"100%"},children:T?(0,x.jsx)(p().wt,{ref:F,children:ee}):(0,x.jsx)(p().Ye,{ref:F,style:{alignItems:"flex-start"},children:ee})}))}},538776:(e,t,o)=>{o.d(t,{l:()=>s});var i=()=>o(645873);const n=new(i().O2)("GenerateSocialMediaPreviewImageWrapper",(async()=>Promise.all([o.e(23806),o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(36192),o.e(44711),o.e(53321),o.e(16471),o.e(90825),o.e(37353),o.e(49889),o.e(97727),o.e(55373),o.e(29151),o.e(16908),o.e(62475),o.e(3151),o.e(98629),o.e(58550),o.e(22900),o.e(85128),o.e(95555),o.e(90409),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(8184),o.e(99353),o.e(52681),o.e(14518),o.e(17713),o.e(28271),o.e(17254),o.e(4422),o.e(59794),o.e(67435),o.e(75355),o.e(48315),o.e(47123),o.e(847),o.e(5887),o.e(70769),o.e(97965),o.e(17989),o.e(3965),o.e(38911),o.e(9034),o.e(52012),o.e(56985),o.e(50142),o.e(20838),o.e(21627),o.e(88860),o.e(83210),o.e(26090),o.e(82472),o.e(96345),o.e(10596),o.e(73285),o.e(75659),o.e(78846),o.e(47858),o.e(13324),o.e(51860),o.e(15724),o.e(81141),o.e(27274),o.e(99346),o.e(92448),o.e(65638),o.e(72915),o.e(28721),o.e(69689),o.e(23463),o.e(25426),o.e(6463),o.e(91056),o.e(26483),o.e(29333),o.e(5396),o.e(1440),o.e(34576),o.e(95810),o.e(89109),o.e(3560),o.e(77169),o.e(24071),o.e(68610),o.e(67064),o.e(49978),o.e(3720),o.e(47762),o.e(85475),o.e(11740),o.e(97996),o.e(5066),o.e(35299),o.e(68117),o.e(14267),o.e(33731),o.e(30016),o.e(14410),o.e(49471),o.e(31185),o.e(75681)]).then(o.bind(o,794831)))),s=(0,i()._h)(n,(e=>e.GenerateSocialMediaPreviewImageWrapper))},557198:(e,t,o)=>{o.d(t,{Ap:()=>d,Lx:()=>p,RR:()=>u,X1:()=>c});var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(534177),a=()=>o(334261),l=()=>o(449195);function c(e){const{format:t}=e;return{backlinksConfiguredToShowAboveTitle:(0,s().K8)((()=>{const e=(0,l().nl)(t.page_section_visibility);return"section_collapsed"===e||"always_show"===e}),[t.page_section_visibility])}}function d(e){const{store:t,format:o}=e,s=(0,n().v3)();return{backlinksVisibility:(0,l().nl)(o.page_section_visibility),updateBacklinksVisibility:(0,i.useCallback)((e=>{const i=(0,l().SB)(e);a().OD({environment:s,pageSection:"backlinks",visibility:i,store:t,format:o})}),[s,t,o])}}function u(e){const{pageStore:t,numBacklinks:o}=e,{store:i,format:n}=(0,s().K8)((()=>{const e=t.getAssociatedCollectionStore()??t,o=e.getFormat();return{store:e,format:o}}),[t]),{backlinksVisibility:a}=d({store:i,format:n});return 0===o?"never":"always_show"===a?"always":"section_collapsed"===a?"onHover":"section_hide"===a?"never":void(0,r().HB)(a)}function p(e){return!1}},577814:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(354520);var i=()=>o(449195),n=()=>o(478726),s=()=>o(299545);function r(e){var t;const{store:o,pageViewBlockStore:r,environment:a}=e,l=s().O3(o,{recursivelyLoadAllDiscussions:!1}).sort(((e,t)=>t.getReactions().length-e.getReactions().length)),c=l.length>0,d=0===l.length,u=0===l.filter((e=>e.getComments().length>0)).length,p="PageDetailsStore"in a&&a.PageDetailsStore.getToggleState({environment:a,type:"discussion",id:o.id}),m={type:"hidden"},g=o.getAssociatedCollectionStore()??o,h="section_hide"===(0,i().z5)(null===(t=g.getFormat())||void 0===t?void 0:t.page_section_visibility);if(!(null==r?void 0:r.state.forceDiscussionOpen)&&(!o.isInsideCollection()||!d)&&(d||c&&(!1===p||void 0===p&&h)))return m;if(h)return m;const v=o.pathIsDead(),S=a.currentUser.isLoggedIn();if(d&&v)return m;const f=S&&o.canComment()&&u&&!(0,n().sV)(o)&&(!(0,n().fc)(o)||(0,n().Cg)(o));return!f&&d?m:{type:"visible",showDiscussionInput:f,unresolvedDiscussionStores:l}}},601726:(e,t,o)=>{o.d(t,{E:()=>g,f:()=>m});o(296540);var i=()=>o(484714),n=()=>o(56366),s=()=>o(155004),r=()=>o(145214),a=()=>o(943647),l=()=>o(38337),c=()=>o(478726),d=()=>o(551619),u=()=>o(817942),p=o(474848);function m(e){const{store:t,isEditable:o,isInPeek:c,paddingX:m,pageCoverHeight:h,onMouseEnter:v,onMouseLeave:S}=e,f=(0,i().v3)(),y=(0,n().K8)((()=>t.isCollectionView()?"20vh":h),[h,t]),b=(0,n().K8)((()=>f.WindowSizeStore.getSafePaddingLeftCSS(m)),[f.WindowSizeStore,m]),C=(0,n().K8)((()=>f.WindowSizeStore.getSafePaddingRightCSS(m)),[f.WindowSizeStore,m]),_=(0,n().K8)((()=>f.WindowSizeStore.state.width),[f.WindowSizeStore]),k=(0,d().no)(t),w=(0,n().K8)((()=>g(t,f)),[f,t]);return(0,p.jsx)(u().Pb,{style:{isolation:"isolate"},children:(0,p.jsx)(r().A,{tag:s().s,animate:{translateX:k},allowSelectionWithin:!1,className:c?l().S6D:void 0,style:w,onMouseEnter:v,onMouseLeave:S,children:(0,p.jsx)(a().A,{height:y,store:t,disabled:!o,paddingLeft:b,paddingRight:C,proxyWidth:_})})})}function g(e,t){const o=(0,c().NR)(e,t);return o.zIndex=2,o}},620137:(e,t,o)=>{o.d(t,{e:()=>s});var i=()=>o(645873);const n=new(i().O2)("FormBlock",(async()=>await Promise.all([o.e(23806),o.e(44711),o.e(53321),o.e(55373),o.e(63077),o.e(74562),o.e(95794),o.e(46414),o.e(28271),o.e(17254),o.e(59794),o.e(5396),o.e(47762),o.e(65688)]).then(o.bind(o,504514)))),s=(0,i()._h)(n,(e=>e.FormBlock))},642054:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("addPage",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},660197:(e,t,o)=>{o.d(t,{H:()=>L});var i=o(296540),n=()=>o(484714),s=()=>o(819121),r=()=>o(56366),a=()=>o(861017),l=()=>o(919709),c=()=>o(650829),d=()=>o(155004),u=()=>o(346436),p=()=>o(556048),m=()=>o(38337),g=()=>o(753199),h=()=>o(478726),v=()=>o(747100),S=()=>o(836251),f=()=>o(578872),y=()=>o(337567),b=()=>o(548821),C=()=>o(712505),_=()=>o(517223),k=()=>o(551619),w=()=>o(589647),x=()=>o(918487),P=()=>o(9768),M=()=>o(817942),I=o(474848);function A(e){let{onMouseEnter:t,onMouseLeave:o,headerControls:i}=e;return(0,I.jsx)("div",{onMouseEnter:t,onMouseLeave:o,children:i})}var T=()=>o(603616),B=()=>o(781141),j=()=>o(441301);const V=0;function L(e){const{store:t,hasCover:o,headerFocusStore:L,headerControls:D,isEditable:R,openMenuOnMount:H,openMenuOnMountCallback:E,pageViewBlockStore:K,discussionInputStore:F,handleHeaderMouseEnter:O,handleHeaderMouseLeave:W,hideTitleIfEmpty:N,isInPageLayoutModuleEditor:z=!1,layoutModule:G,disabled:Z,...U}=e,Y=(0,n().v3)(),{WindowSizeStore:X}=Y,{isMobile:q,isAndroid:$}=(0,n().Y0)(),[Q,J]=(0,i.useState)((()=>!!$));(0,i.useEffect)((()=>{(async()=>{if((0,S().w6)(Y)){const e=Y.RouterStore.getState();if((0,a().bh)(e.route)){await t.load();const e=(0,f().GN)(t),o=null==e?void 0:e.getSiteStore();await(null==o?void 0:o.load());const i=null==o?void 0:o.getSettings(),n=null==i?void 0:i.embedSettings;return void J(Boolean(!(null!=n&&n.hideTitle)))}}J(!0)})()}),[Y,t]);const ee=(0,r().K8)((()=>(0,v().cq)(t)),[t]),te=(0,r().K8)((()=>ee&&(C().default.isSidePeekOpen()||C().default.isSidePeekClosingStore.state)),[ee]),{context:oe}=U,ie=b().m8.has(oe),ne=q&&!o,se=!q&&U.isInSidePeek||ie,re=(0,r().K8)((()=>t.isExternalObjectInstancePageBlockStore()&&t.hasError()?t:null),[t]),ae=(0,r().K8)((()=>t.canEdit()),[t]),le=(0,r().K8)((()=>X.getSafePaddingLeftCSS(V)),[X]),ce=(0,r().K8)((()=>X.getSafePaddingRightCSS(V)),[X]),de=(0,r().K8)((()=>(0,h().NR)(t,Y)),[t,Y]),ue=(0,k().Sm)(t),pe=(0,i.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,s().p)(t)&&L.setState(!0)}),[L]),me=(0,i.useCallback)((()=>{L.setState(!1)}),[L]),ge=(0,I.jsx)("div",{className:ee?m().S6D:void 0,style:{display:"flow-root",pointerEvents:"auto"},children:(0,I.jsx)(T().A,{store:t,isEditable:R,hasCover:o,isInSidePeek:U.isInSidePeek,openMenuOnMount:H,openMenuOnMountCallback:E,isInPageLayoutModuleEditor:z,isInlinePostTitle:ie})}),he=(0,r().K8)((()=>{var e;return(0,l().w9s)(null===(e=t.getTitleStore())||void 0===e?void 0:e.getValue())}),[t]),ve=(0,I.jsx)(j().s,{store:t,disabled:Z,hideText:N&&he||!Q,...U}),Se=(0,r().K8)((()=>t.getAssociatedCollectionStore()),[t]),fe=(0,r().K8)((()=>!(!Se||!G)&&(0,x().v)({collectionStore:Se,module:G,isMobile:q})),[Se,q,G]),ye=(0,r().K8)((()=>null==Se?void 0:Se.getSchema()),[Se]),be=ye&&G?(0,_().LD)({collectionSchema:ye,module:G}):void 0,Ce=(0,i.useMemo)((()=>{const e={...Boolean(null==be?void 0:be.length)&&(q?{paddingBottom:20}:{paddingBottom:P().Lb})};return(0,I.jsxs)(I.Fragment,{children:[Se&&fe&&(0,I.jsx)("div",{style:e,children:(0,I.jsx)(w().L,{collectionStore:Se,pageViewBlockContext:oe})}),Boolean(null==be?void 0:be.length)&&(0,I.jsx)("div",{style:{paddingTop:q&&!fe?P().Lb:void 0,marginLeft:-2},children:(0,I.jsx)(B().h,{context:oe,disabled:Z,store:t,variant:"pinned",layoutModule:G,propertyIds:be,wrapper:e=>(0,I.jsx)(M().vV,{children:e}),customization:{disableContainerPadding:!0,disableLastRowBottomPadding:!0}})})]})}),[Se,q,G,oe,be,Z,fe,t]),_e=(0,r().K8)((()=>(0,y().Fm)(t)),[t]);return te?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(d().s,{allowSelectionWithin:!0,children:[(0,I.jsx)(A,{onMouseEnter:O,onMouseLeave:W,headerControls:D}),Q&&ge,ve,ue&&(0,I.jsx)(p().GL,{store:t})]}),Ce]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{style:de,onMouseEnter:O,onMouseLeave:W,children:(0,I.jsxs)("div",{style:{maxWidth:"100%",paddingLeft:le,width:"100%"},onClick:async e=>{if(_e){const e=await c().assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(Y)}(0,g().SQ)({event:e,context:g().y$.PageTitleClick})},children:[(0,I.jsxs)(d().s,{onFocus:pe,onBlur:me,allowSelectionWithin:!1,style:{pointerEvents:"none"},children:[ne&&D,Q&&!se&&ge,!ne&&D]}),(0,I.jsx)("div",{style:{paddingRight:ce},children:se?(0,I.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[Q&&ge,ve,ue&&(0,I.jsx)(p().GL,{store:t})]}):ve}),ue&&(0,I.jsx)(p().GL,{store:t}),re?(0,I.jsx)(u().A,{store:re,canEdit:ae}):null]})}),Ce]})}},661344:(e,t,o)=>{o.d(t,{LG:()=>g});var i=o(296540),n=()=>o(56366),s=()=>o(155004),r=()=>o(764891),a=()=>o(478726),l=()=>o(205682),c=()=>o(171018),d=()=>o(548821),u=()=>o(77238),p=o(474848);function m(e){const{state:t,store:o,disabled:i,blockPropertyValueOverlayStore:s}=e,a=(0,n().K8)((()=>o.isNonEditableState()),[o]);return(0,p.jsx)(r().A,{propertyIds:t.sectionPropertyIds,store:o,collectionStore:t.collectionStore,format:t.format,disabled:i,locked:a,blockPropertyValueOverlayStore:s})}function g(e){const{store:t,context:o,disabled:r,inlinePropertyIDs:g,wrapper:h}=e,v=(0,n().K8)((()=>t.getAssociatedCollectionStore()),[t]),S=(0,i.useMemo)((()=>new(c().YB)),[]),f=function(e){const{collectionStore:t,format:o,sectionPropertyIds:i}=e;if(!(t&&o&&i&&i.length))return{type:"hidden"};return{type:"visible",collectionStore:t,format:o,sectionPropertyIds:i}}({collectionStore:v,format:(0,n().K8)((()=>(0,a().gV)(t)),[t]),sectionPropertyIds:g});if("hidden"===f.type)return null;const y=o===d().Rr.PeekView;return h((0,p.jsx)(s().s,{allowSelectionWithin:!0,children:(0,p.jsx)(m,{topBorder:!0,state:f,store:t,disabled:r,blockPropertyValueOverlayStore:y?u().A:l().A,isInPeekRenderer:y,pagePropertiesStore:S})}))}},729380:(e,t,o)=>{o.d(t,{u:()=>n});class i extends(()=>o(757695))().default{getInitialState(){return{discussionsHeight:0}}setDiscussionsHeight(e){this.setState({...this.state,discussionsHeight:e})}resetHeights(){this.setState({discussionsHeight:0})}getTotalHeight(){return this.state.discussionsHeight}}const n=new i},729923:(e,t,o)=>{o.d(t,{p:()=>G});var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(401497),a=()=>o(155004),l=()=>o(478726),c=()=>o(835066),d=o(474848);function u(e){const{pageBlockStore:t,isVisible:i,context:r}=e,u=(0,n().v3)(),p=(0,s().K8)((()=>(0,l().Ck)(t,r,u)),[t,r,u]);return(0,d.jsx)(a().s,{allowSelectionWithin:!0,style:{width:p&&i?c().Qb:0},children:(0,d.jsx)(o(774733).UY,{...e})})}var p=()=>o(299772),m=()=>o(584262),g=()=>o(799954),h=()=>o(959013),v=()=>o(160568),S=()=>o(557281),f=()=>o(435009),y=()=>o(33301),b=()=>o(317909),C=()=>o(519839),_=()=>o(484792),k=()=>o(601734),w=()=>o(68465),x=()=>o(492414),P=()=>o(753199),M=()=>o(351360),I=()=>o(227440),A=()=>o(508496),T=()=>o(411671),B=()=>o(611371),j=()=>o(704152),V=(o(581454),()=>o(710149));function L(){const e=(0,r().IS)((()=>({menu:{display:"flex",alignItems:"center",marginBottom:5},icon:{marginLeft:5,width:26,height:26,marginRight:10,borderRadius:4},menuItem:{height:14,marginTop:8,marginBottom:8,width:"25%",borderRadius:8}})),[]);return(0,d.jsx)(d.Fragment,{children:[...Array(6)].map(((t,o)=>(0,d.jsxs)("div",{style:e.menu,children:[(0,d.jsx)(V().A,{style:e.icon}),(0,d.jsx)(V().A,{style:e.menuItem})]},o)))})}const D={width:"100%"};const R=function(e){let{menuListStore:t,store:l}=e;(0,o(852507).l)((()=>{t.reset()}));const c=(0,n().WS)(),u=(0,s().K8)((()=>I().A.state.online),[]),p=(0,s().K8)((()=>l.isPost()),[l]),m=(0,r().IS)((e=>({wrapStyle:{width:"100%",display:"flex",flexDirection:"column",marginBottom:p?void 0:"14vh"}})),[p]),g=(0,i.useCallback)((()=>!c&&(0,d.jsx)(L,{})),[c]);return(0,d.jsx)(a().s,{style:D,allowSelectionWithin:!1,children:(0,d.jsx)(o(109488).A,{capture:!0,render:e=>(0,o(569912).A)((o=>(0,d.jsxs)("div",{...e,...o,style:m.wrapStyle,children:[(0,d.jsx)(E,{store:l}),u&&(0,d.jsx)(k().t,{menuListStore:t,store:l,renderLoading:g})]})))})})};function H(e,t,o){const{mainEditorCurrentBlockStore:i}=M().default.state;!function(e,t,o){o?o(e):f().oo({environment:t,url:e})}(i?(0,x().Ay)({store:i,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:m().y8.LinkInPage}):(0,x().Ay)({store:e,fullyQualified:!1,pageVisitSource:m().y8.LinkInPage}),t,o)}function E(e){let{store:t}=e;const o=(0,n().v3)(),a=(0,n().Y0)(),l=(0,i.useContext)(_().n),c=(0,s().K8)((()=>T().A.getMode(o,t)),[o,t]),u=(0,i.useCallback)((e=>function(e,t,o,i){const n=o.getAssociatedCollectionStore();if(n&&(0,B().EF)(t)){const{performResult:e}=b().createAndCommit({userAction:"TemplatePicker.newPage",environment:t,canUndo:!0,perform:e=>S().bI({environment:t,collectionStore:n,transaction:e})});e&&H(e,t,i),v().er(t,{collection_id:n.id})}}(0,o,t,l)),[o,t,l]),p=(0,s().K8)((()=>t.isTemplate()),[t]),m=(0,s().K8)((()=>I().A.state.online),[]),f=(0,s().K8)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(t)),[t]),k=(0,s().K8)((()=>function(e){const t=e.getAssociatedCollectionStore(),o=t?t.getTemplatePageStores():void 0;return o&&o.length>0}(t)),[t]),x=f&&!k,M=f&&k,V=(0,s().K8)((()=>!function(e){const t=e.getAssociatedCollectionStore(),o=t&&t.getParentBlockStore();return C().vo({collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:!0})}(t)),[t]),L=(0,s().K8)((()=>(0,w().ZE)(c)),[c]),R=(0,s().K8)((()=>t.isPost()),[t]),E=(0,r().IS)((e=>({placeholder:{...g().nE,color:e.lightTextColor,paddingTop:R?3:5,paddingBottom:R?3:24,paddingLeft:R?2:void 0,paddingRight:R?2:void 0}})),[R]),K=(0,s().K8)((()=>a.isMobile&&!a.isTablet&&a.isIOS&&"on"===A().default.getEligibleGroup({experimentId:"mobile_lightweight_editor_prompt",defaultGroup:"control"})),[a.isMobile,a.isIOS,a.isTablet]);let F=null;return m?p?F=(0,d.jsx)(h().sA,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page.} other {Press Enter to continue with an empty page.}}",id:"templatePicker.isTemplate.emptyPagePrompt",values:{isMobileDevice:a.isMobile}}):a.isMobile?M?F=a.isTablet?(0,d.jsx)(h().sA,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,d.jsx)(h().sA,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"}):x?F=(0,d.jsx)(h().sA,{defaultMessage:"{isParentLocked, select, true {Tap here to continue with an empty page} other {Tap here to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.mobileCollectionEmptyPage.prompt",values:{isParentLocked:V,templatebutton:e=>(0,d.jsx)(j().A,{style:{display:"inline-block",textDecoration:"underline"},onClick:u,children:e})}}):K||(F=a.isTablet?(0,d.jsx)(h().sA,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,d.jsx)(h().sA,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"})):x?F=(0,d.jsx)(h().sA,{defaultMessage:"{isParentLocked, select, true {Press Enter to continue with an empty page} other {Press Enter to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.webCollectionEmptyPage.prompt",values:{isParentLocked:V,templatebutton:e=>(0,d.jsx)(j().A,{style:{display:"inline-block",textDecoration:"underline"},onClick:u,children:e})}}):L&&!f||(F=(0,d.jsx)(h().sA,{defaultMessage:"Press Enter to continue with an empty page, or pick a template (↑↓ to select)",id:"templatePicker.webEmptyPage.withTemplates.prompt"})):F=(0,d.jsx)(h().sA,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page. Please go online to use templates.} other {Press Enter to continue with an empty page. Please go online to use templates.}}",id:"templatePicker.deviceOffline.goOnlinePrompt",values:{isMobileDevice:a.isMobile}}),F?(0,d.jsx)("div",{style:D,children:(0,d.jsx)("div",{style:E.placeholder,onClick:e=>function(e,t,o){(0,P().SQ)({event:e,context:P().y$.EditorClick,callback:()=>{(0,B().EF)(o)&&(b().createAndCommit({userAction:"TemplatePicker.handleEmptyPageContinueClick",environment:o,canUndo:!0,perform:e=>{y().n({environment:o,store:t,transaction:e})}}),v().ki(o,{is_keyboard:!1,from:"template_picker",template_type:"empty_page"}))}})}(e,t,o),children:F})}):null}var K=()=>o(622237),F=()=>o(548821),O=()=>o(712505),W=()=>o(551619),N=()=>o(817942);const z=(0,i.forwardRef)((function(e,t){let{context:a,disabled:c,onClick:u,store:m,templatePickerMenuListStore:g}=e;const h=(0,n().v3)(),{device:v}=h,S=(0,W().Hy)(m),f=(0,o(877051).V)(),y=function(e,t){const o=(0,W().O9)(e,t),i=(0,W().Rg)(e,t);if(o)return"horizontal";if(i)return"legacy";return"none"}(m,a),b=(0,W().f7)(m),C=(0,W().Sm)(m),_=(0,s().K8)((()=>!!c||(!!m.isNonEditableState()||!!C)),[m,c,C]),w=(0,s().K8)((()=>m.getFormat()),[m]),x=(0,s().K8)((()=>(0,l().In)(m)),[m]),P=(0,l().L5)(a),M=(0,s().K8)((()=>m.isPost()),[m]),I=(0,o(891078).bx)(m,c),A=(0,n().WS)(),T=(0,s().K8)((()=>m.isCollectionView()),[m]),B=(0,s().K8)((()=>m.hasCover()),[m]),j=(0,s().K8)((()=>{const e=(0,o(747100).cq)(m)&&!O().default.isSidePeekOpen()&&!O().default.isSidePeekClosingStore.state?`100vh - ${O().PeekModeOuterPadding}px*2`:"100vh",t=(0,o(175947).ek)(h.device.isElectronMac),i=o(729380).u.getTotalHeight();return`calc(${e} - ${t}px - 66px - 48px - 140px + ${i<250?0:i}px)`}),[h.device.isElectronMac,m]),V=(0,r().IS)((e=>{const t=w.page_font||p().zs,i=p().DX[t],n=p().JK[t]||1.5;let s;if(v.isMobile)s=v.isAndroid?p().By:p().y_;else if(a===F().Rr.DraftPostInInlineComposer)s=14;else{s=w.page_small_text?p().Y4[t]||p().dp:p().T1[t]||p().uD}let r={},c=a===F().Rr.Presentation?{}:{paddingTop:8};const d=(0,l().L5)(a);if(!(x&&d&&"none"===y&&!S)){if(x){const e=29;c={...c,paddingBottom:a===F().Rr.DraftPostInInlineComposer?e:M?0:"15vh"}}else c={...c,paddingBottom:0};r={...c,paddingLeft:0,paddingRight:0}}let u={};d&&!M&&(u={minHeight:240,zIndex:1});let m={};a===F().Rr.InAppTemplatePreview&&(m={margin:"0 auto"});let g={};if(A&&!T&&I&&!B){const e=132,t=(0,p().nu)(a,h);g={minHeight:`calc(100vh - ${o(628182).s1+e-t}px)`}}return{content:{flexShrink:0,flexGrow:1,maxWidth:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",fontFamily:p().AP[t],fontSize:s,letterSpacing:i?`${i}em`:void 0,lineHeight:n,width:"100%",zIndex:4,...r,...u,...m,...g},emptyDroppableStyle:{width:"100%"},templatePicker:{position:"absolute",top:j,width:"100%",pointerEvents:"none"}}}),[B,T,A,x,I,a,v.isAndroid,v.isMobile,h,w.page_font,w.page_small_text,S,y,j,M]),[L,D]=function(e,t){const n=(0,i.useRef)(null),r=(0,o(93583).A)(n,e),a=(0,o(828634).wY)(n),l=(0,i.useCallback)((e=>{K().A.setWidth(e.width,t)}),[t]);(0,i.useEffect)((()=>{a&&l(a)}),[l,a]);const c=(0,s().K8)((()=>K().A.getWidth(t)),[t]);return[r,c]}(t,P);return(0,d.jsxs)(o(11048).A,{name:"PageEditor",children:[(0,d.jsxs)("div",{className:o(38337).pXT,onClick:u,style:V.content,ref:L,children:[!b&&(0,d.jsx)(o(99945).A,{store:m.getContentStore(),emptyDroppableStyle:V.emptyDroppableStyle,disabled:_}),S&&(0,d.jsx)(o(331542).A,{}),g&&"legacy"===y&&(0,d.jsx)(R,{store:m,menuListStore:g})]}),"horizontal"===y&&!f&&(0,d.jsx)("div",{style:V.templatePicker,children:(0,d.jsx)(k().Nv,{store:m,context:a,menuListStore:g,editorWidth:D})})]})}));const G=(0,i.forwardRef)((function(e,t){const{context:r,disabled:a,handlePlaceholderWrapClick:p,pageBlockStore:m,pathToBlockId:g,templatePickerMenuListStore:h,pageViewBlockAccessor:v,editorWrapper:S}=e,f=(0,n().v3)(),y=(0,s().K8)((()=>g?(0,o(21140).Dk)({environment:f,pageBlockStore:m,pathToBlockId:g}):m),[f,m,g]),b=(0,s().K8)((()=>(0,c().dC)(f,m)),[f,m]),C=(0,s().K8)((()=>(0,l().In)(m)),[m]),_=(0,s().K8)((()=>(0,o(337567).Fm)(m)),[m]),k=r===F().Rr.DraftPostInInlineComposer,w=f.device.isMobile||k?0:5,x=(0,s().K8)((()=>o(610640).A.state.isHovered),[]),P=S||(e=>(0,d.jsx)(N().vV,{style:{...k?{minHeight:void 0,pointerEvents:"auto"}:{minHeight:170},paddingTop:w},children:e})),M=(0,i.useMemo)((()=>_?async()=>{const e=await o(650829).assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(f)}:C?p:void 0),[p,C,_,f]);return(0,d.jsxs)(d.Fragment,{children:[P((0,d.jsx)(z,{store:y,disabled:a,context:r,templatePickerMenuListStore:h,onClick:M,ref:t})),b&&v?(0,d.jsx)(N().kZ,{children:(0,d.jsx)(u,{pageBlockStore:m,isVisible:!x,context:r,pageViewBlockAccessor:v,isCollapsedAnchor:!0})}):null]})}))},736316:(e,t,o)=>{o.d(t,{f:()=>n});var i=()=>o(449412);function n(e){const{name:t,startTime:o,endTime:n}=e;try{performance.measure(t,{start:o,end:n})}catch(s){i().Fg(s,{extra:{name:t,startTime:o,endTime:n}})}}},764891:(e,t,o)=>{o.d(t,{A:()=>m});o(898992),o(354520),o(672577),o(581454);var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(496603),a=()=>o(896628),l=()=>o(317909),c=()=>o(9768),d=()=>o(439264),u=o(474848);function p(e){const{store:t,collectionStore:i,disabled:c,locked:p,propertyIds:m,blockPropertyValueOverlayStore:h,format:v,type:S}=e,f=(0,n().v3)(),y=(0,o(175116).Ks)(),b=(0,s().K8)((()=>null==y?void 0:y.permissionScopesStore.state),[y]);return y?"minimal"===S?(0,u.jsx)(u.Fragment,{children:m.map(((e,o)=>(0,u.jsx)(g,{format:v,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:S,isLast:o===m.length-1},e)))}):c||p||null==b||!b.canConfigureCollection?(0,u.jsx)("div",{style:d().Bb,children:m.map(((e,o)=>(0,u.jsx)(g,{format:v,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:S,isLast:o===m.length-1},e)))}):(0,u.jsx)(d().Ay,{direction:"vertical",keys:m,renderKey:(e,o)=>(0,u.jsx)(g,{format:v,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:S,isLast:o===m.length-1},e),onDrop:e=>function(e,t,o,i){const n=o.collection_page_sections||[],s=r().oE(e.map((e=>n.find((t=>t.section===e))))),c=n.filter((t=>!e.includes(t.section))),d=[...s,...c];l().createAndCommit({userAction:"RelationPropertyPageSections.handleReorder",environment:i,canUndo:!0,perform:e=>{a().zA({stores:[t],update:{collection_page_sections:d},transaction:e})}})}(e,i,v,f)}):null}const m=i.memo(p,o(821062).A),g=i.memo((function(e){let t,{propertyId:i,format:r,locked:a,collectionStore:l,store:d,disabled:p,blockPropertyValueOverlayStore:m,visibility:g,isLast:h}=e;if(g)t=g;else{const e=r.collection_page_sections??[];t=e.filter((e=>e.section===i)).map((e=>e.visibility))[0]}const v=(0,n().Y0)(),[S,f]=(0,o(997583).z)(),y=(0,o(255824).g)(),b="inline"===t,C=!h&&"minimal"!==t,_=(0,s().K8)((()=>d.canEdit()),[d]),k=(0,o(401497).IS)((()=>{const e={position:"absolute",visibility:f?"visible":"hidden",left:f?f+4:void 0,top:0};return{discussionIndicator:v.isMobile?{flexShrink:0}:b?e:{},wrapperDiv:{position:"relative",width:"minimal"!==t?"100%":void 0,...C?{marginBottom:c().YE+c().Lb+(_?-4:0)}:{}},selectable:b?{}:{display:"flex",alignItems:"center"}}}),[f,v.isMobile,C,b,t,_]),w=(0,u.jsx)(o(774733).L_,{store:d,propertyId:i,style:k.discussionIndicator});return(0,u.jsx)("div",{className:"minimal"!==t?"layout-content":void 0,style:k.wrapperDiv,ref:S,children:(0,u.jsxs)(o(199896).A,{store:d,analyticsName:"page_property",style:k.selectable,children:[(0,u.jsx)(o(187533).m,{store:d,property:i,disabled:p,locked:a,format:o(41459).j.PropertyModule,tableWrap:!1,blockPropertyValueOverlayStore:m,collectionStore:l,propertyVisibility:t},i),y?null:w]})})}))},766081:(e,t,o)=>{o.d(t,{A:()=>g,R:()=>m});o(296540);var i=()=>o(484714),n=()=>o(56366),s=()=>o(401497),r=()=>o(868840),a=()=>o(175947),l=()=>o(959013),c=()=>o(710149),d=()=>o(299772),u=()=>o(62856),p=o(474848);function m(e){let{store:t,peekMode:o,forceShowIcon:a}=e;const l=(0,i().v3)(),u=(0,n().K8)((()=>t.hasCover()),[t]),m=(0,n().K8)((()=>t.hasIcon()),[t])||a,g=(0,n().K8)((()=>t.isCollectionView()),[t]),h=(0,n().K8)((()=>t.isFullWidth()),[t]),v=(0,n().K8)((()=>l.device.isMobile&&!l.device.isTablet),[l]),S=(0,n().K8)((()=>o===r().O?"20vh":(0,d().Qs)(l)),[l,o]),f=(0,s().IS)((()=>{const e=v?24:o===r().A?48:96,t=(()=>{switch(!0){case v:return 32;case m:return 96;case o===r().O&&!m:return 54;case!m:return 102}})(),i=(()=>{switch(!0){case v&&u&&m:return 22;case v&&u&&!m:return 54;case v&&!u&&m:return 56;case v&&!u&&!m:return 4;case!v&&u&&m:return 50;case!v&&u&&!m:return 58;case!v&&!u&&m:return 92;case!v&&!u&&!m:return 20}})();return{collectionCoverPhoto:{width:"100%",height:"20vh"},collectionTitleContainer:{display:"flex",alignItems:"center",paddingLeft:e,paddingRight:e,width:"100%",paddingTop:(()=>{switch(!0){case v&&u:return 50;case v&&!u:return 78;case!v&&u:return 48;case!v&&!u:return 36}})()},collectionIcon:{flexGrow:0,flexShrink:0,width:36,height:36,borderRadius:6,marginRight:10,marginLeft:3},collectionTitle:{height:v?24:30,width:600,marginTop:v?6:3,borderRadius:15},pageCoverPhoto:{width:"100%",height:S},pageCoverPadding:{width:"100%",height:t},pageIconContainer:{maxWidth:"100%",boxSizing:"border-box",paddingLeft:e,paddingRight:e,width:h?"100%":900,height:36},pageIcon:{position:"relative",top:u?-42:0,width:78,height:78,marginLeft:2,borderRadius:16},pageTitleContainer:{display:"flex",boxSizing:"border-box",paddingLeft:e,paddingRight:e,width:h?"100%":900,maxWidth:"100%",paddingTop:i},pageTitle:{marginTop:v?3:0,height:v?24:30,width:600,borderRadius:15}}}),[h,u,m,S,v,o]);return g||o===r().A?(0,p.jsxs)(p.Fragment,{children:[u&&(0,p.jsx)(c().A,{style:f.collectionCoverPhoto}),(0,p.jsxs)("div",{style:f.collectionTitleContainer,children:[m&&(0,p.jsx)(c().A,{emphasized:!0,style:f.collectionIcon}),(0,p.jsx)(c().A,{style:f.collectionTitle})]})]}):(0,p.jsxs)(p.Fragment,{children:[u?(0,p.jsx)(c().A,{style:f.pageCoverPhoto}):(0,p.jsx)("div",{style:f.pageCoverPadding}),m&&(0,p.jsx)("div",{style:f.pageIconContainer,children:(0,p.jsx)(c().A,{emphasized:!0,style:f.pageIcon})}),(0,p.jsx)("div",{style:f.pageTitleContainer,children:(0,p.jsx)(c().A,{style:f.pageTitle})})]})}function g(e){let{isVisible:t,peekMode:o,store:c}=e;const{WindowSizeStore:d}=(0,i().v3)(),g=(0,i().Y0)(),h=(0,l().tz)(),v=g.isPhone,S=g.isMobileNative,f=a().ek(g.isElectronMac),y=(0,n().K8)((()=>{const e=o===r().O||o===r().A||v?f:0;return{top:d.getSafePaddingTopCSS(e),bottom:d.getSafePaddingBottomCSS(0),left:d.getSafePaddingLeftCSS(0),right:d.getSafePaddingRightCSS(0)}}),[d,o,v,f]),b=(0,s().IS)((()=>({root:{position:"absolute",...y,display:"flex",flexDirection:"column",alignItems:"center",pointerEvents:"none"}})),[y]);return(0,u().A)(t,S?0:10,0)?(0,p.jsx)("div",{role:"progressbar","aria-valuetext":h.formatMessage({id:"frameLoadingState.loading",defaultMessage:"Loading..."}),style:b.root,children:(0,p.jsx)(m,{store:c,peekMode:o})},"shimmer"):null}},790324:(e,t,o)=>{o.d(t,{A:()=>d});var i=o(296540),n=()=>o(484714),s=()=>o(642054),r=()=>o(896628),a=()=>o(317909),l=()=>o(493823),c=o(474848);function d(e){const{store:t,afterOnClick:o,style:d,label:u}=e,p=(0,n().v3)(),m=(0,i.useCallback)((()=>{a().createAndCommit({userAction:"PageAddIconButton.handleAddRandomIconClick",environment:p,canUndo:!0,perform:e=>{r().vc({store:t,transaction:e})}}),o()}),[p,o,t]);return(0,c.jsx)(l().p,{style:d,isLightGray:!0,onClick:m,icon:s().A,children:u},"add-icon")}},823082:(e,t,o)=>{o.d(t,{H:()=>s});var i=()=>o(778781),n=()=>o(534177);function s(e){const t=e.type;return"properties"===t?"module__properties_"+("pinned"===e.variant?"minimal":"expanded"):"normalizedTitleWithIcon"===t||"titleWithIcon"===t?"module__title_with_icon":"cover"===t?"cover__module":"views"===t?"module__views":"editor"===t?"module__editor":"formTitle"===t?"module__formTitle":"viewsMain"===t?"module__views_main":"transcript"===t?"module__transcript":"formSubmit"===t?"module__form_submit":"discussions"===t?"module__discussion":"placeholder"===t?"module__placeholder":"formQuestion"===t?"module__formQuestion":"bottomControls"===t?"module__bottomControls":"relationsGroup"===t?"module__relationsGroup":"deleted_property"===t?"module__deleted_property":"expandedBacklinks"===t?"module__expandedBacklinks":"inlinePageSections"===t?"module__inlinePageSections":"property"===t?`module__property_${e.id}`:"collectionView"===t?"module__collectionView":"collectionViewV2"===t?"module__collectionViewV2":(0,i().CA)(t)?`module__property_${e.id}`:void(0,n().HB)(t)}},864260:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=t:delete o[e],this.emit()}}const n=new i},892008:(e,t,o)=>{o.d(t,{Bs:()=>d,L:()=>c,Ob:()=>l});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949);var i=o(296540),n=()=>o(852507),s=()=>o(118884),r=()=>o(994310),a=()=>o(347320);const l=new class{constructor(){this.currentPageId=void 0,this._localStorage=void 0}startCachingViewIds(e){this.currentPageId=e;this.entryForPage(e).v=[]}stopCachingViewIds(){const e=this.currentPageId;if(this.currentPageId=void 0,e){0===this.entryForPage(e).v.length&&delete this.localStorage[e]}}registerView(e,t){if(this.currentPageId!==e)return;const o=this.entryForPage(e);o.v=[...new Set([...o.v,t])],o.t=Date.now(),this.writeToLocalStorage()}unregisterView(e,t){const o=this.localStorage[e];o&&(o.v=o.v.filter((e=>e!==t)),0===o.v.length&&delete this.localStorage[e],this.writeToLocalStorage())}lookupViewIds(e){const t=this.localStorage[e];return(null==t?void 0:t.v)??[]}clear(){this.currentPageId=void 0,this._localStorage=void 0}get localStorage(){return this._localStorage??(this._localStorage=r().A.get(a().O)||Object.create(null))}entryForPage(e){let t=this.localStorage[e];return t||(t={v:[],t:0},this.localStorage[e]=t),t}writeToLocalStorage(){this.limitLocalStorageSize(),r().A.set(a().O,this.localStorage)}limitLocalStorageSize(){const e=Object.keys(this.localStorage);if(e.length>=100){const t={timestamp:Number.MAX_SAFE_INTEGER,key:void 0};e.forEach((e=>{e!==this.currentPageId&&this.localStorage[e].t<t.timestamp&&(t.timestamp=this.localStorage[e].t,t.key=e)})),t.key&&delete this.localStorage[t.key]}}};function c(e){let{collectionContextStore:t,isFullScreen:o,wasCreatedThisSessionStore:n,didDelayOffscreenRenderRef:s,environment:r}=e;const a=(0,i.useCallback)((()=>{var e;const o=null===(e=t.collectionViewStore())||void 0===e?void 0:e.id,i=r.RouterStore.state.route;if("page"!==i.name)return;const n=i.blockId;n&&o&&(s.current?(l.unregisterView(n,o),t.shouldDelayRenderStore.removeListener(a)):l.registerView(n,o))}),[t,s,r]);(0,i.useEffect)((()=>{var e;if(o||n.state)return;const i=null===(e=t.collectionViewStore())||void 0===e?void 0:e.id,s=r.RouterStore.state.route;if("page"!==s.name)return;return s.blockId&&i?(t.shouldDelayRenderStore.addListener(a),a(),()=>{t.shouldDelayRenderStore.removeListener(a)}):void 0}),[t,o,n,r,a])}function d(e){let{pageId:t,isFrameContext:o}=e;(0,n().l)((()=>{o&&l.startCachingViewIds(t)})),(0,s().X)((()=>{o&&l.stopCachingViewIds()}))}},915086:(e,t,o)=>{o.r(t),o.d(t,{measurePageRenderMetrics:()=>k,setInitialRenderCompleted:()=>C,setSubMetric:()=>f,setSubMetricsAtRenderCallback:()=>S,updateMetricData:()=>y,updateMetricDataWithIsPushTag:()=>_,updateOPFSMetricData:()=>b});o(898992),o(581454),o(737550),o(814603),o(147566),o(198721);var i=()=>o(906510),n=()=>o(410690),s=()=>o(892008),r=()=>o(989423),a=()=>o(807054),l=()=>o(347320),c=()=>o(150749),d=()=>o(836251),u=()=>o(406792),p=()=>o(736316),m=()=>o(508496),g=()=>o(961581),h=()=>o(977390),v=()=>o(606932);function S(e){const{mainStartTime:t,prefetchInitiatedTime:o,statsigBootupBlockingStartTime:i,renderStartTime:s,renderEndTime:r}=e,a=n().getAppStartTime();if(!a)return;const l={app_start_to_main_start:{startTime:a,endTime:t},main_start_to_prefetch_initiated:{startTime:t,endTime:o},prefetch_initiated_to_statsig_bootup_blocking_start:{startTime:o,endTime:i},statsig_bootup_blocking:{startTime:i,endTime:s},render_start_to_render_end:{startTime:s,endTime:r}};for(const[n,c]of Object.entries(l)){const e=null==c?void 0:c.startTime,t=null==c?void 0:c.endTime;e&&t&&(0,p().f)({name:n,startTime:e,endTime:t})}g().A.state.subMetricsStore.update((e=>({...e,...l})))}function f(e){const{name:t,endTime:o}=e,i=e.startTime(g().A.state.subMetricsStore.state);i&&(g().A.state.subMetricsStore.update((e=>({...e,[t]:{startTime:i,endTime:o}}))),(0,p().f)({name:t,startTime:i,endTime:o}))}function y(e){g().A.state.metricDataStore.update((t=>({...t,...e})))}function b(e){g().A.state.OPFSMetricDataStore.update((t=>({...t,...e})))}function C(){g().A.update((e=>({...e,initialRenderCompleted:!0})))}function _(e){const t=e.RouterStore.state;let o;var i;"page"===t.route.name&&(o=t.route.mobileData,y({is_push:null===(i=o)||void 0===i?void 0:i.isPush}))}function k(e){let{environment:t,isEditable:o,isHomePage:s,isWikiHome:l,isPageWithCustomLayout:c,idSchema:p}=e;const{initialRoute:{name:S},route:y}=t.RouterStore.state,{initialRenderCompleted:b,initialRenderAfterLoginCompleted:_}=g().A.state,k=a().isPrewarmedTabInitialRender(t),P=(0,d().w6)(t);b?_||"login"!==S?function(e,t){const o="page"===t.name?t.mobileData:void 0,i=v().A.popTimings();if(i){const{navigationStart:t,requestFirstChunkStart:n,requestFirstChunkEnd:s,requestFirstChunkSource:a,pageViewBlockRender:l,requestFirstChunkDiskMode:c}=i,d=performance.now();u().default.measure({metricName:"navigation_page_render",startTime:t,endTime:d},{environment:e,data:{is_push:(null==o?void 0:o.isPush)??!1,wasm_sqlite_initialized:g().A.state.metricDataStore.state.wasm_sqlite_initialized,first_chunk_disk_mode:"string"==typeof c?"diskCacheOnlyInWebWorker"===c?"web_worker":"default":void 0}}),(0,r().LM)({eventName:"navigation_page_render_sub_metric",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((o=>{if(!o)return;const i=t=>({environment:e,data:{type:t,chunk_source:a},sampleDecision:o});n&&u().default.measure({metricName:"navigation_page_render_sub_metric",startTime:t,endTime:n},i("navigation_start_to_request_first_chunk_start")),n&&s&&u().default.measure({metricName:"navigation_page_render_sub_metric",startTime:n,endTime:s},i("request_first_chunk_start_to_request_first_chunk_end")),s&&l&&u().default.measure({metricName:"navigation_page_render_sub_metric",startTime:s,endTime:l},i("request_first_chunk_end_to_pvb_render")),l&&u().default.measure({metricName:"navigation_page_render_sub_metric",startTime:l,endTime:d},i("pvb_render_to_handle_navigation_render"))}))}h().A.state.isMeasuring&&h().A.update((e=>({...e,isMeasuring:!1})))}(t,y):function(e){u().default.DO_NOT_USE_measureLegacy("initial_page_render_after_login",{environment:e}),g().A.update((e=>({...e,initialRenderAfterLoginCompleted:!0})))}(t):k?function(e){let{environment:t,initialRoute:o,isEditable:i,isHomePage:n,isWikiHome:s,isPageWithCustomLayout:r,isPublicDomain:a,idSchema:l}=e;C();const c=performance.now();f({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:c});const d=g().A.state.prewarmedTabAppStartTimeOverride;d&&u().default.measure({metricName:"initial_page_render",startTime:d,endTime:c},{environment:t,data:w({initialRoute:o,isEditable:i,isHomePage:n,isWikiHome:s,isPageWithCustomLayout:r,isPublicDomain:a,idSchema:l,isPrewarmedTab:!0,prewarmedTabNavigationStart:d}),shouldSendIfStatsigNotInitialized:!0});h().A.state.isMeasuring&&h().A.update((e=>({...e,isMeasuring:!1})))}({environment:t,initialRoute:S,isEditable:o,isHomePage:s,isWikiHome:l,isPageWithCustomLayout:c,isPublicDomain:P,idSchema:p}):function(e){var t;let{environment:o,initialRoute:s,isEditable:a,isHomePage:l,isWikiHome:c,isPageWithCustomLayout:d,isPublicDomain:p,idSchema:h}=e;const{initialLoadCachedPageChunkCalledAt:v}=g().A.state;C();const S=Boolean(null===(t=performance)||void 0===t?void 0:t.mark)?performance.mark("initial_page_render").startTime:performance.now();i().S3.mark("initial_page_render"),f({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:S});const y=n().getAppStartTime(),b=n().getPageOriginTime();y&&b&&b>0&&y>b&&f({name:"page_origin_to_app_start",startTime:()=>b,endTime:y});u().default.measureFromPageOrigin({metricName:"initial_page_render",endTime:S},{environment:o,data:w({initialRoute:s,isEditable:a,isHomePage:l,isWikiHome:c,isPageWithCustomLayout:d,isPublicDomain:p,idSchema:h,prefetchedQueryCollection:x(o),isPrewarmedTab:!1}),shouldSendIfStatsigNotInitialized:!0});g().A.state.subMetricsStore.state;void 0!==v&&u().default.DO_NOT_USE_measureFromPageOriginLegacy({metricName:"load_cached_page_chunk_wait_time",endTime:v},{environment:o,data:{initial_route:s},shouldSendIfStatsigNotInitialized:!0,sendToStatsig:!0});m().default.checkGate({gateName:"beacon_pre_ipr_assets"})&&function(e,t){var o;if(null===(o=performance)||void 0===o||!o.getEntriesByType)return;const i=performance.getEntriesByType("resource"),n={eventName:"pre_ipr_assets",eventProperties:{ipr_end:t,assets:i.map((e=>{let t;try{t=new URL(e.name).pathname}catch{t=e.name}return{url:t,initiator_type:e.initiatorType,time:e.duration,perf_start:e.startTime,perf_end:e.startTime+e.duration,decoded_body_size:e.decodedBodySize,transfer_size:e.transferSize}}))}};(0,r().u4)({environment:e,event:n})}(o,S)}({environment:t,initialRoute:S,isEditable:o,isHomePage:s,isWikiHome:l,isPageWithCustomLayout:c,isPublicDomain:P,idSchema:p})}function w(e){const{initialRoute:t,isEditable:o,isHomePage:i,isWikiHome:s,isPageWithCustomLayout:r,isPublicDomain:l,isPrewarmedTab:d,idSchema:u,prefetchedQueryCollection:p}=e;return{...a().getSubMetricsAndMetricDataForTracking(e.isPrewarmedTab?{isPrewarmedTab:!0,prewarmedTabNavigationStart:e.prewarmedTabNavigationStart}:{isPrewarmedTab:!1}),initial_route:t,is_editable:o,is_home_page:i,is_page_with_custom_layout:r,is_public_domain:l,profiling_tool:(0,c().getProfilingToolForSession)(),is_wiki_home:s,time_origin_to_app_start:n().getAppStartTime(),includes_page_origin_to_app_start:!0,id_schema:u,prefetched_cvb:p,is_prewarmed_tab:d}}function x(e){const t=e.RouterStore.state.route;if("page"!==t.name||!t.blockId)return!1;return s().Ob.lookupViewIds(t.blockId).some((t=>{var o;const i=(0,l().A)(t),n=null===(o=e.prefetchCache)||void 0===o?void 0:o.getPrefetchAnalytic(i);return"hit-match"===(null==n?void 0:n.type)||"attempted"===(null==n?void 0:n.type)||"hit-mismatch"===(null==n?void 0:n.type)}))}},918487:(e,t,o)=>{o.d(t,{v:()=>n});o(898992),o(354520),o(672577),o(737550);var i=()=>o(517223);function n(e){const{collectionStore:t,module:o,isMobile:n}=e;if("normalizedTitleWithIcon"!==o.type)return!1;const s=t.getSchema(),r=!!s&&(0,i().LD)({collectionSchema:s,module:o}).length>0,a=(0,i().pm)({collectionStore:t}).count>0;return!(!n||!a)||!r&&a}},933951:(e,t,o)=>{o.d(t,{s:()=>h,u:()=>v});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(737550);var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(455348),a=()=>o(691678),l=()=>o(235692),c=()=>o(778781),d=()=>o(519839),u=()=>o(577814),p=()=>o(299772),m=()=>o(548821),g=()=>o(9768);function h(e){const{pageStore:t,pageViewBlockStore:o,postContext:r,collectionStore:l,collectionSchema:p}=e,{collectionStore:m,collectionFormat:h,collectionSchema:S,canConfigureCollection:f}=(0,s().K8)((()=>{const e=l||(null==t?void 0:t.getAssociatedCollectionStore()),o=p||(null==e?void 0:e.getSchema()),i=null==e?void 0:e.getFormat(),n=e&&d().vo({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1});return{collectionStore:e,collectionSchema:o,collectionFormat:i,canConfigureCollection:n}}),[t,l,p]),y=(0,n().v3)(),b=(0,s().K8)((()=>(0,u().A)({environment:y,store:t,pageViewBlockStore:o})),[y,t,o]),C=v({collectionFormat:h,collectionSchema:S,layoutStore:(0,s().K8)((()=>null==m?void 0:m.getLayoutStore()),[m]),postContext:r,pageStoreId:null==t?void 0:t.id}),_=(0,s().K8)((()=>{const e=C.page_main.some((e=>(0,c().i_)(e)))||C.page_details.some((e=>(0,c().i_)(e)));return!(!m||!e)&&(0,g().cu)({modulesByArea:C,collectionStore:m})}),[C,m]),k=(0,i.useMemo)((()=>{const e=new Set;return(!Boolean(m)||!f&&_)&&e.add("properties"),"hidden"===(null==b?void 0:b.type)&&e.add("discussions"),e}),[f,m,null==b?void 0:b.type,_]);return(0,i.useMemo)((()=>0===k.size?C:(0,a().KO)(C,(e=>!k.has(e.type)))),[C,k])}function v(e){const{layoutStore:t,collectionSchema:o,collectionFormat:n,postContext:a,pageStoreId:c}=e,d=(0,i.useRef)(c),u=(0,i.useRef)(null);return(0,s().K8)((()=>{var e;if(a===m().Rr.DraftPostInInlineComposer)return l().wC;if((0,p().Mi)(a)){const e=(0,r().aG)(o,"created_time"),t=(0,r().aG)(o,"created_by"),i=[];t&&i.push(t),e&&i.push(e);return{...l()._u,page_main:[{...l()._u.page_main[0],propertyIds:i},...l()._u.page_main.slice(1)]}}let i=null==t?void 0:t.getModules();const s=c&&i&&c===d.current&&0===i.page_main.length&&(null===(e=u.current)||void 0===e?void 0:e.page_main.find((e=>"editor"===e.type)));return i&&!s||(i=(0,l().xN)({collectionSchema:o,collectionFormat:n})),d.current=c,u.current=i,i}),[t,c,o,n,a])}},973454:(e,t,o)=>{o.d(t,{p:()=>l,A:()=>c});var i=o(296540),n=()=>o(615234);const s=24*n().pT;function r(e){return a(e).status}function a(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=s?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-s}}function l(e){const[t,o]=(0,i.useState)((()=>r(e)));return(0,i.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function i(){t=void 0;const{status:n,nextUpdateInMs:s}=a(e);o(n),s&&(t=setTimeout(i,s))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,o]=(0,i.useState)((()=>Date.now())),s=(null==e?void 0:e.enabled)&&e.start_ts;return(0,i.useEffect)((()=>{if("number"!=typeof s)return;const e=s;let t;return function i(){const s=Date.now();o(s);const r=e*n().TD-s;if(r>0){const e=r%n().Xb,o=0===e?n().Xb:e;t=setTimeout(i,o)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[s]),{freezeStatus:r(e),minUntilFreeze:s?Math.floor((s*n().TD-t)/n().Xb):void 0}}},996262:(e,t,o)=>{o.d(t,{z:()=>C});o(898992),o(354520),o(581454);var i=o(296540),n=()=>o(56366),s=()=>o(401497),r=()=>o(487929),a=()=>o(713998),l=()=>o(651124),c=()=>o(390066),d=()=>o(959013),u=()=>o(155004),p=()=>o(21140),m=()=>o(764891),g=()=>o(508496),h=()=>o(205682),v=()=>o(548821),S=()=>o(77238),f=()=>o(9768),y=()=>o(720501),b=o(474848);function C(e){const{pageStore:t,disabled:o,context:C,wrapper:_,showDefaultTitle:k}=e,w=C===v().Rr.PeekView,{isPageLocked:x}=(0,n().K8)((()=>({isPageLocked:t.isNonEditableState()})),[t]),{collectionStore:P,collectionSchema:M,normalizedCollectionFormat:I}=(0,n().K8)((()=>{const e=t.getAssociatedCollectionStore(),o=null==e?void 0:e.getSchema(),i=null==e?void 0:e.getFormat();return{collectionStore:e,collectionSchema:o,normalizedCollectionFormat:i&&o&&(0,c().L)(i,o,void 0,l().jf.Collection)}}),[t]),A=(0,i.useCallback)((e=>{const o=null==M?void 0:M[e];if("relation"!==(null==o?void 0:o.type))return!1;const i=t.getPropertyValue(e);return 0===(0,a().bG)({relationValue:(0,a().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeDeleted:g().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:g().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:g().default.checkGate({gateName:"relations_show_no_access"})}).length}),[M,t]),T=(0,n().K8)((()=>{if(!M||!I)return[];return(0,r().u)({format:I,schema:M,visibilityLevels:["inline"]}).filter((e=>!A(e)))}),[M,A,I]),B=(0,n().K8)((()=>{if(!M||!I)return[];return(0,r().T)({format:I,schema:M,visibilityLevels:["minimal","inline"]}).filter((e=>"minimal"===e.visibility||!("inline"!==e.visibility||!A(e.section)))).map((e=>e.section))}),[M,A,I]),j=(0,n().K8)((()=>t.canEdit()),[t]),V=(0,s().IS)((e=>({inlinePageSectionsContainer:{...B.length>0?{marginBottom:f().YE+f().Lb+(j?-4:0)}:{}},minimalPropertiesContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap"}})),[B.length,j]);return P&&M&&I&&(0!==T.length||0!==B.length)?_((0,b.jsx)(p().wt,{gap:4,children:(0,b.jsxs)(u().s,{allowSelectionWithin:!0,children:[T.length>0&&(0,b.jsx)("div",{style:V.inlinePageSectionsContainer,children:(0,b.jsx)(m().A,{propertyIds:T,store:t,collectionStore:P,disabled:o,locked:x,blockPropertyValueOverlayStore:w?S().A:h().A,format:I,type:"inline"})}),B.length>0&&(0,b.jsxs)(b.Fragment,{children:[k&&(0,b.jsx)(y().j,{store:t,style:{marginLeft:6},children:(0,b.jsx)(d().sA,{id:"pageLayout.relationsGroup.defaultTitle",defaultMessage:"Relations"})}),(0,b.jsx)("div",{style:V.minimalPropertiesContainer,children:(0,b.jsx)(m().A,{propertyIds:B,store:t,collectionStore:P,disabled:o,locked:x,blockPropertyValueOverlayStore:w?S().A:h().A,format:I,type:"minimal"})})]})]})})):null}}}]);